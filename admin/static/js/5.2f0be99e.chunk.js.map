{"version":3,"sources":["../node_modules/codemirror/lib/codemirror.js","../node_modules/rc-calendar/es/util/index.js","../node_modules/rc-calendar/es/mixin/CommonMixin.js","../node_modules/marked/lib/marked.js","../node_modules/codemirror/mode/markdown/markdown.js","../node_modules/codemirror/mode/xml/xml.js","../node_modules/codemirror/addon/mode/overlay.js","../node_modules/rc-calendar/es/mixin/CalendarMixin.js","../node_modules/rc-calendar/es/date/DateConstants.js","../node_modules/rc-calendar/es/date/DateTHead.js","../node_modules/rc-calendar/es/date/DateTBody.js","../node_modules/rc-calendar/es/date/DateTable.js","../node_modules/react-simplemde-editor/lib/index.js","../node_modules/easymde/src/js/easymde.js","../node_modules/codemirror/addon/edit/continuelist.js","../node_modules/easymde/src/js/codemirror/tablist.js","../node_modules/codemirror/addon/display/fullscreen.js","../node_modules/codemirror/mode/meta.js","../node_modules/codemirror/addon/display/placeholder.js","../node_modules/codemirror/addon/selection/mark-selection.js","../node_modules/codemirror/addon/search/searchcursor.js","../node_modules/codemirror/mode/gfm/gfm.js","../node_modules/codemirror-spell-checker/src/js/spell-checker.js","../node_modules/typo-js/typo.js","../node_modules/rc-calendar/es/month/MonthTable.js","../node_modules/rc-util/es/Children/mapSelf.js","../node_modules/rc-calendar/es/month/MonthPanel.js","../node_modules/rc-calendar/es/year/YearPanel.js","../node_modules/rc-calendar/es/decade/DecadePanel.js","../node_modules/rc-calendar/es/calendar/CalendarHeader.js","../node_modules/rc-calendar/es/calendar/TodayButton.js","../node_modules/rc-calendar/es/calendar/OkButton.js","../node_modules/rc-calendar/es/calendar/TimePickerButton.js","../node_modules/rc-calendar/es/calendar/CalendarFooter.js","../node_modules/rc-calendar/es/date/DateInput.js","../node_modules/rc-calendar/es/util/toTime.js","../node_modules/rc-calendar/es/Calendar.js","../node_modules/rc-calendar/es/index.js","../node_modules/rc-calendar/es/MonthCalendar.js","../node_modules/rc-calendar/es/picker/placements.js","../node_modules/rc-calendar/es/Picker.js","../node_modules/antd/es/_util/interopDefault.js","../node_modules/antd/es/date-picker/utils.js","../node_modules/antd/es/date-picker/createPicker.js","../node_modules/antd/es/_util/getDataOrAriaProps.js","../node_modules/rc-time-picker/es/Header.js","../node_modules/rc-time-picker/es/Select.js","../node_modules/rc-time-picker/es/Combobox.js","../node_modules/rc-time-picker/es/Panel.js","../node_modules/rc-time-picker/es/placements.js","../node_modules/rc-time-picker/es/TimePicker.js","../node_modules/antd/es/time-picker/index.js","../node_modules/antd/es/date-picker/wrapPicker.js","../node_modules/rc-calendar/es/range-calendar/CalendarPart.js","../node_modules/rc-calendar/es/RangeCalendar.js","../node_modules/antd/es/date-picker/InputIcon.js","../node_modules/antd/es/date-picker/RangePicker.js","../node_modules/antd/es/date-picker/WeekPicker.js","../node_modules/antd/es/date-picker/index.js"],"names":["module","exports","userAgent","navigator","platform","gecko","test","ie_upto10","ie_11up","exec","edge","ie","ie_version","document","documentMode","webkit","qtwebkit","chrome","presto","safari","vendor","mac_geMountainLion","phantom","ios","android","mobile","mac","chromeOS","windows","presto_version","match","Number","flipCtrlCmd","captureRightClick","classTest","cls","RegExp","range","rmClass","node","current","className","after","slice","index","length","removeChildren","e","count","childNodes","removeChild","firstChild","removeChildrenAndAdd","parent","appendChild","elt","tag","content","style","createElement","cssText","createTextNode","i","eltP","setAttribute","contains","child","nodeType","parentNode","host","activeElt","activeElement","body","shadowRoot","addClass","joinClasses","a","b","as","split","createRange","start","end","endNode","r","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","selectInput","select","bind","f","args","Array","prototype","call","arguments","apply","copyObj","obj","target","overwrite","prop","hasOwnProperty","countColumn","string","tabSize","startIndex","startValue","search","n","nextTab","indexOf","selectionStart","selectionEnd","value","_e","Delayed","this","id","time","handler","onTimeout","array","self","Date","setTimeout","set","ms","clearTimeout","scrollerGap","Pass","toString","sel_dontScroll","scroll","sel_mouse","origin","sel_move","findColumn","goal","pos","col","skipped","Math","min","spaceStrs","spaceStr","push","lst","arr","map","out","nothing","createObj","base","props","inst","Object","create","nonASCIISingleCaseWordChar","isWordCharBasic","ch","toUpperCase","toLowerCase","isWordChar","helper","source","isEmpty","extendingChars","isExtendingChar","charCodeAt","skipExtendingChars","str","dir","charAt","findFirst","pred","from","to","midF","mid","ceil","floor","bidiOther","getBidiPartAt","order","sticky","found","cur","bidiOrdering","lowTypes","arabicTypes","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","level","direction","outerType","code","len","types","i$1","prev","type","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","replace","j","i$5","cur$1","type$4","i$6","end$1","before","replace$1","j$1","m","i$7","at","j$2","splice","nstart","unshift","reverse","getOrder","line","text","noHandlers","on","emitter","addEventListener","attachEvent","_handlers","concat","getHandlers","off","removeEventListener","detachEvent","signal","handlers","signalDOMEvent","cm","override","preventDefault","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","ctrlKey","zwspSupported","badBidiRects","dragAndDrop","div","zeroWidthElement","measure","offsetHeight","offsetWidth","hasBadBidiRects","txt","r0","getBoundingClientRect","r1","left","right","splitLinesAuto","result","l","nl","rt","hasSelection","window","getSelection","te","ownerDocument","selection","parentElement","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","modes","mimeModes","defineMode","name","mode","dependencies","resolveMode","spec","getMode","options","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","state","nstate","val","innerMode","info","startState","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","getLine","doc","first","size","Error","chunk","lines","children","sz","chunkSize","getBetween","iter","getLines","updateLineHeight","height","diff","lineNo","no","_lineAtHeight","h","outer","lh","isLine","lineNumberFor","String","lineNumberFormatter","firstLineNumber","Pos","cmp","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","max","_clipPos","last","linelen","clipToLen","clipPosArray","eol","sol","peek","undefined","next","eat","eatWhile","eatSpace","skipToEnd","skipTo","backUp","column","indentation","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","inner","lookAhead","oracle","baseToken","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","loop","o","overlay","overlays","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","precise","display","minindent","minline","lim","indented","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","nextLine","startAt","stream","callBlankLine","readToken","blankLine","token","copy","Token","takeToken","asArray","tokens","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","sawReadOnlySpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","stretchSpansOverChange","change","full","oldFirst","markedSpans","oldLast","startCh","endCh","isInsert","old","nw","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansBefore","startsBefore","markedSpansAfter","sameLine","offset","span$1","clearEmptySpans","newMarkers","gapMarkers","gap","clearWhenEmpty","detachMarkedSpans","detachLine","attachMarkedSpans","attachLine","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","find","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","visualLine","merged","visualLineNo","lineN","vis","visualLineEndNo","lastLine","lineIsHidden","widgetNode","lineIsHiddenInner","_heightAtLine","lineObj","p","lineLength","found$1","findMaxLine","d","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","getOption","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","externalMeasured","maps","caches","lastChild","querySelector","defaultSpecialCharPlaceholder","title","startStyle","endStyle","css","attributes","displayText","trailingBefore","spaceBefore","special","specialChars","mustWrap","createDocumentFragment","lastIndex","txt$1","tabWidth","specialCharPlaceholder","fullStyle","attr","part","buildCollapsedSpan","ignoreWidget","widget","input","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","upto","tokenText","LineView","visualLineContinued","hidden","buildViewArray","nextPos","view","operationGroup","orphanDelayedCallbacks","signalLater","list","delayedCallbacks","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","getLineContent","ext","built","background","wrap","insertBefore","updateLineBackground","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","markers","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","lineNumInnerWidth","k","gutterSpecs","gutterWidth","alignable","isWidget","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","width","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","gutters","wrapper","clientWidth","eventInWidget","getAttribute","sizer","mover","paddingTop","lineSpace","offsetTop","paddingVert","paddingH","cachedPaddingH","getComputedStyle","currentStyle","data","parseInt","paddingRight","isNaN","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","clientHeight","barHeight","mapFromLineView","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","lineMeasure","updateExternalMeasurement","rect","hasHeights","prepared","varHeight","key","wrapping","lineWrapping","curWidth","heights","rects","getClientRects","abs","bottom","top","ensureLineHeights","place","nodeAndOffsetInLineMap","coverStart","coverEnd","getUsefulRect","screen","logicalXDPI","deviceXDPI","normal","fromRange","hasBadZoomedRects","scaleX","scaleY","logicalYDPI","deviceYDPI","maybeUpdateRectForZooming","rSpan","charWidth","nullRect","rtop","rbot","bot","bogus","singleCursorHeightPerLine","rbottom","measureCharInner","measureText","mStart","mEnd","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","_charCoords","_cursorCoords","preparedMeasure","get","getBidi","partPos","invert","other","estimateCoords","PosWithInfo","outside","xRel","_coordsChar","y","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","boxIsAfter","box","ltr","coordsBidiPartWrapped","coordsBidiPart","baseX","chAround","boxAround","atLeft","atStart","_lineNo","ref","closestDist","endX","dist","textHeight","anchor","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","estHeight","posFromMouse","liberal","forRect","space","clientX","clientY","colDiff","round","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","sel","ranges","primIndex","empty","showCursorWhenSelecting","drawSelectionCursor","head","drawSelectionRange","cursor","cursorHeight","otherCursor","cmpCoords","fragment","padding","leftSide","rightSide","sizerWidth","docLTR","add","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","iterateBidiSections","fromPos","toPos","openStart","openEnd","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","ensureFocus","focus","onFocus","delayBlurEvent","delayingBlurEvent","onBlur","readOnly","selForContextMenu","reset","receivedFocus","shift","updateHeightsInViewport","prevBottom","lineDiv","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","calculateScrollPos","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","getCursor","scrollToPos","margin","cursorScrollMargin","scrollToCoords","scrollToCoordsRange","sPos","updateScrollTop","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","setScrollLeft","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","tabIndex","checkedZeroWidth","minHeight","minWidth","update","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","bar","delay","maybeDisable","elementFromPoint","clear","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","initScrollbars","scrollbarStyle","axis","nextOpId","_startOperation","op","updateInput","typing","changeObjs","cursorActivityCalled","selectionChanged","updateMaxLine","ops","ownsGroup","_endOperation","endCb","group","callbacks","fireCallbacksForOps","finishOperation","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","endOperations","scrollbarsClipped","marginBottom","borderRightWidth","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","doScroll","innerHeight","scrollNode","scrollIntoView","maybeScrollWindow","limit","changed","endCoords","scrollPos","startTop","startLeft","scrollPosIntoView","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","operation","methodOp","docMethodOp","highlight","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapHeight","lastWrapWidth","adjustView","toUpdate","selSnapshot","hasFocus","active","anchorNode","extend","anchorOffset","focusNode","focusOffset","selectionSnapshot","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","patchDisplay","snapshot","removeAllRanges","addRange","restoreSelection","selectionDiv","reportedViewFrom","reportedViewTo","updateGutterSpace","alignWidgets","comp","align","innerW","lineGutter","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","draggable","wheelDX","wheelDY","activeTouch","init","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","somethingSelected","normalizeSelection","mayTouch","selectionsMayTouch","prim","sort","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","updateLine","linesFor","firstLine","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","History","startGen","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","pop","addChangeToHistory","selAfter","opId","hist","history","historyEventDelay","lastChangeEvent","pushSelectionToHistory","addSelectionToHistory","selectionEventCanBeMerged","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","mergeOldSpans","getOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","event","newChanges","extendRange","posBefore","extendSelection","setSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","setSelectionReplaceHistory","setSelectionNoUndo","NaN","filterSelectionChange","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","mark","parts","mk","newParts","dfrom","dto","removeReadOnlyRanges","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","filter","returned","v","shiftDoc","distance","removed","recomputeMaxLength","checkWidthStart","retreatFrontier","changesHandler","changeHandler","makeChangeSingleDocInEditor","_replaceRange","assign","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","sibling","myIndex","used","LineWidget","opt","adjustScrollWhenAboveVisible","this$1","oldH","nextMarkerId","TextMarker","_markText","cloneNode","isParent","SharedTextMarker","markTextShared","replacedWith","addToHistory","curLine","addMarkedSpan","clearOnEnter","clearHistory","withOp","visual","dHeight","findSharedMarkers","findMarks","clipPos","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","constructor","getValue","join","lineSeparator","setValue","replaceRange","getRange","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","listSelections","setCursor","extendSelectionsBy","setSelections","addSelection","getSelections","replaceSelection","dup","replaceSelections","newSel","hint","oldPrev","newPrev","computeReplacedSel","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","addLineWidget","insertAt","aboveVisible","removeLineWidget","markText","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","mFrom","mTo","subMark","copySharedMarkers","unlinkDoc","CodeMirror","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","files","dataTransfer","isReadOnly","FileReader","File","read","loadFile","file","allowDropFileTypes","reader","onload","readAsText","draggingText","text$1","getData","selected","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","editors","globalsRegistered","ensureGlobalHandlers","resizeTimer","onResize","registerGlobalHandlers","setSize","keyNames","3","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","145","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","fromCharCode","keyMap","normalizeKeyName","alt","ctrl","cmd","mod","normalizeKeyMap","keymap","keyname","keys","lookupKey","getKeyMap","fallthrough","isModifierKey","keyCode","addModifierNames","noShift","altKey","metaKey","shiftKey","keyName","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","prep","targetTop","basic","pcDefault","emacsy","macDefault","commands","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","charCoords","coordsChar","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","visualLineEnd","lineEnd","goLineRight","cursorCoords","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","indentLine","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","keyMaps","extraKeys","lookupKeyForEditor","handleKeyBinding","motion","lastStoppedKey","onKeyDown","handled","up","showCrossHair","onKeyUp","onKeyPress","charCode","handleCharBinding","lastClick","lastDoubleClick","PastClick","onMouseDown","supportsTouch","clickInGutter","repeat","now","compare","clickRepeat","selectingText","handleMappedButton","contained","behavior","option","unit","addNew","moveOnDrag","configureMouse","dragDrop","moved","dragEnd","mouseMove","dragStart","e2","leftButtonStartDrag","ourRange","ourIndex","startSel","rangeForUnit","lastPos","extendTo","startCol","posCol","leftPos","oldRange","ranges$1","anchorLine","boundary","headIndex","usePart","bidiSimplify","editorSize","counter","move","buttons","curCount","leftButtonSelect","leftButtonDown","onContextMenu","findWordAt","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","theme","Init","defaults","optionHandlers","dragDropChanged","funcs","dragFunctions","toggle","enter","over","leave","drop","wrappingChanged","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","word","touchFinished","prevTouch","finishTouch","farAway","touch","radiusX","radiusY","isMouseLikeTouchEvent","pageX","pageY","frag","onDragOver","setData","effectAllowed","setDragImage","img","src","_top","onDragStart","inp","getField","registerEventHandlers","finishInit","initHooks","textRendering","how","aggressive","indent","curSpace","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","defineInitHook","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","spellcheck","autocorrect","autocapitalize","hiddenTextarea","border","_findPosH","origDir","moveOnce","boundToLine","bidi","mv","getWrappedLineExtent","moveInStorageOrder","searchInVisualLine","getRes","res","nextCh","moveVisually","findNextLine","sawType","getHelper","hitSide","_findPosV","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","posToDOM","badPos","bad","domToPos","lineNode","locateNodeInLineView","textNode","topNode","nodeValue","curNode","textContent","previousSibling","dist$1","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","blur","pollSelection","pollInterval","poll","scan","isInGutter","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","toIndex","newText","closing","extraLinebreak","close","addText","walk","cmText","markerID","isBlock","nodeName","domTextBetween","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","createField","textarea","prepareCopyCut","fastPoll","dispatchEvent","Event","_display","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldScrollY","oldCSS","oldWrapperCSS","wrapperBox","offsetParent","scrollY","scrollTo","rehide","detectingSelectAll","prepareSelectAllHack","mouseup","extval","disabled","deflt","notOnInit","defineOption","newBreaks","refresh","getInputField","detach","attach","integer","defineOptions","helpers","setOption","getDoc","addKeyMap","removeKeyMap","addOverlay","score","priority","insertSorted","modeSpec","removeOverlay","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelpers","help","_global","getStateAfter","lineAtHeight","heightAtLine","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","rtlMoveVisually","findPosV","goalColumn","goals","startChar","check","getScrollInfo","scrollToRange","interpret","startOperation","endOperation","swapDoc","phrase","phraseText","phrases","getWrapperElement","getScrollerElement","getGutterElement","registerHelper","registerGlobalHelper","predicate","addEditorMethods","dontDelegate","method","defineMIME","mime","defineExtension","func","defineDocExtension","fromTextArea","tabindex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","cmpPos","addLegacyProps","version","factory","defaultDisabledTime","disabledHours","disabledMinutes","disabledSeconds","getTodayTime","today","locale","utcOffset","getTitleString","format","getTodayTimeStr","getMonthName","month","localeData","syncTime","isMoment","hour","minute","second","millisecond","getTimeConfig","disabledTime","disabledTimeConfig","isAllowedDate","disabledDate","invalidTime","minutes","seconds","isTimeValidByConfig","isTimeValid","formatDate","isArray","noop","propType","object","bool","onSelect","prefixCls","onChange","onOk","defaultProp","onClear","renderFooter","renderSidebar","commonMixinWrapper","ComposeComponent","_class","_temp2","_ComposeComponent","_temp","_this","_ret","_len","_key","getFormat","_this$props","timePicker","dateTimeFormat","dateFormat","focusElement","rootInstance","saveFocusElement","saveRoot","root","shouldComponentUpdate","nextProps","displayName","defaultProps","getDerivedStateFromProps","block","newline","fences","hr","heading","blockquote","html","def","nptable","table","lheading","_paragraph","Lexer","links","marked","rules","pedantic","gfm","_label","_title","edit","getRegex","bullet","item","_tag","_comment","paragraph","merge","lex","loose","cap","bull","listStart","listItems","t","isordered","istask","ischecked","substring","lastToken","trimRight","codeBlockStyle","rtrim","lang","trim","depth","header","splitCells","cells","ordered","smartLists","task","checked","sanitize","sanitizer","escape","href","inline","autolink","url","link","reflink","nolink","strong","em","br","del","InlineLexer","renderer","Renderer","breaks","TextRenderer","Parser","slugger","Slugger","seen","encode","escapeTest","escapeReplace","replacements","escapeTestNoEncode","escapeReplaceNoEncode","unescape","_","regex","cleanUrl","prot","decodeURIComponent","originIndependentUrl","baseUrls","resolveUrl","encodeURI","_punctuation","_escapes","_scheme","_email","_attribute","_href","_extended_email","_backpedal","prevCapZero","inLink","inRawBlock","lastParenIndex","findClosingBracket","linkLen","outputLink","escapes","codespan","mangle","smartypants","image","random","infostring","escaped","langPrefix","quote","raw","headerIds","headerPrefix","slug","xhtml","listitem","checkbox","tablerow","tablecell","flags","baseUrl","parse","inlineText","tok","parseText","row","cell","errMsg","silent","console","log","originalSlug","tableRow","curr","c","suffLen","currChar","checkSanitizeDeprecation","warn","callback","pending","err","message","setOptions","getDefaults","parser","lexer","inlineLexer","cmCfg","modeCfg","htmlMode","htmlModeMissing","highlightFormatting","maxBlockquoteDepth","taskLists","strikethrough","emoji","fencedCodeBlockHighlighting","xml","tokenTypeOverrides","tokenTypes","list1","list2","list3","imageAltText","imageMarker","formatting","linkInline","linkEmail","linkText","linkHref","tokenType","hrRE","listRE","taskListRE","atxHeaderRE","allowAtxHeaderWithoutSpace","setextHeaderRE","textRE","fencedCodeRE","linkDefRE","punctuation","switchInline","switchBlock","linkTitle","indentedCode","htmlBlock","exit","htmlState","tagStart","tokenize","isInText","inlineNormal","blockNormal","trailingSpaceNewLine","prevLine","thisLine","firstTokenOnLine","prevLineLineIsEmpty","prevLineIsIndentedCode","prevLineIsHr","prevLineIsList","maxNonCodeIndentation","listStack","lineIndentation","indentationDiff","allowsInlineContinuation","fencedCodeEnd","isHr","getType","setext","listType","taskList","fencedEndRE","localMode","findModeByName","mimes","localState","local","footnoteLink","md_inside","returnType","currListInd","hasExitedList","maxFencedEndInd","taskOpen","taskClosed","listMod","handleText","matchCh","previousFormatting","formattingEscape","atts","leftFlanking","rightFlanking","setEm","setStrong","retType","endChar","returnState","linkRE","footnoteLinkInside","footnoteUrl","s","textAfter","blockCommentStart","blockCommentEnd","closeBrackets","fold","htmlConfig","autoSelfClosers","implicitlyClosed","contextGrabbers","doNotIndent","allowUnquoted","allowMissing","caseFold","xmlConfig","allowMissingTagName","editorConf","config_","setStyle","config","inText","chain","inBlock","doctype","inTag","baseState","tagName","closure","isInAttribute","inAttribute","stringStartCol","terminator","startOfLine","noIndent","popContext","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","attrState","matchClosing","closeState","closeStateErr","_stream","attrEqState","attrValueState","attrContinuedState","baseIndent","fullLine","multilineTagIndentPastTag","multilineTagIndentFactor","alignCDATA","tagAfter","grabbers","configuration","skipAttribute","xmlCurrentTag","xmlCurrentContext","cx","overlayMode","combine","basePos","baseCur","overlayPos","overlayCur","streamSeen","combineTokens","overlayToken","getNowByCurrentStateValue","calendarMixinPropTypes","defaultValue","calendarMixinDefaultProps","calendarMixinWrapper","cause","setSelectedValue","renderRoot","newProps","_className","selectedValue","setState","originalValue","isSame","prevState","newState","_React$Component","DateTHead","render","veryShortWeekdays","weekDays","firstDayOfWeek","showWeekNumberEl","dateColIndex","DateConstants","day","weekdaysMin","weekdaysShort","showWeekNumber","role","weekDaysEls","xindex","Component","isSameDay","one","two","beforeCurrentMonthYear","year","afterCurrentMonthYear","DateTBody","contentRender","dateRender","hoverValue","iIndex","jIndex","dateTable","cellClass","weekNumberCellClass","dateClass","todayClass","selectedClass","selectedDateClass","selectedStartDateClass","selectedEndDateClass","inRangeClass","lastMonthDayClass","nextMonthDayClass","disabledClass","firstDisableClass","lastDisableClass","lastDayOfMonthClass","month1","clone","date","lastMonthDiffDay","lastMonth1","passed","tableHtml","_cx","isCurrentWeek","weekNumberCell","isActiveWeek","dateCells","week","isBeforeCurrentMonthYear","isAfterCurrentMonthYear","rangeValue","endValue","isBefore","isAfter","endOf","dateHtml","onClick","onMouseEnter","onDayHover","propTypes","oneOfType","arrayOf","any","DateTable","cellSpacing","defineProperty","default","React","__esModule","newObj","desc","getOwnPropertyDescriptor","_interopRequireWildcard","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_slicedToArray","_arrayWithHoles","_arr","_n","_d","_s","_i","Symbol","iterator","_iterableToArrayLimit","TypeError","_nonIterableRest","_defineProperties","descriptor","enumerable","configurable","writable","_possibleConstructorReturn","ReferenceError","_assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","_id","generateId","SimpleMDEEditor","_React$PureComponent","instance","Constructor","_classCallCheck","keyChange","simpleMde","editorEl","editorToolbarEl","createEditor","SimpleMDE","initialOptions","element","getElementById","initialValue","allOptions","eventWrapper","removeEvents","addEvents","elementWrapperRef","codemirror","_events","entries","forEach","_ref","_ref2","eventName","getLineAndCursor","getMdeInstance","addExtraKeys","setElementWrapperRef","protoProps","staticProps","subClass","superClass","_inherits","prevProps","label","htmlFor","PureComponent","CodeMirrorSpellChecker","isMac","anchorToExternalRegex","bindings","toggleBold","toggleItalic","drawLink","toggleHeadingSmaller","toggleHeadingBigger","drawImage","toggleBlockquote","toggleOrderedList","toggleUnorderedList","toggleCodeBlock","togglePreview","toggleStrikethrough","toggleHeading1","toggleHeading2","toggleHeading3","cleanBlock","drawTable","drawHorizontalRule","toggleSideBySide","toggleFullScreen","shortcuts","getBindingName","isMobile","opera","fixShortcut","createToolbarButton","enableTooltips","el","action","actionName","tooltip","createTooltip","noDisable","classList","noMobile","classNameParts","iconClasses","classNameIndex","classNamePart","icon","iconClassIndex","iconClass","createSep","innerHTML","getState","stat","ret","bold","italic","saved_overflow","editor","overflow","toolbarElements","fullscreen","toolbarButton","sidebyside","onToggleFullScreen","_toggleBlock","blockStyles","fenceCharsToInsert","fencing_line","token_state","code_type","line_num","firstTok","lastTok","fencedChars","block_start","block_end","cur_start","cur_end","is_code","start_text","start_line","end_text","end_line","fence_chars","search_from","next_line","next_line_last_tok","no_sel_and_starting_of_line","sel_multi","start_line_sel","end_line_sel","repl_start","repl_end","_replaceSelection","insertFencingAtSelection","_toggleLine","_toggleHeading","startPoint","endPoint","_cleanBlock","promptURLs","prompt","promptTexts","insertTexts","afterImageUploaded","imageName","lastIndexOf","uploadedImage","updateStatusBar","imageTexts","sbOnUploaded","sbInit","horizontalRule","preview","useSideBySideListener","previewNormal","toolbar","toolbar_div","sideBySideRenderingFunction","newValue","previewRender","previewClass","startEnd","currHeadingLevel","listRegexp","whitespacesRegexp","repl","_toggle","untoggleOnly","char","_getChar","_checkChar","start_chars","end_chars","humanFileSize","bytes","units","u","toFixed","_mergeProperties","property","wordCount","toolbarBuiltInButtons","openBrowseFileWindow","sbOnDragEnter","sbOnDrop","sbProgress","sizeUnits","errorMessages","noFileGiven","typeNotAllowed","fileTooLarge","importError","EasyMDE","autoDownloadFA","autoDownloadFontAwesome","styleSheets","getElementsByTagName","showIcons","status","uploadImage","plainText","markdown","parsingConfig","errorCallback","errorMessage","alert","imageMaxSize","imageAccept","autosave","unique_id","uniqueId","foundSavedValue","imageUploadFunction","uploadImagesUsingCustomFunction","uploadImages","isLocalStorageAvailable","localStorage","setItem","removeItem","onSuccess","onError","names","uploadImageUsingCustomFunction","itemName","matchingClasses","gui","statusbar","markedOptions","renderingConfig","singleLineBreaks","codeSyntaxHighlighting","hljs","highlightAuto","htmlText","linkString","fixedLinkString","addAnchorTargetBlank","_rendered","backdrop","open","spellChecker","gitHubSpice","codeMirrorInstance","styleSelectedText","forceSync","createToolbar","createStatusbar","enabled","sideBySide","createSideBySide","temp_cm","easyMDE","binded","autosaveTimeoutId","loaded","getItem","hh","getHours","getMinutes","dd","clearAutosavedValue","imageInput","click","onErrorSup","fillErrorMessage","imageUrl","formData","FormData","append","imageCSRFToken","request","XMLHttpRequest","upload","onprogress","lengthComputable","progress","total","imageUploadEndpoint","response","JSON","responseText","error","filePath","location","statusText","onerror","send","filledErrorMessage","syncSideBySidePreviewScroll","cScroll","pScroll","ratio","parseFloat","onscroll","items","toolbarData","toolbarGuideIcon","hideIcons","nonSeparatorIconsFollow","toolbarTips","onclick","multiple","accept","opacity","cmWrapper","onUpdate","isPreviewActive","isSideBySideActive","isFullscreenActive","emptyListRE","unorderedListRE","incrementRemainingMarkdownListNumbers","startLine","skipCount","startItem","startIndent","nextLineNumber","nextItem","nextIndent","newNumber","nextNumber","itemNumber","newlineAndIndentContinueMarkdownList","eolState","inList","inQuote","cursorBeforeBullet","numbered","tabAndIndentMarkdownList","shiftTabAndUnindentMarkdownList","fullScreenRestore","setFullscreen","setNormal","modeInfo","alias","findModeByMIME","findModeByExtension","findModeByFileName","filename","dot","clearPlaceholder","setPlaceholder","placeHolder","onCursorActivity","markedSelection","coverRange","CHUNK_SIZE","markedSelectionStyle","addAt","endLine","atEnd","doFold","noFold","ensureFlags","regexp","ignoreCase","global","multiline","regexpFlags","maybeMultiline","searchRegexpForward","searchRegexpForwardMultiline","inside","lastMatchIn","endMargin","newMatch","searchRegexpBackward","searchRegexpBackwardMultiline","adjustPos","orig","folded","foldFunc","searchStringForward","query","cutFrom","endString","searchStringBackward","topString","SearchCursor","atOccurrence","matches","normalize","findNext","findPrevious","getSearchCursor","urlRE","modeConfig","codeDepth","gfmOverlay","codeBlock","ateSpace","difference","markdownConfig","Typo","includes","aff_loading","xhr_aff","readyState","aff_data","num_loaded","typo","dic_data","dic_loading","xhr_dic","rx_word","dictionary","affData","wordsData","settings","dictionaryTable","compoundRules","compoundRuleCodes","replacementTable","memoized","path","_jlen","readDataFile","setFunc","_readFile","asyncLoad","then","setAffData","setup","setWordsData","_parseAFF","rule","ONLYINCOMPOUND","_parseDIC","ruleText","expressionText","character","loadedCallback","extension","dictionaryPath","getURL","__dirname","load","charset","async","promise","req","Promise","resolve","reject","overrideMimeType","fs","existsSync","readFileSync","numEntries","lineParts","_removeAffixComments","definitionParts","ruleType","ruleCode","combineable","charactersToRemove","additionParts","charactersToAdd","continuationClasses","parseRuleCodes","regexToMatch","entry","_removeDicComments","addWord","ruleCodesArray","NEEDAFFIX","newWords","_applyRule","ii","_iilen","newWord","combineCode","combineRule","otherNewWords","iii","_iiilen","textCodes","FLAG","continuationRule","aWord","trimmedWord","checkExact","capitalizedWord","hasFlag","lowercaseWord","ruleCodes","COMPOUNDMIN","flag","wordFlags","alphabet","suggest","memoizedLimit","replacementEntry","correctedWord","edits1","words","known_only","_edit","rv","ed1","weighted_corrections","ed1word","sorted_corrections","a_val","b_val","localeCompare","capitalization_scheme","working_limit","correct","chooseMonth","setAndSelectValue","MonthTable","_Component","componentWillReceiveProps","months","rowIndex","colIndex","_this2","currentMonth","cellRender","monthsEls","tds","monthData","_classNameMap","testValue","classNameMap","cellEl","currentValue","_currentValue","mirror","mapSelf","Children","goYear","changeYear","MonthPanel","nextYear","previousYear","rootPrefixCls","footer","onYearPanelShow","yearSelect","chooseYear","YearPanel","nextDecade","previousDecade","years","currentYear","startYear","endYear","yeasEls","yearData","clickHandler","onDecadePanelShow","decadeSelect","chooseDecade","DecadePanel","nextCentury","previousCentury","_props","preYear","decades","startDecade","endDecade","decadesEls","decadeIndex","decadeData","dStartDecade","dEndDecade","isLast","isNext","goMonth","onValueChange","showIf","condition","CalendarHeader","nextMonth","previousMonth","yearPanelReferer","showTimePicker","enableNext","enablePrev","disabledMonth","panel","onMonthSelect","showYearPanel","monthCellRender","monthCellContentRender","onYearSelect","showDecadePanel","onDecadeSelect","monthYearElement","onPanelChange","_this3","referer","monthBeforeYear","selectClassName","timeClassName","yearFormat","showMonthPanel","monthSelect","monthFormat","monthsShort","dayFormat","my","TodayButton","onToday","localeNow","isDisabled","disabledTodayClass","OkButton","okDisabled","TimePickerButton","_classnames","onOpenTimePicker","onCloseTimePicker","timePickerDisabled","dateSelect","timeSelect","CalendarFooter","getRootDOMNode","findDOMNode","showOk","footerEl","extraFooter","showToday","nowEl","okBtn","timePickerBtn","footerBtn","showDateInput","cachedSelectionStart","cachedSelectionEnd","dateInputInstance","DateInput","invalid","componentDidUpdate","setSelectionRange","getInstance","_state","clearIcon","inputMode","invalidClass","saveDateInput","onInputChange","showClear","parsed","isValid","_props2","KeyCode","ENTER","dateInput","goStartMonth","startOf","goEndMonth","goTime","Calendar","defaultSelectedValue","componentDidMount","dateInputPlaceholder","timePickerEle","timePickerProps","showHour","showSecond","showMinute","onDateInputChange","defaultOpenValue","cloneElement","dateInputElement","onDateInputSelect","focusablePanel","onDateTableSelect","openTimePicker","closeTimePicker","oneOf","DOWN","UP","LEFT","RIGHT","HOME","END","PAGE_DOWN","PAGE_UP","timePickerDefaultValue","MonthCalendar","stateValue","handlePanelChange","autoAdjustOverflow","adjustX","adjustY","targetOffset","bottomLeft","points","bottomRight","refFn","component","Picker","defaultOpen","saveCalendarRef","focusTimeout","focusCalendar","componentWillUnmount","placement","getCalendarContainer","animation","dropdownClassName","transitionName","popup","getCalendarElement","popupAlign","builtinPlacements","popupPlacement","destroyPopupOnHide","getPopupContainer","popupStyle","popupAnimation","popupTransitionName","popupVisible","onPopupVisibleChange","onVisibleChange","popupClassName","onOpenChange","calendar","onCalendarKeyDown","ESC","onCalendarSelect","onCalendarOk","onCalendarClear","onCalendarBlur","setOpen","calendarProps","extraProps","createChainedFunction","calendarInstance","interopDefault","_typeof","_extends","_defineProperty","createPicker","TheCalendar","CalenderWrapper","saveInput","clearSelection","handleChange","showDate","handleCalendarChange","handleOpenChange","renderExtraFooter","_assertThisInitialize2","renderPicker","_classNames","_classNames2","getPrefixCls","_this$state","customizePrefixCls","localeCode","suffixIcon","showTime","calendarClassName","pickerProps","pickerStyle","warning","defaultPickerValue","moment","allowClear","inputIcon","dataOrAriaProps","reduce","getDataOrAriaProps","pickerClass","onMouseLeave","inputValue","pickerInputClass","Header","hourOptions","minuteOptions","secondOptions","getProtoValue","disabledHourOptions","disabledMinuteOptions","disabledSecondOptions","changedValue","_this$props2","onEsc","_value","_format","focusOnOpen","requestAnimationFrame","refInput","_this$props3","_this$props4","_this$props5","inputReadOnly","getInput","clearText","currentSelectPanel","Select","_getPrototypeOf2","scrollToSelected","selectedIndex","duration","perTick","handleMouseEnter","handleMouseLeave","saveList","getOptions","number","formatOption","disabledOptions","Combobox","itemValue","use12Hours","propValue","isAM","onAmPmChange","ampm","onCurrentSelectPanelChange","hourOptionsAdj","hourAdj","onItemChange","onEnterSelectPanel","_this4","_this5","AMPMOptions","_this$props6","getHourSelect","getMinuteSelect","getSecondSelect","getAMPMSelect","ownKeys","enumerableOnly","symbols","sym","generateOptions","hideDisabledOptions","step","Panel","getOwnPropertyDescriptors","defineProperties","_objectSpread","realValue","addon","hourStep","minuteStep","secondStep","validDefaultOpenValue","toNearestValidTime","saveInputRef","savePanelRef","_props$open","_open","_props$value","selectColumnCount","onOpen","onClose","picker","allowEmpty","isValidElement","_onClick","autoComplete","autoFocus","getPopupClassName","getPanelElement","renderClearButton","__rest","generateShowHourMinuteSecond","TimePicker","getDefaultLocale","handleOpenClose","saveTimePicker","timePickerRef","_this$props$format","renderTimePicker","getContextPopupContainer","_a","getDefaultFormat","pickerClassName","getAllowClear","renderInputIcon","renderClearIcon","clockIcon","clearIconPrefixCls","LocaleReceiver","componentName","defaultLocale","DEFAULT_FORMAT","dateTime","LOCALE_FORMAT_MAPPING","checkValidate","propName","wrapPicker","pickerType","PickerWrapper","savePicker","handleFocus","handleBlur","mergedPickerType","mergedFormat","customizeInputPrefixCls","inputPrefixCls","timeFormat","rcTimePickerProps","columns","getColumns","timePickerCls","timePickerLocale","_ref3","CalendarPart","timePickerDisabledTime","onInputSelect","shouldShowTimePicker","rangeClassName","outline","isArraysEqual","getValueFromSelectedValue","subtract","normalizeAnchor","normalizedValue","every","extraOptionGen","fireSelectValueChange","RangeCalendar","prevSelectedValue","firstSelectedValue","panelTriggerSource","seperator","placeholder1","placeholder2","showOkButton","getStartValue","getEndValue","todayTime","thisMonth","thisYear","isTodayInView","nextMonthOfStart","isClosestMonths","onDatePanelLeave","onDatePanelEnter","disabledStartTime","disabledStartMonth","onStartInputChange","onStartInputSelect","onStartValueChange","onStartPanelChange","isMonthYearPanelShow","getEndDisableTime","onEndInputChange","onEndInputSelect","onEndValueChange","onEndPanelChange","disabledEndTime","disabledEndMonth","backToToday","hasSelectedValue","isAllowedDateAndTime","onHoverChange","fireHoverValueChange","nextSelectedValue","_state2","updateHoverPoint","currentHoverTime","nextHoverTime","nextHoverValue","some","ht","timeList","includesTime","t1","t2","valueOf","fireValueChange","oriValueIndex","findIndex","_newValue","lastValue","_state3","oargs","_len2","_key2","leftValue","rightValue","newMode","_state4","_state5","_state6","userSettingDisabledTime","hours","_disabledHours","_disabledMinutes","_disabledSeconds","oldDisabledMinutes","olddisabledSeconds","v1","v2","direct","InputIcon","getShowDateFromValue","pickerValueAdapter","fixLocale","_value2","RangePicker","clearHoverValue","_value3","handleShowDateChange","handleHoverChange","handleRangeMouseLeave","handleCalendarInputSelect","handleRangeClick","tagPrefixCls","customFooter","operations","color","renderRangePicker","_assertThisInitialize3","customizeTagPrefixCls","onCalendarChange","separator","pickerChangeHandler","startPlaceholder","rangePlaceholder","endPlaceholder","_value5","_ref4","_inputValue","_value6","pickerValue","hidePanel","WeekPicker","weekDateRender","dateNode","formatValue","renderWeekPicker","DatePicker","MonthPicker"],"mappings":"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","file":"static/js/5.2f0be99e.chunk.js","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.CodeMirror = factory());\n})(this, function () {\n  'use strict'; // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n  var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n  var android = /Android/.test(userAgent); // This is woefully incomplete. Suggestions for alternative methods welcome.\n\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n\n  if (presto_version) {\n    presto_version = Number(presto_version[1]);\n  }\n\n  if (presto_version && presto_version >= 15) {\n    presto = false;\n    webkit = true;\n  } // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n\n\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || ie && ie_version >= 9;\n\n  function classTest(cls) {\n    return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\");\n  }\n\n  var rmClass = function rmClass(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count) {\n      e.removeChild(e.firstChild);\n    }\n\n    return e;\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e);\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n\n    if (className) {\n      e.className = className;\n    }\n\n    if (style) {\n      e.style.cssText = style;\n    }\n\n    if (typeof content == \"string\") {\n      e.appendChild(document.createTextNode(content));\n    } else if (content) {\n      for (var i = 0; i < content.length; ++i) {\n        e.appendChild(content[i]);\n      }\n    }\n\n    return e;\n  } // wrapper for elt, which removes the elt from the accessibility tree\n\n\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e;\n  }\n\n  var range;\n\n  if (document.createRange) {\n    range = function range(node, start, end, endNode) {\n      var r = document.createRange();\n      r.setEnd(endNode || node, end);\n      r.setStart(node, start);\n      return r;\n    };\n  } else {\n    range = function range(node, start, end) {\n      var r = document.body.createTextRange();\n\n      try {\n        r.moveToElementText(node.parentNode);\n      } catch (e) {\n        return r;\n      }\n\n      r.collapse(true);\n      r.moveEnd(\"character\", end);\n      r.moveStart(\"character\", start);\n      return r;\n    };\n  }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      {\n        child = child.parentNode;\n      }\n\n    if (parent.contains) {\n      return parent.contains(child);\n    }\n\n    do {\n      if (child.nodeType == 11) {\n        child = child.host;\n      }\n\n      if (child == parent) {\n        return true;\n      }\n    } while (child = child.parentNode);\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n\n    try {\n      activeElement = document.activeElement;\n    } catch (e) {\n      activeElement = document.body || null;\n    }\n\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement) {\n      activeElement = activeElement.shadowRoot.activeElement;\n    }\n\n    return activeElement;\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n\n    if (!classTest(cls).test(current)) {\n      node.className += (current ? \" \" : \"\") + cls;\n    }\n  }\n\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n\n    for (var i = 0; i < as.length; i++) {\n      if (as[i] && !classTest(as[i]).test(b)) {\n        b += \" \" + as[i];\n      }\n    }\n\n    return b;\n  }\n\n  var selectInput = function selectInput(node) {\n    node.select();\n  };\n\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    {\n      selectInput = function selectInput(node) {\n        node.selectionStart = 0;\n        node.selectionEnd = node.value.length;\n      };\n    } else if (ie) // Suppress mysterious IE10 errors\n    {\n      selectInput = function selectInput(node) {\n        try {\n          node.select();\n        } catch (_e) {}\n      };\n    }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function () {\n      return f.apply(null, args);\n    };\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) {\n      target = {};\n    }\n\n    for (var prop in obj) {\n      if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop))) {\n        target[prop] = obj[prop];\n      }\n    }\n\n    return target;\n  } // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n\n\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n\n      if (end == -1) {\n        end = string.length;\n      }\n    }\n\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n\n      if (nextTab < 0 || nextTab >= end) {\n        return n + (end - i);\n      }\n\n      n += nextTab - i;\n      n += tabSize - n % tabSize;\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function Delayed() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n\n    if (self.time <= +new Date()) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date());\n    }\n  };\n\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date() + ms;\n\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i) {\n      if (array[i] == elt) {\n        return i;\n      }\n    }\n\n    return -1;\n  } // Number of pixels added to scroller and sizer to hide scrollbar\n\n\n  var scrollerGap = 30; // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n\n  var Pass = {\n    toString: function toString() {\n      return \"CodeMirror.Pass\";\n    }\n  }; // Reused option objects for setSelection & friends\n\n  var sel_dontScroll = {\n    scroll: false\n  },\n      sel_mouse = {\n    origin: \"*mouse\"\n  },\n      sel_move = {\n    origin: \"+move\"\n  }; // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n\n      if (nextTab == -1) {\n        nextTab = string.length;\n      }\n\n      var skipped = nextTab - pos;\n\n      if (nextTab == string.length || col + skipped >= goal) {\n        return pos + Math.min(skipped, goal - col);\n      }\n\n      col += nextTab - pos;\n      col += tabSize - col % tabSize;\n      pos = nextTab + 1;\n\n      if (col >= goal) {\n        return pos;\n      }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n\n  function spaceStr(n) {\n    while (spaceStrs.length <= n) {\n      spaceStrs.push(lst(spaceStrs) + \" \");\n    }\n\n    return spaceStrs[n];\n  }\n\n  function lst(arr) {\n    return arr[arr.length - 1];\n  }\n\n  function map(array, f) {\n    var out = [];\n\n    for (var i = 0; i < array.length; i++) {\n      out[i] = f(array[i], i);\n    }\n\n    return out;\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0,\n        priority = score(value);\n\n    while (pos < array.length && score(array[pos]) <= priority) {\n      pos++;\n    }\n\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n\n    if (props) {\n      copyObj(props, inst);\n    }\n\n    return inst;\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));\n  }\n\n  function isWordChar(ch, helper) {\n    if (!helper) {\n      return isWordCharBasic(ch);\n    }\n\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) {\n      return true;\n    }\n\n    return helper.test(ch);\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) {\n      if (obj.hasOwnProperty(n) && obj[n]) {\n        return false;\n      }\n    }\n\n    return true;\n  } // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n\n\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n\n  function isExtendingChar(ch) {\n    return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n  } // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n\n\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) {\n      pos += dir;\n    }\n\n    return pos;\n  } // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n\n\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n\n    for (;;) {\n      if (from == to) {\n        return from;\n      }\n\n      var midF = (from + to) / 2,\n          mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n\n      if (mid == from) {\n        return pred(mid) ? from : to;\n      }\n\n      if (pred(mid)) {\n        to = mid;\n      } else {\n        from = mid + dir;\n      }\n    }\n  } // BIDI HELPERS\n\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) {\n      return f(from, to, \"ltr\", 0);\n    }\n\n    var found = false;\n\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n\n    if (!found) {\n      f(from, to, \"ltr\");\n    }\n  }\n\n  var bidiOther = null;\n\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n\n      if (cur.from < ch && cur.to > ch) {\n        return i;\n      }\n\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") {\n          found = i;\n        } else {\n          bidiOther = i;\n        }\n      }\n\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") {\n          found = i;\n        } else {\n          bidiOther = i;\n        }\n      }\n    }\n\n    return found != null ? found : bidiOther;\n  } // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n\n\n  var bidiOrdering = function () {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\"; // Character types for codepoints 0x600 to 0x6f9\n\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n\n    function charType(code) {\n      if (code <= 0xf7) {\n        return lowTypes.charAt(code);\n      } else if (0x590 <= code && code <= 0x5f4) {\n        return \"R\";\n      } else if (0x600 <= code && code <= 0x6f9) {\n        return arabicTypes.charAt(code - 0x600);\n      } else if (0x6ee <= code && code <= 0x8ac) {\n        return \"r\";\n      } else if (0x2000 <= code && code <= 0x200b) {\n        return \"w\";\n      } else if (code == 0x200c) {\n        return \"b\";\n      } else {\n        return \"L\";\n      }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/,\n        isStrong = /[LRr]/,\n        countsAsLeft = /[Lb1n]/,\n        countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from;\n      this.to = to;\n    }\n\n    return function (str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) {\n        return false;\n      }\n\n      var len = str.length,\n          types = [];\n\n      for (var i = 0; i < len; ++i) {\n        types.push(charType(str.charCodeAt(i)));\n      } // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n\n\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n\n        if (type == \"m\") {\n          types[i$1] = prev;\n        } else {\n          prev = type;\n        }\n      } // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n\n\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n\n        if (type$1 == \"1\" && cur == \"r\") {\n          types[i$2] = \"n\";\n        } else if (isStrong.test(type$1)) {\n          cur = type$1;\n\n          if (type$1 == \"r\") {\n            types[i$2] = \"R\";\n          }\n        }\n      } // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n\n\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3 + 1] == \"1\") {\n          types[i$3] = \"1\";\n        } else if (type$2 == \",\" && prev$1 == types[i$3 + 1] && (prev$1 == \"1\" || prev$1 == \"n\")) {\n          types[i$3] = prev$1;\n        }\n\n        prev$1 = type$2;\n      } // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n\n\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n\n        if (type$3 == \",\") {\n          types[i$4] = \"N\";\n        } else if (type$3 == \"%\") {\n          var end = void 0;\n\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n\n          var replace = i$4 && types[i$4 - 1] == \"!\" || end < len && types[end] == \"1\" ? \"1\" : \"N\";\n\n          for (var j = i$4; j < end; ++j) {\n            types[j] = replace;\n          }\n\n          i$4 = end - 1;\n        }\n      } // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n\n\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n\n        if (cur$1 == \"L\" && type$4 == \"1\") {\n          types[i$5] = \"L\";\n        } else if (isStrong.test(type$4)) {\n          cur$1 = type$4;\n        }\n      } // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n\n\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = void 0;\n\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n\n          var before = (i$6 ? types[i$6 - 1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? before ? \"L\" : \"R\" : outerType;\n\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) {\n            types[j$1] = replace$1;\n          }\n\n          i$6 = end$1 - 1;\n        }\n      } // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n\n\n      var order = [],\n          m;\n\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7,\n              at = order.length;\n\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) {\n                order.splice(at, 0, new BidiSpan(1, pos, j$2));\n              }\n\n              var nstart = j$2;\n\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              pos = j$2;\n            } else {\n              ++j$2;\n            }\n          }\n\n          if (pos < i$7) {\n            order.splice(at, 0, new BidiSpan(1, pos, i$7));\n          }\n        }\n      }\n\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order;\n    };\n  }(); // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n\n\n  function getOrder(line, direction) {\n    var order = line.order;\n\n    if (order == null) {\n      order = line.order = bidiOrdering(line.text, direction);\n    }\n\n    return order;\n  } // EVENT HANDLING\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n\n  var noHandlers = [];\n\n  var on = function on(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      map[type] = (map[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers;\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers,\n          arr = map && map[type];\n\n      if (arr) {\n        var index = indexOf(arr, f);\n\n        if (index > -1) {\n          map[type] = arr.slice(0, index).concat(arr.slice(index + 1));\n        }\n      }\n    }\n  }\n\n  function signal(emitter, type\n  /*, values...*/\n  ) {\n    var handlers = getHandlers(emitter, type);\n\n    if (!handlers.length) {\n      return;\n    }\n\n    var args = Array.prototype.slice.call(arguments, 2);\n\n    for (var i = 0; i < handlers.length; ++i) {\n      handlers[i].apply(null, args);\n    }\n  } // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n\n\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\") {\n      e = {\n        type: e,\n        preventDefault: function preventDefault() {\n          this.defaultPrevented = true;\n        }\n      };\n    }\n\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore;\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n\n    if (!arr) {\n      return;\n    }\n\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n\n    for (var i = 0; i < arr.length; ++i) {\n      if (indexOf(set, arr[i]) == -1) {\n        set.push(arr[i]);\n      }\n    }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0;\n  } // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n\n\n  function eventMixin(ctor) {\n    ctor.prototype.on = function (type, f) {\n      on(this, type, f);\n    };\n\n    ctor.prototype.off = function (type, f) {\n      off(this, type, f);\n    };\n  } // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) {\n      e.preventDefault();\n    } else {\n      e.returnValue = false;\n    }\n  }\n\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) {\n      e.stopPropagation();\n    } else {\n      e.cancelBubble = true;\n    }\n  }\n\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;\n  }\n\n  function e_stop(e) {\n    e_preventDefault(e);\n    e_stopPropagation(e);\n  }\n\n  function e_target(e) {\n    return e.target || e.srcElement;\n  }\n\n  function e_button(e) {\n    var b = e.which;\n\n    if (b == null) {\n      if (e.button & 1) {\n        b = 1;\n      } else if (e.button & 2) {\n        b = 3;\n      } else if (e.button & 4) {\n        b = 2;\n      }\n    }\n\n    if (mac && e.ctrlKey && b == 1) {\n      b = 3;\n    }\n\n    return b;\n  } // Detect drag-and-drop\n\n\n  var dragAndDrop = function () {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) {\n      return false;\n    }\n\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div;\n  }();\n\n  var zwspSupported;\n\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200B\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n\n      if (measure.firstChild.offsetHeight != 0) {\n        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);\n      }\n    }\n\n    var node = zwspSupported ? elt(\"span\", \"\\u200B\") : elt(\"span\", \"\\xA0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node;\n  } // Feature-detect IE's crummy client rect reporting for bidi text\n\n\n  var badBidiRects;\n\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) {\n      return badBidiRects;\n    }\n\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062EA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n\n    if (!r0 || r0.left == r0.right) {\n      return false;\n    } // Safari returns null in some cases (#2780)\n\n\n    return badBidiRects = r1.right - r0.right < 3;\n  } // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n\n\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0,\n        result = [],\n        l = string.length;\n\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n\n      if (nl == -1) {\n        nl = string.length;\n      }\n\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n\n    return result;\n  } : function (string) {\n    return string.split(/\\r\\n?|\\n/);\n  };\n  var hasSelection = window.getSelection ? function (te) {\n    try {\n      return te.selectionStart != te.selectionEnd;\n    } catch (e) {\n      return false;\n    }\n  } : function (te) {\n    var range;\n\n    try {\n      range = te.ownerDocument.selection.createRange();\n    } catch (e) {}\n\n    if (!range || range.parentElement() != te) {\n      return false;\n    }\n\n    return range.compareEndPoints(\"StartToEnd\", range) != 0;\n  };\n\n  var hasCopyEvent = function () {\n    var e = elt(\"div\");\n\n    if (\"oncopy\" in e) {\n      return true;\n    }\n\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\";\n  }();\n\n  var badZoomedRects = null;\n\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) {\n      return badZoomedRects;\n    }\n\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;\n  } // Known modes, by name and by MIME\n\n\n  var modes = {},\n      mimeModes = {}; // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n\n  function defineMode(name, mode) {\n    if (arguments.length > 2) {\n      mode.dependencies = Array.prototype.slice.call(arguments, 2);\n    }\n\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  } // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n\n\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n\n      if (typeof found == \"string\") {\n        found = {\n          name: found\n        };\n      }\n\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\");\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\");\n    }\n\n    if (typeof spec == \"string\") {\n      return {\n        name: spec\n      };\n    } else {\n      return spec || {\n        name: \"null\"\n      };\n    }\n  } // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n\n\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n\n    if (!mfactory) {\n      return getMode(options, \"text/plain\");\n    }\n\n    var modeObj = mfactory(options, spec);\n\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) {\n          continue;\n        }\n\n        if (modeObj.hasOwnProperty(prop)) {\n          modeObj[\"_\" + prop] = modeObj[prop];\n        }\n\n        modeObj[prop] = exts[prop];\n      }\n    }\n\n    modeObj.name = spec.name;\n\n    if (spec.helperType) {\n      modeObj.helperType = spec.helperType;\n    }\n\n    if (spec.modeProps) {\n      for (var prop$1 in spec.modeProps) {\n        modeObj[prop$1] = spec.modeProps[prop$1];\n      }\n    }\n\n    return modeObj;\n  } // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n\n\n  var modeExtensions = {};\n\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : modeExtensions[mode] = {};\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) {\n      return state;\n    }\n\n    if (mode.copyState) {\n      return mode.copyState(state);\n    }\n\n    var nstate = {};\n\n    for (var n in state) {\n      var val = state[n];\n\n      if (val instanceof Array) {\n        val = val.concat([]);\n      }\n\n      nstate[n] = val;\n    }\n\n    return nstate;\n  } // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n\n\n  function innerMode(mode, state) {\n    var info;\n\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n\n      if (!info || info.mode == mode) {\n        break;\n      }\n\n      state = info.state;\n      mode = info.mode;\n    }\n\n    return info || {\n      mode: mode,\n      state: state\n    };\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true;\n  } // STRING STREAM\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n\n  var StringStream = function StringStream(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {\n    return this.pos >= this.string.length;\n  };\n\n  StringStream.prototype.sol = function () {\n    return this.pos == this.lineStart;\n  };\n\n  StringStream.prototype.peek = function () {\n    return this.string.charAt(this.pos) || undefined;\n  };\n\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length) {\n      return this.string.charAt(this.pos++);\n    }\n  };\n\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n\n    if (typeof match == \"string\") {\n      ok = ch == match;\n    } else {\n      ok = ch && (match.test ? match.test(ch) : match(ch));\n    }\n\n    if (ok) {\n      ++this.pos;\n      return ch;\n    }\n  };\n\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n\n    while (this.eat(match)) {}\n\n    return this.pos > start;\n  };\n\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) {\n      ++this.pos;\n    }\n\n    return this.pos > start;\n  };\n\n  StringStream.prototype.skipToEnd = function () {\n    this.pos = this.string.length;\n  };\n\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n\n    if (found > -1) {\n      this.pos = found;\n      return true;\n    }\n  };\n\n  StringStream.prototype.backUp = function (n) {\n    this.pos -= n;\n  };\n\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n  };\n\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n  };\n\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function cased(str) {\n        return caseInsensitive ? str.toLowerCase() : str;\n      };\n\n      var substr = this.string.substr(this.pos, pattern.length);\n\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) {\n          this.pos += pattern.length;\n        }\n\n        return true;\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n\n      if (match && match.index > 0) {\n        return null;\n      }\n\n      if (match && consume !== false) {\n        this.pos += match[0].length;\n      }\n\n      return match;\n    }\n  };\n\n  StringStream.prototype.current = function () {\n    return this.string.slice(this.start, this.pos);\n  };\n\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n\n    try {\n      return inner();\n    } finally {\n      this.lineStart -= n;\n    }\n  };\n\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n);\n  };\n\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos);\n  }; // Find the line object corresponding to the given line number.\n\n\n  function getLine(doc, n) {\n    n -= doc.first;\n\n    if (n < 0 || n >= doc.size) {\n      throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\");\n    }\n\n    var chunk = doc;\n\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i],\n            sz = child.chunkSize();\n\n        if (n < sz) {\n          chunk = child;\n          break;\n        }\n\n        n -= sz;\n      }\n    }\n\n    return chunk.lines[n];\n  } // Get the part of a document between two positions, as an array of\n  // strings.\n\n\n  function getBetween(doc, start, end) {\n    var out = [],\n        n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n\n      if (n == end.line) {\n        text = text.slice(0, end.ch);\n      }\n\n      if (n == start.line) {\n        text = text.slice(start.ch);\n      }\n\n      out.push(text);\n      ++n;\n    });\n    return out;\n  } // Get the lines between from and to, as array of strings.\n\n\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) {\n      out.push(line.text);\n    }); // iter aborts when callback returns truthy value\n\n    return out;\n  } // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n\n\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n\n    if (diff) {\n      for (var n = line; n; n = n.parent) {\n        n.height += diff;\n      }\n    }\n  } // Given a line object, find its line number by walking up through\n  // its parent links.\n\n\n  function lineNo(line) {\n    if (line.parent == null) {\n      return null;\n    }\n\n    var cur = line.parent,\n        no = indexOf(cur.lines, line);\n\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) {\n          break;\n        }\n\n        no += chunk.children[i].chunkSize();\n      }\n    }\n\n    return no + cur.first;\n  } // Find the line at the given vertical position, using the height\n  // information in the document tree.\n\n\n  function _lineAtHeight(chunk, h) {\n    var n = chunk.first;\n\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1],\n            ch = child.height;\n\n        if (h < ch) {\n          chunk = child;\n          continue outer;\n        }\n\n        h -= ch;\n        n += child.chunkSize();\n      }\n\n      return n;\n    } while (!chunk.lines);\n\n    var i = 0;\n\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i],\n          lh = line.height;\n\n      if (h < lh) {\n        break;\n      }\n\n      h -= lh;\n    }\n\n    return n + i;\n  }\n\n  function isLine(doc, l) {\n    return l >= doc.first && l < doc.first + doc.size;\n  }\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber));\n  } // A Pos instance represents a position within the text.\n\n\n  function Pos(line, ch, sticky) {\n    if (sticky === void 0) sticky = null;\n\n    if (!(this instanceof Pos)) {\n      return new Pos(line, ch, sticky);\n    }\n\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  } // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n\n\n  function cmp(a, b) {\n    return a.line - b.line || a.ch - b.ch;\n  }\n\n  function equalCursorPos(a, b) {\n    return a.sticky == b.sticky && cmp(a, b) == 0;\n  }\n\n  function copyPos(x) {\n    return Pos(x.line, x.ch);\n  }\n\n  function maxPos(a, b) {\n    return cmp(a, b) < 0 ? b : a;\n  }\n\n  function minPos(a, b) {\n    return cmp(a, b) < 0 ? a : b;\n  } // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n\n\n  function clipLine(doc, n) {\n    return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));\n  }\n\n  function _clipPos(doc, pos) {\n    if (pos.line < doc.first) {\n      return Pos(doc.first, 0);\n    }\n\n    var last = doc.first + doc.size - 1;\n\n    if (pos.line > last) {\n      return Pos(last, getLine(doc, last).text.length);\n    }\n\n    return clipToLen(pos, getLine(doc, pos.line).text.length);\n  }\n\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n\n    if (ch == null || ch > linelen) {\n      return Pos(pos.line, linelen);\n    } else if (ch < 0) {\n      return Pos(pos.line, 0);\n    } else {\n      return pos;\n    }\n  }\n\n  function clipPosArray(doc, array) {\n    var out = [];\n\n    for (var i = 0; i < array.length; i++) {\n      out[i] = _clipPos(doc, array[i]);\n    }\n\n    return out;\n  }\n\n  var SavedContext = function SavedContext(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function Context(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n\n    if (line != null && n > this.maxLookAhead) {\n      this.maxLookAhead = n;\n    }\n\n    return line;\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) {\n      return null;\n    }\n\n    while (this.baseTokens[this.baseTokenPos] <= n) {\n      this.baseTokenPos += 2;\n    }\n\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {\n      type: type && type.replace(/( |^)overlay .*/, \"\"),\n      size: this.baseTokens[this.baseTokenPos] - n\n    };\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n\n    if (this.maxLookAhead > 0) {\n      this.maxLookAhead--;\n    }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext) {\n      return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead);\n    } else {\n      return new Context(doc, copyState(doc.mode, saved), line);\n    }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state;\n  }; // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n\n\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen],\n        lineClasses = {}; // Compute the base array of styles\n\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) {\n      return st.push(end, style);\n    }, lineClasses, forceToEnd);\n    var state = context.state; // Run overlays, adjust style array.\n\n    var loop = function loop(o) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o],\n          i = 1,\n          at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i; // Ensure there's a token end at the current position, and that i points at it\n\n        while (at < end) {\n          var i_end = st[i];\n\n          if (i_end > end) {\n            st.splice(i, 1, end, st[i + 1], i_end);\n          }\n\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n\n        if (!style) {\n          return;\n        }\n\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start + 1];\n            st[start + 1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) {\n      loop(o);\n    }\n\n    return {\n      styles: st,\n      classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null\n    };\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n\n      if (resetState) {\n        context.state = resetState;\n      }\n\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n\n      if (result.classes) {\n        line.styleClasses = result.classes;\n      } else if (line.styleClasses) {\n        line.styleClasses = null;\n      }\n\n      if (updateFrontier === cm.doc.highlightFrontier) {\n        cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier);\n      }\n    }\n\n    return line.styles;\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc,\n        display = cm.display;\n\n    if (!doc.mode.startState) {\n      return new Context(doc, true, n);\n    }\n\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n\n    if (precise) {\n      doc.modeFrontier = context.line;\n    }\n\n    return context;\n  } // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n\n\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n\n    if (text == \"\") {\n      callBlankLine(mode, context.state);\n    }\n\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) {\n      return mode.blankLine(state);\n    }\n\n    if (!mode.innerMode) {\n      return;\n    }\n\n    var inner = innerMode(mode, state);\n\n    if (inner.mode.blankLine) {\n      return inner.mode.blankLine(inner.state);\n    }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) {\n        inner[0] = innerMode(mode, state).mode;\n      }\n\n      var style = mode.token(stream, state);\n\n      if (stream.pos > stream.start) {\n        return style;\n      }\n    }\n\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\");\n  }\n\n  var Token = function Token(stream, type, state) {\n    this.start = stream.start;\n    this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  }; // Utility for getTokenAt and getLineTokens\n\n\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc,\n        mode = doc.mode,\n        style;\n    pos = _clipPos(doc, pos);\n    var line = getLine(doc, pos.line),\n        context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context),\n        tokens;\n\n    if (asArray) {\n      tokens = [];\n    }\n\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n\n      if (asArray) {\n        tokens.push(new Token(stream, style, copyState(doc.mode, context.state)));\n      }\n    }\n\n    return asArray ? tokens : new Token(stream, style, context.state);\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) {\n      for (;;) {\n        var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n\n        if (!lineClass) {\n          break;\n        }\n\n        type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n        var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n\n        if (output[prop] == null) {\n          output[prop] = lineClass[2];\n        } else if (!new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\").test(output[prop])) {\n          output[prop] += \" \" + lineClass[2];\n        }\n      }\n    }\n\n    return type;\n  } // Run the given mode's parser over a line, calling f for each token.\n\n\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n\n    if (flattenSpans == null) {\n      flattenSpans = cm.options.flattenSpans;\n    }\n\n    var curStart = 0,\n        curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context),\n        style;\n    var inner = cm.options.addModeClass && [null];\n\n    if (text == \"\") {\n      extractLineClasses(callBlankLine(mode, context.state), lineClasses);\n    }\n\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n\n        if (forceToEnd) {\n          processLine(cm, text, context, stream.pos);\n        }\n\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n\n      if (inner) {\n        var mName = inner[0].name;\n\n        if (mName) {\n          style = \"m-\" + (style ? mName + \" \" + style : mName);\n        }\n      }\n\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n\n        curStyle = style;\n      }\n\n      stream.start = stream.pos;\n    }\n\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  } // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n\n\n  function findStartLine(cm, n, precise) {\n    var minindent,\n        minline,\n        doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) {\n        return doc.first;\n      }\n\n      var line = getLine(doc, search - 1),\n          after = line.stateAfter;\n\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier)) {\n        return search;\n      }\n\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n\n    return minline;\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n\n    if (doc.highlightFrontier < n - 10) {\n      return;\n    }\n\n    var start = doc.first;\n\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter; // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break;\n      }\n    }\n\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  } // Optimize some code when these features are not used.\n\n\n  var sawReadOnlySpans = false,\n      sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  } // TEXTMARKER SPANS\n\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from;\n    this.to = to;\n  } // Search an array of spans for a span matching the given marker.\n\n\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) {\n      for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n\n        if (span.marker == marker) {\n          return span;\n        }\n      }\n    }\n  } // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n\n\n  function removeMarkedSpan(spans, span) {\n    var r;\n\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i] != span) {\n        (r || (r = [])).push(spans[i]);\n      }\n    }\n\n    return r;\n  } // Add a span to a line.\n\n\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  } // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n\n\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n\n    if (old) {\n      for (var i = 0; i < old.length; ++i) {\n        var span = old[i],\n            marker = span.marker;\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n\n        if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n          var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);\n          (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n        }\n      }\n    }\n\n    return nw;\n  }\n\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n\n    if (old) {\n      for (var i = 0; i < old.length; ++i) {\n        var span = old[i],\n            marker = span.marker;\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n\n        if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n          var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);\n          (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh, span.to == null ? null : span.to - endCh));\n        }\n      }\n    }\n\n    return nw;\n  } // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n\n\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) {\n      return null;\n    }\n\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n\n    if (!oldFirst && !oldLast) {\n      return null;\n    }\n\n    var startCh = change.from.ch,\n        endCh = change.to.ch,\n        isInsert = cmp(change.from, change.to) == 0; // Get the spans that 'stick out' on both sides\n\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert); // Next, merge those two ends\n\n    var sameLine = change.text.length == 1,\n        offset = lst(change.text).length + (sameLine ? startCh : 0);\n\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n\n          if (!found) {\n            span.to = startCh;\n          } else if (sameLine) {\n            span.to = found.to == null ? null : found.to + offset;\n          }\n        }\n      }\n    }\n\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n\n        if (span$1.to != null) {\n          span$1.to += offset;\n        }\n\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n\n          if (!found$1) {\n            span$1.from = offset;\n\n            if (sameLine) {\n              (first || (first = [])).push(span$1);\n            }\n          }\n        } else {\n          span$1.from += offset;\n\n          if (sameLine) {\n            (first || (first = [])).push(span$1);\n          }\n        }\n      }\n    } // Make sure we didn't create any zero-length spans\n\n\n    if (first) {\n      first = clearEmptySpans(first);\n    }\n\n    if (last && last != first) {\n      last = clearEmptySpans(last);\n    }\n\n    var newMarkers = [first];\n\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2,\n          gapMarkers;\n\n      if (gap > 0 && first) {\n        for (var i$2 = 0; i$2 < first.length; ++i$2) {\n          if (first[i$2].to == null) {\n            (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null));\n          }\n        }\n      }\n\n      for (var i$3 = 0; i$3 < gap; ++i$3) {\n        newMarkers.push(gapMarkers);\n      }\n\n      newMarkers.push(last);\n    }\n\n    return newMarkers;\n  } // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n\n\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false) {\n        spans.splice(i--, 1);\n      }\n    }\n\n    if (!spans.length) {\n      return null;\n    }\n\n    return spans;\n  } // Used to 'clip' out readOnly ranges when making a change.\n\n\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) {\n        for (var i = 0; i < line.markedSpans.length; ++i) {\n          var mark = line.markedSpans[i].marker;\n\n          if (mark.readOnly && (!markers || indexOf(markers, mark) == -1)) {\n            (markers || (markers = [])).push(mark);\n          }\n        }\n      }\n    });\n\n    if (!markers) {\n      return null;\n    }\n\n    var parts = [{\n      from: from,\n      to: to\n    }];\n\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i],\n          m = mk.find(0);\n\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) {\n          continue;\n        }\n\n        var newParts = [j, 1],\n            dfrom = cmp(p.from, m.from),\n            dto = cmp(p.to, m.to);\n\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom) {\n          newParts.push({\n            from: p.from,\n            to: m.from\n          });\n        }\n\n        if (dto > 0 || !mk.inclusiveRight && !dto) {\n          newParts.push({\n            from: m.to,\n            to: p.to\n          });\n        }\n\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n\n    return parts;\n  } // Connect or disconnect spans from a line.\n\n\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n\n    if (!spans) {\n      return;\n    }\n\n    for (var i = 0; i < spans.length; ++i) {\n      spans[i].marker.detachLine(line);\n    }\n\n    line.markedSpans = null;\n  }\n\n  function attachMarkedSpans(line, spans) {\n    if (!spans) {\n      return;\n    }\n\n    for (var i = 0; i < spans.length; ++i) {\n      spans[i].marker.attachLine(line);\n    }\n\n    line.markedSpans = spans;\n  } // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n\n\n  function extraLeft(marker) {\n    return marker.inclusiveLeft ? -1 : 0;\n  }\n\n  function extraRight(marker) {\n    return marker.inclusiveRight ? 1 : 0;\n  } // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n\n\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n\n    if (lenDiff != 0) {\n      return lenDiff;\n    }\n\n    var aPos = a.find(),\n        bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n\n    if (fromCmp) {\n      return -fromCmp;\n    }\n\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n\n    if (toCmp) {\n      return toCmp;\n    }\n\n    return b.id - a.id;\n  } // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n\n\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans,\n        found;\n\n    if (sps) {\n      for (var sp = void 0, i = 0; i < sps.length; ++i) {\n        sp = sps[i];\n\n        if (sp.marker.collapsed && (start ? sp.from : sp.to) == null && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n          found = sp.marker;\n        }\n      }\n    }\n\n    return found;\n  }\n\n  function collapsedSpanAtStart(line) {\n    return collapsedSpanAtSide(line, true);\n  }\n\n  function collapsedSpanAtEnd(line) {\n    return collapsedSpanAtSide(line, false);\n  }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans,\n        found;\n\n    if (sps) {\n      for (var i = 0; i < sps.length; ++i) {\n        var sp = sps[i];\n\n        if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n          found = sp.marker;\n        }\n      }\n    }\n\n    return found;\n  } // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n\n\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n\n    if (sps) {\n      for (var i = 0; i < sps.length; ++i) {\n        var sp = sps[i];\n\n        if (!sp.marker.collapsed) {\n          continue;\n        }\n\n        var found = sp.marker.find(0);\n        var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n        var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n\n        if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) {\n          continue;\n        }\n\n        if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) || fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0)) {\n          return true;\n        }\n      }\n    }\n  } // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n\n\n  function visualLine(line) {\n    var merged;\n\n    while (merged = collapsedSpanAtStart(line)) {\n      line = merged.find(-1, true).line;\n    }\n\n    return line;\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n    }\n\n    return line;\n  } // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n\n\n  function visualLineContinued(line) {\n    var merged, lines;\n\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n      (lines || (lines = [])).push(line);\n    }\n\n    return lines;\n  } // Get the line number of the start of the visual line that the\n  // given line number is part of.\n\n\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN),\n        vis = visualLine(line);\n\n    if (line == vis) {\n      return lineN;\n    }\n\n    return lineNo(vis);\n  } // Get the line number of the start of the next visual line after\n  // the given line.\n\n\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) {\n      return lineN;\n    }\n\n    var line = getLine(doc, lineN),\n        merged;\n\n    if (!lineIsHidden(doc, line)) {\n      return lineN;\n    }\n\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n    }\n\n    return lineNo(line) + 1;\n  } // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n\n\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n\n    if (sps) {\n      for (var sp = void 0, i = 0; i < sps.length; ++i) {\n        sp = sps[i];\n\n        if (!sp.marker.collapsed) {\n          continue;\n        }\n\n        if (sp.from == null) {\n          return true;\n        }\n\n        if (sp.marker.widgetNode) {\n          continue;\n        }\n\n        if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp)) {\n          return true;\n        }\n      }\n    }\n  }\n\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));\n    }\n\n    if (span.marker.inclusiveRight && span.to == line.text.length) {\n      return true;\n    }\n\n    for (var sp = void 0, i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (sp.to == null || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc, line, sp)) {\n        return true;\n      }\n    }\n  } // Find the height above the given line.\n\n\n  function _heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n    var h = 0,\n        chunk = lineObj.parent;\n\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n\n      if (line == lineObj) {\n        break;\n      } else {\n        h += line.height;\n      }\n    }\n\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n\n        if (cur == chunk) {\n          break;\n        } else {\n          h += cur.height;\n        }\n      }\n    }\n\n    return h;\n  } // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n\n\n  function lineLength(line) {\n    if (line.height == 0) {\n      return 0;\n    }\n\n    var len = line.text.length,\n        merged,\n        cur = line;\n\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n\n    cur = line;\n\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n\n    return len;\n  } // Find the longest line in the document.\n\n\n  function findMaxLine(cm) {\n    var d = cm.display,\n        doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  } // LINE DATA STRUCTURE\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n\n\n  var Line = function Line(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () {\n    return lineNo(this);\n  };\n\n  eventMixin(Line); // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n\n    if (line.stateAfter) {\n      line.stateAfter = null;\n    }\n\n    if (line.styles) {\n      line.styles = null;\n    }\n\n    if (line.order != null) {\n      line.order = null;\n    }\n\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n\n    if (estHeight != line.height) {\n      updateLineHeight(line, estHeight);\n    }\n  } // Detach a line from the document tree and its markers.\n\n\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  } // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n\n\n  var styleToClassCache = {},\n      styleToClassCacheWithMode = {};\n\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) {\n      return null;\n    }\n\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] || (cache[style] = style.replace(/\\S+/g, \"cm-$&\"));\n  } // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n\n\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {\n      pre: eltP(\"pre\", [content], \"CodeMirror-line\"),\n      content: content,\n      col: 0,\n      pos: 0,\n      cm: cm,\n      trailingSpace: false,\n      splitSpaces: cm.getOption(\"lineWrapping\")\n    };\n    lineView.measure = {}; // Iterate over the logical lines that make up this visual line.\n\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line,\n          order = void 0;\n      builder.pos = 0;\n      builder.addToken = buildToken; // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction))) {\n        builder.addToken = buildTokenBadBidi(builder.addToken, order);\n      }\n\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass) {\n          builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\");\n        }\n\n        if (line.styleClasses.textClass) {\n          builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\");\n        }\n      } // Ensure at least a single node is present, for measuring.\n\n\n      if (builder.map.length == 0) {\n        builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));\n      } // Store the map and a cache object for the current logical line\n\n\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n        (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);\n        (lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    } // See issue #2901\n\n\n    if (webkit) {\n      var last = builder.content.lastChild;\n\n      if (/\\bcm-tab\\b/.test(last.className) || last.querySelector && last.querySelector(\".cm-tab\")) {\n        builder.content.className = \"cm-tab-wrap-hack\";\n      }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n\n    if (builder.pre.className) {\n      builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\");\n    }\n\n    return builder;\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token;\n  } // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n\n\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) {\n      return;\n    }\n\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars,\n        mustWrap = false;\n    var content;\n\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n\n      if (ie && ie_version < 9) {\n        mustWrap = true;\n      }\n\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n\n          if (ie && ie_version < 9) {\n            content.appendChild(elt(\"span\", [txt]));\n          } else {\n            content.appendChild(txt);\n          }\n\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n\n        if (!m) {\n          break;\n        }\n\n        pos += skipped + 1;\n        var txt$1 = void 0;\n\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize,\n              tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240D\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n\n          if (ie && ie_version < 9) {\n            content.appendChild(elt(\"span\", [txt$1]));\n          } else {\n            content.appendChild(txt$1);\n          }\n\n          builder.col += 1;\n        }\n\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n\n    if (style || startStyle || endStyle || mustWrap || css) {\n      var fullStyle = style || \"\";\n\n      if (startStyle) {\n        fullStyle += startStyle;\n      }\n\n      if (endStyle) {\n        fullStyle += endStyle;\n      }\n\n      var token = elt(\"span\", [content], fullStyle, css);\n\n      if (attributes) {\n        for (var attr in attributes) {\n          if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\") {\n            token.setAttribute(attr, attributes[attr]);\n          }\n        }\n      }\n\n      return builder.content.appendChild(token);\n    }\n\n    builder.content.appendChild(content);\n  } // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n\n\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) {\n      return text;\n    }\n\n    var spaceBefore = trailingBefore,\n        result = \"\";\n\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32)) {\n        ch = \"\\xA0\";\n      }\n\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n\n    return result;\n  } // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n\n\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos,\n          end = start + text.length;\n\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = void 0;\n\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n\n          if (part.to > start && part.from <= start) {\n            break;\n          }\n        }\n\n        if (part.to >= end) {\n          return inner(builder, text, style, startStyle, endStyle, css, attributes);\n        }\n\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    };\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n\n    if (widget) {\n      builder.map.push(builder.pos, builder.pos + size, widget);\n    }\n\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget) {\n        widget = builder.content.appendChild(document.createElement(\"span\"));\n      }\n\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n\n    builder.pos += size;\n    builder.trailingSpace = false;\n  } // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n\n\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans,\n        allText = line.text,\n        at = 0;\n\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1 += 2) {\n        builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1 + 1], builder.cm.options));\n      }\n\n      return;\n    }\n\n    var len = allText.length,\n        pos = 0,\n        i = 1,\n        text = \"\",\n        style,\n        css;\n    var nextChange = 0,\n        spanStyle,\n        spanEndStyle,\n        spanStartStyle,\n        collapsed,\n        attributes;\n\n    for (;;) {\n      if (nextChange == pos) {\n        // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null;\n        nextChange = Infinity;\n        var foundBookmarks = [],\n            endStyles = void 0;\n\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j],\n              m = sp.marker;\n\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n\n            if (m.className) {\n              spanStyle += \" \" + m.className;\n            }\n\n            if (m.css) {\n              css = (css ? css + \";\" : \"\") + m.css;\n            }\n\n            if (m.startStyle && sp.from == pos) {\n              spanStartStyle += \" \" + m.startStyle;\n            }\n\n            if (m.endStyle && sp.to == nextChange) {\n              (endStyles || (endStyles = [])).push(m.endStyle, sp.to);\n            } // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n\n\n            if (m.title) {\n              (attributes || (attributes = {})).title = m.title;\n            }\n\n            if (m.attributes) {\n              for (var attr in m.attributes) {\n                (attributes || (attributes = {}))[attr] = m.attributes[attr];\n              }\n            }\n\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0)) {\n              collapsed = sp;\n            }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n\n        if (endStyles) {\n          for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2) {\n            if (endStyles[j$1 + 1] == nextChange) {\n              spanEndStyle += \" \" + endStyles[j$1];\n            }\n          }\n        }\n\n        if (!collapsed || collapsed.from == pos) {\n          for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2) {\n            buildCollapsedSpan(builder, 0, foundBookmarks[j$2]);\n          }\n        }\n\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos, collapsed.marker, collapsed.from == null);\n\n          if (collapsed.to == null) {\n            return;\n          }\n\n          if (collapsed.to == pos) {\n            collapsed = false;\n          }\n        }\n      }\n\n      if (pos >= len) {\n        break;\n      }\n\n      var upto = Math.min(len, nextChange);\n\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle, spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n\n          if (end >= upto) {\n            text = text.slice(upto - pos);\n            pos = upto;\n            break;\n          }\n\n          pos = end;\n          spanStartStyle = \"\";\n        }\n\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  } // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n\n\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line; // Continuing lines, if any\n\n    this.rest = visualLineContinued(line); // Number of logical lines in this visual line\n\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  } // Create a range of LineView objects for the given lines.\n\n\n  function buildViewArray(cm, from, to) {\n    var array = [],\n        nextPos;\n\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n\n    return array;\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks,\n        i = 0;\n\n    do {\n      for (; i < callbacks.length; i++) {\n        callbacks[i].call(null);\n      }\n\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n\n        if (op.cursorActivityHandlers) {\n          while (op.cursorActivityCalled < op.cursorActivityHandlers.length) {\n            op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);\n          }\n        }\n      }\n    } while (i < callbacks.length);\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n\n    if (!group) {\n      return;\n    }\n\n    try {\n      fireCallbacksForOps(group);\n    } finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null; // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n\n  function signalLater(emitter, type\n  /*, values...*/\n  ) {\n    var arr = getHandlers(emitter, type);\n\n    if (!arr.length) {\n      return;\n    }\n\n    var args = Array.prototype.slice.call(arguments, 2),\n        list;\n\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n\n    var loop = function loop(i) {\n      list.push(function () {\n        return arr[i].apply(null, args);\n      });\n    };\n\n    for (var i = 0; i < arr.length; ++i) {\n      loop(i);\n    }\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n\n    for (var i = 0; i < delayed.length; ++i) {\n      delayed[i]();\n    }\n  } // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n\n\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n\n      if (type == \"text\") {\n        updateLineText(cm, lineView);\n      } else if (type == \"gutter\") {\n        updateLineGutter(cm, lineView, lineN, dims);\n      } else if (type == \"class\") {\n        updateLineClasses(cm, lineView);\n      } else if (type == \"widget\") {\n        updateLineWidgets(cm, lineView, dims);\n      }\n    }\n\n    lineView.changes = null;\n  } // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n\n\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n\n      if (lineView.text.parentNode) {\n        lineView.text.parentNode.replaceChild(lineView.node, lineView.text);\n      }\n\n      lineView.node.appendChild(lineView.text);\n\n      if (ie && ie_version < 8) {\n        lineView.node.style.zIndex = 2;\n      }\n    }\n\n    return lineView.node;\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n\n    if (cls) {\n      cls += \" CodeMirror-linebackground\";\n    }\n\n    if (lineView.background) {\n      if (cls) {\n        lineView.background.className = cls;\n      } else {\n        lineView.background.parentNode.removeChild(lineView.background);\n        lineView.background = null;\n      }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  } // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n\n\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built;\n    }\n\n    return buildLineContent(cm, lineView);\n  } // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n\n\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n\n    if (lineView.text == lineView.node) {\n      lineView.node = built.pre;\n    }\n\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n\n    if (lineView.line.wrapClass) {\n      ensureLineWrapped(lineView).className = lineView.line.wrapClass;\n    } else if (lineView.node != lineView.text) {\n      lineView.node.className = \"\";\n    }\n\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass, \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + dims.gutterTotalWidth + \"px\");\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n\n    var markers = lineView.line.gutterMarkers;\n\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\");\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n\n      if (lineView.line.gutterClass) {\n        gutterWrap.className += \" \" + lineView.line.gutterClass;\n      }\n\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"])) {\n        lineView.lineNumber = gutterWrap.appendChild(elt(\"div\", lineNumberFor(cm.options, lineN), \"CodeMirror-linenumber CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \" + cm.display.lineNumInnerWidth + \"px\"));\n      }\n\n      if (markers) {\n        for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n          var id = cm.display.gutterSpecs[k].className,\n              found = markers.hasOwnProperty(id) && markers[id];\n\n          if (found) {\n            gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[id] + \"px; width: \" + dims.gutterWidth[id] + \"px\"));\n          }\n        }\n      }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) {\n      lineView.alignable = null;\n    }\n\n    var isWidget = classTest(\"CodeMirror-linewidget\");\n\n    for (var node = lineView.node.firstChild, next = void 0; node; node = next) {\n      next = node.nextSibling;\n\n      if (isWidget.test(node)) {\n        lineView.node.removeChild(node);\n      }\n    }\n\n    insertLineWidgets(cm, lineView, dims);\n  } // Build a line's DOM representation from scratch\n\n\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n\n    if (built.bgClass) {\n      lineView.bgClass = built.bgClass;\n    }\n\n    if (built.textClass) {\n      lineView.textClass = built.textClass;\n    }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node;\n  } // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n\n\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n\n    if (lineView.rest) {\n      for (var i = 0; i < lineView.rest.length; i++) {\n        insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);\n      }\n    }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) {\n      return;\n    }\n\n    var wrap = ensureLineWrapped(lineView);\n\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i],\n          node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n\n      if (!widget.handleMouseEvents) {\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n      }\n\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n\n      if (allowAbove && widget.above) {\n        wrap.insertBefore(node, lineView.gutter || lineView.text);\n      } else {\n        wrap.appendChild(node);\n      }\n\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n      (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n\n      node.style.width = width + \"px\";\n    }\n\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n\n      if (!widget.noHScroll) {\n        node.style.marginLeft = -dims.gutterTotalWidth + \"px\";\n      }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) {\n      return widget.height;\n    }\n\n    var cm = widget.doc.cm;\n\n    if (!cm) {\n      return 0;\n    }\n\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n\n      if (widget.coverGutter) {\n        parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\";\n      }\n\n      if (widget.noHScroll) {\n        parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\";\n      }\n\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n\n    return widget.height = widget.node.parentNode.offsetHeight;\n  } // Return true when the given mouse event happened in a widget\n\n\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\" || n.parentNode == display.sizer && n != display.mover) {\n        return true;\n      }\n    }\n  } // POSITION MEASUREMENT\n\n\n  function paddingTop(display) {\n    return display.lineSpace.offsetTop;\n  }\n\n  function paddingVert(display) {\n    return display.mover.offsetHeight - display.lineSpace.offsetHeight;\n  }\n\n  function paddingH(display) {\n    if (display.cachedPaddingH) {\n      return display.cachedPaddingH;\n    }\n\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {\n      left: parseInt(style.paddingLeft),\n      right: parseInt(style.paddingRight)\n    };\n\n    if (!isNaN(data.left) && !isNaN(data.right)) {\n      display.cachedPaddingH = data;\n    }\n\n    return data;\n  }\n\n  function scrollGap(cm) {\n    return scrollerGap - cm.display.nativeBarWidth;\n  }\n\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;\n  }\n\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;\n  } // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n\n\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i],\n              next = rects[i + 1];\n\n          if (Math.abs(cur.bottom - next.bottom) > 2) {\n            heights.push((cur.bottom + next.top) / 2 - rect.top);\n          }\n        }\n      }\n\n      heights.push(rect.bottom - rect.top);\n    }\n  } // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n\n\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line) {\n      return {\n        map: lineView.measure.map,\n        cache: lineView.measure.cache\n      };\n    }\n\n    for (var i = 0; i < lineView.rest.length; i++) {\n      if (lineView.rest[i] == line) {\n        return {\n          map: lineView.measure.maps[i],\n          cache: lineView.measure.caches[i]\n        };\n      }\n    }\n\n    for (var i$1 = 0; i$1 < lineView.rest.length; i$1++) {\n      if (lineNo(lineView.rest[i$1]) > lineN) {\n        return {\n          map: lineView.measure.maps[i$1],\n          cache: lineView.measure.caches[i$1],\n          before: true\n        };\n      }\n    }\n  } // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n\n\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view;\n  } // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n\n\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);\n  } // Find a line view that corresponds to the given line number.\n\n\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo) {\n      return cm.display.view[findViewIndex(cm, lineN)];\n    }\n\n    var ext = cm.display.externalMeasured;\n\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size) {\n      return ext;\n    }\n  } // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n\n\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n\n    if (!view) {\n      view = updateExternalMeasurement(cm, line);\n    }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line,\n      view: view,\n      rect: null,\n      map: info.map,\n      cache: info.cache,\n      before: info.before,\n      hasHeights: false\n    };\n  } // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n\n\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) {\n      ch = -1;\n    }\n\n    var key = ch + (bias || \"\"),\n        found;\n\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect) {\n        prepared.rect = prepared.view.text.getBoundingClientRect();\n      }\n\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n\n      found = measureCharInner(cm, prepared, ch, bias);\n\n      if (!found.bogus) {\n        prepared.cache[key] = found;\n      }\n    }\n\n    return {\n      left: found.left,\n      right: found.right,\n      top: varHeight ? found.rtop : found.top,\n      bottom: varHeight ? found.rbottom : found.bottom\n    };\n  }\n\n  var nullRect = {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  };\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd; // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n\n    for (var i = 0; i < map.length; i += 3) {\n      mStart = map[i];\n      mEnd = map[i + 1];\n\n      if (ch < mStart) {\n        start = 0;\n        end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n\n        if (ch >= mEnd) {\n          collapse = \"right\";\n        }\n      }\n\n      if (start != null) {\n        node = map[i + 2];\n\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\")) {\n          collapse = bias;\n        }\n\n        if (bias == \"left\" && start == 0) {\n          while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          }\n        }\n\n        if (bias == \"right\" && start == mEnd - mStart) {\n          while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          }\n        }\n\n        break;\n      }\n    }\n\n    return {\n      node: node,\n      start: start,\n      end: end,\n      collapse: collapse,\n      coverStart: mStart,\n      coverEnd: mEnd\n    };\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n\n    if (bias == \"left\") {\n      for (var i = 0; i < rects.length; i++) {\n        if ((rect = rects[i]).left != rect.right) {\n          break;\n        }\n      }\n    } else {\n      for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n        if ((rect = rects[i$1]).left != rect.right) {\n          break;\n        }\n      }\n    }\n\n    return rect;\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node,\n        start = place.start,\n        end = place.end,\n        collapse = place.collapse;\n    var rect;\n\n    if (node.nodeType == 3) {\n      // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) {\n        // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) {\n          --start;\n        }\n\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) {\n          ++end;\n        }\n\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {\n          rect = node.parentNode.getBoundingClientRect();\n        } else {\n          rect = getUsefulRect(range(node, start, end).getClientRects(), bias);\n        }\n\n        if (rect.left || rect.right || start == 0) {\n          break;\n        }\n\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n\n      if (ie && ie_version < 11) {\n        rect = maybeUpdateRectForZooming(cm.display.measure, rect);\n      }\n    } else {\n      // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) {\n        collapse = bias = \"right\";\n      }\n\n      var rects;\n\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1) {\n        rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n      } else {\n        rect = node.getBoundingClientRect();\n      }\n    }\n\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n\n      if (rSpan) {\n        rect = {\n          left: rSpan.left,\n          right: rSpan.left + charWidth(cm.display),\n          top: rSpan.top,\n          bottom: rSpan.bottom\n        };\n      } else {\n        rect = nullRect;\n      }\n    }\n\n    var rtop = rect.top - prepared.rect.top,\n        rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n\n    for (; i < heights.length - 1; i++) {\n      if (mid < heights[i]) {\n        break;\n      }\n    }\n\n    var top = i ? heights[i - 1] : 0,\n        bot = heights[i];\n    var result = {\n      left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n      right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n      top: top,\n      bottom: bot\n    };\n\n    if (!rect.left && !rect.right) {\n      result.bogus = true;\n    }\n\n    if (!cm.options.singleCursorHeightPerLine) {\n      result.rtop = rtop;\n      result.rbottom = rbot;\n    }\n\n    return result;\n  } // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n\n\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure)) {\n      return rect;\n    }\n\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {\n      left: rect.left * scaleX,\n      right: rect.right * scaleX,\n      top: rect.top * scaleY,\n      bottom: rect.bottom * scaleY\n    };\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n\n      if (lineView.rest) {\n        for (var i = 0; i < lineView.rest.length; i++) {\n          lineView.measure.caches[i] = {};\n        }\n      }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n\n    for (var i = 0; i < cm.display.view.length; i++) {\n      clearLineMeasurementCacheFor(cm.display.view[i]);\n    }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n\n    if (!cm.options.lineWrapping) {\n      cm.display.maxLineChanged = true;\n    }\n\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) {\n      return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft));\n    }\n\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft;\n  }\n\n  function pageScrollY() {\n    if (chrome && android) {\n      return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop));\n    }\n\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop;\n  }\n\n  function widgetTopHeight(lineObj) {\n    var height = 0;\n\n    if (lineObj.widgets) {\n      for (var i = 0; i < lineObj.widgets.length; ++i) {\n        if (lineObj.widgets[i].above) {\n          height += widgetHeight(lineObj.widgets[i]);\n        }\n      }\n    }\n\n    return height;\n  } // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n\n\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height;\n      rect.bottom += height;\n    }\n\n    if (context == \"line\") {\n      return rect;\n    }\n\n    if (!context) {\n      context = \"local\";\n    }\n\n    var yOff = _heightAtLine(lineObj);\n\n    if (context == \"local\") {\n      yOff += paddingTop(cm.display);\n    } else {\n      yOff -= cm.display.viewOffset;\n    }\n\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff;\n      rect.right += xOff;\n    }\n\n    rect.top += yOff;\n    rect.bottom += yOff;\n    return rect;\n  } // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n\n\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") {\n      return coords;\n    }\n\n    var left = coords.left,\n        top = coords.top; // First move into \"page\" coordinate system\n\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {\n      left: left - lineSpaceBox.left,\n      top: top - lineSpaceBox.top\n    };\n  }\n\n  function _charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) {\n      lineObj = getLine(cm.doc, pos.line);\n    }\n\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);\n  } // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n\n\n  function _cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n\n    if (!preparedMeasure) {\n      preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    }\n\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n\n      if (right) {\n        m.left = m.right;\n      } else {\n        m.right = m.left;\n      }\n\n      return intoCoordSystem(cm, lineObj, m, context);\n    }\n\n    var order = getOrder(lineObj, cm.doc.direction),\n        ch = pos.ch,\n        sticky = pos.sticky;\n\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n\n    if (!order) {\n      return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\");\n    }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos],\n          right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert);\n    }\n\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n\n    if (other != null) {\n      val.other = getBidi(ch, other, sticky != \"before\");\n    }\n\n    return val;\n  } // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n\n\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = _clipPos(cm.doc, pos);\n\n    if (!cm.options.lineWrapping) {\n      left = charWidth(cm.display) * pos.ch;\n    }\n\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = _heightAtLine(lineObj) + paddingTop(cm.display);\n    return {\n      left: left,\n      right: left,\n      top: top,\n      bottom: top + lineObj.height\n    };\n  } // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n\n\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n\n    if (outside) {\n      pos.outside = outside;\n    }\n\n    return pos;\n  } // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n\n\n  function _coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n\n    if (y < 0) {\n      return PosWithInfo(doc.first, 0, null, -1, -1);\n    }\n\n    var lineN = _lineAtHeight(doc, y),\n        last = doc.first + doc.size - 1;\n\n    if (lineN > last) {\n      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1);\n    }\n\n    if (x < 0) {\n      x = 0;\n    }\n\n    var lineObj = getLine(doc, lineN);\n\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n\n      if (!collapsed) {\n        return found;\n      }\n\n      var rangeEnd = collapsed.find(1);\n\n      if (rangeEnd.line == lineN) {\n        return rangeEnd;\n      }\n\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) {\n      return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y;\n    }, end, 0);\n    end = findFirst(function (ch) {\n      return measureCharPrepared(cm, preparedMeasure, ch).top > y;\n    }, begin, end);\n    return {\n      begin: begin,\n      end: end\n    };\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) {\n      preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    }\n\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop);\n  } // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n\n\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x;\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    // Move y into line-local coordinate space\n    y -= _heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj); // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n\n    var widgetHeight = widgetTopHeight(lineObj);\n    var begin = 0,\n        end = lineObj.text.length,\n        ltr = true;\n    var order = getOrder(lineObj, cm.doc.direction); // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)(cm, lineObj, lineNo, preparedMeasure, order, x, y);\n      ltr = part.level != 1; // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    } // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n\n\n    var chAround = null,\n        boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight;\n      box.bottom += widgetHeight;\n\n      if (!boxIsAfter(box, x, y, false)) {\n        return false;\n      }\n\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n\n      return true;\n    }, begin, end);\n    var baseX,\n        sticky,\n        outside = false; // If a box around the coordinates was found, use that\n\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x,\n          atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) {\n        ch++;\n      } // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n\n\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" : measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y == ltr ? \"after\" : \"before\"; // Now get accurate coordinates for this place, in order to get a\n      // base X position\n\n      var coords = _cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo, ch, sticky, outside, x - baseX);\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i],\n          ltr = part.level != 1;\n      return boxIsAfter(_cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"), \"line\", lineObj, preparedMeasure), x, y, true);\n    }, 0, order.length - 1);\n    var part = order[index]; // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n\n    if (index > 0) {\n      var ltr = part.level != 1;\n\n      var start = _cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"), \"line\", lineObj, preparedMeasure);\n\n      if (boxIsAfter(start, x, y, true) && start.top > y) {\n        part = order[index - 1];\n      }\n    }\n\n    return part;\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) {\n      end--;\n    }\n\n    var part = null,\n        closestDist = null;\n\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n\n      if (p.from >= end || p.to <= begin) {\n        continue;\n      }\n\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right; // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n\n    if (!part) {\n      part = order[order.length - 1];\n    } // Clip the part to the wrapped line.\n\n\n    if (part.from < begin) {\n      part = {\n        from: begin,\n        to: part.to,\n        level: part.level\n      };\n    }\n\n    if (part.to > end) {\n      part = {\n        from: part.from,\n        to: end,\n        level: part.level\n      };\n    }\n\n    return part;\n  }\n\n  var measureText; // Compute the default text height.\n\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) {\n      return display.cachedTextHeight;\n    }\n\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\"); // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n\n    if (height > 3) {\n      display.cachedTextHeight = height;\n    }\n\n    removeChildren(display.measure);\n    return height || 1;\n  } // Compute the default character width.\n\n\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) {\n      return display.cachedCharWidth;\n    }\n\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(),\n        width = (rect.right - rect.left) / 10;\n\n    if (width > 2) {\n      display.cachedCharWidth = width;\n    }\n\n    return width || 10;\n  } // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n\n\n  function getDimensions(cm) {\n    var d = cm.display,\n        left = {},\n        width = {};\n    var gutterLeft = d.gutters.clientLeft;\n\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n\n    return {\n      fixedPos: compensateForHScroll(d),\n      gutterTotalWidth: d.gutters.offsetWidth,\n      gutterLeft: left,\n      gutterWidth: width,\n      wrapperWidth: d.wrapper.clientWidth\n    };\n  } // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n\n\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;\n  } // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n\n\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display),\n        wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) {\n        return 0;\n      }\n\n      var widgetsHeight = 0;\n\n      if (line.widgets) {\n        for (var i = 0; i < line.widgets.length; i++) {\n          if (line.widgets[i].height) {\n            widgetsHeight += line.widgets[i].height;\n          }\n        }\n      }\n\n      if (wrapping) {\n        return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;\n      } else {\n        return widgetsHeight + th;\n      }\n    };\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc,\n        est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n\n      if (estHeight != line.height) {\n        updateLineHeight(line, estHeight);\n      }\n    });\n  } // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n\n\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") {\n      return null;\n    }\n\n    var x,\n        y,\n        space = display.lineSpace.getBoundingClientRect(); // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n\n    try {\n      x = e.clientX - space.left;\n      y = e.clientY - space.top;\n    } catch (e) {\n      return null;\n    }\n\n    var coords = _coordsChar(cm, x, y),\n        line;\n\n    if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n\n    return coords;\n  } // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n\n\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) {\n      return null;\n    }\n\n    n -= cm.display.viewFrom;\n\n    if (n < 0) {\n      return null;\n    }\n\n    var view = cm.display.view;\n\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n\n      if (n < 0) {\n        return i;\n      }\n    }\n  } // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n\n\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) {\n      from = cm.doc.first;\n    }\n\n    if (to == null) {\n      to = cm.doc.first + cm.doc.size;\n    }\n\n    if (!lendiff) {\n      lendiff = 0;\n    }\n\n    var display = cm.display;\n\n    if (lendiff && to < display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers > from)) {\n      display.updateLineNumbers = from;\n    }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) {\n      // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo) {\n        resetView(cm);\n      }\n    } else if (to <= display.viewFrom) {\n      // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) {\n      // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) {\n      // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) {\n      // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else {\n      // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n\n    if (ext) {\n      if (to < ext.lineN) {\n        ext.lineN += lendiff;\n      } else if (from < ext.lineN + ext.size) {\n        display.externalMeasured = null;\n      }\n    }\n  } // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n\n\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display,\n        ext = cm.display.externalMeasured;\n\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size) {\n      display.externalMeasured = null;\n    }\n\n    if (line < display.viewFrom || line >= display.viewTo) {\n      return;\n    }\n\n    var lineView = display.view[findViewIndex(cm, line)];\n\n    if (lineView.node == null) {\n      return;\n    }\n\n    var arr = lineView.changes || (lineView.changes = []);\n\n    if (indexOf(arr, type) == -1) {\n      arr.push(type);\n    }\n  } // Clear the view.\n\n\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN),\n        diff,\n        view = cm.display.view;\n\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size) {\n      return {\n        index: index,\n        lineN: newN\n      };\n    }\n\n    var n = cm.display.viewFrom;\n\n    for (var i = 0; i < index; i++) {\n      n += view[i].size;\n    }\n\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) {\n          return null;\n        }\n\n        diff = n + view[index].size - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n\n      oldN += diff;\n      newN += diff;\n    }\n\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) {\n        return null;\n      }\n\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n\n    return {\n      index: index,\n      lineN: newN\n    };\n  } // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n\n\n  function adjustView(cm, from, to) {\n    var display = cm.display,\n        view = display.view;\n\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from) {\n        display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);\n      } else if (display.viewFrom < from) {\n        display.view = display.view.slice(findViewIndex(cm, from));\n      }\n\n      display.viewFrom = from;\n\n      if (display.viewTo < to) {\n        display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));\n      } else if (display.viewTo > to) {\n        display.view = display.view.slice(0, findViewIndex(cm, to));\n      }\n    }\n\n    display.viewTo = to;\n  } // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n\n\n  function countDirtyView(cm) {\n    var view = cm.display.view,\n        dirty = 0;\n\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) {\n        ++dirty;\n      }\n    }\n\n    return dirty;\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if (primary === void 0) primary = true;\n    var doc = cm.doc,\n        result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) {\n        continue;\n      }\n\n      var range = doc.sel.ranges[i];\n\n      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) {\n        continue;\n      }\n\n      var collapsed = range.empty();\n\n      if (collapsed || cm.options.showCursorWhenSelecting) {\n        drawSelectionCursor(cm, range.head, curFragment);\n      }\n\n      if (!collapsed) {\n        drawSelectionRange(cm, range, selFragment);\n      }\n    }\n\n    return result;\n  } // Draws a cursor for the given range\n\n\n  function drawSelectionCursor(cm, head, output) {\n    var pos = _cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) {\n    return a.top - b.top || a.left - b.left;\n  } // Draws the given range as a highlighted selection\n\n\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display,\n        doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display),\n        leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) {\n        top = 0;\n      }\n\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\"));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n\n      function coords(ch, bias) {\n        return _charCoords(cm, Pos(line, ch), \"div\", lineObj, bias);\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = dir == \"ltr\" == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop];\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n        var openStart = fromArg == null && from == 0,\n            openEnd = toArg == null && to == lineLen;\n        var first = i == 0,\n            last = !order || i == order.length - 1;\n\n        if (toPos.top - fromPos.top <= 3) {\n          // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else {\n          // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n\n          if (fromPos.bottom < toPos.top) {\n            add(leftSide, fromPos.bottom, null, toPos.top);\n          }\n\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) {\n          start = fromPos;\n        }\n\n        if (cmpCoords(toPos, start) < 0) {\n          start = toPos;\n        }\n\n        if (!end || cmpCoords(fromPos, end) < 0) {\n          end = fromPos;\n        }\n\n        if (cmpCoords(toPos, end) < 0) {\n          end = toPos;\n        }\n      });\n      return {\n        start: start,\n        end: end\n      };\n    }\n\n    var sFrom = range.from(),\n        sTo = range.to();\n\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line),\n          toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n\n      if (leftEnd.bottom < rightStart.top) {\n        add(leftSide, leftEnd.bottom, null, rightStart.top);\n      }\n    }\n\n    output.appendChild(fragment);\n  } // Cursor-blinking\n\n\n  function restartBlink(cm) {\n    if (!cm.state.focused) {\n      return;\n    }\n\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n\n    if (cm.options.cursorBlinkRate > 0) {\n      display.blinker = setInterval(function () {\n        return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate);\n    } else if (cm.options.cursorBlinkRate < 0) {\n      display.cursorDiv.style.visibility = \"hidden\";\n    }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.state.focused) {\n      cm.display.input.focus();\n      onFocus(cm);\n    }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () {\n      if (cm.state.delayingBlurEvent) {\n        cm.state.delayingBlurEvent = false;\n        onBlur(cm);\n      }\n    }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n    }\n\n    if (cm.options.readOnly == \"nocursor\") {\n      return;\n    }\n\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\"); // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n\n        if (webkit) {\n          setTimeout(function () {\n            return cm.display.input.reset(true);\n          }, 20);\n        } // Issue #1730\n\n      }\n\n      cm.display.input.receivedFocus();\n    }\n\n    restartBlink(cm);\n  }\n\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) {\n      return;\n    }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n\n    clearInterval(cm.display.blinker);\n    setTimeout(function () {\n      if (!cm.state.focused) {\n        cm.display.shift = false;\n      }\n    }, 150);\n  } // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n\n\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i],\n          wrapping = cm.options.lineWrapping;\n      var height = void 0,\n          width = 0;\n\n      if (cur.hidden) {\n        continue;\n      }\n\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top; // Check that lines don't extend past the right of the current\n        // editor width\n\n        if (!wrapping && cur.text.firstChild) {\n          width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1;\n        }\n      }\n\n      var diff = cur.line.height - height;\n\n      if (diff > .005 || diff < -.005) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n\n        if (cur.rest) {\n          for (var j = 0; j < cur.rest.length; j++) {\n            updateWidgetHeight(cur.rest[j]);\n          }\n        }\n      }\n\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n  } // Read and store the height of line widgets associated with the\n  // given line.\n\n\n  function updateWidgetHeight(line) {\n    if (line.widgets) {\n      for (var i = 0; i < line.widgets.length; ++i) {\n        var w = line.widgets[i],\n            parent = w.node.parentNode;\n\n        if (parent) {\n          w.height = parent.offsetHeight;\n        }\n      }\n    }\n  } // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n\n\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = _lineAtHeight(doc, top),\n        to = _lineAtHeight(doc, bottom); // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n\n\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line,\n          ensureTo = viewport.ensure.to.line;\n\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n\n    return {\n      from: from,\n      to: Math.max(to, from + 1)\n    };\n  } // SCROLLING THINGS INTO VIEW\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n\n\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) {\n      return;\n    }\n\n    var display = cm.display,\n        box = display.sizer.getBoundingClientRect(),\n        doScroll = null;\n\n    if (rect.top + box.top < 0) {\n      doScroll = true;\n    } else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) {\n      doScroll = false;\n    }\n\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200B\", null, \"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + rect.left + \"px; width: \" + Math.max(2, rect.right - rect.left) + \"px;\");\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  } // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n\n\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) {\n      margin = 0;\n    }\n\n    var rect;\n\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n    }\n\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n\n      var coords = _cursorCoords(cm, pos);\n\n      var endCoords = !end || end == pos ? coords : _cursorCoords(cm, end);\n      rect = {\n        left: Math.min(coords.left, endCoords.left),\n        top: Math.min(coords.top, endCoords.top) - margin,\n        right: Math.max(coords.left, endCoords.left),\n        bottom: Math.max(coords.bottom, endCoords.bottom) + margin\n      };\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop,\n          startLeft = cm.doc.scrollLeft;\n\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) {\n          changed = true;\n        }\n      }\n\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) {\n          changed = true;\n        }\n      }\n\n      if (!changed) {\n        break;\n      }\n    }\n\n    return rect;\n  } // Scroll a given set of coordinates into view (immediately).\n\n\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n\n    if (scrollPos.scrollTop != null) {\n      updateScrollTop(cm, scrollPos.scrollTop);\n    }\n\n    if (scrollPos.scrollLeft != null) {\n      setScrollLeft(cm, scrollPos.scrollLeft);\n    }\n  } // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n\n\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display,\n        snapMargin = textHeight(cm.display);\n\n    if (rect.top < 0) {\n      rect.top = 0;\n    }\n\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm),\n        result = {};\n\n    if (rect.bottom - rect.top > screen) {\n      rect.bottom = rect.top + screen;\n    }\n\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin,\n        atBottom = rect.bottom > docBottom - snapMargin;\n\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n\n      if (newTop != screentop) {\n        result.scrollTop = newTop;\n      }\n    }\n\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n    var tooWide = rect.right - rect.left > screenw;\n\n    if (tooWide) {\n      rect.right = rect.left + screenw;\n    }\n\n    if (rect.left < 10) {\n      result.scrollLeft = 0;\n    } else if (rect.left < screenleft) {\n      result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10));\n    } else if (rect.right > screenw + screenleft - 3) {\n      result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw;\n    }\n\n    return result;\n  } // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n\n\n  function addToScrollTop(cm, top) {\n    if (top == null) {\n      return;\n    }\n\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  } // Make sure that at the end of the operation the current cursor is\n  // shown.\n\n\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {\n      from: cur,\n      to: cur,\n      margin: cm.options.cursorScrollMargin\n    };\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) {\n      resolveScrollToPos(cm);\n    }\n\n    if (x != null) {\n      cm.curOp.scrollLeft = x;\n    }\n\n    if (y != null) {\n      cm.curOp.scrollTop = y;\n    }\n  }\n\n  function scrollToRange(cm, range) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range;\n  } // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n\n\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from),\n          to = estimateCoords(cm, range.to);\n      scrollToCoordsRange(cm, from, to, range.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  } // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n\n\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) {\n      return;\n    }\n\n    if (!gecko) {\n      updateDisplaySimple(cm, {\n        top: val\n      });\n    }\n\n    setScrollTop(cm, val, true);\n\n    if (gecko) {\n      updateDisplaySimple(cm);\n    }\n\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\n\n    if (cm.display.scroller.scrollTop == val && !forceScroll) {\n      return;\n    }\n\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n\n    if (cm.display.scroller.scrollTop != val) {\n      cm.display.scroller.scrollTop = val;\n    }\n  } // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n\n\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) {\n      return;\n    }\n\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n\n    if (cm.display.scroller.scrollLeft != val) {\n      cm.display.scroller.scrollLeft = val;\n    }\n\n    cm.display.scrollbars.setScrollLeft(val);\n  } // SCROLLBARS\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n\n\n  function measureForScrollbars(cm) {\n    var d = cm.display,\n        gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth,\n      clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    };\n  }\n\n  var NativeScrollbars = function NativeScrollbars(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert);\n    place(horiz);\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) {\n        scroll(vert.scrollTop, \"vertical\");\n      }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) {\n        scroll(horiz.scrollLeft, \"horizontal\");\n      }\n    });\n    this.checkedZeroWidth = false; // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n\n    if (ie && ie_version < 8) {\n      this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\";\n    }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0); // A bug in IE8 can cause this value to be negative, so guard it.\n\n      this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width = Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) {\n        this.zeroWidthHack();\n      }\n\n      this.checkedZeroWidth = true;\n    }\n\n    return {\n      right: needsV ? sWidth : 0,\n      bottom: needsH ? sWidth : 0\n    };\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) {\n      this.horiz.scrollLeft = pos;\n    }\n\n    if (this.disableHoriz) {\n      this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\");\n    }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) {\n      this.vert.scrollTop = pos;\n    }\n\n    if (this.disableVert) {\n      this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\");\n    }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed();\n    this.disableVert = new Delayed();\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2) : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n\n      if (elt != bar) {\n        bar.style.pointerEvents = \"none\";\n      } else {\n        delay.set(1000, maybeDisable);\n      }\n    }\n\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function NullScrollbars() {};\n\n  NullScrollbars.prototype.update = function () {\n    return {\n      bottom: 0,\n      right: 0\n    };\n  };\n\n  NullScrollbars.prototype.setScrollLeft = function () {};\n\n  NullScrollbars.prototype.setScrollTop = function () {};\n\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) {\n      measure = measureForScrollbars(cm);\n    }\n\n    var startWidth = cm.display.barWidth,\n        startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping) {\n        updateHeightsInViewport(cm);\n      }\n\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth;\n      startHeight = cm.display.barHeight;\n    }\n  } // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n\n\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else {\n      d.scrollbarFiller.style.display = \"\";\n    }\n\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else {\n      d.gutterFiller.style.display = \"\";\n    }\n  }\n\n  var scrollbarModel = {\n    \"native\": NativeScrollbars,\n    \"null\": NullScrollbars\n  };\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n\n      if (cm.display.scrollbars.addClass) {\n        rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n      }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller); // Prevent clicks in the scrollbars from killing focus\n\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) {\n          setTimeout(function () {\n            return cm.display.input.focus();\n          }, 0);\n        }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") {\n        setScrollLeft(cm, pos);\n      } else {\n        updateScrollTop(cm, pos);\n      }\n    }, cm);\n\n    if (cm.display.scrollbars.addClass) {\n      addClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n    }\n  } // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n\n  var nextOpId = 0; // Start a new operation.\n\n  function _startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,\n      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height,\n      // Used to detect need to update scrollbar\n      forceUpdate: false,\n      // Used to force a redraw\n      updateInput: 0,\n      // Whether to reset the input textarea\n      typing: false,\n      // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,\n      // Accumulated changes, for firing change events\n      cursorActivityHandlers: null,\n      // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0,\n      // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false,\n      // Whether the selection needs to be redrawn\n      updateMaxLine: false,\n      // Set when the widest line needs to be determined anew\n      scrollLeft: null,\n      scrollTop: null,\n      // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,\n      // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId // Unique ID\n\n    };\n    pushOperation(cm.curOp);\n  } // Finish an operation, updating the display and signalling delayed events\n\n\n  function _endOperation(cm) {\n    var op = cm.curOp;\n\n    if (op) {\n      finishOperation(op, function (group) {\n        for (var i = 0; i < group.ops.length; i++) {\n          group.ops[i].cm.curOp = null;\n        }\n\n        endOperations(group);\n      });\n    }\n  } // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n\n\n  function endOperations(group) {\n    var ops = group.ops;\n\n    for (var i = 0; i < ops.length; i++) // Read DOM\n    {\n      endOperation_R1(ops[i]);\n    }\n\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n    {\n      endOperation_W1(ops[i$1]);\n    }\n\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n    {\n      endOperation_R2(ops[i$2]);\n    }\n\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n    {\n      endOperation_W2(ops[i$3]);\n    }\n\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n    {\n      endOperation_finish(ops[i$4]);\n    }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm,\n        display = cm.display;\n    maybeClipScrollbars(cm);\n\n    if (op.updateMaxLine) {\n      findMaxLine(cm);\n    }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && {\n      top: op.scrollTop,\n      ensure: op.scrollToPos\n    }, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm,\n        display = cm.display;\n\n    if (op.updatedDisplay) {\n      updateHeightsInViewport(cm);\n    }\n\n    op.barMeasure = measureForScrollbars(cm); // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged) {\n      op.preparedSelection = display.input.prepareSelection();\n    }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n\n      if (op.maxScrollLeft < cm.doc.scrollLeft) {\n        setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);\n      }\n\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n\n    if (op.preparedSelection) {\n      cm.display.input.showSelection(op.preparedSelection, takeFocus);\n    }\n\n    if (op.updatedDisplay || op.startHeight != cm.doc.height) {\n      updateScrollbars(cm, op.barMeasure);\n    }\n\n    if (op.updatedDisplay) {\n      setDocumentHeight(cm, op.barMeasure);\n    }\n\n    if (op.selectionChanged) {\n      restartBlink(cm);\n    }\n\n    if (cm.state.focused && op.updateInput) {\n      cm.display.input.reset(op.typing);\n    }\n\n    if (takeFocus) {\n      ensureFocus(op.cm);\n    }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm,\n        display = cm.display,\n        doc = cm.doc;\n\n    if (op.updatedDisplay) {\n      postUpdateDisplay(cm, op.update);\n    } // Abort mouse wheel delta measurement, when scrolling explicitly\n\n\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos)) {\n      display.wheelStartX = display.wheelStartY = null;\n    } // Propagate the scroll position to the actual DOM scroller\n\n\n    if (op.scrollTop != null) {\n      setScrollTop(cm, op.scrollTop, op.forceScroll);\n    }\n\n    if (op.scrollLeft != null) {\n      setScrollLeft(cm, op.scrollLeft, true, true);\n    } // If we need to scroll a specific position into view, do so.\n\n\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, _clipPos(doc, op.scrollToPos.from), _clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    } // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n\n\n    var hidden = op.maybeHiddenMarkers,\n        unhidden = op.maybeUnhiddenMarkers;\n\n    if (hidden) {\n      for (var i = 0; i < hidden.length; ++i) {\n        if (!hidden[i].lines.length) {\n          signal(hidden[i], \"hide\");\n        }\n      }\n    }\n\n    if (unhidden) {\n      for (var i$1 = 0; i$1 < unhidden.length; ++i$1) {\n        if (unhidden[i$1].lines.length) {\n          signal(unhidden[i$1], \"unhide\");\n        }\n      }\n    }\n\n    if (display.wrapper.offsetHeight) {\n      doc.scrollTop = cm.display.scroller.scrollTop;\n    } // Fire change events, and delayed event handlers\n\n\n    if (op.changeObjs) {\n      signal(cm, \"changes\", cm, op.changeObjs);\n    }\n\n    if (op.update) {\n      op.update.finish();\n    }\n  } // Run the given function in an operation\n\n\n  function runInOp(cm, f) {\n    if (cm.curOp) {\n      return f();\n    }\n\n    _startOperation(cm);\n\n    try {\n      return f();\n    } finally {\n      _endOperation(cm);\n    }\n  } // Wraps a function in an operation. Returns the wrapped function.\n\n\n  function operation(cm, f) {\n    return function () {\n      if (cm.curOp) {\n        return f.apply(cm, arguments);\n      }\n\n      _startOperation(cm);\n\n      try {\n        return f.apply(cm, arguments);\n      } finally {\n        _endOperation(cm);\n      }\n    };\n  } // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n\n\n  function methodOp(f) {\n    return function () {\n      if (this.curOp) {\n        return f.apply(this, arguments);\n      }\n\n      _startOperation(this);\n\n      try {\n        return f.apply(this, arguments);\n      } finally {\n        _endOperation(this);\n      }\n    };\n  }\n\n  function docMethodOp(f) {\n    return function () {\n      var cm = this.cm;\n\n      if (!cm || cm.curOp) {\n        return f.apply(this, arguments);\n      }\n\n      _startOperation(cm);\n\n      try {\n        return f.apply(this, arguments);\n      } finally {\n        _endOperation(cm);\n      }\n    };\n  } // HIGHLIGHT WORKER\n\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo) {\n      cm.state.highlight.set(time, bind(highlightWorker, cm));\n    }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n\n    if (doc.highlightFrontier >= cm.display.viewTo) {\n      return;\n    }\n\n    var end = +new Date() + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) {\n        // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n\n        if (resetState) {\n          context.state = resetState;\n        }\n\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses,\n            newCls = highlighted.classes;\n\n        if (newCls) {\n          line.styleClasses = newCls;\n        } else if (oldCls) {\n          line.styleClasses = null;\n        }\n\n        var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) {\n          ischange = oldStyles[i] != line.styles[i];\n        }\n\n        if (ischange) {\n          changedLines.push(context.line);\n        }\n\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength) {\n          processLine(cm, line.text, context);\n        }\n\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n\n      if (+new Date() > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true;\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n\n    if (changedLines.length) {\n      runInOp(cm, function () {\n        for (var i = 0; i < changedLines.length; i++) {\n          regLineChange(cm, changedLines[i], \"text\");\n        }\n      });\n    }\n  } // DISPLAY DRAWING\n\n\n  var DisplayUpdate = function DisplayUpdate(cm, viewport, force) {\n    var display = cm.display;\n    this.viewport = viewport; // Store some values that we'll need later (but don't want to force a relayout for)\n\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type)) {\n      this.events.push(arguments);\n    }\n  };\n\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++) {\n      signal.apply(null, this.events[i]);\n    }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) {\n      return null;\n    }\n\n    var active = activeElt();\n\n    if (!active || !contains(cm.display.lineDiv, active)) {\n      return null;\n    }\n\n    var result = {\n      activeElt: active\n    };\n\n    if (window.getSelection) {\n      var sel = window.getSelection();\n\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n\n    return result;\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) {\n      return;\n    }\n\n    snapshot.activeElt.focus();\n\n    if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(),\n          range = document.createRange();\n      range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  } // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n\n\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display,\n        doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false;\n    } // Bail out if the visible area is already rendered and nothing changed.\n\n\n    if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && countDirtyView(cm) == 0) {\n      return false;\n    }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    } // Compute a suitable new viewport (from & to)\n\n\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n\n    if (display.viewFrom < from && from - display.viewFrom < 20) {\n      from = Math.max(doc.first, display.viewFrom);\n    }\n\n    if (display.viewTo > to && display.viewTo - to < 20) {\n      to = Math.min(end, display.viewTo);\n    }\n\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n    display.viewOffset = _heightAtLine(getLine(cm.doc, display.viewFrom)); // Position the mover div to align with the current scroll position\n\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n    var toUpdate = countDirtyView(cm);\n\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo)) {\n      return false;\n    } // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n\n\n    var selSnapshot = selectionSnapshot(cm);\n\n    if (toUpdate > 4) {\n      display.lineDiv.style.display = \"none\";\n    }\n\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n\n    if (toUpdate > 4) {\n      display.lineDiv.style.display = \"\";\n    }\n\n    display.renderedView = display.view; // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n\n    restoreSelection(selSnapshot); // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n    return true;\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null) {\n          viewport = {\n            top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)\n          };\n        } // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n\n\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo) {\n          break;\n        }\n      }\n\n      if (!updateDisplayIfNeeded(cm, update)) {\n        break;\n      }\n\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom;\n      cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  } // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n\n\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display,\n        lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv,\n        cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling; // Works around a throw-scroll bug in OS X Webkit\n\n      if (webkit && mac && cm.display.currentWheelTarget == node) {\n        node.style.display = \"none\";\n      } else {\n        node.parentNode.removeChild(node);\n      }\n\n      return next;\n    }\n\n    var view = display.view,\n        lineN = display.viewFrom; // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ;else if (!lineView.node || lineView.node.parentNode != container) {\n        // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else {\n        // Already drawn\n        while (cur != lineView.node) {\n          cur = rm(cur);\n        }\n\n        var updateNumber = lineNumbers && updateNumbersFrom != null && updateNumbersFrom <= lineN && lineView.lineNumber;\n\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) {\n            updateNumber = false;\n          }\n\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n\n    while (cur) {\n      cur = rm(cur);\n    }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = measure.docHeight + cm.display.barHeight + scrollGap(cm) + \"px\";\n  } // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n\n\n  function alignHorizontally(cm) {\n    var display = cm.display,\n        view = display.view;\n\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) {\n      return;\n    }\n\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth,\n        left = comp + \"px\";\n\n    for (var i = 0; i < view.length; i++) {\n      if (!view[i].hidden) {\n        if (cm.options.fixedGutter) {\n          if (view[i].gutter) {\n            view[i].gutter.style.left = left;\n          }\n\n          if (view[i].gutterBackground) {\n            view[i].gutterBackground.style.left = left;\n          }\n        }\n\n        var align = view[i].alignable;\n\n        if (align) {\n          for (var j = 0; j < align.length; j++) {\n            align[j].style.left = left;\n          }\n        }\n      }\n    }\n\n    if (cm.options.fixedGutter) {\n      display.gutters.style.left = comp + gutterW + \"px\";\n    }\n  } // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n\n\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) {\n      return false;\n    }\n\n    var doc = cm.doc,\n        last = lineNumberFor(cm.options, doc.first + doc.size - 1),\n        display = cm.display;\n\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)], \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth,\n          padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true;\n    }\n\n    return false;\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [],\n        sawLineNumbers = false;\n\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i],\n          style = null;\n\n      if (typeof name != \"string\") {\n        style = name.style;\n        name = name.className;\n      }\n\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) {\n          continue;\n        } else {\n          sawLineNumbers = true;\n        }\n      }\n\n      result.push({\n        className: name,\n        style: style\n      });\n    }\n\n    if (lineNumbers && !sawLineNumbers) {\n      result.push({\n        className: \"CodeMirror-linenumbers\",\n        style: null\n      });\n    }\n\n    return result;\n  } // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n\n\n  function renderGutters(display) {\n    var gutters = display.gutters,\n        specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n\n      if (style) {\n        gElt.style.cssText = style;\n      }\n\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  } // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input; // Covers bottom-right square when both scrollbars are present.\n\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\"); // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\"); // Will contain the actual code, positioned to cover the viewport.\n\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\"); // Elements are added to these to represent selection and cursors.\n\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\"); // A visibility: hidden element used to find the size of things.\n\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\"); // When lines outside of the viewport are measured, they are drawn in this.\n\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\"); // Wraps everything that needs to exist inside the vertically-padded coordinate system\n\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv], null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\"); // Moved around its parent to cover visible view.\n\n    d.mover = elt(\"div\", [lines], null, \"position: relative\"); // Set to the height of the document, allowing scrolling.\n\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null; // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\"); // Will contain the gutters, if any.\n\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null; // Actual scrollable element.\n\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\"); // The element in which the editor lives.\n\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\"); // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n\n    if (ie && ie_version < 8) {\n      d.gutters.style.zIndex = -1;\n      d.scroller.style.paddingRight = 0;\n    }\n\n    if (!webkit && !(gecko && mobile)) {\n      d.scroller.draggable = true;\n    }\n\n    if (place) {\n      if (place.appendChild) {\n        place.appendChild(d.wrapper);\n      } else {\n        place(d.wrapper);\n      }\n    } // Current rendered range (may be bigger than the view window).\n\n\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first; // Information about the rendered lines.\n\n    d.view = [];\n    d.renderedView = null; // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n\n    d.externalMeasured = null; // Empty space (in pixels) above the view\n\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false; // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null; // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n\n    d.alignWidgets = false;\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null; // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false; // Used for measuring wheel scrolling granularity\n\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null; // True when shift is held down.\n\n    d.shift = false; // Used to track whether anything happened since the context menu\n    // was opened.\n\n    d.selForContextMenu = null;\n    d.activeTouch = null;\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n    input.init(d);\n  } // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n\n  var wheelSamples = 0,\n      wheelPixelsPerUnit = null; // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n\n  if (ie) {\n    wheelPixelsPerUnit = -.53;\n  } else if (gecko) {\n    wheelPixelsPerUnit = 15;\n  } else if (chrome) {\n    wheelPixelsPerUnit = -.7;\n  } else if (safari) {\n    wheelPixelsPerUnit = -1 / 3;\n  }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX,\n        dy = e.wheelDeltaY;\n\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) {\n      dx = e.detail;\n    }\n\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) {\n      dy = e.detail;\n    } else if (dy == null) {\n      dy = e.wheelDelta;\n    }\n\n    return {\n      x: dx,\n      y: dy\n    };\n  }\n\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta;\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e),\n        dx = delta.x,\n        dy = delta.y;\n    var display = cm.display,\n        scroll = display.scroller; // Quit if there's nothing to scroll here\n\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n\n    if (!(dx && canScrollX || dy && canScrollY)) {\n      return;\n    } // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n\n\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer;\n          }\n        }\n      }\n    } // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n\n\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY) {\n        updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit));\n      }\n\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit)); // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n\n      if (!dy || dy && canScrollY) {\n        e_preventDefault(e);\n      }\n\n      display.wheelStartX = null; // Abort measurement, if in progress\n\n      return;\n    } // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n\n\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop,\n          bot = top + display.wrapper.clientHeight;\n\n      if (pixels < 0) {\n        top = Math.max(0, top + pixels - 50);\n      } else {\n        bot = Math.min(cm.doc.height, bot + pixels + 50);\n      }\n\n      updateDisplaySimple(cm, {\n        top: top,\n        bottom: bot\n      });\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft;\n        display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx;\n        display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) {\n            return;\n          }\n\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = movedY && display.wheelDY && movedY / display.wheelDY || movedX && display.wheelDX && movedX / display.wheelDX;\n          display.wheelStartX = display.wheelStartY = null;\n\n          if (!sample) {\n            return;\n          }\n\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx;\n        display.wheelDY += dy;\n      }\n    }\n  } // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n\n\n  var Selection = function Selection(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () {\n    return this.ranges[this.primIndex];\n  };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) {\n      return true;\n    }\n\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) {\n      return false;\n    }\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i],\n          there = other.ranges[i];\n\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));\n    }\n\n    return new Selection(out, this.primIndex);\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++) {\n      if (!this.ranges[i].empty()) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) {\n      end = pos;\n    }\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  var Range = function Range(anchor, head) {\n    this.anchor = anchor;\n    this.head = head;\n  };\n\n  Range.prototype.from = function () {\n    return minPos(this.anchor, this.head);\n  };\n\n  Range.prototype.to = function () {\n    return maxPos(this.anchor, this.head);\n  };\n\n  Range.prototype.empty = function () {\n    return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;\n  }; // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n\n\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) {\n      return cmp(a.from(), b.from());\n    });\n    primIndex = indexOf(ranges, prim);\n\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i],\n          prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()),\n            to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n\n        if (i <= primIndex) {\n          --primIndex;\n        }\n\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n\n    return new Selection(ranges, primIndex);\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0);\n  } // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n\n\n  function changeEnd(change) {\n    if (!change.text) {\n      return change.to;\n    }\n\n    return Pos(change.from.line + change.text.length - 1, lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));\n  } // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n\n\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) {\n      return pos;\n    }\n\n    if (cmp(pos, change.to) <= 0) {\n      return changeEnd(change);\n    }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1,\n        ch = pos.ch;\n\n    if (pos.line == change.to.line) {\n      ch += changeEnd(change).ch - change.to.ch;\n    }\n\n    return Pos(line, ch);\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change), adjustForChange(range.head, change)));\n    }\n\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex);\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line) {\n      return Pos(nw.line, pos.ch - old.ch + nw.ch);\n    } else {\n      return Pos(nw.line + (pos.line - old.line), pos.ch);\n    }\n  } // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n\n\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0),\n        newPrev = oldPrev;\n\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i],\n            inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n\n    return new Selection(out, doc.sel.primIndex);\n  } // Used to get the editor into a consistent state again when options change.\n\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) {\n        line.stateAfter = null;\n      }\n\n      if (line.styles) {\n        line.styles = null;\n      }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n\n    if (cm.curOp) {\n      regChange(cm);\n    }\n  } // DOCUMENT DATA STRUCTURE\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n\n\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" && (!doc.cm || doc.cm.options.wholeLineUpdateBefore);\n  } // Perform a change on the document data structure.\n\n\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {\n      return markedSpans ? markedSpans[n] : null;\n    }\n\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n\n    function linesFor(start, end) {\n      var result = [];\n\n      for (var i = start; i < end; ++i) {\n        result.push(new Line(text[i], spansFor(i), estimateHeight));\n      }\n\n      return result;\n    }\n\n    var from = change.from,\n        to = change.to,\n        text = change.text;\n    var firstLine = getLine(doc, from.line),\n        lastLine = getLine(doc, to.line);\n    var lastText = lst(text),\n        lastSpans = spansFor(text.length - 1),\n        nlines = to.line - from.line; // Adjust the line structure\n\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n\n      if (nlines) {\n        doc.remove(from.line, nlines);\n      }\n\n      if (added.length) {\n        doc.insert(from.line, added);\n      }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n\n      if (nlines > 1) {\n        doc.remove(from.line + 1, nlines - 1);\n      }\n\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  } // Call f for all linked documents.\n\n\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) {\n        for (var i = 0; i < doc.linked.length; ++i) {\n          var rel = doc.linked[i];\n\n          if (rel.doc == skip) {\n            continue;\n          }\n\n          var shared = sharedHist && rel.sharedHist;\n\n          if (sharedHistOnly && !shared) {\n            continue;\n          }\n\n          f(rel.doc, shared);\n          propagate(rel.doc, doc, shared);\n        }\n      }\n    }\n\n    propagate(doc, null, true);\n  } // Attach a document to an editor.\n\n\n  function attachDoc(cm, doc) {\n    if (doc.cm) {\n      throw new Error(\"This document is already in use.\");\n    }\n\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n\n    if (!cm.options.lineWrapping) {\n      findMaxLine(cm);\n    }\n\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n    (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(startGen) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = [];\n    this.undone = [];\n    this.undoDepth = Infinity; // Used to track when changes can be merged into a single undo\n    // event\n\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null; // Used by the isClean() method\n\n    this.generation = this.maxGeneration = startGen || 1;\n  } // Create a history change event from an updateDoc-style change\n  // object.\n\n\n  function historyChangeFromChange(doc, change) {\n    var histChange = {\n      from: copyPos(change.from),\n      to: changeEnd(change),\n      text: getBetween(doc, change.from, change.to)\n    };\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) {\n      return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    }, true);\n    return histChange;\n  } // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n\n\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n\n      if (last.ranges) {\n        array.pop();\n      } else {\n        break;\n      }\n    }\n  } // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n\n\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done);\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done);\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done);\n    }\n  } // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n\n\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date(),\n        cur;\n    var last;\n\n    if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && (change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500) || change.origin.charAt(0) == \"*\")) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n\n      if (!before || !before.ranges) {\n        pushSelectionToHistory(doc.sel, hist.done);\n      }\n\n      cur = {\n        changes: [historyChangeFromChange(doc, change)],\n        generation: hist.generation\n      };\n      hist.done.push(cur);\n\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n\n        if (!hist.done[0].ranges) {\n          hist.done.shift();\n        }\n      }\n    }\n\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) {\n      signal(doc, \"historyAdded\");\n    }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" || ch == \"+\" && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && new Date() - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);\n  } // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n\n\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history,\n        origin = options && options.origin; // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n\n    if (opId == hist.lastSelOp || origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))) {\n      hist.done[hist.done.length - 1] = sel;\n    } else {\n      pushSelectionToHistory(sel, hist.done);\n    }\n\n    hist.lastSelTime = +new Date();\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n\n    if (options && options.clearRedo !== false) {\n      clearSelectionEvents(hist.undone);\n    }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n\n    if (!(top && top.ranges && top.equals(sel))) {\n      dest.push(sel);\n    }\n  } // Used to store marked span information in the history.\n\n\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id],\n        n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans) {\n        (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans;\n      }\n\n      ++n;\n    });\n  } // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n\n\n  function removeClearedSpans(spans) {\n    if (!spans) {\n      return null;\n    }\n\n    var out;\n\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) {\n        if (!out) {\n          out = spans.slice(0, i);\n        }\n      } else if (out) {\n        out.push(spans[i]);\n      }\n    }\n\n    return !out ? spans : out.length ? out : null;\n  } // Retrieve and filter the old marked spans stored in a change event.\n\n\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n\n    if (!found) {\n      return null;\n    }\n\n    var nw = [];\n\n    for (var i = 0; i < change.text.length; ++i) {\n      nw.push(removeClearedSpans(found[i]));\n    }\n\n    return nw;\n  } // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n\n\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n\n    if (!old) {\n      return stretched;\n    }\n\n    if (!stretched) {\n      return old;\n    }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i],\n          stretchCur = stretched[i];\n\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n\n          for (var k = 0; k < oldCur.length; ++k) {\n            if (oldCur[k].marker == span.marker) {\n              continue spans;\n            }\n          }\n\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n\n    return old;\n  } // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n\n\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue;\n      }\n\n      var changes = event.changes,\n          newChanges = [];\n      copy.push({\n        changes: newChanges\n      });\n\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j],\n            m = void 0;\n        newChanges.push({\n          from: change.from,\n          to: change.to,\n          text: change.text\n        });\n\n        if (newGroup) {\n          for (var prop in change) {\n            if (m = prop.match(/^spans_(\\d+)$/)) {\n              if (indexOf(newGroup, Number(m[1])) > -1) {\n                lst(newChanges)[prop] = change[prop];\n                delete change[prop];\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return copy;\n  } // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n\n\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n\n        if (posBefore != cmp(other, anchor) < 0) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != cmp(head, other) < 0) {\n          head = other;\n        }\n      }\n\n      return new Range(anchor, head);\n    } else {\n      return new Range(other || head, head);\n    }\n  } // Extend the primary selection range, discard the rest.\n\n\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) {\n      extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    }\n\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  } // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n\n\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend);\n    }\n\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  } // Updates a single range in the selection.\n\n\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  } // Reset the selection to a single range.\n\n\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  } // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n\n\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function update(ranges) {\n        this.ranges = [];\n\n        for (var i = 0; i < ranges.length; i++) {\n          this.ranges[i] = new Range(_clipPos(doc, ranges[i].anchor), _clipPos(doc, ranges[i].head));\n        }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n\n    if (doc.cm) {\n      signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj);\n    }\n\n    if (obj.ranges != sel.ranges) {\n      return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1);\n    } else {\n      return sel;\n    }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done,\n        last = lst(done);\n\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  } // Set a new selection.\n\n\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\")) {\n      sel = filterSelectionChange(doc, sel, options);\n    }\n\n    var bias = options && options.bias || (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm) {\n      ensureCursorVisible(doc.cm);\n    }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) {\n      return;\n    }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n\n    signalLater(doc, \"cursorActivity\", doc);\n  } // Verify that the selection does not partially select any atomic\n  // marked ranges.\n\n\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  } // Return a selection that does not partially select any atomic\n  // ranges.\n\n\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) {\n          out = sel.ranges.slice(0, i);\n        }\n\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel;\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n\n    if (line.markedSpans) {\n      for (var i = 0; i < line.markedSpans.length; ++i) {\n        var sp = line.markedSpans[i],\n            m = sp.marker; // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n        // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n        // is with selectLeft/Right\n\n        var preventCursorLeft = \"selectLeft\" in m ? !m.selectLeft : m.inclusiveLeft;\n        var preventCursorRight = \"selectRight\" in m ? !m.selectRight : m.inclusiveRight;\n\n        if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) && (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n          if (mayClear) {\n            signal(m, \"beforeCursorEnter\");\n\n            if (m.explicitlyCleared) {\n              if (!line.markedSpans) {\n                break;\n              } else {\n                --i;\n                continue;\n              }\n            }\n          }\n\n          if (!m.atomic) {\n            continue;\n          }\n\n          if (oldPos) {\n            var near = m.find(dir < 0 ? 1 : -1),\n                diff = void 0;\n\n            if (dir < 0 ? preventCursorRight : preventCursorLeft) {\n              near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null);\n            }\n\n            if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0)) {\n              return skipAtomicInner(doc, near, pos, dir, mayClear);\n            }\n          }\n\n          var far = m.find(dir < 0 ? -1 : 1);\n\n          if (dir < 0 ? preventCursorLeft : preventCursorRight) {\n            far = movePos(doc, far, dir, far.line == pos.line ? line : null);\n          }\n\n          return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;\n        }\n      }\n    }\n\n    return pos;\n  } // Ensure a given position is not inside an atomic range.\n\n\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, dir, true) || skipAtomicInner(doc, pos, oldPos, -dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true);\n\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0);\n    }\n\n    return found;\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) {\n        return _clipPos(doc, Pos(pos.line - 1));\n      } else {\n        return null;\n      }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) {\n        return Pos(pos.line + 1, 0);\n      } else {\n        return null;\n      }\n    } else {\n      return new Pos(pos.line, pos.ch + dir);\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  } // UPDATING\n  // Allow \"beforeChange\" event handlers to influence a change\n\n\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function cancel() {\n        return obj.canceled = true;\n      }\n    };\n\n    if (update) {\n      obj.update = function (from, to, text, origin) {\n        if (from) {\n          obj.from = _clipPos(doc, from);\n        }\n\n        if (to) {\n          obj.to = _clipPos(doc, to);\n        }\n\n        if (text) {\n          obj.text = text;\n        }\n\n        if (origin !== undefined) {\n          obj.origin = origin;\n        }\n      };\n    }\n\n    signal(doc, \"beforeChange\", doc, obj);\n\n    if (doc.cm) {\n      signal(doc.cm, \"beforeChange\", doc.cm, obj);\n    }\n\n    if (obj.canceled) {\n      if (doc.cm) {\n        doc.cm.curOp.updateInput = 2;\n      }\n\n      return null;\n    }\n\n    return {\n      from: obj.from,\n      to: obj.to,\n      text: obj.text,\n      origin: obj.origin\n    };\n  } // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n\n\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) {\n        return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);\n      }\n\n      if (doc.cm.state.suppressEdits) {\n        return;\n      }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n\n      if (!change) {\n        return;\n      }\n    } // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n\n\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i) {\n        makeChangeInner(doc, {\n          from: split[i].from,\n          to: split[i].to,\n          text: i ? [\"\"] : change.text,\n          origin: change.origin\n        });\n      }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) {\n      return;\n    }\n\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  } // Revert a change stored in a document's history.\n\n\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n\n    if (suppress && !allowSelectionOnly) {\n      return;\n    }\n\n    var hist = doc.history,\n        event,\n        selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone,\n        dest = type == \"undo\" ? hist.undone : hist.done; // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n\n    var i = 0;\n\n    for (; i < source.length; i++) {\n      event = source[i];\n\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges) {\n        break;\n      }\n    }\n\n    if (i == source.length) {\n      return;\n    }\n\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {\n            clearRedo: false\n          });\n          return;\n        }\n\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return;\n      } else {\n        break;\n      }\n    } // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n\n\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({\n      changes: antiChanges,\n      generation: hist.generation\n    });\n    hist.generation = event.generation || ++hist.maxGeneration;\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function loop(i) {\n      var change = event.changes[i];\n      change.origin = type;\n\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {};\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n\n      if (!i && doc.cm) {\n        doc.cm.scrollIntoView({\n          from: change.from,\n          to: changeEnd(change)\n        });\n      }\n\n      var rebased = []; // Propagate to the linked documents\n\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop(i$1);\n      if (returned) return returned.v;\n    }\n  } // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n\n\n  function shiftDoc(doc, distance) {\n    if (distance == 0) {\n      return;\n    }\n\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) {\n      return new Range(Pos(range.anchor.line + distance, range.anchor.ch), Pos(range.head.line + distance, range.head.ch));\n    }), doc.sel.primIndex);\n\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++) {\n        regLineChange(doc.cm, l, \"gutter\");\n      }\n    }\n  } // More lower-level change function, handling only a single document\n  // (not linked ones).\n\n\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp) {\n      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);\n    }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return;\n    }\n\n    if (change.from.line > doc.lastLine()) {\n      return;\n    } // Clip the change to the size of this doc\n\n\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {\n        from: Pos(doc.first, 0),\n        to: Pos(change.to.line + shift, change.to.ch),\n        text: [lst(change.text)],\n        origin: change.origin\n      };\n    }\n\n    var last = doc.lastLine();\n\n    if (change.to.line > last) {\n      change = {\n        from: change.from,\n        to: Pos(last, getLine(doc, last).text.length),\n        text: [change.text[0]],\n        origin: change.origin\n      };\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) {\n      selAfter = computeSelAfterChange(doc, change);\n    }\n\n    if (doc.cm) {\n      makeChangeSingleDocInEditor(doc.cm, change, spans);\n    } else {\n      updateDoc(doc, change, spans);\n    }\n\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0))) {\n      doc.cantEdit = false;\n    }\n  } // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n\n\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc,\n        display = cm.display,\n        from = change.from,\n        to = change.to;\n    var recomputeMaxLength = false,\n        checkWidthStart = from.line;\n\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true;\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1) {\n      signalCursorActivity(cm);\n    }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n\n      if (recomputeMaxLength) {\n        cm.curOp.updateMaxLine = true;\n      }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n    var lendiff = change.text.length - (to.line - from.line) - 1; // Remember that these lines changed, for updating the display\n\n    if (change.full) {\n      regChange(cm);\n    } else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change)) {\n      regLineChange(cm, from.line, \"text\");\n    } else {\n      regChange(cm, from.line, to.line + 1, lendiff);\n    }\n\n    var changesHandler = hasHandler(cm, \"changes\"),\n        changeHandler = hasHandler(cm, \"change\");\n\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from,\n        to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n\n      if (changeHandler) {\n        signalLater(cm, \"change\", cm, obj);\n      }\n\n      if (changesHandler) {\n        (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);\n      }\n    }\n\n    cm.display.selForContextMenu = null;\n  }\n\n  function _replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) {\n      to = from;\n    }\n\n    if (cmp(to, from) < 0) {\n      assign = [to, from], from = assign[0], to = assign[1];\n    }\n\n    if (typeof code == \"string\") {\n      code = doc.splitLines(code);\n    }\n\n    makeChange(doc, {\n      from: from,\n      to: to,\n      text: code,\n      origin: origin\n    });\n  } // Rebasing/resetting history to deal with externally-sourced changes\n\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  } // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n\n\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i],\n          ok = true;\n\n      if (sub.ranges) {\n        if (!sub.copied) {\n          sub = array[i] = sub.deepCopy();\n          sub.copied = true;\n        }\n\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n\n        continue;\n      }\n\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break;\n        }\n      }\n\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line,\n        to = change.to.line,\n        diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  } // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n\n\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle,\n        line = handle;\n\n    if (typeof handle == \"number\") {\n      line = getLine(doc, clipLine(doc, handle));\n    } else {\n      no = lineNo(handle);\n    }\n\n    if (no == null) {\n      return null;\n    }\n\n    if (op(line, no) && doc.cm) {\n      regLineChange(doc.cm, no, changeType);\n    }\n\n    return line;\n  } // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function chunkSize() {\n      return this.lines.length;\n    },\n    // Remove the n lines at offset 'at'.\n    removeInner: function removeInner(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n\n      this.lines.splice(at, n);\n    },\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function collapse(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function insertInner(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n\n      for (var i = 0; i < lines.length; ++i) {\n        lines[i].parent = this;\n      }\n    },\n    // Used to iterate over a part of the tree.\n    iterN: function iterN(at, n, op) {\n      for (var e = at + n; at < e; ++at) {\n        if (op(this.lines[at])) {\n          return true;\n        }\n      }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0,\n        height = 0;\n\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize();\n      height += ch.height;\n      ch.parent = this;\n    }\n\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function chunkSize() {\n      return this.size;\n    },\n    removeInner: function removeInner(at, n) {\n      this.size -= n;\n\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n\n        if (at < sz) {\n          var rm = Math.min(n, sz - at),\n              oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n\n          if (sz == rm) {\n            this.children.splice(i--, 1);\n            child.parent = null;\n          }\n\n          if ((n -= rm) == 0) {\n            break;\n          }\n\n          at = 0;\n        } else {\n          at -= sz;\n        }\n      } // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n\n\n      if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n    collapse: function collapse(lines) {\n      for (var i = 0; i < this.children.length; ++i) {\n        this.children[i].collapse(lines);\n      }\n    },\n    insertInner: function insertInner(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n\n          break;\n        }\n\n        at -= sz;\n      }\n    },\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function maybeSpill() {\n      if (this.children.length <= 10) {\n        return;\n      }\n\n      var me = this;\n\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n\n        if (!me.parent) {\n          // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n        } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n\n        sibling.parent = me.parent;\n      } while (me.children.length > 10);\n\n      me.parent.maybeSpill();\n    },\n    iterN: function iterN(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n\n          if (child.iterN(at, used, op)) {\n            return true;\n          }\n\n          if ((n -= used) == 0) {\n            break;\n          }\n\n          at = 0;\n        } else {\n          at -= sz;\n        }\n      }\n    }\n  }; // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function LineWidget(doc, node, options) {\n    if (options) {\n      for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n          this[opt] = options[opt];\n        }\n      }\n    }\n\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm,\n        ws = this.line.widgets,\n        line = this.line,\n        no = lineNo(line);\n\n    if (no == null || !ws) {\n      return;\n    }\n\n    for (var i = 0; i < ws.length; ++i) {\n      if (ws[i] == this) {\n        ws.splice(i--, 1);\n      }\n    }\n\n    if (!ws.length) {\n      line.widgets = null;\n    }\n\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n    var this$1 = this;\n    var oldH = this.height,\n        cm = this.doc.cm,\n        line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n\n    if (!diff) {\n      return;\n    }\n\n    if (!lineIsHidden(this.doc, line)) {\n      updateLineHeight(line, line.height + diff);\n    }\n\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (_heightAtLine(line) < (cm.curOp && cm.curOp.scrollTop || cm.doc.scrollTop)) {\n      addToScrollTop(cm, diff);\n    }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n\n    if (cm && widget.noHScroll) {\n      cm.display.alignWidgets = true;\n    }\n\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n\n      if (widget.insertAt == null) {\n        widgets.push(widget);\n      } else {\n        widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);\n      }\n\n      widget.line = line;\n\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = _heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n\n        if (aboveVisible) {\n          addToScrollTop(cm, widget.height);\n        }\n\n        cm.curOp.forceUpdate = true;\n      }\n\n      return true;\n    });\n\n    if (cm) {\n      signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle));\n    }\n\n    return widget;\n  } // TEXTMARKERS\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n\n\n  var nextMarkerId = 0;\n\n  var TextMarker = function TextMarker(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  }; // Clear the marker.\n\n\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) {\n      return;\n    }\n\n    var cm = this.doc.cm,\n        withOp = cm && !cm.curOp;\n\n    if (withOp) {\n      _startOperation(cm);\n    }\n\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n\n      if (found) {\n        signalLater(this, \"clear\", found.from, found.to);\n      }\n    }\n\n    var min = null,\n        max = null;\n\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n\n      if (cm && !this.collapsed) {\n        regLineChange(cm, lineNo(line), \"text\");\n      } else if (cm) {\n        if (span.to != null) {\n          max = lineNo(line);\n        }\n\n        if (span.from != null) {\n          min = lineNo(line);\n        }\n      }\n\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm) {\n        updateLineHeight(line, textHeight(cm.display));\n      }\n    }\n\n    if (cm && this.collapsed && !cm.options.lineWrapping) {\n      for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n        var visual = visualLine(this.lines[i$1]),\n            len = lineLength(visual);\n\n        if (len > cm.display.maxLineLength) {\n          cm.display.maxLine = visual;\n          cm.display.maxLineLength = len;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n\n    if (min != null && cm && this.collapsed) {\n      regChange(cm, min, max + 1);\n    }\n\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n\n      if (cm) {\n        reCheckSelection(cm.doc);\n      }\n    }\n\n    if (cm) {\n      signalLater(cm, \"markerCleared\", cm, this, min, max);\n    }\n\n    if (withOp) {\n      _endOperation(cm);\n    }\n\n    if (this.parent) {\n      this.parent.clear();\n    }\n  }; // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n\n\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") {\n      side = 1;\n    }\n\n    var from, to;\n\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n\n        if (side == -1) {\n          return from;\n        }\n      }\n\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n\n        if (side == 1) {\n          return to;\n        }\n      }\n    }\n\n    return from && {\n      from: from,\n      to: to\n    };\n  }; // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n\n\n  TextMarker.prototype.changed = function () {\n    var this$1 = this;\n    var pos = this.find(-1, true),\n        widget = this,\n        cm = this.doc.cm;\n\n    if (!pos || !cm) {\n      return;\n    }\n\n    runInOp(cm, function () {\n      var line = pos.line,\n          lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n\n      cm.curOp.updateMaxLine = true;\n\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n\n        if (dHeight) {\n          updateLineHeight(line, line.height + dHeight);\n        }\n      }\n\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1) {\n        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);\n      }\n    }\n\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n\n  eventMixin(TextMarker); // Create a marker, wire it up to the right lines, and\n\n  function _markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) {\n      return markTextShared(doc, from, to, options, type);\n    } // Ensure we are in an operation.\n\n\n    if (doc.cm && !doc.cm.curOp) {\n      return operation(doc.cm, _markText)(doc, from, to, options, type);\n    }\n\n    var marker = new TextMarker(doc, type),\n        diff = cmp(from, to);\n\n    if (options) {\n      copyObj(options, marker, false);\n    } // Don't connect empty markers unless clearWhenEmpty is false\n\n\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false) {\n      return marker;\n    }\n\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n\n      if (!options.handleMouseEvents) {\n        marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\");\n      }\n\n      if (options.insertLeft) {\n        marker.widgetNode.insertLeft = true;\n      }\n    }\n\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker)) {\n        throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");\n      }\n\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory) {\n      addChangeToHistory(doc, {\n        from: from,\n        to: to,\n        origin: \"markText\"\n      }, doc.sel, NaN);\n    }\n\n    var curLine = from.line,\n        cm = doc.cm,\n        updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine) {\n        updateMaxLine = true;\n      }\n\n      if (marker.collapsed && curLine != from.line) {\n        updateLineHeight(line, 0);\n      }\n\n      addMarkedSpan(line, new MarkedSpan(marker, curLine == from.line ? from.ch : null, curLine == to.line ? to.ch : null));\n      ++curLine;\n    }); // lineIsHidden depends on the presence of the spans, so needs a second pass\n\n    if (marker.collapsed) {\n      doc.iter(from.line, to.line + 1, function (line) {\n        if (lineIsHidden(doc, line)) {\n          updateLineHeight(line, 0);\n        }\n      });\n    }\n\n    if (marker.clearOnEnter) {\n      on(marker, \"beforeCursorEnter\", function () {\n        return marker.clear();\n      });\n    }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n\n      if (doc.history.done.length || doc.history.undone.length) {\n        doc.clearHistory();\n      }\n    }\n\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) {\n        cm.curOp.updateMaxLine = true;\n      }\n\n      if (marker.collapsed) {\n        regChange(cm, from.line, to.line + 1);\n      } else if (marker.className || marker.startStyle || marker.endStyle || marker.css || marker.attributes || marker.title) {\n        for (var i = from.line; i <= to.line; i++) {\n          regLineChange(cm, i, \"text\");\n        }\n      }\n\n      if (marker.atomic) {\n        reCheckSelection(cm.doc);\n      }\n\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n\n    return marker;\n  } // SHARED TEXTMARKERS\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n\n\n  var SharedTextMarker = function SharedTextMarker(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n\n    for (var i = 0; i < markers.length; ++i) {\n      markers[i].parent = this;\n    }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) {\n      return;\n    }\n\n    this.explicitlyCleared = true;\n\n    for (var i = 0; i < this.markers.length; ++i) {\n      this.markers[i].clear();\n    }\n\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj);\n  };\n\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [_markText(doc, from, to, options, type)],\n        primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) {\n        options.widgetNode = widget.cloneNode(true);\n      }\n\n      markers.push(_markText(doc, _clipPos(doc, from), _clipPos(doc, to), options, type));\n\n      for (var i = 0; i < doc.linked.length; ++i) {\n        if (doc.linked[i].isParent) {\n          return;\n        }\n      }\n\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary);\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) {\n      return m.parent;\n    });\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i],\n          pos = marker.find();\n      var mFrom = doc.clipPos(pos.from),\n          mTo = doc.clipPos(pos.to);\n\n      if (cmp(mFrom, mTo)) {\n        var subMark = _markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function loop(i) {\n      var marker = markers[i],\n          linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) {\n        return linked.push(d);\n      });\n\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) {\n      loop(i);\n    }\n  }\n\n  var nextDocId = 0;\n\n  var Doc = function Doc(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) {\n      return new Doc(text, mode, firstLine, lineSep, direction);\n    }\n\n    if (firstLine == null) {\n      firstLine = 0;\n    }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = direction == \"rtl\" ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") {\n      text = this.splitLines(text);\n    }\n\n    updateDoc(this, {\n      from: start,\n      to: start,\n      text: text\n    });\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function iter(from, to, op) {\n      if (op) {\n        this.iterN(from - this.first, to - from, op);\n      } else {\n        this.iterN(this.first, this.first + this.size, from);\n      }\n    },\n    // Non-public interface for adding and removing lines.\n    insert: function insert(at, lines) {\n      var height = 0;\n\n      for (var i = 0; i < lines.length; ++i) {\n        height += lines[i].height;\n      }\n\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function remove(at, n) {\n      this.removeInner(at - this.first, n);\n    },\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n    getValue: function getValue(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n\n      if (lineSep === false) {\n        return lines;\n      }\n\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    setValue: docMethodOp(function (code) {\n      var top = Pos(this.first, 0),\n          last = this.first + this.size - 1;\n      makeChange(this, {\n        from: top,\n        to: Pos(last, getLine(this, last).text.length),\n        text: this.splitLines(code),\n        origin: \"setValue\",\n        full: true\n      }, true);\n\n      if (this.cm) {\n        scrollToCoords(this.cm, 0, 0);\n      }\n\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function replaceRange(code, from, to, origin) {\n      from = _clipPos(this, from);\n      to = to ? _clipPos(this, to) : from;\n\n      _replaceRange(this, code, from, to, origin);\n    },\n    getRange: function getRange(from, to, lineSep) {\n      var lines = getBetween(this, _clipPos(this, from), _clipPos(this, to));\n\n      if (lineSep === false) {\n        return lines;\n      }\n\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    getLine: function getLine(line) {\n      var l = this.getLineHandle(line);\n      return l && l.text;\n    },\n    getLineHandle: function getLineHandle(line) {\n      if (isLine(this, line)) {\n        return getLine(this, line);\n      }\n    },\n    getLineNumber: function getLineNumber(line) {\n      return lineNo(line);\n    },\n    getLineHandleVisualStart: function getLineHandleVisualStart(line) {\n      if (typeof line == \"number\") {\n        line = getLine(this, line);\n      }\n\n      return visualLine(line);\n    },\n    lineCount: function lineCount() {\n      return this.size;\n    },\n    firstLine: function firstLine() {\n      return this.first;\n    },\n    lastLine: function lastLine() {\n      return this.first + this.size - 1;\n    },\n    clipPos: function clipPos(pos) {\n      return _clipPos(this, pos);\n    },\n    getCursor: function getCursor(start) {\n      var range = this.sel.primary(),\n          pos;\n\n      if (start == null || start == \"head\") {\n        pos = range.head;\n      } else if (start == \"anchor\") {\n        pos = range.anchor;\n      } else if (start == \"end\" || start == \"to\" || start === false) {\n        pos = range.to();\n      } else {\n        pos = range.from();\n      }\n\n      return pos;\n    },\n    listSelections: function listSelections() {\n      return this.sel.ranges;\n    },\n    somethingSelected: function somethingSelected() {\n      return this.sel.somethingSelected();\n    },\n    setCursor: docMethodOp(function (line, ch, options) {\n      setSimpleSelection(this, _clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function (anchor, head, options) {\n      setSimpleSelection(this, _clipPos(this, anchor), _clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function (head, other, options) {\n      extendSelection(this, _clipPos(this, head), other && _clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function (heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function (f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function (ranges, primary, options) {\n      if (!ranges.length) {\n        return;\n      }\n\n      var out = [];\n\n      for (var i = 0; i < ranges.length; i++) {\n        out[i] = new Range(_clipPos(this, ranges[i].anchor), _clipPos(this, ranges[i].head));\n      }\n\n      if (primary == null) {\n        primary = Math.min(ranges.length - 1, this.sel.primIndex);\n      }\n\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function (anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(_clipPos(this, anchor), _clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n    getSelection: function getSelection(lineSep) {\n      var ranges = this.sel.ranges,\n          lines;\n\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n\n      if (lineSep === false) {\n        return lines;\n      } else {\n        return lines.join(lineSep || this.lineSeparator());\n      }\n    },\n    getSelections: function getSelections(lineSep) {\n      var parts = [],\n          ranges = this.sel.ranges;\n\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n\n        if (lineSep !== false) {\n          sel = sel.join(lineSep || this.lineSeparator());\n        }\n\n        parts[i] = sel;\n      }\n\n      return parts;\n    },\n    replaceSelection: function replaceSelection(code, collapse, origin) {\n      var dup = [];\n\n      for (var i = 0; i < this.sel.ranges.length; i++) {\n        dup[i] = code;\n      }\n\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function (code, collapse, origin) {\n      var changes = [],\n          sel = this.sel;\n\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {\n          from: range.from(),\n          to: range.to(),\n          text: this.splitLines(code[i]),\n          origin: origin\n        };\n      }\n\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--) {\n        makeChange(this, changes[i$1]);\n      }\n\n      if (newSel) {\n        setSelectionReplaceHistory(this, newSel);\n      } else if (this.cm) {\n        ensureCursorVisible(this.cm);\n      }\n    }),\n    undo: docMethodOp(function () {\n      makeChangeFromHistory(this, \"undo\");\n    }),\n    redo: docMethodOp(function () {\n      makeChangeFromHistory(this, \"redo\");\n    }),\n    undoSelection: docMethodOp(function () {\n      makeChangeFromHistory(this, \"undo\", true);\n    }),\n    redoSelection: docMethodOp(function () {\n      makeChangeFromHistory(this, \"redo\", true);\n    }),\n    setExtending: function setExtending(val) {\n      this.extend = val;\n    },\n    getExtending: function getExtending() {\n      return this.extend;\n    },\n    historySize: function historySize() {\n      var hist = this.history,\n          done = 0,\n          undone = 0;\n\n      for (var i = 0; i < hist.done.length; i++) {\n        if (!hist.done[i].ranges) {\n          ++done;\n        }\n      }\n\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) {\n        if (!hist.undone[i$1].ranges) {\n          ++undone;\n        }\n      }\n\n      return {\n        undo: done,\n        redo: undone\n      };\n    },\n    clearHistory: function clearHistory() {\n      this.history = new History(this.history.maxGeneration);\n    },\n    markClean: function markClean() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function changeGeneration(forceSplit) {\n      if (forceSplit) {\n        this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;\n      }\n\n      return this.history.generation;\n    },\n    isClean: function isClean(gen) {\n      return this.history.generation == (gen || this.cleanGeneration);\n    },\n    getHistory: function getHistory() {\n      return {\n        done: copyHistoryArray(this.history.done),\n        undone: copyHistoryArray(this.history.undone)\n      };\n    },\n    setHistory: function setHistory(histData) {\n      var hist = this.history = new History(this.history.maxGeneration);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n    setGutterMarker: docMethodOp(function (line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n\n        if (!value && isEmpty(markers)) {\n          line.gutterMarkers = null;\n        }\n\n        return true;\n      });\n    }),\n    clearGutter: docMethodOp(function (gutterID) {\n      var this$1 = this;\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n\n            if (isEmpty(line.gutterMarkers)) {\n              line.gutterMarkers = null;\n            }\n\n            return true;\n          });\n        }\n      });\n    }),\n    lineInfo: function lineInfo(line) {\n      var n;\n\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) {\n          return null;\n        }\n\n        n = line;\n        line = getLine(this, line);\n\n        if (!line) {\n          return null;\n        }\n      } else {\n        n = lineNo(line);\n\n        if (n == null) {\n          return null;\n        }\n      }\n\n      return {\n        line: n,\n        handle: line,\n        text: line.text,\n        gutterMarkers: line.gutterMarkers,\n        textClass: line.textClass,\n        bgClass: line.bgClass,\n        wrapClass: line.wrapClass,\n        widgets: line.widgets\n      };\n    },\n    addLineClass: docMethodOp(function (handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n\n        if (!line[prop]) {\n          line[prop] = cls;\n        } else if (classTest(cls).test(line[prop])) {\n          return false;\n        } else {\n          line[prop] += \" \" + cls;\n        }\n\n        return true;\n      });\n    }),\n    removeLineClass: docMethodOp(function (handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n\n        if (!cur) {\n          return false;\n        } else if (cls == null) {\n          line[prop] = null;\n        } else {\n          var found = cur.match(classTest(cls));\n\n          if (!found) {\n            return false;\n          }\n\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n\n        return true;\n      });\n    }),\n    addLineWidget: docMethodOp(function (handle, node, options) {\n      return addLineWidget(this, handle, node, options);\n    }),\n    removeLineWidget: function removeLineWidget(widget) {\n      widget.clear();\n    },\n    markText: function markText(from, to, options) {\n      return _markText(this, _clipPos(this, from), _clipPos(this, to), options, options && options.type || \"range\");\n    },\n    setBookmark: function setBookmark(pos, options) {\n      var realOpts = {\n        replacedWith: options && (options.nodeType == null ? options.widget : options),\n        insertLeft: options && options.insertLeft,\n        clearWhenEmpty: false,\n        shared: options && options.shared,\n        handleMouseEvents: options && options.handleMouseEvents\n      };\n      pos = _clipPos(this, pos);\n      return _markText(this, pos, pos, realOpts, \"bookmark\");\n    },\n    findMarksAt: function findMarksAt(pos) {\n      pos = _clipPos(this, pos);\n      var markers = [],\n          spans = getLine(this, pos.line).markedSpans;\n\n      if (spans) {\n        for (var i = 0; i < spans.length; ++i) {\n          var span = spans[i];\n\n          if ((span.from == null || span.from <= pos.ch) && (span.to == null || span.to >= pos.ch)) {\n            markers.push(span.marker.parent || span.marker);\n          }\n        }\n      }\n\n      return markers;\n    },\n    findMarks: function findMarks(from, to, filter) {\n      from = _clipPos(this, from);\n      to = _clipPos(this, to);\n      var found = [],\n          lineNo = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n\n        if (spans) {\n          for (var i = 0; i < spans.length; i++) {\n            var span = spans[i];\n\n            if (!(span.to != null && lineNo == from.line && from.ch >= span.to || span.from == null && lineNo != from.line || span.from != null && lineNo == to.line && span.from >= to.ch) && (!filter || filter(span.marker))) {\n              found.push(span.marker.parent || span.marker);\n            }\n          }\n        }\n\n        ++lineNo;\n      });\n      return found;\n    },\n    getAllMarks: function getAllMarks() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n\n        if (sps) {\n          for (var i = 0; i < sps.length; ++i) {\n            if (sps[i].from != null) {\n              markers.push(sps[i].marker);\n            }\n          }\n        }\n      });\n      return markers;\n    },\n    posFromIndex: function posFromIndex(off) {\n      var ch,\n          lineNo = this.first,\n          sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n\n        if (sz > off) {\n          ch = off;\n          return true;\n        }\n\n        off -= sz;\n        ++lineNo;\n      });\n      return _clipPos(this, Pos(lineNo, ch));\n    },\n    indexFromPos: function indexFromPos(coords) {\n      coords = _clipPos(this, coords);\n      var index = coords.ch;\n\n      if (coords.line < this.first || coords.ch < 0) {\n        return 0;\n      }\n\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) {\n        // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index;\n    },\n    copy: function copy(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop;\n      doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n\n      return doc;\n    },\n    linkedDoc: function linkedDoc(options) {\n      if (!options) {\n        options = {};\n      }\n\n      var from = this.first,\n          to = this.first + this.size;\n\n      if (options.from != null && options.from > from) {\n        from = options.from;\n      }\n\n      if (options.to != null && options.to < to) {\n        to = options.to;\n      }\n\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n\n      if (options.sharedHist) {\n        copy.history = this.history;\n      }\n\n      (this.linked || (this.linked = [])).push({\n        doc: copy,\n        sharedHist: options.sharedHist\n      });\n      copy.linked = [{\n        doc: this,\n        isParent: true,\n        sharedHist: options.sharedHist\n      }];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy;\n    },\n    unlinkDoc: function unlinkDoc(other) {\n      if (other instanceof CodeMirror) {\n        other = other.doc;\n      }\n\n      if (this.linked) {\n        for (var i = 0; i < this.linked.length; ++i) {\n          var link = this.linked[i];\n\n          if (link.doc != other) {\n            continue;\n          }\n\n          this.linked.splice(i, 1);\n          other.unlinkDoc(this);\n          detachSharedMarkers(findSharedMarkers(this));\n          break;\n        }\n      } // If the histories were shared, split them again\n\n\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) {\n          return splitIds.push(doc.id);\n        }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function iterLinkedDocs(f) {\n      linkedDocs(this, f);\n    },\n    getMode: function getMode() {\n      return this.mode;\n    },\n    getEditor: function getEditor() {\n      return this.cm;\n    },\n    splitLines: function splitLines(str) {\n      if (this.lineSep) {\n        return str.split(this.lineSep);\n      }\n\n      return splitLinesAuto(str);\n    },\n    lineSeparator: function lineSeparator() {\n      return this.lineSep || \"\\n\";\n    },\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") {\n        dir = \"ltr\";\n      }\n\n      if (dir == this.direction) {\n        return;\n      }\n\n      this.direction = dir;\n      this.iter(function (line) {\n        return line.order = null;\n      });\n\n      if (this.cm) {\n        directionChanged(this.cm);\n      }\n    })\n  }); // Public alias.\n\n  Doc.prototype.eachLine = Doc.prototype.iter; // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n      return;\n    }\n\n    e_preventDefault(e);\n\n    if (ie) {\n      lastDrop = +new Date();\n    }\n\n    var pos = posFromMouse(cm, e, true),\n        files = e.dataTransfer.files;\n\n    if (!pos || cm.isReadOnly()) {\n      return;\n    } // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n\n\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length,\n          text = Array(n),\n          read = 0;\n\n      var loadFile = function loadFile(file, i) {\n        if (cm.options.allowDropFileTypes && indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n          return;\n        }\n\n        var reader = new FileReader();\n        reader.onload = operation(cm, function () {\n          var content = reader.result;\n\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n            content = \"\";\n          }\n\n          text[i] = content;\n\n          if (++read == n) {\n            pos = _clipPos(cm.doc, pos);\n            var change = {\n              from: pos,\n              to: pos,\n              text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n              origin: \"paste\"\n            };\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n          }\n        });\n        reader.readAsText(file);\n      };\n\n      for (var i = 0; i < n; ++i) {\n        loadFile(files[i], i);\n      }\n    } else {\n      // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e); // Ensure the editor is re-focused\n\n        setTimeout(function () {\n          return cm.display.input.focus();\n        }, 20);\n        return;\n      }\n\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n\n        if (text$1) {\n          var selected;\n\n          if (cm.state.draggingText && !cm.state.draggingText.copy) {\n            selected = cm.listSelections();\n          }\n\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n\n          if (selected) {\n            for (var i$1 = 0; i$1 < selected.length; ++i$1) {\n              _replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\");\n            }\n          }\n\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      } catch (e) {}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date() - lastDrop < 100)) {\n      e_stop(e);\n      return;\n    }\n\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n      return;\n    }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\"; // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img); // Force a relayout, or Opera won't use our image for some obscure reason\n\n        img._top = img.offsetTop;\n      }\n\n      e.dataTransfer.setDragImage(img, 0, 0);\n\n      if (presto) {\n        img.parentNode.removeChild(img);\n      }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n\n    if (!pos) {\n      return;\n    }\n\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  } // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) {\n      return;\n    }\n\n    var byClass = document.getElementsByClassName(\"CodeMirror\"),\n        editors = [];\n\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n\n      if (cm) {\n        editors.push(cm);\n      }\n    }\n\n    if (editors.length) {\n      editors[0].operation(function () {\n        for (var i = 0; i < editors.length; i++) {\n          f(editors[i]);\n        }\n      });\n    }\n  }\n\n  var globalsRegistered = false;\n\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) {\n      return;\n    }\n\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) {\n        resizeTimer = setTimeout(function () {\n          resizeTimer = null;\n          forEachCodeMirror(onResize);\n        }, 100);\n      }\n    }); // When the window loses focus, we want to show the editor as blurred\n\n    on(window, \"blur\", function () {\n      return forEachCodeMirror(onBlur);\n    });\n  } // Called when the window resizes\n\n\n  function onResize(cm) {\n    var d = cm.display; // Might be a text scaling operation, clear size caches.\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\",\n    8: \"Backspace\",\n    9: \"Tab\",\n    13: \"Enter\",\n    16: \"Shift\",\n    17: \"Ctrl\",\n    18: \"Alt\",\n    19: \"Pause\",\n    20: \"CapsLock\",\n    27: \"Esc\",\n    32: \"Space\",\n    33: \"PageUp\",\n    34: \"PageDown\",\n    35: \"End\",\n    36: \"Home\",\n    37: \"Left\",\n    38: \"Up\",\n    39: \"Right\",\n    40: \"Down\",\n    44: \"PrintScrn\",\n    45: \"Insert\",\n    46: \"Delete\",\n    59: \";\",\n    61: \"=\",\n    91: \"Mod\",\n    92: \"Mod\",\n    93: \"Mod\",\n    106: \"*\",\n    107: \"=\",\n    109: \"-\",\n    110: \".\",\n    111: \"/\",\n    145: \"ScrollLock\",\n    173: \"-\",\n    186: \";\",\n    187: \"=\",\n    188: \",\",\n    189: \"-\",\n    190: \".\",\n    191: \"/\",\n    192: \"`\",\n    219: \"[\",\n    220: \"\\\\\",\n    221: \"]\",\n    222: \"'\",\n    63232: \"Up\",\n    63233: \"Down\",\n    63234: \"Left\",\n    63235: \"Right\",\n    63272: \"Delete\",\n    63273: \"Home\",\n    63275: \"End\",\n    63276: \"PageUp\",\n    63277: \"PageDown\",\n    63302: \"Insert\"\n  }; // Number keys\n\n  for (var i = 0; i < 10; i++) {\n    keyNames[i + 48] = keyNames[i + 96] = String(i);\n  } // Alphabetic keys\n\n\n  for (var i$1 = 65; i$1 <= 90; i$1++) {\n    keyNames[i$1] = String.fromCharCode(i$1);\n  } // Function keys\n\n\n  for (var i$2 = 1; i$2 <= 12; i$2++) {\n    keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2;\n  }\n\n  var keyMap = {};\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\",\n    \"Right\": \"goCharRight\",\n    \"Up\": \"goLineUp\",\n    \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\",\n    \"Home\": \"goLineStartSmart\",\n    \"PageUp\": \"goPageUp\",\n    \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\",\n    \"Backspace\": \"delCharBefore\",\n    \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\",\n    \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\",\n    \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  }; // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\",\n    \"Ctrl-D\": \"deleteLine\",\n    \"Ctrl-Z\": \"undo\",\n    \"Shift-Ctrl-Z\": \"redo\",\n    \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\",\n    \"Ctrl-End\": \"goDocEnd\",\n    \"Ctrl-Up\": \"goLineUp\",\n    \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\",\n    \"Ctrl-Right\": \"goGroupRight\",\n    \"Alt-Left\": \"goLineStart\",\n    \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Delete\": \"delGroupAfter\",\n    \"Ctrl-S\": \"save\",\n    \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\",\n    \"Shift-Ctrl-G\": \"findPrev\",\n    \"Shift-Ctrl-F\": \"replace\",\n    \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\",\n    \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\",\n    \"Shift-Ctrl-U\": \"redoSelection\",\n    \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  }; // Very basic readline/emacs-style bindings, which are standard on Mac.\n\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\",\n    \"Ctrl-B\": \"goCharLeft\",\n    \"Ctrl-P\": \"goLineUp\",\n    \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\",\n    \"Alt-B\": \"goWordLeft\",\n    \"Ctrl-A\": \"goLineStart\",\n    \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\",\n    \"Shift-Ctrl-V\": \"goPageUp\",\n    \"Ctrl-D\": \"delCharAfter\",\n    \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\",\n    \"Alt-Backspace\": \"delWordBefore\",\n    \"Ctrl-K\": \"killLine\",\n    \"Ctrl-T\": \"transposeChars\",\n    \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\",\n    \"Cmd-D\": \"deleteLine\",\n    \"Cmd-Z\": \"undo\",\n    \"Shift-Cmd-Z\": \"redo\",\n    \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\",\n    \"Cmd-Up\": \"goDocStart\",\n    \"Cmd-End\": \"goDocEnd\",\n    \"Cmd-Down\": \"goDocEnd\",\n    \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\",\n    \"Cmd-Left\": \"goLineLeft\",\n    \"Cmd-Right\": \"goLineRight\",\n    \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\",\n    \"Alt-Delete\": \"delGroupAfter\",\n    \"Cmd-S\": \"save\",\n    \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\",\n    \"Shift-Cmd-G\": \"findPrev\",\n    \"Cmd-Alt-F\": \"replace\",\n    \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\",\n    \"Cmd-]\": \"indentMore\",\n    \"Cmd-Backspace\": \"delWrappedLineLeft\",\n    \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\",\n    \"Shift-Cmd-U\": \"redoSelection\",\n    \"Ctrl-Up\": \"goDocStart\",\n    \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault; // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n\n      if (/^(cmd|meta|m)$/i.test(mod)) {\n        cmd = true;\n      } else if (/^a(lt)?$/i.test(mod)) {\n        alt = true;\n      } else if (/^(c|ctrl|control)$/i.test(mod)) {\n        ctrl = true;\n      } else if (/^s(hift)?$/i.test(mod)) {\n        shift = true;\n      } else {\n        throw new Error(\"Unrecognized modifier name: \" + mod);\n      }\n    }\n\n    if (alt) {\n      name = \"Alt-\" + name;\n    }\n\n    if (ctrl) {\n      name = \"Ctrl-\" + name;\n    }\n\n    if (cmd) {\n      name = \"Cmd-\" + name;\n    }\n\n    if (shift) {\n      name = \"Shift-\" + name;\n    }\n\n    return name;\n  } // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n\n\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n\n    for (var keyname in keymap) {\n      if (keymap.hasOwnProperty(keyname)) {\n        var value = keymap[keyname];\n\n        if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) {\n          continue;\n        }\n\n        if (value == \"...\") {\n          delete keymap[keyname];\n          continue;\n        }\n\n        var keys = map(keyname.split(\" \"), normalizeKeyName);\n\n        for (var i = 0; i < keys.length; i++) {\n          var val = void 0,\n              name = void 0;\n\n          if (i == keys.length - 1) {\n            name = keys.join(\" \");\n            val = value;\n          } else {\n            name = keys.slice(0, i + 1).join(\" \");\n            val = \"...\";\n          }\n\n          var prev = copy[name];\n\n          if (!prev) {\n            copy[name] = val;\n          } else if (prev != val) {\n            throw new Error(\"Inconsistent bindings for \" + name);\n          }\n        }\n\n        delete keymap[keyname];\n      }\n    }\n\n    for (var prop in copy) {\n      keymap[prop] = copy[prop];\n    }\n\n    return keymap;\n  }\n\n  function lookupKey(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n\n    if (found === false) {\n      return \"nothing\";\n    }\n\n    if (found === \"...\") {\n      return \"multi\";\n    }\n\n    if (found != null && handle(found)) {\n      return \"handled\";\n    }\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\") {\n        return lookupKey(key, map.fallthrough, handle, context);\n      }\n\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n\n        if (result) {\n          return result;\n        }\n      }\n    }\n  } // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n\n\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\";\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n\n    if (event.altKey && base != \"Alt\") {\n      name = \"Alt-\" + name;\n    }\n\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") {\n      name = \"Ctrl-\" + name;\n    }\n\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") {\n      name = \"Cmd-\" + name;\n    }\n\n    if (!noShift && event.shiftKey && base != \"Shift\") {\n      name = \"Shift-\" + name;\n    }\n\n    return name;\n  } // Look up the name of a key as indicated by an event object.\n\n\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) {\n      return false;\n    }\n\n    var name = keyNames[event.keyCode];\n\n    if (name == null || event.altGraphKey) {\n      return false;\n    } // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n\n\n    if (event.keyCode == 3 && event.code) {\n      name = event.code;\n    }\n\n    return addModifierNames(name, event, noShift);\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val;\n  } // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n\n\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges,\n        kill = []; // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break;\n        }\n      }\n\n      kill.push(toKill);\n    } // Next, remove those actual ranges.\n\n\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--) {\n        _replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\");\n      }\n\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target;\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\");\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      var order = getOrder(lineObj, cm.doc.direction);\n\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = dir < 0 == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch; // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) {\n            return measureCharPrepared(cm, prep, ch).top == targetTop;\n          }, dir < 0 == (part.level == 1) ? part.from : part.to - 1, ch);\n\n          if (sticky == \"before\") {\n            ch = moveCharLogically(lineObj, ch, 1);\n          }\n        } else {\n          ch = dir < 0 ? part.to : part.from;\n        }\n\n        return new Pos(lineNo, ch, sticky);\n      }\n    }\n\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\");\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n\n    if (!bidi) {\n      return moveLogically(line, start, dir);\n    }\n\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky),\n        part = bidi[partPos];\n\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir);\n    }\n\n    var mv = function mv(pos, dir) {\n      return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir);\n    };\n\n    var prep;\n\n    var getWrappedLineExtent = function getWrappedLineExtent(ch) {\n      if (!cm.options.lineWrapping) {\n        return {\n          begin: 0,\n          end: line.text.length\n        };\n      }\n\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch);\n    };\n\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = part.level == 1 == dir < 0;\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky);\n      }\n    } // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n\n    var searchInVisualLine = function searchInVisualLine(partPos, dir, wrappedLineExtent) {\n      var getRes = function getRes(ch, moveInStorageOrder) {\n        return moveInStorageOrder ? new Pos(start.line, mv(ch, 1), \"before\") : new Pos(start.line, ch, \"after\");\n      };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = dir > 0 == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n\n        if (part.from <= ch && ch < part.to) {\n          return getRes(ch, moveInStorageOrder);\n        }\n\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) {\n          return getRes(ch, moveInStorageOrder);\n        }\n      }\n    }; // Case 3a: Look for other bidi parts on the same visual line\n\n\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n\n    if (res) {\n      return res;\n    } // Case 3b: Look for other bidi parts on the next visual line\n\n\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n\n      if (res) {\n        return res;\n      }\n    } // Case 4: Nowhere to move\n\n\n    return null;\n  } // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n\n\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function singleSelection(cm) {\n      return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll);\n    },\n    killLine: function killLine(cm) {\n      return deleteNearSelection(cm, function (range) {\n        if (range.empty()) {\n          var len = getLine(cm.doc, range.head.line).text.length;\n\n          if (range.head.ch == len && range.head.line < cm.lastLine()) {\n            return {\n              from: range.head,\n              to: Pos(range.head.line + 1, 0)\n            };\n          } else {\n            return {\n              from: range.head,\n              to: Pos(range.head.line, len)\n            };\n          }\n        } else {\n          return {\n            from: range.from(),\n            to: range.to()\n          };\n        }\n      });\n    },\n    deleteLine: function deleteLine(cm) {\n      return deleteNearSelection(cm, function (range) {\n        return {\n          from: Pos(range.from().line, 0),\n          to: _clipPos(cm.doc, Pos(range.to().line + 1, 0))\n        };\n      });\n    },\n    delLineLeft: function delLineLeft(cm) {\n      return deleteNearSelection(cm, function (range) {\n        return {\n          from: Pos(range.from().line, 0),\n          to: range.from()\n        };\n      });\n    },\n    delWrappedLineLeft: function delWrappedLineLeft(cm) {\n      return deleteNearSelection(cm, function (range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var leftPos = cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n        return {\n          from: leftPos,\n          to: range.from()\n        };\n      });\n    },\n    delWrappedLineRight: function delWrappedLineRight(cm) {\n      return deleteNearSelection(cm, function (range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var rightPos = cm.coordsChar({\n          left: cm.display.lineDiv.offsetWidth + 100,\n          top: top\n        }, \"div\");\n        return {\n          from: range.from(),\n          to: rightPos\n        };\n      });\n    },\n    undo: function undo(cm) {\n      return cm.undo();\n    },\n    redo: function redo(cm) {\n      return cm.redo();\n    },\n    undoSelection: function undoSelection(cm) {\n      return cm.undoSelection();\n    },\n    redoSelection: function redoSelection(cm) {\n      return cm.redoSelection();\n    },\n    goDocStart: function goDocStart(cm) {\n      return cm.extendSelection(Pos(cm.firstLine(), 0));\n    },\n    goDocEnd: function goDocEnd(cm) {\n      return cm.extendSelection(Pos(cm.lastLine()));\n    },\n    goLineStart: function goLineStart(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        return lineStart(cm, range.head.line);\n      }, {\n        origin: \"+move\",\n        bias: 1\n      });\n    },\n    goLineStartSmart: function goLineStartSmart(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        return lineStartSmart(cm, range.head);\n      }, {\n        origin: \"+move\",\n        bias: 1\n      });\n    },\n    goLineEnd: function goLineEnd(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        return lineEnd(cm, range.head.line);\n      }, {\n        origin: \"+move\",\n        bias: -1\n      });\n    },\n    goLineRight: function goLineRight(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        var top = cm.cursorCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({\n          left: cm.display.lineDiv.offsetWidth + 100,\n          top: top\n        }, \"div\");\n      }, sel_move);\n    },\n    goLineLeft: function goLineLeft(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        var top = cm.cursorCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n      }, sel_move);\n    },\n    goLineLeftSmart: function goLineLeftSmart(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        var top = cm.cursorCoords(range.head, \"div\").top + 5;\n        var pos = cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n\n        if (pos.ch < cm.getLine(pos.line).search(/\\S/)) {\n          return lineStartSmart(cm, range.head);\n        }\n\n        return pos;\n      }, sel_move);\n    },\n    goLineUp: function goLineUp(cm) {\n      return cm.moveV(-1, \"line\");\n    },\n    goLineDown: function goLineDown(cm) {\n      return cm.moveV(1, \"line\");\n    },\n    goPageUp: function goPageUp(cm) {\n      return cm.moveV(-1, \"page\");\n    },\n    goPageDown: function goPageDown(cm) {\n      return cm.moveV(1, \"page\");\n    },\n    goCharLeft: function goCharLeft(cm) {\n      return cm.moveH(-1, \"char\");\n    },\n    goCharRight: function goCharRight(cm) {\n      return cm.moveH(1, \"char\");\n    },\n    goColumnLeft: function goColumnLeft(cm) {\n      return cm.moveH(-1, \"column\");\n    },\n    goColumnRight: function goColumnRight(cm) {\n      return cm.moveH(1, \"column\");\n    },\n    goWordLeft: function goWordLeft(cm) {\n      return cm.moveH(-1, \"word\");\n    },\n    goGroupRight: function goGroupRight(cm) {\n      return cm.moveH(1, \"group\");\n    },\n    goGroupLeft: function goGroupLeft(cm) {\n      return cm.moveH(-1, \"group\");\n    },\n    goWordRight: function goWordRight(cm) {\n      return cm.moveH(1, \"word\");\n    },\n    delCharBefore: function delCharBefore(cm) {\n      return cm.deleteH(-1, \"char\");\n    },\n    delCharAfter: function delCharAfter(cm) {\n      return cm.deleteH(1, \"char\");\n    },\n    delWordBefore: function delWordBefore(cm) {\n      return cm.deleteH(-1, \"word\");\n    },\n    delWordAfter: function delWordAfter(cm) {\n      return cm.deleteH(1, \"word\");\n    },\n    delGroupBefore: function delGroupBefore(cm) {\n      return cm.deleteH(-1, \"group\");\n    },\n    delGroupAfter: function delGroupAfter(cm) {\n      return cm.deleteH(1, \"group\");\n    },\n    indentAuto: function indentAuto(cm) {\n      return cm.indentSelection(\"smart\");\n    },\n    indentMore: function indentMore(cm) {\n      return cm.indentSelection(\"add\");\n    },\n    indentLess: function indentLess(cm) {\n      return cm.indentSelection(\"subtract\");\n    },\n    insertTab: function insertTab(cm) {\n      return cm.replaceSelection(\"\\t\");\n    },\n    insertSoftTab: function insertSoftTab(cm) {\n      var spaces = [],\n          ranges = cm.listSelections(),\n          tabSize = cm.options.tabSize;\n\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function defaultTab(cm) {\n      if (cm.somethingSelected()) {\n        cm.indentSelection(\"add\");\n      } else {\n        cm.execCommand(\"insertTab\");\n      }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function transposeChars(cm) {\n      return runInOp(cm, function () {\n        var ranges = cm.listSelections(),\n            newSel = [];\n\n        for (var i = 0; i < ranges.length; i++) {\n          if (!ranges[i].empty()) {\n            continue;\n          }\n\n          var cur = ranges[i].head,\n              line = getLine(cm.doc, cur.line).text;\n\n          if (line) {\n            if (cur.ch == line.length) {\n              cur = new Pos(cur.line, cur.ch - 1);\n            }\n\n            if (cur.ch > 0) {\n              cur = new Pos(cur.line, cur.ch + 1);\n              cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2), Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n            } else if (cur.line > cm.doc.first) {\n              var prev = getLine(cm.doc, cur.line - 1).text;\n\n              if (prev) {\n                cur = new Pos(cur.line, 1);\n                cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1), Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n              }\n            }\n          }\n\n          newSel.push(new Range(cur, cur));\n        }\n\n        cm.setSelections(newSel);\n      });\n    },\n    newlineAndIndent: function newlineAndIndent(cm) {\n      return runInOp(cm, function () {\n        var sels = cm.listSelections();\n\n        for (var i = sels.length - 1; i >= 0; i--) {\n          cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\");\n        }\n\n        sels = cm.listSelections();\n\n        for (var i$1 = 0; i$1 < sels.length; i$1++) {\n          cm.indentLine(sels[i$1].from().line, null, true);\n        }\n\n        ensureCursorVisible(cm);\n      });\n    },\n    openLine: function openLine(cm) {\n      return cm.replaceSelection(\"\\n\", \"start\");\n    },\n    toggleOverwrite: function toggleOverwrite(cm) {\n      return cm.toggleOverwrite();\n    }\n  };\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n\n    if (visual != line) {\n      lineN = lineNo(visual);\n    }\n\n    return endOfLine(true, cm, visual, lineN, 1);\n  }\n\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n\n    if (visual != line) {\n      lineN = lineNo(visual);\n    }\n\n    return endOfLine(true, cm, line, lineN, -1);\n  }\n\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(0, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky);\n    }\n\n    return start;\n  } // Run a handler that was bound to a key.\n\n\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n\n      if (!bound) {\n        return false;\n      }\n    } // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n\n\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift,\n        done = false;\n\n    try {\n      if (cm.isReadOnly()) {\n        cm.state.suppressEdits = true;\n      }\n\n      if (dropShift) {\n        cm.display.shift = false;\n      }\n\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n\n    return done;\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n\n      if (result) {\n        return result;\n      }\n    }\n\n    return cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm) || lookupKey(name, cm.options.keyMap, handle, cm);\n  } // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n\n  var stopSeq = new Delayed();\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n\n    if (seq) {\n      if (isModifierKey(name)) {\n        return \"handled\";\n      }\n\n      if (/\\'$/.test(name)) {\n        cm.state.keySeq = null;\n      } else {\n        stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        });\n      }\n\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) {\n        return true;\n      }\n    }\n\n    return dispatchKeyInner(cm, name, e, handle);\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\") {\n      cm.state.keySeq = name;\n    }\n\n    if (result == \"handled\") {\n      signalLater(cm, \"keyHandled\", cm, name, e);\n    }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result;\n  } // Handle a key from the keydown event.\n\n\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n\n    if (!name) {\n      return false;\n    }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) {\n        return doHandleBinding(cm, b, true);\n      }) || dispatchKey(cm, name, e, function (b) {\n        if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion) {\n          return doHandleBinding(cm, b);\n        }\n      });\n    } else {\n      return dispatchKey(cm, name, e, function (b) {\n        return doHandleBinding(cm, b);\n      });\n    }\n  } // Handle a key from the keypress event\n\n\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) {\n      return doHandleBinding(cm, b, true);\n    });\n  }\n\n  var lastStoppedKey = null;\n\n  function onKeyDown(e) {\n    var cm = this;\n    cm.curOp.focus = activeElt();\n\n    if (signalDOMEvent(cm, e)) {\n      return;\n    } // IE does strange things with escape.\n\n\n    if (ie && ie_version < 11 && e.keyCode == 27) {\n      e.returnValue = false;\n    }\n\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n\n    if (presto) {\n      lastStoppedKey = handled ? code : null; // Opera has no cut event... we try to at least catch the key combo\n\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey)) {\n        cm.replaceSelection(\"\", null, \"cut\");\n      }\n    }\n\n    if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand) {\n      document.execCommand(\"cut\");\n    } // Turn mouse into crosshair when Alt is held on Mac.\n\n\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className)) {\n      showCrossHair(cm);\n    }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) {\n      this.doc.sel.shift = false;\n    }\n\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) {\n      return;\n    }\n\n    var keyCode = e.keyCode,\n        charCode = e.charCode;\n\n    if (presto && keyCode == lastStoppedKey) {\n      lastStoppedKey = null;\n      e_preventDefault(e);\n      return;\n    }\n\n    if (presto && (!e.which || e.which < 10) && handleKeyBinding(cm, e)) {\n      return;\n    }\n\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode); // Some browsers fire keypress events for backspace\n\n    if (ch == \"\\x08\") {\n      return;\n    }\n\n    if (handleCharBinding(cm, e, ch)) {\n      return;\n    }\n\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function PastClick(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time && cmp(pos, this.pos) == 0 && button == this.button;\n  };\n\n  var lastClick, lastDoubleClick;\n\n  function clickRepeat(pos, button) {\n    var now = +new Date();\n\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\";\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\";\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\";\n    }\n  } // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n\n\n  function onMouseDown(e) {\n    var cm = this,\n        display = cm.display;\n\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) {\n      return;\n    }\n\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () {\n          return display.scroller.draggable = true;\n        }, 100);\n      }\n\n      return;\n    }\n\n    if (clickInGutter(cm, e)) {\n      return;\n    }\n\n    var pos = posFromMouse(cm, e),\n        button = e_button(e),\n        repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus(); // #3261: make sure, that we're not starting a second selection\n\n    if (button == 1 && cm.state.selectingText) {\n      cm.state.selectingText(e);\n    }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) {\n      return;\n    }\n\n    if (button == 1) {\n      if (pos) {\n        leftButtonDown(cm, pos, repeat, e);\n      } else if (e_target(e) == display.scroller) {\n        e_preventDefault(e);\n      }\n    } else if (button == 2) {\n      if (pos) {\n        extendSelection(cm.doc, pos);\n      }\n\n      setTimeout(function () {\n        return display.input.focus();\n      }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) {\n        cm.display.input.onContextMenu(e);\n      } else {\n        delayBlurEvent(cm);\n      }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n\n    if (repeat == \"double\") {\n      name = \"Double\" + name;\n    } else if (repeat == \"triple\") {\n      name = \"Triple\" + name;\n    }\n\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n    return dispatchKey(cm, addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") {\n        bound = commands[bound];\n      }\n\n      if (!bound) {\n        return false;\n      }\n\n      var done = false;\n\n      try {\n        if (cm.isReadOnly()) {\n          cm.state.suppressEdits = true;\n        }\n\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n\n      return done;\n    });\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n\n    if (value.extend == null || cm.doc.extend) {\n      value.extend = cm.doc.extend || event.shiftKey;\n    }\n\n    if (value.addNew == null) {\n      value.addNew = mac ? event.metaKey : event.ctrlKey;\n    }\n\n    if (value.moveOnDrag == null) {\n      value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey);\n    }\n\n    return value;\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) {\n      setTimeout(bind(ensureFocus, cm), 0);\n    } else {\n      cm.curOp.focus = activeElt();\n    }\n\n    var behavior = configureMouse(cm, repeat, event);\n    var sel = cm.doc.sel,\n        contained;\n\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() && repeat == \"single\" && (contained = sel.contains(pos)) > -1 && (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) && (cmp(contained.to(), pos) > 0 || pos.xRel < 0)) {\n      leftButtonStartDrag(cm, event, pos, behavior);\n    } else {\n      leftButtonSelect(cm, event, pos, behavior);\n    }\n  } // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n\n\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display,\n        moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) {\n        display.scroller.draggable = false;\n      }\n\n      cm.state.draggingText = false;\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n\n      if (!moved) {\n        e_preventDefault(e);\n\n        if (!behavior.addNew) {\n          extendSelection(cm.doc, pos, null, null, behavior.extend);\n        } // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n\n\n        if (webkit || ie && ie_version == 9) {\n          setTimeout(function () {\n            display.wrapper.ownerDocument.body.focus();\n            display.input.focus();\n          }, 20);\n        } else {\n          display.input.focus();\n        }\n      }\n    });\n\n    var mouseMove = function mouseMove(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n\n    var dragStart = function dragStart() {\n      return moved = true;\n    }; // Let the drag handler handle this.\n\n\n    if (webkit) {\n      display.scroller.draggable = true;\n    }\n\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag; // IE's approach to draggable\n\n    if (display.scroller.dragDrop) {\n      display.scroller.dragDrop();\n    }\n\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n    delayBlurEvent(cm);\n    setTimeout(function () {\n      return display.input.focus();\n    }, 20);\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") {\n      return new Range(pos, pos);\n    }\n\n    if (unit == \"word\") {\n      return cm.findWordAt(pos);\n    }\n\n    if (unit == \"line\") {\n      return new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n    }\n\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to);\n  } // Normal selection, as opposed to text dragging.\n\n\n  function leftButtonSelect(cm, event, start, behavior) {\n    var display = cm.display,\n        doc = cm.doc;\n    e_preventDefault(event);\n    var ourRange,\n        ourIndex,\n        startSel = doc.sel,\n        ranges = startSel.ranges;\n\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n\n      if (ourIndex > -1) {\n        ourRange = ranges[ourIndex];\n      } else {\n        ourRange = new Range(start, start);\n      }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) {\n        ourRange = new Range(start, start);\n      }\n\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range = rangeForUnit(cm, start, behavior.unit);\n\n      if (behavior.extend) {\n        ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend);\n      } else {\n        ourRange = range;\n      }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex), {\n        scroll: false,\n        origin: \"*mouse\"\n      });\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0), {\n        scroll: false,\n        origin: \"*mouse\"\n      });\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) {\n        return;\n      }\n\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [],\n            tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol),\n            right = Math.max(startCol, posCol);\n\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {\n          var text = getLine(doc, line).text,\n              leftPos = findColumn(text, left, tabSize);\n\n          if (left == right) {\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));\n          } else if (text.length > leftPos) {\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));\n          }\n        }\n\n        if (!ranges.length) {\n          ranges.push(new Range(start, start));\n        }\n\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex), {\n          origin: \"*mouse\",\n          scroll: false\n        });\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor,\n            head;\n\n        if (cmp(range.anchor, anchor) > 0) {\n          head = range.head;\n          anchor = minPos(oldRange.from(), range.anchor);\n        } else {\n          head = range.anchor;\n          anchor = maxPos(oldRange.to(), range.head);\n        }\n\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(_clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect(); // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n\n      if (!cur) {\n        return;\n      }\n\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n\n        if (cur.line >= visible.to || cur.line < visible.from) {\n          setTimeout(operation(cm, function () {\n            if (counter == curCount) {\n              extend(e);\n            }\n          }), 150);\n        }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n\n        if (outside) {\n          setTimeout(operation(cm, function () {\n            if (counter != curCount) {\n              return;\n            }\n\n            display.scroller.scrollTop += outside;\n            extend(e);\n          }), 50);\n        }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity; // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) {\n        done(e);\n      } else {\n        extend(e);\n      }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  } // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n\n\n  function bidiSimplify(cm, range) {\n    var anchor = range.anchor;\n    var head = range.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) {\n      return range;\n    }\n\n    var order = getOrder(anchorLine);\n\n    if (!order) {\n      return range;\n    }\n\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky),\n        part = order[index];\n\n    if (part.from != anchor.ch && part.to != anchor.ch) {\n      return range;\n    }\n\n    var boundary = index + (part.from == anchor.ch == (part.level != 1) ? 0 : 1);\n\n    if (boundary == 0 || boundary == order.length) {\n      return range;\n    } // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n\n\n    var leftSide;\n\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n\n      if (headIndex == boundary - 1 || headIndex == boundary) {\n        leftSide = dir < 0;\n      } else {\n        leftSide = dir > 0;\n      }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to,\n        sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head);\n  } // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n\n\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try {\n        mX = e.clientX;\n        mY = e.clientY;\n      } catch (e) {\n        return false;\n      }\n    }\n\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) {\n      return false;\n    }\n\n    if (prevent) {\n      e_preventDefault(e);\n    }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) {\n      return e_defaultPrevented(e);\n    }\n\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = _lineAtHeight(cm.doc, mY);\n\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e);\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true);\n  } // CONTEXT MENU HANDLING\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n\n\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) {\n      return;\n    }\n\n    if (signalDOMEvent(cm, e, \"contextmenu\")) {\n      return;\n    }\n\n    if (!captureRightClick) {\n      cm.display.input.onContextMenu(e);\n    }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) {\n      return false;\n    }\n\n    return gutterEvent(cm, e, \"gutterContextMenu\", false);\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") + cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {\n    toString: function toString() {\n      return \"CodeMirror.Init\";\n    }\n  };\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n\n      if (handle) {\n        optionHandlers[name] = notOnInit ? function (cm, val, old) {\n          if (old != Init) {\n            handle(cm, val, old);\n          }\n        } : handle;\n      }\n    }\n\n    CodeMirror.defineOption = option; // Passed to option handlers when there is no old value.\n\n    CodeMirror.Init = Init; // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n\n    option(\"value\", \"\", function (cm, val) {\n      return cm.setValue(val);\n    }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n\n      if (!val) {\n        return;\n      }\n\n      var newBreaks = [],\n          lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n\n          if (found == -1) {\n            break;\n          }\n\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n\n        lineNo++;\n      });\n\n      for (var i = newBreaks.length - 1; i >= 0; i--) {\n        _replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length));\n      }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n\n      if (old != Init) {\n        cm.refresh();\n      }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) {\n      return cm.refresh();\n    }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\"); // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) {\n      return cm.getInputField().spellcheck = val;\n    }, true);\n    option(\"autocorrect\", false, function (cm, val) {\n      return cm.getInputField().autocorrect = val;\n    }, true);\n    option(\"autocapitalize\", false, function (cm, val) {\n      return cm.getInputField().autocapitalize = val;\n    }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n\n      if (prev && prev.detach) {\n        prev.detach(cm, next);\n      }\n\n      if (next.attach) {\n        next.attach(cm, prev || null);\n      }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) {\n      return updateScrollbars(cm);\n    }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) {\n      return integer;\n    }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n\n      cm.display.input.readOnlyChanged(val);\n    });\n    option(\"disableInput\", false, function (cm, val) {\n      if (!val) {\n        cm.display.input.reset();\n      }\n    }, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) {\n      return cm.doc.history.undoDepth = val;\n    });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) {\n      return cm.refresh();\n    }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) {\n        cm.display.input.resetPosition();\n      }\n    });\n    option(\"tabindex\", null, function (cm, val) {\n      return cm.display.input.getField().tabIndex = val || \"\";\n    });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) {\n      return cm.doc.setDirection(val);\n    }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () {\n      return updateScrollbars(cm);\n    }, 100);\n  } // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) {\n      return new CodeMirror(place, options);\n    }\n\n    this.options = options = options ? copyObj(options) : {}; // Determine effective options based on given values and defaults.\n\n    copyObj(defaults, options, false);\n    var doc = options.value;\n\n    if (typeof doc == \"string\") {\n      doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction);\n    } else if (options.mode) {\n      doc.modeOption = options.mode;\n    }\n\n    this.doc = doc;\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n\n    if (options.lineWrapping) {\n      this.display.wrapper.className += \" CodeMirror-wrap\";\n    }\n\n    initScrollbars(this);\n    this.state = {\n      keyMaps: [],\n      // stores maps added by addKeyMap\n      overlays: [],\n      // highlighting overlays, as added by addOverlay\n      modeGen: 0,\n      // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false,\n      // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1,\n      cutIncoming: -1,\n      // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(),\n      // stores highlight worker timeout\n      keySeq: null,\n      // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) {\n      display.input.focus();\n    } // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n\n\n    if (ie && ie_version < 11) {\n      setTimeout(function () {\n        return this$1.display.input.reset(true);\n      }, 20);\n    }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    _startOperation(this);\n\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if (options.autofocus && !mobile || this.hasFocus()) {\n      setTimeout(bind(onFocus, this), 20);\n    } else {\n      onBlur(this);\n    }\n\n    for (var opt in optionHandlers) {\n      if (optionHandlers.hasOwnProperty(opt)) {\n        optionHandlers[opt](this, options[opt], Init);\n      }\n    }\n\n    maybeUpdateLineNumberWidth(this);\n\n    if (options.finishInit) {\n      options.finishInit(this);\n    }\n\n    for (var i = 0; i < initHooks.length; ++i) {\n      initHooks[i](this);\n    }\n\n    _endOperation(this); // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n\n\n    if (webkit && options.lineWrapping && getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\") {\n      display.lineDiv.style.textRendering = \"auto\";\n    }\n  } // The default configuration options.\n\n\n  CodeMirror.defaults = defaults; // Functions to run when options are changed.\n\n  CodeMirror.optionHandlers = optionHandlers; // Attach the necessary event handlers when initializing the editor\n\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown)); // Older IE's will not fire a second mousedown for a double click\n\n    if (ie && ie_version < 11) {\n      on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) {\n          return;\n        }\n\n        var pos = posFromMouse(cm, e);\n\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) {\n          return;\n        }\n\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      }));\n    } else {\n      on(d.scroller, \"dblclick\", function (e) {\n        return signalDOMEvent(cm, e) || e_preventDefault(e);\n      });\n    } // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n\n\n    on(d.scroller, \"contextmenu\", function (e) {\n      return onContextMenu(cm, e);\n    }); // Used to suppress mouse event handling when a touch happens\n\n    var touchFinished,\n        prevTouch = {\n      end: 0\n    };\n\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () {\n          return d.activeTouch = null;\n        }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date();\n      }\n    }\n\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) {\n        return false;\n      }\n\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1;\n    }\n\n    function farAway(touch, other) {\n      if (other.left == null) {\n        return true;\n      }\n\n      var dx = other.left - touch.left,\n          dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20;\n    }\n\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date();\n        d.activeTouch = {\n          start: now,\n          moved: false,\n          prev: now - prevTouch.end <= 300 ? prevTouch : null\n        };\n\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) {\n        d.activeTouch.moved = true;\n      }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n\n      if (touch && !eventInWidget(d, e) && touch.left != null && !touch.moved && new Date() - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"),\n            range;\n\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          {\n            range = new Range(pos, pos);\n          } else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          {\n            range = cm.findWordAt(pos);\n          } else // Triple tap\n          {\n            range = new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n          }\n\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch); // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    }); // Listen to wheel events in order to try and update the viewport on time.\n\n    on(d.scroller, \"mousewheel\", function (e) {\n      return onScrollWheel(cm, e);\n    });\n    on(d.scroller, \"DOMMouseScroll\", function (e) {\n      return onScrollWheel(cm, e);\n    }); // Prevent wrapper from ever scrolling\n\n    on(d.wrapper, \"scroll\", function () {\n      return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;\n    });\n    d.dragFunctions = {\n      enter: function enter(e) {\n        if (!signalDOMEvent(cm, e)) {\n          e_stop(e);\n        }\n      },\n      over: function over(e) {\n        if (!signalDOMEvent(cm, e)) {\n          onDragOver(cm, e);\n          e_stop(e);\n        }\n      },\n      start: function start(e) {\n        return onDragStart(cm, e);\n      },\n      drop: operation(cm, onDrop),\n      leave: function leave(e) {\n        if (!signalDOMEvent(cm, e)) {\n          clearDragCursor(cm);\n        }\n      }\n    };\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) {\n      return onKeyUp.call(cm, e);\n    });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) {\n      return onFocus(cm, e);\n    });\n    on(inp, \"blur\", function (e) {\n      return onBlur(cm, e);\n    });\n  }\n\n  var initHooks = [];\n\n  CodeMirror.defineInitHook = function (f) {\n    return initHooks.push(f);\n  }; // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n\n\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc,\n        state;\n\n    if (how == null) {\n      how = \"add\";\n    }\n\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) {\n        how = \"prev\";\n      } else {\n        state = getContextBefore(cm, n).state;\n      }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n),\n        curSpace = countColumn(line.text, null, tabSize);\n\n    if (line.stateAfter) {\n      line.stateAfter = null;\n    }\n\n    var curSpaceString = line.text.match(/^\\s*/)[0],\n        indentation;\n\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) {\n          return;\n        }\n\n        how = \"prev\";\n      }\n    }\n\n    if (how == \"prev\") {\n      if (n > doc.first) {\n        indentation = countColumn(getLine(doc, n - 1).text, null, tabSize);\n      } else {\n        indentation = 0;\n      }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n\n    indentation = Math.max(0, indentation);\n    var indentString = \"\",\n        pos = 0;\n\n    if (cm.options.indentWithTabs) {\n      for (var i = Math.floor(indentation / tabSize); i; --i) {\n        pos += tabSize;\n        indentString += \"\\t\";\n      }\n    }\n\n    if (pos < indentation) {\n      indentString += spaceStr(indentation - pos);\n    }\n\n    if (indentString != curSpaceString) {\n      _replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n\n      line.stateAfter = null;\n      return true;\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break;\n        }\n      }\n    }\n  } // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n\n\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n\n    if (!sel) {\n      sel = doc.sel;\n    }\n\n    var recent = +new Date() - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted),\n        multiPaste = null; // When pasting N lines into N selections, insert one line per selection\n\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n\n          for (var i = 0; i < lastCopied.text.length; i++) {\n            multiPaste.push(doc.splitLines(lastCopied.text[i]));\n          }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) {\n          return [l];\n        });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput; // Normal behavior is to insert the new text into every selection\n\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range = sel.ranges[i$1];\n      var from = range.from(),\n          to = range.to();\n\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          {\n            from = Pos(from.line, from.ch - deleted);\n          } else if (cm.state.overwrite && !paste) // Handle overwrite\n          {\n            to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));\n          } else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted) {\n          from = to = Pos(from.line, 0);\n        }\n      }\n\n      var changeEvent = {\n        from: from,\n        to: to,\n        text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n        origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")\n      };\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n\n    if (inserted && !paste) {\n      triggerElectric(cm, inserted);\n    }\n\n    ensureCursorVisible(cm);\n\n    if (cm.curOp.updateInput < 2) {\n      cm.curOp.updateInput = updateInput;\n    }\n\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n\n    if (pasted) {\n      e.preventDefault();\n\n      if (!cm.isReadOnly() && !cm.options.disableInput) {\n        runInOp(cm, function () {\n          return applyTextInput(cm, pasted, 0, null, \"paste\");\n        });\n      }\n\n      return true;\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) {\n      return;\n    }\n\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n\n      if (range.head.ch > 100 || i && sel.ranges[i - 1].head.line == range.head.line) {\n        continue;\n      }\n\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++) {\n          if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break;\n          }\n        }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch))) {\n          indented = indentLine(cm, range.head.line, \"smart\");\n        }\n      }\n\n      if (indented) {\n        signalLater(cm, \"electricInput\", cm, range.head.line);\n      }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [],\n        ranges = [];\n\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {\n        anchor: Pos(line, 0),\n        head: Pos(line + 1, 0)\n      };\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n\n    return {\n      text: text,\n      ranges: ranges\n    };\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\"); // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n\n    if (webkit) {\n      te.style.width = \"1000px\";\n    } else {\n      te.setAttribute(\"wrap\", \"off\");\n    } // If border: 0; -- iOS fails to open keyboard (issue #1287)\n\n\n    if (ios) {\n      te.style.border = \"1px solid black\";\n    }\n\n    disableBrowserMagic(te);\n    return div;\n  } // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n    var helpers = CodeMirror.helpers = {};\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function focus() {\n        window.focus();\n        this.display.input.focus();\n      },\n      setOption: function setOption(option, value) {\n        var options = this.options,\n            old = options[option];\n\n        if (options[option] == value && option != \"mode\") {\n          return;\n        }\n\n        options[option] = value;\n\n        if (optionHandlers.hasOwnProperty(option)) {\n          operation(this, optionHandlers[option])(this, value, old);\n        }\n\n        signal(this, \"optionChange\", this, option);\n      },\n      getOption: function getOption(option) {\n        return this.options[option];\n      },\n      getDoc: function getDoc() {\n        return this.doc;\n      },\n      addKeyMap: function addKeyMap(map, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n      },\n      removeKeyMap: function removeKeyMap(map) {\n        var maps = this.state.keyMaps;\n\n        for (var i = 0; i < maps.length; ++i) {\n          if (maps[i] == map || maps[i].name == map) {\n            maps.splice(i, 1);\n            return true;\n          }\n        }\n      },\n      addOverlay: methodOp(function (spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n\n        if (mode.startState) {\n          throw new Error(\"Overlays may not be stateful.\");\n        }\n\n        insertSorted(this.state.overlays, {\n          mode: mode,\n          modeSpec: spec,\n          opaque: options && options.opaque,\n          priority: options && options.priority || 0\n        }, function (overlay) {\n          return overlay.priority;\n        });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function (spec) {\n        var overlays = this.state.overlays;\n\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return;\n          }\n        }\n      }),\n      indentLine: methodOp(function (n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) {\n            dir = this.options.smartIndent ? \"smart\" : \"prev\";\n          } else {\n            dir = dir ? \"add\" : \"subtract\";\n          }\n        }\n\n        if (isLine(this.doc, n)) {\n          indentLine(this, n, dir, aggressive);\n        }\n      }),\n      indentSelection: methodOp(function (how) {\n        var ranges = this.doc.sel.ranges,\n            end = -1;\n\n        for (var i = 0; i < ranges.length; i++) {\n          var range = ranges[i];\n\n          if (!range.empty()) {\n            var from = range.from(),\n                to = range.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n\n            for (var j = start; j < end; ++j) {\n              indentLine(this, j, how);\n            }\n\n            var newRanges = this.doc.sel.ranges;\n\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0) {\n              replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);\n            }\n          } else if (range.head.line > end) {\n            indentLine(this, range.head.line, how, true);\n            end = range.head.line;\n\n            if (i == this.doc.sel.primIndex) {\n              ensureCursorVisible(this);\n            }\n          }\n        }\n      }),\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function getTokenAt(pos, precise) {\n        return takeToken(this, pos, precise);\n      },\n      getLineTokens: function getLineTokens(line, precise) {\n        return takeToken(this, Pos(line), precise, true);\n      },\n      getTokenTypeAt: function getTokenTypeAt(pos) {\n        pos = _clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0,\n            after = (styles.length - 1) / 2,\n            ch = pos.ch;\n        var type;\n\n        if (ch == 0) {\n          type = styles[2];\n        } else {\n          for (;;) {\n            var mid = before + after >> 1;\n\n            if ((mid ? styles[mid * 2 - 1] : 0) >= ch) {\n              after = mid;\n            } else if (styles[mid * 2 + 1] < ch) {\n              before = mid + 1;\n            } else {\n              type = styles[mid * 2 + 2];\n              break;\n            }\n          }\n        }\n\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);\n      },\n      getModeAt: function getModeAt(pos) {\n        var mode = this.doc.mode;\n\n        if (!mode.innerMode) {\n          return mode;\n        }\n\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;\n      },\n      getHelper: function getHelper(pos, type) {\n        return this.getHelpers(pos, type)[0];\n      },\n      getHelpers: function getHelpers(pos, type) {\n        var found = [];\n\n        if (!helpers.hasOwnProperty(type)) {\n          return found;\n        }\n\n        var help = helpers[type],\n            mode = this.getModeAt(pos);\n\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) {\n            found.push(help[mode[type]]);\n          }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n\n            if (val) {\n              found.push(val);\n            }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1) {\n            found.push(cur.val);\n          }\n        }\n\n        return found;\n      },\n      getStateAfter: function getStateAfter(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1 : line);\n        return getContextBefore(this, line + 1, precise).state;\n      },\n      cursorCoords: function cursorCoords(start, mode) {\n        var pos,\n            range = this.doc.sel.primary();\n\n        if (start == null) {\n          pos = range.head;\n        } else if (typeof start == \"object\") {\n          pos = _clipPos(this.doc, start);\n        } else {\n          pos = start ? range.from() : range.to();\n        }\n\n        return _cursorCoords(this, pos, mode || \"page\");\n      },\n      charCoords: function charCoords(pos, mode) {\n        return _charCoords(this, _clipPos(this.doc, pos), mode || \"page\");\n      },\n      coordsChar: function coordsChar(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return _coordsChar(this, coords.left, coords.top);\n      },\n      lineAtHeight: function lineAtHeight(height, mode) {\n        height = fromCoordSystem(this, {\n          top: height,\n          left: 0\n        }, mode || \"page\").top;\n        return _lineAtHeight(this.doc, height + this.display.viewOffset);\n      },\n      heightAtLine: function heightAtLine(line, mode, includeWidgets) {\n        var end = false,\n            lineObj;\n\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n\n          if (line < this.doc.first) {\n            line = this.doc.first;\n          } else if (line > last) {\n            line = last;\n            end = true;\n          }\n\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n\n        return intoCoordSystem(this, lineObj, {\n          top: 0,\n          left: 0\n        }, mode || \"page\", includeWidgets || end).top + (end ? this.doc.height - _heightAtLine(lineObj) : 0);\n      },\n      defaultTextHeight: function defaultTextHeight() {\n        return textHeight(this.display);\n      },\n      defaultCharWidth: function defaultCharWidth() {\n        return charWidth(this.display);\n      },\n      getViewport: function getViewport() {\n        return {\n          from: this.display.viewFrom,\n          to: this.display.viewTo\n        };\n      },\n      addWidget: function addWidget(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = _cursorCoords(this, _clipPos(this.doc, pos));\n        var top = pos.bottom,\n            left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n              hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth); // Default to positioning above (if specified and possible); otherwise default to positioning below\n\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight) {\n            top = pos.top - node.offsetHeight;\n          } else if (pos.bottom + node.offsetHeight <= vspace) {\n            top = pos.bottom;\n          }\n\n          if (left + node.offsetWidth > hspace) {\n            left = hspace - node.offsetWidth;\n          }\n        }\n\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") {\n            left = 0;\n          } else if (horiz == \"middle\") {\n            left = (display.sizer.clientWidth - node.offsetWidth) / 2;\n          }\n\n          node.style.left = left + \"px\";\n        }\n\n        if (scroll) {\n          scrollIntoView(this, {\n            left: left,\n            top: top,\n            right: left + node.offsetWidth,\n            bottom: top + node.offsetHeight\n          });\n        }\n      },\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n      execCommand: function execCommand(cmd) {\n        if (commands.hasOwnProperty(cmd)) {\n          return commands[cmd].call(null, this);\n        }\n      },\n      triggerElectric: methodOp(function (text) {\n        triggerElectric(this, text);\n      }),\n      findPosH: function findPosH(from, amount, unit, visually) {\n        var dir = 1;\n\n        if (amount < 0) {\n          dir = -1;\n          amount = -amount;\n        }\n\n        var cur = _clipPos(this.doc, from);\n\n        for (var i = 0; i < amount; ++i) {\n          cur = _findPosH(this.doc, cur, dir, unit, visually);\n\n          if (cur.hitSide) {\n            break;\n          }\n        }\n\n        return cur;\n      },\n      moveH: methodOp(function (dir, unit) {\n        var this$1 = this;\n        this.extendSelectionsBy(function (range) {\n          if (this$1.display.shift || this$1.doc.extend || range.empty()) {\n            return _findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually);\n          } else {\n            return dir < 0 ? range.from() : range.to();\n          }\n        }, sel_move);\n      }),\n      deleteH: methodOp(function (dir, unit) {\n        var sel = this.doc.sel,\n            doc = this.doc;\n\n        if (sel.somethingSelected()) {\n          doc.replaceSelection(\"\", null, \"+delete\");\n        } else {\n          deleteNearSelection(this, function (range) {\n            var other = _findPosH(doc, range.head, dir, unit, false);\n\n            return dir < 0 ? {\n              from: other,\n              to: range.head\n            } : {\n              from: range.head,\n              to: other\n            };\n          });\n        }\n      }),\n      findPosV: function findPosV(from, amount, unit, goalColumn) {\n        var dir = 1,\n            x = goalColumn;\n\n        if (amount < 0) {\n          dir = -1;\n          amount = -amount;\n        }\n\n        var cur = _clipPos(this.doc, from);\n\n        for (var i = 0; i < amount; ++i) {\n          var coords = _cursorCoords(this, cur, \"div\");\n\n          if (x == null) {\n            x = coords.left;\n          } else {\n            coords.left = x;\n          }\n\n          cur = _findPosV(this, coords, dir, unit);\n\n          if (cur.hitSide) {\n            break;\n          }\n        }\n\n        return cur;\n      },\n      moveV: methodOp(function (dir, unit) {\n        var this$1 = this;\n        var doc = this.doc,\n            goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range) {\n          if (collapse) {\n            return dir < 0 ? range.from() : range.to();\n          }\n\n          var headPos = _cursorCoords(this$1, range.head, \"div\");\n\n          if (range.goalColumn != null) {\n            headPos.left = range.goalColumn;\n          }\n\n          goals.push(headPos.left);\n\n          var pos = _findPosV(this$1, headPos, dir, unit);\n\n          if (unit == \"page\" && range == doc.sel.primary()) {\n            addToScrollTop(this$1, _charCoords(this$1, pos, \"div\").top - headPos.top);\n          }\n\n          return pos;\n        }, sel_move);\n\n        if (goals.length) {\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            doc.sel.ranges[i].goalColumn = goals[i];\n          }\n        }\n      }),\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function findWordAt(pos) {\n        var doc = this.doc,\n            line = getLine(doc, pos.line).text;\n        var start = pos.ch,\n            end = pos.ch;\n\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n\n          if ((pos.sticky == \"before\" || end == line.length) && start) {\n            --start;\n          } else {\n            ++end;\n          }\n\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper) ? function (ch) {\n            return isWordChar(ch, helper);\n          } : /\\s/.test(startChar) ? function (ch) {\n            return /\\s/.test(ch);\n          } : function (ch) {\n            return !/\\s/.test(ch) && !isWordChar(ch);\n          };\n\n          while (start > 0 && check(line.charAt(start - 1))) {\n            --start;\n          }\n\n          while (end < line.length && check(line.charAt(end))) {\n            ++end;\n          }\n        }\n\n        return new Range(Pos(pos.line, start), Pos(pos.line, end));\n      },\n      toggleOverwrite: function toggleOverwrite(value) {\n        if (value != null && value == this.state.overwrite) {\n          return;\n        }\n\n        if (this.state.overwrite = !this.state.overwrite) {\n          addClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n        } else {\n          rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n        }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function hasFocus() {\n        return this.display.input.getField() == activeElt();\n      },\n      isReadOnly: function isReadOnly() {\n        return !!(this.options.readOnly || this.doc.cantEdit);\n      },\n      scrollTo: methodOp(function (x, y) {\n        scrollToCoords(this, x, y);\n      }),\n      getScrollInfo: function getScrollInfo() {\n        var scroller = this.display.scroller;\n        return {\n          left: scroller.scrollLeft,\n          top: scroller.scrollTop,\n          height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n          width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n          clientHeight: displayHeight(this),\n          clientWidth: displayWidth(this)\n        };\n      },\n      scrollIntoView: methodOp(function (range, margin) {\n        if (range == null) {\n          range = {\n            from: this.doc.sel.primary().head,\n            to: null\n          };\n\n          if (margin == null) {\n            margin = this.options.cursorScrollMargin;\n          }\n        } else if (typeof range == \"number\") {\n          range = {\n            from: Pos(range, 0),\n            to: null\n          };\n        } else if (range.from == null) {\n          range = {\n            from: range,\n            to: null\n          };\n        }\n\n        if (!range.to) {\n          range.to = range.from;\n        }\n\n        range.margin = margin || 0;\n\n        if (range.from.line != null) {\n          scrollToRange(this, range);\n        } else {\n          scrollToCoordsRange(this, range.from, range.to, range.margin);\n        }\n      }),\n      setSize: methodOp(function (width, height) {\n        var this$1 = this;\n\n        var interpret = function interpret(val) {\n          return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val;\n        };\n\n        if (width != null) {\n          this.display.wrapper.style.width = interpret(width);\n        }\n\n        if (height != null) {\n          this.display.wrapper.style.height = interpret(height);\n        }\n\n        if (this.options.lineWrapping) {\n          clearLineMeasurementCache(this);\n        }\n\n        var lineNo = this.display.viewFrom;\n        this.doc.iter(lineNo, this.display.viewTo, function (line) {\n          if (line.widgets) {\n            for (var i = 0; i < line.widgets.length; i++) {\n              if (line.widgets[i].noHScroll) {\n                regLineChange(this$1, lineNo, \"widget\");\n                break;\n              }\n            }\n          }\n\n          ++lineNo;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n      operation: function operation(f) {\n        return runInOp(this, f);\n      },\n      startOperation: function startOperation() {\n        return _startOperation(this);\n      },\n      endOperation: function endOperation() {\n        return _endOperation(this);\n      },\n      refresh: methodOp(function () {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5) {\n          estimateLineHeights(this);\n        }\n\n        signal(this, \"refresh\", this);\n      }),\n      swapDoc: methodOp(function (doc) {\n        var old = this.doc;\n        old.cm = null; // Cancel the current text selection if any (#5821)\n\n        if (this.state.selectingText) {\n          this.state.selectingText();\n        }\n\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old;\n      }),\n      phrase: function phrase(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText;\n      },\n      getInputField: function getInputField() {\n        return this.display.input.getField();\n      },\n      getWrapperElement: function getWrapperElement() {\n        return this.display.wrapper;\n      },\n      getScrollerElement: function getScrollerElement() {\n        return this.display.scroller;\n      },\n      getGutterElement: function getGutterElement() {\n        return this.display.gutters;\n      }\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function (type, name, value) {\n      if (!helpers.hasOwnProperty(type)) {\n        helpers[type] = CodeMirror[type] = {\n          _global: []\n        };\n      }\n\n      helpers[type][name] = value;\n    };\n\n    CodeMirror.registerGlobalHelper = function (type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n\n      helpers[type]._global.push({\n        pred: predicate,\n        val: value\n      });\n    };\n  } // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"char\", \"column\" (like char, but doesn't\n  // cross line boundaries), \"word\" (across next word), or \"group\" (to\n  // the start of next group of word or non-word-non-whitespace\n  // chars). The visually param controls whether, in right-to-left\n  // text, direction 1 means to move towards the next index in the\n  // string, or towards the character to the right of the current\n  // position. The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n\n\n  function _findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n\n    function findNextLine() {\n      var l = pos.line + dir;\n\n      if (l < doc.first || l >= doc.first + doc.size) {\n        return false;\n      }\n\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l);\n    }\n\n    function moveOnce(boundToLine) {\n      var next;\n\n      if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n\n      if (next == null) {\n        if (!boundToLine && findNextLine()) {\n          pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir);\n        } else {\n          return false;\n        }\n      } else {\n        pos = next;\n      }\n\n      return true;\n    }\n\n    if (unit == \"char\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null,\n          group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) {\n          break;\n        }\n\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\" : group && cur == \"\\n\" ? \"n\" : !group || /\\s/.test(cur) ? null : \"p\";\n\n        if (group && !first && !type) {\n          type = \"s\";\n        }\n\n        if (sawType && sawType != type) {\n          if (dir < 0) {\n            dir = 1;\n            moveOnce();\n            pos.sticky = \"after\";\n          }\n\n          break;\n        }\n\n        if (type) {\n          sawType = type;\n        }\n\n        if (dir > 0 && !moveOnce(!first)) {\n          break;\n        }\n      }\n    }\n\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n\n    if (equalCursorPos(oldPos, result)) {\n      result.hitSide = true;\n    }\n\n    return result;\n  } // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n\n\n  function _findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc,\n        x = pos.left,\n        y;\n\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n\n    var target;\n\n    for (;;) {\n      target = _coordsChar(cm, x, y);\n\n      if (!target.outside) {\n        break;\n      }\n\n      if (dir < 0 ? y <= 0 : y >= doc.height) {\n        target.hitSide = true;\n        break;\n      }\n\n      y += dir * 5;\n    }\n\n    return target;\n  } // CONTENTEDITABLE INPUT STYLE\n\n\n  var ContentEditableInput = function ContentEditableInput(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n    var this$1 = this;\n    var input = this,\n        cm = input.cm;\n    var div = input.div = display.lineDiv;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n    on(div, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n        return;\n      } // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n\n\n      if (ie_version <= 11) {\n        setTimeout(operation(cm, function () {\n          return this$1.updateFromDOM();\n        }), 20);\n      }\n    });\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {\n        data: e.data,\n        done: false\n      };\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) {\n        this$1.composing = {\n          data: e.data,\n          done: false\n        };\n      }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) {\n          this$1.readFromDOMSoon();\n        }\n\n        this$1.composing.done = true;\n      }\n    });\n    on(div, \"touchstart\", function () {\n      return input.forceCompositionEnd();\n    });\n    on(div, \"input\", function () {\n      if (!this$1.composing) {\n        this$1.readFromDOMSoon();\n      }\n    });\n\n    function onCopyCut(e) {\n      if (signalDOMEvent(cm, e)) {\n        return;\n      }\n\n      if (cm.somethingSelected()) {\n        setLastCopied({\n          lineWise: false,\n          text: cm.getSelections()\n        });\n\n        if (e.type == \"cut\") {\n          cm.replaceSelection(\"\", null, \"cut\");\n        }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return;\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({\n          lineWise: true,\n          text: ranges.text\n        });\n\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\"); // iOS exposes the clipboard API, but seems to discard content inserted into it\n\n        e.clipboardData.setData(\"Text\", content);\n\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return;\n        }\n      } // Old-fashioned briefly-focus-a-textarea hack\n\n\n      var kludge = hiddenTextarea(),\n          te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = document.activeElement;\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n\n        if (hadFocus == div) {\n          input.showPrimarySelection();\n        }\n      }, 50);\n    }\n\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = this.cm.state.focused;\n    return result;\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) {\n      return;\n    }\n\n    if (info.focus || takeFocus) {\n      this.showPrimarySelection();\n    }\n\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection();\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(),\n        cm = this.cm,\n        prim = cm.doc.sel.primary();\n    var from = prim.from(),\n        to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return;\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad && cmp(minPos(curAnchor, curFocus), from) == 0 && cmp(maxPos(curAnchor, curFocus), to) == 0) {\n      return;\n    }\n\n    var view = cm.display.view;\n    var start = from.line >= cm.display.viewFrom && posToDOM(cm, from) || {\n      node: view[0].measure.map[2],\n      offset: 0\n    };\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {\n        node: map[map.length - 1],\n        offset: map[map.length - 2] - map[map.length - 3]\n      };\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return;\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0),\n        rng;\n\n    try {\n      rng = range(start.node, start.offset, end.offset, end.node);\n    } catch (e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n\n\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n\n      if (old && sel.anchorNode == null) {\n        sel.addRange(old);\n      } else if (gecko) {\n        this.startGracePeriod();\n      }\n    }\n\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n    var this$1 = this;\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n\n      if (this$1.selectionChanged()) {\n        this$1.cm.operation(function () {\n          return this$1.cm.curOp.selectionChanged = true;\n        });\n      }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode;\n    this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode;\n    this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n\n    if (!sel.rangeCount) {\n      return false;\n    }\n\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node);\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor()) {\n        this.showSelection(this.prepareSelection(), true);\n      }\n\n      this.div.focus();\n    }\n  };\n\n  ContentEditableInput.prototype.blur = function () {\n    this.div.blur();\n  };\n\n  ContentEditableInput.prototype.getField = function () {\n    return this.div;\n  };\n\n  ContentEditableInput.prototype.supportsTouch = function () {\n    return true;\n  };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n    var input = this;\n\n    if (this.selectionInEditor()) {\n      this.pollSelection();\n    } else {\n      runInOp(this.cm, function () {\n        return input.cm.curOp.selectionChanged = true;\n      });\n    }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) {\n      return;\n    }\n\n    var sel = this.getSelection(),\n        cm = this.cm; // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({\n        type: \"keydown\",\n        keyCode: 8,\n        preventDefault: Math.abs\n      });\n      this.blur();\n      this.focus();\n      return;\n    }\n\n    if (this.composing) {\n      return;\n    }\n\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n\n    if (anchor && head) {\n      runInOp(cm, function () {\n        setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n\n        if (anchor.bad || head.bad) {\n          cm.curOp.selectionChanged = true;\n        }\n      });\n    }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm,\n        display = cm.display,\n        sel = cm.doc.sel.primary();\n    var from = sel.from(),\n        to = sel.to();\n\n    if (from.ch == 0 && from.line > cm.firstLine()) {\n      from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length);\n    }\n\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine()) {\n      to = Pos(to.line + 1, 0);\n    }\n\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) {\n      return false;\n    }\n\n    var fromIndex, fromLine, fromNode;\n\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) {\n      return false;\n    }\n\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) {\n        newText.pop();\n        oldText.pop();\n        toLine--;\n      } else if (newText[0] == oldText[0]) {\n        newText.shift();\n        oldText.shift();\n        fromLine++;\n      } else {\n        break;\n      }\n    }\n\n    var cutFront = 0,\n        cutEnd = 0;\n    var newTop = newText[0],\n        oldTop = oldText[0],\n        maxCutFront = Math.min(newTop.length, oldTop.length);\n\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront)) {\n      ++cutFront;\n    }\n\n    var newBot = lst(newText),\n        oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0), oldBot.length - (oldText.length == 1 ? cutFront : 0));\n\n    while (cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n      ++cutEnd;\n    } // Try to move start of change to start of selection if ambiguous\n\n\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      _replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n\n      return true;\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) {\n      return;\n    }\n\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n    var this$1 = this;\n\n    if (this.readDOMTimeout != null) {\n      return;\n    }\n\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n\n      if (this$1.composing) {\n        if (this$1.composing.done) {\n          this$1.composing = null;\n        } else {\n          return;\n        }\n      }\n\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n    var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent()) {\n      runInOp(this.cm, function () {\n        return regChange(this$1.cm);\n      });\n    }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (!this.cm.isReadOnly()) {\n      operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);\n    }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n\n    if (!view || view.hidden) {\n      return null;\n    }\n\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n    var order = getOrder(line, cm.doc.direction),\n        side = \"left\";\n\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result;\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode) {\n      if (/CodeMirror-gutter-wrapper/.test(scan.className)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function badPos(pos, bad) {\n    if (bad) {\n      pos.bad = true;\n    }\n\n    return pos;\n  }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\",\n        closing = false,\n        lineSep = cm.doc.lineSeparator(),\n        extraLinebreak = false;\n\n    function recognizeMarker(id) {\n      return function (marker) {\n        return marker.id == id;\n      };\n    }\n\n    function close() {\n      if (closing) {\n        text += lineSep;\n\n        if (extraLinebreak) {\n          text += lineSep;\n        }\n\n        closing = extraLinebreak = false;\n      }\n    }\n\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n\n        if (cmText) {\n          addText(cmText);\n          return;\n        }\n\n        var markerID = node.getAttribute(\"cm-marker\"),\n            range;\n\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n\n          if (found.length && (range = found[0].find(0))) {\n            addText(getBetween(cm.doc, range.from, range.to).join(lineSep));\n          }\n\n          return;\n        }\n\n        if (node.getAttribute(\"contenteditable\") == \"false\") {\n          return;\n        }\n\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) {\n          return;\n        }\n\n        if (isBlock) {\n          close();\n        }\n\n        for (var i = 0; i < node.childNodes.length; i++) {\n          walk(node.childNodes[i]);\n        }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) {\n          extraLinebreak = true;\n        }\n\n        if (isBlock) {\n          closing = true;\n        }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n\n    for (;;) {\n      walk(from);\n\n      if (from == to) {\n        break;\n      }\n\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n\n    return text;\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n\n      if (!lineNode) {\n        return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);\n      }\n\n      node = null;\n      offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) {\n          return null;\n        }\n\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) {\n          break;\n        }\n      }\n    }\n\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n\n      if (lineView.node == lineNode) {\n        return locateNodeInLineView(lineView, node, offset);\n      }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild,\n        bad = false;\n\n    if (!node || !contains(wrapper, node)) {\n      return badPos(Pos(lineNo(lineView.line), 0), true);\n    }\n\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad);\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null,\n        topNode = node;\n\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n\n      if (offset) {\n        offset = textNode.nodeValue.length;\n      }\n    }\n\n    while (topNode.parentNode != wrapper) {\n      topNode = topNode.parentNode;\n    }\n\n    var measure = lineView.measure,\n        maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n\n            if (offset < 0 || curNode != textNode) {\n              ch = map[j + (offset ? 1 : 0)];\n            }\n\n            return Pos(line, ch);\n          }\n        }\n      }\n    }\n\n    var found = find(textNode, topNode, offset);\n\n    if (found) {\n      return badPos(found, bad);\n    } // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n\n\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n\n      if (found) {\n        return badPos(Pos(found.line, found.ch - dist), bad);\n      } else {\n        dist += after.textContent.length;\n      }\n    }\n\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n\n      if (found) {\n        return badPos(Pos(found.line, found.ch + dist$1), bad);\n      } else {\n        dist$1 += before.textContent.length;\n      }\n    }\n  } // TEXTAREA INPUT STYLE\n\n\n  var TextareaInput = function TextareaInput(cm) {\n    this.cm = cm; // See input.poll and input.reset\n\n    this.prevInput = \"\"; // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n\n    this.pollingFast = false; // Self-resetting timeout for the poller\n\n    this.polling = new Delayed(); // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n    var this$1 = this;\n    var input = this,\n        cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild); // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n\n    if (ios) {\n      te.style.width = \"0px\";\n    }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) {\n        this$1.hasSelection = null;\n      }\n\n      input.poll();\n    });\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n        return;\n      }\n\n      cm.state.pasteIncoming = +new Date();\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) {\n        return;\n      }\n\n      if (cm.somethingSelected()) {\n        setLastCopied({\n          lineWise: false,\n          text: cm.getSelections()\n        });\n      } else if (!cm.options.lineWiseCopyCut) {\n        return;\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({\n          lineWise: true,\n          text: ranges.text\n        });\n\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n\n      if (e.type == \"cut\") {\n        cm.state.cutIncoming = +new Date();\n      }\n    }\n\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) {\n        return;\n      }\n\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date();\n        input.focus();\n        return;\n      } // Pass the `paste` event to the textarea so it's handled by its event listener.\n\n\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    }); // Prevent normal selection in the editor (we handle our own)\n\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) {\n        e_preventDefault(e);\n      }\n    });\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n\n      if (input.composing) {\n        input.composing.range.clear();\n      }\n\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {\n          className: \"CodeMirror-composing\"\n        })\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea(); // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm,\n        display = cm.display,\n        doc = cm.doc;\n    var result = prepareSelection(cm); // Move the hidden textarea near the cursor to prevent scrolling artifacts\n\n    if (cm.options.moveInputWithCursor) {\n      var headPos = _cursorCoords(cm, doc.sel.primary().head, \"div\");\n\n      var wrapOff = display.wrapper.getBoundingClientRect(),\n          lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10, headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10, headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result;\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm,\n        display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  }; // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n\n\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) {\n      return;\n    }\n\n    var cm = this.cm;\n\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n\n      if (cm.state.focused) {\n        selectInput(this.textarea);\n      }\n\n      if (ie && ie_version >= 9) {\n        this.hasSelection = content;\n      }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n\n      if (ie && ie_version >= 9) {\n        this.hasSelection = null;\n      }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () {\n    return this.textarea;\n  };\n\n  TextareaInput.prototype.supportsTouch = function () {\n    return false;\n  };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try {\n        this.textarea.focus();\n      } catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n\n    }\n  };\n\n  TextareaInput.prototype.blur = function () {\n    this.textarea.blur();\n  };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () {\n    this.slowPoll();\n  }; // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n\n\n  TextareaInput.prototype.slowPoll = function () {\n    var this$1 = this;\n\n    if (this.pollingFast) {\n      return;\n    }\n\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n\n      if (this$1.cm.state.focused) {\n        this$1.slowPoll();\n      }\n    });\n  }; // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n\n\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false,\n        input = this;\n    input.pollingFast = true;\n\n    function p() {\n      var changed = input.poll();\n\n      if (!changed && !missed) {\n        missed = true;\n        input.polling.set(60, p);\n      } else {\n        input.pollingFast = false;\n        input.slowPoll();\n      }\n    }\n\n    input.polling.set(20, p);\n  }; // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n\n\n  TextareaInput.prototype.poll = function () {\n    var this$1 = this;\n    var cm = this.cm,\n        input = this.textarea,\n        prevInput = this.prevInput; // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n\n    if (this.contextMenuPending || !cm.state.focused || hasSelection(input) && !prevInput && !this.composing || cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq) {\n      return false;\n    }\n\n    var text = input.value; // If nothing changed, bail.\n\n    if (text == prevInput && !cm.somethingSelected()) {\n      return false;\n    } // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n\n\n    if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false;\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n\n      if (first == 0x200b && !prevInput) {\n        prevInput = \"\\u200B\";\n      }\n\n      if (first == 0x21da) {\n        this.reset();\n        return this.cm.execCommand(\"undo\");\n      }\n    } // Find the part of the input that is actually new\n\n\n    var same = 0,\n        l = Math.min(prevInput.length, text.length);\n\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) {\n      ++same;\n    }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same, null, this$1.composing ? \"*compose\" : null); // Don't leave long text in the textarea, since it makes further polling slow\n\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) {\n        input.value = this$1.prevInput = \"\";\n      } else {\n        this$1.prevInput = text;\n      }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"), {\n          className: \"CodeMirror-composing\"\n        });\n      }\n    });\n    return true;\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) {\n      this.pollingFast = false;\n    }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) {\n      this.hasSelection = null;\n    }\n\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this,\n        cm = input.cm,\n        display = cm.display,\n        te = input.textarea;\n\n    if (input.contextMenuPending) {\n      input.contextMenuPending();\n    }\n\n    var pos = posFromMouse(cm, e),\n        scrollPos = display.scroller.scrollTop;\n\n    if (!pos || presto) {\n      return;\n    } // Opera is difficult.\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n\n\n    var reset = cm.options.resetSelectionOnContextMenu;\n\n    if (reset && cm.doc.sel.contains(pos) == -1) {\n      operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);\n    }\n\n    var oldCSS = te.style.cssText,\n        oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n\n    if (webkit) {\n      oldScrollY = window.scrollY;\n    } // Work around Chrome issue (#2712)\n\n\n    display.input.focus();\n\n    if (webkit) {\n      window.scrollTo(null, oldScrollY);\n    }\n\n    display.input.reset(); // Adds \"Select all\" to context menu in FF\n\n    if (!cm.somethingSelected()) {\n      te.value = input.prevInput = \" \";\n    }\n\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll); // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200B\" + (selected ? te.value : \"\");\n        te.value = \"\\u21DA\"; // Used to catch context-menu undo\n\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200B\";\n        te.selectionStart = 1;\n        te.selectionEnd = extval.length; // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n\n    function rehide() {\n      if (input.contextMenuPending != rehide) {\n        return;\n      }\n\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n\n      if (ie && ie_version < 9) {\n        display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);\n      } // Try to detect the user choosing select-all\n\n\n      if (te.selectionStart != null) {\n        if (!ie || ie && ie_version < 9) {\n          prepareSelectAllHack();\n        }\n\n        var i = 0,\n            poll = function poll() {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 && te.selectionEnd > 0 && input.prevInput == \"\\u200B\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) {\n      prepareSelectAllHack();\n    }\n\n    if (captureRightClick) {\n      e_stop(e);\n\n      var mouseup = function mouseup() {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) {\n      this.reset();\n    }\n\n    this.textarea.disabled = val == \"nocursor\";\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n\n    if (!options.tabindex && textarea.tabIndex) {\n      options.tabindex = textarea.tabIndex;\n    }\n\n    if (!options.placeholder && textarea.placeholder) {\n      options.placeholder = textarea.placeholder;\n    } // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n\n\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea || textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {\n      textarea.value = cm.getValue();\n    }\n\n    var realSubmit;\n\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save); // Deplorable hack to make the submit method do the right thing.\n\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch (e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n\n      cm.getTextArea = function () {\n        return textarea;\n      };\n\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\") {\n            textarea.form.submit = realSubmit;\n          }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) {\n      return textarea.parentNode.insertBefore(node, textarea.nextSibling);\n    }, options);\n    return cm;\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  } // EDITOR CONSTRUCTOR\n\n\n  defineOptions(CodeMirror);\n  addEditorMethods(CodeMirror); // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n\n  for (var prop in Doc.prototype) {\n    if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0) {\n      CodeMirror.prototype[prop] = function (method) {\n        return function () {\n          return method.apply(this.doc, arguments);\n        };\n      }(Doc.prototype[prop]);\n    }\n  }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\n    \"textarea\": TextareaInput,\n    \"contenteditable\": ContentEditableInput\n  }; // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n\n  CodeMirror.defineMode = function (name\n  /*, mode, …*/\n  ) {\n    if (!CodeMirror.defaults.mode && name != \"null\") {\n      CodeMirror.defaults.mode = name;\n    }\n\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME; // Minimal default mode.\n\n  CodeMirror.defineMode(\"null\", function () {\n    return {\n      token: function token(stream) {\n        return stream.skipToEnd();\n      }\n    };\n  });\n  CodeMirror.defineMIME(\"text/plain\", \"null\"); // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n  addLegacyProps(CodeMirror);\n  CodeMirror.version = \"5.50.0\";\n  return CodeMirror;\n});","import _extends from 'babel-runtime/helpers/extends';\nimport moment from 'moment';\nvar defaultDisabledTime = {\n  disabledHours: function disabledHours() {\n    return [];\n  },\n  disabledMinutes: function disabledMinutes() {\n    return [];\n  },\n  disabledSeconds: function disabledSeconds() {\n    return [];\n  }\n};\nexport function getTodayTime(value) {\n  var today = moment();\n  today.locale(value.locale()).utcOffset(value.utcOffset());\n  return today;\n}\nexport function getTitleString(value) {\n  return value.format('LL');\n}\nexport function getTodayTimeStr(value) {\n  var today = getTodayTime(value);\n  return getTitleString(today);\n}\nexport function getMonthName(month) {\n  var locale = month.locale();\n  var localeData = month.localeData();\n  return localeData[locale === 'zh-cn' ? 'months' : 'monthsShort'](month);\n}\nexport function syncTime(from, to) {\n  if (!moment.isMoment(from) || !moment.isMoment(to)) return;\n  to.hour(from.hour());\n  to.minute(from.minute());\n  to.second(from.second());\n  to.millisecond(from.millisecond());\n}\nexport function getTimeConfig(value, disabledTime) {\n  var disabledTimeConfig = disabledTime ? disabledTime(value) : {};\n  disabledTimeConfig = _extends({}, defaultDisabledTime, disabledTimeConfig);\n  return disabledTimeConfig;\n}\nexport function isTimeValidByConfig(value, disabledTimeConfig) {\n  var invalidTime = false;\n\n  if (value) {\n    var hour = value.hour();\n    var minutes = value.minute();\n    var seconds = value.second();\n    var disabledHours = disabledTimeConfig.disabledHours();\n\n    if (disabledHours.indexOf(hour) === -1) {\n      var disabledMinutes = disabledTimeConfig.disabledMinutes(hour);\n\n      if (disabledMinutes.indexOf(minutes) === -1) {\n        var disabledSeconds = disabledTimeConfig.disabledSeconds(hour, minutes);\n        invalidTime = disabledSeconds.indexOf(seconds) !== -1;\n      } else {\n        invalidTime = true;\n      }\n    } else {\n      invalidTime = true;\n    }\n  }\n\n  return !invalidTime;\n}\nexport function isTimeValid(value, disabledTime) {\n  var disabledTimeConfig = getTimeConfig(value, disabledTime);\n  return isTimeValidByConfig(value, disabledTimeConfig);\n}\nexport function isAllowedDate(value, disabledDate, disabledTime) {\n  if (disabledDate) {\n    if (disabledDate(value)) {\n      return false;\n    }\n  }\n\n  if (disabledTime) {\n    if (!isTimeValid(value, disabledTime)) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function formatDate(value, format) {\n  if (!value) {\n    return '';\n  }\n\n  if (Array.isArray(format)) {\n    format = format[0];\n  }\n\n  return value.format(format);\n}","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport PropTypes from 'prop-types';\nimport enUs from '../locale/en_US';\n\nfunction noop() {}\n\nexport var propType = {\n  className: PropTypes.string,\n  locale: PropTypes.object,\n  style: PropTypes.object,\n  visible: PropTypes.bool,\n  onSelect: PropTypes.func,\n  prefixCls: PropTypes.string,\n  onChange: PropTypes.func,\n  onOk: PropTypes.func\n};\nexport var defaultProp = {\n  locale: enUs,\n  style: {},\n  visible: true,\n  prefixCls: 'rc-calendar',\n  className: '',\n  onSelect: noop,\n  onChange: noop,\n  onClear: noop,\n  renderFooter: function renderFooter() {\n    return null;\n  },\n  renderSidebar: function renderSidebar() {\n    return null;\n  }\n};\nexport var commonMixinWrapper = function commonMixinWrapper(ComposeComponent) {\n  var _class, _temp2;\n\n  return _temp2 = _class = function (_ComposeComponent) {\n    _inherits(_class, _ComposeComponent);\n\n    function _class() {\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, _class);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, _ComposeComponent.call.apply(_ComposeComponent, [this].concat(args))), _this), _this.getFormat = function () {\n        var format = _this.props.format;\n        var _this$props = _this.props,\n            locale = _this$props.locale,\n            timePicker = _this$props.timePicker;\n\n        if (!format) {\n          if (timePicker) {\n            format = locale.dateTimeFormat;\n          } else {\n            format = locale.dateFormat;\n          }\n        }\n\n        return format;\n      }, _this.focus = function () {\n        if (_this.focusElement) {\n          _this.focusElement.focus();\n        } else if (_this.rootInstance) {\n          _this.rootInstance.focus();\n        }\n      }, _this.saveFocusElement = function (focusElement) {\n        _this.focusElement = focusElement;\n      }, _this.saveRoot = function (root) {\n        _this.rootInstance = root;\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _class.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n      return this.props.visible || nextProps.visible;\n    };\n\n    return _class;\n  }(ComposeComponent), _class.displayName = 'CommonMixinWrapper', _class.defaultProps = ComposeComponent.defaultProps, _class.getDerivedStateFromProps = ComposeComponent.getDerivedStateFromProps, _temp2;\n};","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2018, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n;\n\n(function (root) {\n  'use strict';\n  /**\n   * Block-Level Grammar\n   */\n\n  var block = {\n    newline: /^\\n+/,\n    code: /^( {4}[^\\n]+\\n*)+/,\n    fences: /^ {0,3}(`{3,}|~{3,})([^`~\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n    hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n    heading: /^ {0,3}(#{1,6}) +([^\\n]*?)(?: +#+)? *(?:\\n+|$)/,\n    blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n    list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n    html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?\\\\?>\\\\n*' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?>\\\\n*' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\\\\n*' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (6)\n    + '|<(?!script|pre|style)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) open tag\n    + '|</(?!script|pre|style)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) closing tag\n    + ')',\n    def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n    nptable: noop,\n    table: noop,\n    lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    // regex template, placeholders will be replaced according to different paragraph\n    // interruption rules of commonmark and the original markdown spec:\n    _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\\n]+)*)/,\n    text: /^[^\\n]+/\n  };\n  block._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\n  block._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\n  block.def = edit(block.def).replace('label', block._label).replace('title', block._title).getRegex();\n  block.bullet = /(?:[*+-]|\\d{1,9}\\.)/;\n  block.item = /^( *)(bull) ?[^\\n]*(?:\\n(?!\\1bull ?)[^\\n]*)*/;\n  block.item = edit(block.item, 'gm').replace(/bull/g, block.bullet).getRegex();\n  block.list = edit(block.list).replace(/bull/g, block.bullet).replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))').replace('def', '\\\\n+(?=' + block.def.source + ')').getRegex();\n  block._tag = 'address|article|aside|base|basefont|blockquote|body|caption' + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption' + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe' + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option' + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr' + '|track|ul';\n  block._comment = /<!--(?!-?>)[\\s\\S]*?-->/;\n  block.html = edit(block.html, 'i').replace('comment', block._comment).replace('tag', block._tag).replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex();\n  block.paragraph = edit(block._paragraph).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} +').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}|~{3,})[^`\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)').replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  block.blockquote = edit(block.blockquote).replace('paragraph', block.paragraph).getRegex();\n  /**\n   * Normal Block Grammar\n   */\n\n  block.normal = merge({}, block);\n  /**\n   * GFM Block Grammar\n   */\n\n  block.gfm = merge({}, block.normal, {\n    nptable: /^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:.*[^>\\n ].*(?:\\n|$))*)\\n*|$)/,\n    table: /^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n((?: *[^>\\n ].*(?:\\n|$))*)\\n*|$)/\n  });\n  /**\n   * Pedantic grammar (original John Gruber's loose markdown specification)\n   */\n\n  block.pedantic = merge({}, block.normal, {\n    html: edit('^ *(?:comment *(?:\\\\n|\\\\s*$)' + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))').replace('comment', block._comment).replace(/tag/g, '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub' + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)' + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b').getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^ *(#{1,6}) *([^\\n]+?) *(?:#+ *)?(?:\\n+|$)/,\n    fences: noop,\n    // fences not supported\n    paragraph: edit(block.normal._paragraph).replace('hr', block.hr).replace('heading', ' *#{1,6} *[^\\n]').replace('lheading', block.lheading).replace('blockquote', ' {0,3}>').replace('|fences', '').replace('|list', '').replace('|html', '').getRegex()\n  });\n  /**\n   * Block Lexer\n   */\n\n  function Lexer(options) {\n    this.tokens = [];\n    this.tokens.links = Object.create(null);\n    this.options = options || marked.defaults;\n    this.rules = block.normal;\n\n    if (this.options.pedantic) {\n      this.rules = block.pedantic;\n    } else if (this.options.gfm) {\n      this.rules = block.gfm;\n    }\n  }\n  /**\n   * Expose Block Rules\n   */\n\n\n  Lexer.rules = block;\n  /**\n   * Static Lex Method\n   */\n\n  Lexer.lex = function (src, options) {\n    var lexer = new Lexer(options);\n    return lexer.lex(src);\n  };\n  /**\n   * Preprocessing\n   */\n\n\n  Lexer.prototype.lex = function (src) {\n    src = src.replace(/\\r\\n|\\r/g, '\\n').replace(/\\t/g, '    ').replace(/\\u00a0/g, ' ').replace(/\\u2424/g, '\\n');\n    return this.token(src, true);\n  };\n  /**\n   * Lexing\n   */\n\n\n  Lexer.prototype.token = function (src, top) {\n    src = src.replace(/^ +$/gm, '');\n    var next, loose, cap, bull, b, item, listStart, listItems, t, space, i, tag, l, isordered, istask, ischecked;\n\n    while (src) {\n      // newline\n      if (cap = this.rules.newline.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        if (cap[0].length > 1) {\n          this.tokens.push({\n            type: 'space'\n          });\n        }\n      } // code\n\n\n      if (cap = this.rules.code.exec(src)) {\n        var lastToken = this.tokens[this.tokens.length - 1];\n        src = src.substring(cap[0].length); // An indented code block cannot interrupt a paragraph.\n\n        if (lastToken && lastToken.type === 'paragraph') {\n          lastToken.text += '\\n' + cap[0].trimRight();\n        } else {\n          cap = cap[0].replace(/^ {4}/gm, '');\n          this.tokens.push({\n            type: 'code',\n            codeBlockStyle: 'indented',\n            text: !this.options.pedantic ? rtrim(cap, '\\n') : cap\n          });\n        }\n\n        continue;\n      } // fences\n\n\n      if (cap = this.rules.fences.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'code',\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: cap[3] || ''\n        });\n        continue;\n      } // heading\n\n\n      if (cap = this.rules.heading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[1].length,\n          text: cap[2]\n        });\n        continue;\n      } // table no leading pipe (gfm)\n\n\n      if (cap = this.rules.nptable.exec(src)) {\n        item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          src = src.substring(cap[0].length);\n\n          for (i = 0; i < item.align.length; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          for (i = 0; i < item.cells.length; i++) {\n            item.cells[i] = splitCells(item.cells[i], item.header.length);\n          }\n\n          this.tokens.push(item);\n          continue;\n        }\n      } // hr\n\n\n      if (cap = this.rules.hr.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'hr'\n        });\n        continue;\n      } // blockquote\n\n\n      if (cap = this.rules.blockquote.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'blockquote_start'\n        });\n        cap = cap[0].replace(/^ *> ?/gm, ''); // Pass `top` to keep the current\n        // \"toplevel\" state. This is exactly\n        // how markdown.pl works.\n\n        this.token(cap, top);\n        this.tokens.push({\n          type: 'blockquote_end'\n        });\n        continue;\n      } // list\n\n\n      if (cap = this.rules.list.exec(src)) {\n        src = src.substring(cap[0].length);\n        bull = cap[2];\n        isordered = bull.length > 1;\n        listStart = {\n          type: 'list_start',\n          ordered: isordered,\n          start: isordered ? +bull : '',\n          loose: false\n        };\n        this.tokens.push(listStart); // Get each top-level item.\n\n        cap = cap[0].match(this.rules.item);\n        listItems = [];\n        next = false;\n        l = cap.length;\n        i = 0;\n\n        for (; i < l; i++) {\n          item = cap[i]; // Remove the list item's bullet\n          // so it is seen as the next token.\n\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+\\.) */, ''); // Outdent whatever the\n          // list item contains. Hacky.\n\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\n          } // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n\n\n          if (i !== l - 1) {\n            b = block.bullet.exec(cap[i + 1])[0];\n\n            if (bull.length > 1 ? b.length === 1 : b.length > 1 || this.options.smartLists && b !== bull) {\n              src = cap.slice(i + 1).join('\\n') + src;\n              i = l - 1;\n            }\n          } // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n\n\n          loose = next || /\\n\\n(?!\\s*$)/.test(item);\n\n          if (i !== l - 1) {\n            next = item.charAt(item.length - 1) === '\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            listStart.loose = true;\n          } // Check for task list items\n\n\n          istask = /^\\[[ xX]\\] /.test(item);\n          ischecked = undefined;\n\n          if (istask) {\n            ischecked = item[1] !== ' ';\n            item = item.replace(/^\\[[ xX]\\] +/, '');\n          }\n\n          t = {\n            type: 'list_item_start',\n            task: istask,\n            checked: ischecked,\n            loose: loose\n          };\n          listItems.push(t);\n          this.tokens.push(t); // Recurse.\n\n          this.token(item, false);\n          this.tokens.push({\n            type: 'list_item_end'\n          });\n        }\n\n        if (listStart.loose) {\n          l = listItems.length;\n          i = 0;\n\n          for (; i < l; i++) {\n            listItems[i].loose = true;\n          }\n        }\n\n        this.tokens.push({\n          type: 'list_end'\n        });\n        continue;\n      } // html\n\n\n      if (cap = this.rules.html.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: this.options.sanitize ? 'paragraph' : 'html',\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0]\n        });\n        continue;\n      } // def\n\n\n      if (top && (cap = this.rules.def.exec(src))) {\n        src = src.substring(cap[0].length);\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n\n        if (!this.tokens.links[tag]) {\n          this.tokens.links[tag] = {\n            href: cap[2],\n            title: cap[3]\n          };\n        }\n\n        continue;\n      } // table (gfm)\n\n\n      if (cap = this.rules.table.exec(src)) {\n        item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          src = src.substring(cap[0].length);\n\n          for (i = 0; i < item.align.length; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          for (i = 0; i < item.cells.length; i++) {\n            item.cells[i] = splitCells(item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''), item.header.length);\n          }\n\n          this.tokens.push(item);\n          continue;\n        }\n      } // lheading\n\n\n      if (cap = this.rules.lheading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1]\n        });\n        continue;\n      } // top-level paragraph\n\n\n      if (top && (cap = this.rules.paragraph.exec(src))) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'paragraph',\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1]\n        });\n        continue;\n      } // text\n\n\n      if (cap = this.rules.text.exec(src)) {\n        // Top-level should never reach here.\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'text',\n          text: cap[0]\n        });\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return this.tokens;\n  };\n  /**\n   * Inline-Level Grammar\n   */\n\n\n  var inline = {\n    escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n    autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n    url: noop,\n    tag: '^comment' + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>',\n    // CDATA section\n    link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n    reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n    nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n    strong: /^__([^\\s_])__(?!_)|^\\*\\*([^\\s*])\\*\\*(?!\\*)|^__([^\\s][\\s\\S]*?[^\\s])__(?!_)|^\\*\\*([^\\s][\\s\\S]*?[^\\s])\\*\\*(?!\\*)/,\n    em: /^_([^\\s_])_(?!_)|^\\*([^\\s*<\\[])\\*(?!\\*)|^_([^\\s<][\\s\\S]*?[^\\s_])_(?!_|[^\\spunctuation])|^_([^\\s_<][\\s\\S]*?[^\\s])_(?!_|[^\\spunctuation])|^\\*([^\\s<\"][\\s\\S]*?[^\\s\\*])\\*(?!\\*|[^\\spunctuation])|^\\*([^\\s*\"<\\[][\\s\\S]*?[^\\s])\\*(?!\\*)/,\n    code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n    br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n    del: noop,\n    text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*]|\\b_|$)|[^ ](?= {2,}\\n))|(?= {2,}\\n))/\n  }; // list of punctuation marks from common mark spec\n  // without ` and ] to workaround Rule 17 (inline code blocks/links)\n\n  inline._punctuation = '!\"#$%&\\'()*+,\\\\-./:;<=>?@\\\\[^_{|}~';\n  inline.em = edit(inline.em).replace(/punctuation/g, inline._punctuation).getRegex();\n  inline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n  inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\n  inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\n  inline.autolink = edit(inline.autolink).replace('scheme', inline._scheme).replace('email', inline._email).getRegex();\n  inline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n  inline.tag = edit(inline.tag).replace('comment', block._comment).replace('attribute', inline._attribute).getRegex();\n  inline._label = /(?:\\[[^\\[\\]]*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\n  inline._href = /<(?:\\\\[<>]?|[^\\s<>\\\\])*>|[^\\s\\x00-\\x1f]*/;\n  inline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n  inline.link = edit(inline.link).replace('label', inline._label).replace('href', inline._href).replace('title', inline._title).getRegex();\n  inline.reflink = edit(inline.reflink).replace('label', inline._label).getRegex();\n  /**\n   * Normal Inline Grammar\n   */\n\n  inline.normal = merge({}, inline);\n  /**\n   * Pedantic Inline Grammar\n   */\n\n  inline.pedantic = merge({}, inline.normal, {\n    strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n    em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/,\n    link: edit(/^!?\\[(label)\\]\\((.*?)\\)/).replace('label', inline._label).getRegex(),\n    reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace('label', inline._label).getRegex()\n  });\n  /**\n   * GFM Inline Grammar\n   */\n\n  inline.gfm = merge({}, inline.normal, {\n    escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n    _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n    url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n    _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n    del: /^~+(?=\\S)([\\s\\S]*?\\S)~+/,\n    text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*~]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))|(?= {2,}\\n|[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))/\n  });\n  inline.gfm.url = edit(inline.gfm.url, 'i').replace('email', inline.gfm._extended_email).getRegex();\n  /**\n   * GFM + Line Breaks Inline Grammar\n   */\n\n  inline.breaks = merge({}, inline.gfm, {\n    br: edit(inline.br).replace('{2,}', '*').getRegex(),\n    text: edit(inline.gfm.text).replace('\\\\b_', '\\\\b_| {2,}\\\\n').replace(/\\{2,\\}/g, '*').getRegex()\n  });\n  /**\n   * Inline Lexer & Compiler\n   */\n\n  function InlineLexer(links, options) {\n    this.options = options || marked.defaults;\n    this.links = links;\n    this.rules = inline.normal;\n    this.renderer = this.options.renderer || new Renderer();\n    this.renderer.options = this.options;\n\n    if (!this.links) {\n      throw new Error('Tokens array requires a `links` property.');\n    }\n\n    if (this.options.pedantic) {\n      this.rules = inline.pedantic;\n    } else if (this.options.gfm) {\n      if (this.options.breaks) {\n        this.rules = inline.breaks;\n      } else {\n        this.rules = inline.gfm;\n      }\n    }\n  }\n  /**\n   * Expose Inline Rules\n   */\n\n\n  InlineLexer.rules = inline;\n  /**\n   * Static Lexing/Compiling Method\n   */\n\n  InlineLexer.output = function (src, links, options) {\n    var inline = new InlineLexer(links, options);\n    return inline.output(src);\n  };\n  /**\n   * Lexing/Compiling\n   */\n\n\n  InlineLexer.prototype.output = function (src) {\n    var out = '',\n        link,\n        text,\n        href,\n        title,\n        cap,\n        prevCapZero;\n\n    while (src) {\n      // escape\n      if (cap = this.rules.escape.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += escape(cap[1]);\n        continue;\n      } // tag\n\n\n      if (cap = this.rules.tag.exec(src)) {\n        if (!this.inLink && /^<a /i.test(cap[0])) {\n          this.inLink = true;\n        } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n          this.inLink = false;\n        }\n\n        if (!this.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.inRawBlock = true;\n        } else if (this.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.inRawBlock = false;\n        }\n\n        src = src.substring(cap[0].length);\n        out += this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0];\n        continue;\n      } // link\n\n\n      if (cap = this.rules.link.exec(src)) {\n        var lastParenIndex = findClosingBracket(cap[2], '()');\n\n        if (lastParenIndex > -1) {\n          var linkLen = 4 + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n\n        src = src.substring(cap[0].length);\n        this.inLink = true;\n        href = cap[2];\n\n        if (this.options.pedantic) {\n          link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          } else {\n            title = '';\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n        out += this.outputLink(cap, {\n          href: InlineLexer.escapes(href),\n          title: InlineLexer.escapes(title)\n        });\n        this.inLink = false;\n        continue;\n      } // reflink, nolink\n\n\n      if ((cap = this.rules.reflink.exec(src)) || (cap = this.rules.nolink.exec(src))) {\n        src = src.substring(cap[0].length);\n        link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = this.links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          out += cap[0].charAt(0);\n          src = cap[0].substring(1) + src;\n          continue;\n        }\n\n        this.inLink = true;\n        out += this.outputLink(cap, link);\n        this.inLink = false;\n        continue;\n      } // strong\n\n\n      if (cap = this.rules.strong.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.strong(this.output(cap[4] || cap[3] || cap[2] || cap[1]));\n        continue;\n      } // em\n\n\n      if (cap = this.rules.em.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.em(this.output(cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]));\n        continue;\n      } // code\n\n\n      if (cap = this.rules.code.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.codespan(escape(cap[2].trim(), true));\n        continue;\n      } // br\n\n\n      if (cap = this.rules.br.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.br();\n        continue;\n      } // del (gfm)\n\n\n      if (cap = this.rules.del.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.del(this.output(cap[1]));\n        continue;\n      } // autolink\n\n\n      if (cap = this.rules.autolink.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        if (cap[2] === '@') {\n          text = escape(this.mangle(cap[1]));\n          href = 'mailto:' + text;\n        } else {\n          text = escape(cap[1]);\n          href = text;\n        }\n\n        out += this.renderer.link(href, null, text);\n        continue;\n      } // url (gfm)\n\n\n      if (!this.inLink && (cap = this.rules.url.exec(src))) {\n        if (cap[2] === '@') {\n          text = escape(cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n\n          text = escape(cap[0]);\n\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n\n        src = src.substring(cap[0].length);\n        out += this.renderer.link(href, null, text);\n        continue;\n      } // text\n\n\n      if (cap = this.rules.text.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        if (this.inRawBlock) {\n          out += this.renderer.text(this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0]);\n        } else {\n          out += this.renderer.text(escape(this.smartypants(cap[0])));\n        }\n\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return out;\n  };\n\n  InlineLexer.escapes = function (text) {\n    return text ? text.replace(InlineLexer.rules._escapes, '$1') : text;\n  };\n  /**\n   * Compile Link\n   */\n\n\n  InlineLexer.prototype.outputLink = function (cap, link) {\n    var href = link.href,\n        title = link.title ? escape(link.title) : null;\n    return cap[0].charAt(0) !== '!' ? this.renderer.link(href, title, this.output(cap[1])) : this.renderer.image(href, title, escape(cap[1]));\n  };\n  /**\n   * Smartypants Transformations\n   */\n\n\n  InlineLexer.prototype.smartypants = function (text) {\n    if (!this.options.smartypants) return text;\n    return text // em-dashes\n    .replace(/---/g, \"\\u2014\") // en-dashes\n    .replace(/--/g, \"\\u2013\") // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, \"$1\\u2018\") // closing singles & apostrophes\n    .replace(/'/g, \"\\u2019\") // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, \"$1\\u201C\") // closing doubles\n    .replace(/\"/g, \"\\u201D\") // ellipses\n    .replace(/\\.{3}/g, \"\\u2026\");\n  };\n  /**\n   * Mangle Links\n   */\n\n\n  InlineLexer.prototype.mangle = function (text) {\n    if (!this.options.mangle) return text;\n    var out = '',\n        l = text.length,\n        i = 0,\n        ch;\n\n    for (; i < l; i++) {\n      ch = text.charCodeAt(i);\n\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  };\n  /**\n   * Renderer\n   */\n\n\n  function Renderer(options) {\n    this.options = options || marked.defaults;\n  }\n\n  Renderer.prototype.code = function (code, infostring, escaped) {\n    var lang = (infostring || '').match(/\\S*/)[0];\n\n    if (this.options.highlight) {\n      var out = this.options.highlight(code, lang);\n\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    if (!lang) {\n      return '<pre><code>' + (escaped ? code : escape(code, true)) + '</code></pre>';\n    }\n\n    return '<pre><code class=\"' + this.options.langPrefix + escape(lang, true) + '\">' + (escaped ? code : escape(code, true)) + '</code></pre>\\n';\n  };\n\n  Renderer.prototype.blockquote = function (quote) {\n    return '<blockquote>\\n' + quote + '</blockquote>\\n';\n  };\n\n  Renderer.prototype.html = function (html) {\n    return html;\n  };\n\n  Renderer.prototype.heading = function (text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      return '<h' + level + ' id=\"' + this.options.headerPrefix + slugger.slug(raw) + '\">' + text + '</h' + level + '>\\n';\n    } // ignore IDs\n\n\n    return '<h' + level + '>' + text + '</h' + level + '>\\n';\n  };\n\n  Renderer.prototype.hr = function () {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  };\n\n  Renderer.prototype.list = function (body, ordered, start) {\n    var type = ordered ? 'ol' : 'ul',\n        startatt = ordered && start !== 1 ? ' start=\"' + start + '\"' : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  };\n\n  Renderer.prototype.listitem = function (text) {\n    return '<li>' + text + '</li>\\n';\n  };\n\n  Renderer.prototype.checkbox = function (checked) {\n    return '<input ' + (checked ? 'checked=\"\" ' : '') + 'disabled=\"\" type=\"checkbox\"' + (this.options.xhtml ? ' /' : '') + '> ';\n  };\n\n  Renderer.prototype.paragraph = function (text) {\n    return '<p>' + text + '</p>\\n';\n  };\n\n  Renderer.prototype.table = function (header, body) {\n    if (body) body = '<tbody>' + body + '</tbody>';\n    return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + body + '</table>\\n';\n  };\n\n  Renderer.prototype.tablerow = function (content) {\n    return '<tr>\\n' + content + '</tr>\\n';\n  };\n\n  Renderer.prototype.tablecell = function (content, flags) {\n    var type = flags.header ? 'th' : 'td';\n    var tag = flags.align ? '<' + type + ' align=\"' + flags.align + '\">' : '<' + type + '>';\n    return tag + content + '</' + type + '>\\n';\n  }; // span level renderer\n\n\n  Renderer.prototype.strong = function (text) {\n    return '<strong>' + text + '</strong>';\n  };\n\n  Renderer.prototype.em = function (text) {\n    return '<em>' + text + '</em>';\n  };\n\n  Renderer.prototype.codespan = function (text) {\n    return '<code>' + text + '</code>';\n  };\n\n  Renderer.prototype.br = function () {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  };\n\n  Renderer.prototype.del = function (text) {\n    return '<del>' + text + '</del>';\n  };\n\n  Renderer.prototype.link = function (href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n    if (href === null) {\n      return text;\n    }\n\n    var out = '<a href=\"' + escape(href) + '\"';\n\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n\n    out += '>' + text + '</a>';\n    return out;\n  };\n\n  Renderer.prototype.image = function (href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n    if (href === null) {\n      return text;\n    }\n\n    var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  };\n\n  Renderer.prototype.text = function (text) {\n    return text;\n  };\n  /**\n   * TextRenderer\n   * returns only the textual part of the token\n   */\n\n\n  function TextRenderer() {} // no need for block level renderers\n\n\n  TextRenderer.prototype.strong = TextRenderer.prototype.em = TextRenderer.prototype.codespan = TextRenderer.prototype.del = TextRenderer.prototype.text = function (text) {\n    return text;\n  };\n\n  TextRenderer.prototype.link = TextRenderer.prototype.image = function (href, title, text) {\n    return '' + text;\n  };\n\n  TextRenderer.prototype.br = function () {\n    return '';\n  };\n  /**\n   * Parsing & Compiling\n   */\n\n\n  function Parser(options) {\n    this.tokens = [];\n    this.token = null;\n    this.options = options || marked.defaults;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.slugger = new Slugger();\n  }\n  /**\n   * Static Parse Method\n   */\n\n\n  Parser.parse = function (src, options) {\n    var parser = new Parser(options);\n    return parser.parse(src);\n  };\n  /**\n   * Parse Loop\n   */\n\n\n  Parser.prototype.parse = function (src) {\n    this.inline = new InlineLexer(src.links, this.options); // use an InlineLexer with a TextRenderer to extract pure text\n\n    this.inlineText = new InlineLexer(src.links, merge({}, this.options, {\n      renderer: new TextRenderer()\n    }));\n    this.tokens = src.reverse();\n    var out = '';\n\n    while (this.next()) {\n      out += this.tok();\n    }\n\n    return out;\n  };\n  /**\n   * Next Token\n   */\n\n\n  Parser.prototype.next = function () {\n    this.token = this.tokens.pop();\n    return this.token;\n  };\n  /**\n   * Preview Next Token\n   */\n\n\n  Parser.prototype.peek = function () {\n    return this.tokens[this.tokens.length - 1] || 0;\n  };\n  /**\n   * Parse Text Tokens\n   */\n\n\n  Parser.prototype.parseText = function () {\n    var body = this.token.text;\n\n    while (this.peek().type === 'text') {\n      body += '\\n' + this.next().text;\n    }\n\n    return this.inline.output(body);\n  };\n  /**\n   * Parse Current Token\n   */\n\n\n  Parser.prototype.tok = function () {\n    switch (this.token.type) {\n      case 'space':\n        {\n          return '';\n        }\n\n      case 'hr':\n        {\n          return this.renderer.hr();\n        }\n\n      case 'heading':\n        {\n          return this.renderer.heading(this.inline.output(this.token.text), this.token.depth, unescape(this.inlineText.output(this.token.text)), this.slugger);\n        }\n\n      case 'code':\n        {\n          return this.renderer.code(this.token.text, this.token.lang, this.token.escaped);\n        }\n\n      case 'table':\n        {\n          var header = '',\n              body = '',\n              i,\n              row,\n              cell,\n              j; // header\n\n          cell = '';\n\n          for (i = 0; i < this.token.header.length; i++) {\n            cell += this.renderer.tablecell(this.inline.output(this.token.header[i]), {\n              header: true,\n              align: this.token.align[i]\n            });\n          }\n\n          header += this.renderer.tablerow(cell);\n\n          for (i = 0; i < this.token.cells.length; i++) {\n            row = this.token.cells[i];\n            cell = '';\n\n            for (j = 0; j < row.length; j++) {\n              cell += this.renderer.tablecell(this.inline.output(row[j]), {\n                header: false,\n                align: this.token.align[j]\n              });\n            }\n\n            body += this.renderer.tablerow(cell);\n          }\n\n          return this.renderer.table(header, body);\n        }\n\n      case 'blockquote_start':\n        {\n          body = '';\n\n          while (this.next().type !== 'blockquote_end') {\n            body += this.tok();\n          }\n\n          return this.renderer.blockquote(body);\n        }\n\n      case 'list_start':\n        {\n          body = '';\n          var ordered = this.token.ordered,\n              start = this.token.start;\n\n          while (this.next().type !== 'list_end') {\n            body += this.tok();\n          }\n\n          return this.renderer.list(body, ordered, start);\n        }\n\n      case 'list_item_start':\n        {\n          body = '';\n          var loose = this.token.loose;\n          var checked = this.token.checked;\n          var task = this.token.task;\n\n          if (this.token.task) {\n            body += this.renderer.checkbox(checked);\n          }\n\n          while (this.next().type !== 'list_item_end') {\n            body += !loose && this.token.type === 'text' ? this.parseText() : this.tok();\n          }\n\n          return this.renderer.listitem(body, task, checked);\n        }\n\n      case 'html':\n        {\n          // TODO parse inline content if parameter markdown=1\n          return this.renderer.html(this.token.text);\n        }\n\n      case 'paragraph':\n        {\n          return this.renderer.paragraph(this.inline.output(this.token.text));\n        }\n\n      case 'text':\n        {\n          return this.renderer.paragraph(this.parseText());\n        }\n\n      default:\n        {\n          var errMsg = 'Token with \"' + this.token.type + '\" type was not found.';\n\n          if (this.options.silent) {\n            console.log(errMsg);\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n    }\n  };\n  /**\n   * Slugger generates header id\n   */\n\n\n  function Slugger() {\n    this.seen = {};\n  }\n  /**\n   * Convert string to unique id\n   */\n\n\n  Slugger.prototype.slug = function (value) {\n    var slug = value.toLowerCase().trim().replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '').replace(/\\s/g, '-');\n\n    if (this.seen.hasOwnProperty(slug)) {\n      var originalSlug = slug;\n\n      do {\n        this.seen[originalSlug]++;\n        slug = originalSlug + '-' + this.seen[originalSlug];\n      } while (this.seen.hasOwnProperty(slug));\n    }\n\n    this.seen[slug] = 0;\n    return slug;\n  };\n  /**\n   * Helpers\n   */\n\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escape.escapeTest.test(html)) {\n        return html.replace(escape.escapeReplace, function (ch) {\n          return escape.replacements[ch];\n        });\n      }\n    } else {\n      if (escape.escapeTestNoEncode.test(html)) {\n        return html.replace(escape.escapeReplaceNoEncode, function (ch) {\n          return escape.replacements[ch];\n        });\n      }\n    }\n\n    return html;\n  }\n\n  escape.escapeTest = /[&<>\"']/;\n  escape.escapeReplace = /[&<>\"']/g;\n  escape.replacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n  escape.escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  escape.escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n\n  function edit(regex, opt) {\n    regex = regex.source || regex;\n    opt = opt || '';\n    return {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(/(^|[^\\[])\\^/g, '$1');\n        regex = regex.replace(name, val);\n        return this;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n  }\n\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      try {\n        var prot = decodeURIComponent(unescape(href)).replace(/[^\\w:]/g, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (/^[^:]+:\\/*[^/]*$/.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n\n    if (href.slice(0, 2) === '//') {\n      return base.replace(/:[\\s\\S]*/, ':') + href;\n    } else if (href.charAt(0) === '/') {\n      return base.replace(/(:\\/*[^/]*)[\\s\\S]*/, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n\n  var baseUrls = {};\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n  function noop() {}\n\n  noop.exec = noop;\n\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/),\n        i = 0;\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n  // /c*$/ is vulnerable to REDOS.\n  // invert: Remove suffix of non-c chars instead. Default falsey.\n\n\n  function rtrim(str, c, invert) {\n    if (str.length === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < str.length) {\n      var currChar = str.charAt(str.length - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.substr(0, str.length - suffLen);\n  }\n\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var level = 0;\n\n    for (var i = 0; i < str.length; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function checkSanitizeDeprecation(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  }\n  /**\n   * Marked\n   */\n\n\n  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (callback || typeof opt === 'function') {\n      if (!callback) {\n        callback = opt;\n        opt = null;\n      }\n\n      opt = merge({}, marked.defaults, opt || {});\n      checkSanitizeDeprecation(opt);\n      var highlight = opt.highlight,\n          tokens,\n          pending,\n          i = 0;\n\n      try {\n        tokens = Lexer.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      pending = tokens.length;\n\n      var done = function done(err) {\n        if (err) {\n          opt.highlight = highlight;\n          return callback(err);\n        }\n\n        var out;\n\n        try {\n          out = Parser.parse(tokens, opt);\n        } catch (e) {\n          err = e;\n        }\n\n        opt.highlight = highlight;\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n      if (!pending) return done();\n\n      for (; i < tokens.length; i++) {\n        (function (token) {\n          if (token.type !== 'code') {\n            return --pending || done();\n          }\n\n          return highlight(token.text, token.lang, function (err, code) {\n            if (err) return done(err);\n\n            if (code == null || code === token.text) {\n              return --pending || done();\n            }\n\n            token.text = code;\n            token.escaped = true;\n            --pending || done();\n          });\n        })(tokens[i]);\n      }\n\n      return;\n    }\n\n    try {\n      if (opt) opt = merge({}, marked.defaults, opt);\n      checkSanitizeDeprecation(opt);\n      return Parser.parse(Lexer.lex(src, opt), opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if ((opt || marked.defaults).silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n\n  marked.options = marked.setOptions = function (opt) {\n    merge(marked.defaults, opt);\n    return marked;\n  };\n\n  marked.getDefaults = function () {\n    return {\n      baseUrl: null,\n      breaks: false,\n      gfm: true,\n      headerIds: true,\n      headerPrefix: '',\n      highlight: null,\n      langPrefix: 'language-',\n      mangle: true,\n      pedantic: false,\n      renderer: new Renderer(),\n      sanitize: false,\n      sanitizer: null,\n      silent: false,\n      smartLists: false,\n      smartypants: false,\n      xhtml: false\n    };\n  };\n\n  marked.defaults = marked.getDefaults();\n  /**\n   * Expose\n   */\n\n  marked.Parser = Parser;\n  marked.parser = Parser.parse;\n  marked.Renderer = Renderer;\n  marked.TextRenderer = TextRenderer;\n  marked.Lexer = Lexer;\n  marked.lexer = Lexer.lex;\n  marked.InlineLexer = InlineLexer;\n  marked.inlineLexer = InlineLexer.output;\n  marked.Slugger = Slugger;\n  marked.parse = marked;\n\n  if (typeof module !== 'undefined' && typeof exports === 'object') {\n    module.exports = marked;\n  } else if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return marked;\n    });\n  } else {\n    root.marked = marked;\n  }\n})(this || (typeof window !== 'undefined' ? window : global));","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../xml/xml\"), require(\"../meta\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../xml/xml\", \"../meta\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineMode(\"markdown\", function (cmCfg, modeCfg) {\n    var htmlMode = CodeMirror.getMode(cmCfg, \"text/html\");\n    var htmlModeMissing = htmlMode.name == \"null\";\n\n    function getMode(name) {\n      if (CodeMirror.findModeByName) {\n        var found = CodeMirror.findModeByName(name);\n        if (found) name = found.mime || found.mimes[0];\n      }\n\n      var mode = CodeMirror.getMode(cmCfg, name);\n      return mode.name == \"null\" ? null : mode;\n    } // Should characters that affect highlighting be highlighted separate?\n    // Does not include characters that will be output (such as `1.` and `-` for lists)\n\n\n    if (modeCfg.highlightFormatting === undefined) modeCfg.highlightFormatting = false; // Maximum number of nested blockquotes. Set to 0 for infinite nesting.\n    // Excess `>` will emit `error` token.\n\n    if (modeCfg.maxBlockquoteDepth === undefined) modeCfg.maxBlockquoteDepth = 0; // Turn on task lists? (\"- [ ] \" and \"- [x] \")\n\n    if (modeCfg.taskLists === undefined) modeCfg.taskLists = false; // Turn on strikethrough syntax\n\n    if (modeCfg.strikethrough === undefined) modeCfg.strikethrough = false;\n    if (modeCfg.emoji === undefined) modeCfg.emoji = false;\n    if (modeCfg.fencedCodeBlockHighlighting === undefined) modeCfg.fencedCodeBlockHighlighting = true;\n    if (modeCfg.xml === undefined) modeCfg.xml = true; // Allow token types to be overridden by user-provided token types.\n\n    if (modeCfg.tokenTypeOverrides === undefined) modeCfg.tokenTypeOverrides = {};\n    var tokenTypes = {\n      header: \"header\",\n      code: \"comment\",\n      quote: \"quote\",\n      list1: \"variable-2\",\n      list2: \"variable-3\",\n      list3: \"keyword\",\n      hr: \"hr\",\n      image: \"image\",\n      imageAltText: \"image-alt-text\",\n      imageMarker: \"image-marker\",\n      formatting: \"formatting\",\n      linkInline: \"link\",\n      linkEmail: \"link\",\n      linkText: \"link\",\n      linkHref: \"string\",\n      em: \"em\",\n      strong: \"strong\",\n      strikethrough: \"strikethrough\",\n      emoji: \"builtin\"\n    };\n\n    for (var tokenType in tokenTypes) {\n      if (tokenTypes.hasOwnProperty(tokenType) && modeCfg.tokenTypeOverrides[tokenType]) {\n        tokenTypes[tokenType] = modeCfg.tokenTypeOverrides[tokenType];\n      }\n    }\n\n    var hrRE = /^([*\\-_])(?:\\s*\\1){2,}\\s*$/,\n        listRE = /^(?:[*\\-+]|^[0-9]+([.)]))\\s+/,\n        taskListRE = /^\\[(x| )\\](?=\\s)/i // Must follow listRE\n    ,\n        atxHeaderRE = modeCfg.allowAtxHeaderWithoutSpace ? /^(#+)/ : /^(#+)(?: |$)/,\n        setextHeaderRE = /^ *(?:\\={1,}|-{1,})\\s*$/,\n        textRE = /^[^#!\\[\\]*_\\\\<>` \"'(~:]+/,\n        fencedCodeRE = /^(~~~+|```+)[ \\t]*([\\w+#-]*)[^\\n`]*$/,\n        linkDefRE = /^\\s*\\[[^\\]]+?\\]:.*$/ // naive link-definition\n    ,\n        punctuation = /[!\"#$%&'()*+,\\-.\\/:;<=>?@\\[\\\\\\]^_`{|}~\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E42\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC9\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDF3C-\\uDF3E]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]/,\n        expandedTab = \"    \"; // CommonMark specifies tab as 4 spaces\n\n    function switchInline(stream, state, f) {\n      state.f = state.inline = f;\n      return f(stream, state);\n    }\n\n    function switchBlock(stream, state, f) {\n      state.f = state.block = f;\n      return f(stream, state);\n    }\n\n    function lineIsEmpty(line) {\n      return !line || !/\\S/.test(line.string);\n    } // Blocks\n\n\n    function blankLine(state) {\n      // Reset linkTitle state\n      state.linkTitle = false;\n      state.linkHref = false;\n      state.linkText = false; // Reset EM state\n\n      state.em = false; // Reset STRONG state\n\n      state.strong = false; // Reset strikethrough state\n\n      state.strikethrough = false; // Reset state.quote\n\n      state.quote = 0; // Reset state.indentedCode\n\n      state.indentedCode = false;\n\n      if (state.f == htmlBlock) {\n        var exit = htmlModeMissing;\n\n        if (!exit) {\n          var inner = CodeMirror.innerMode(htmlMode, state.htmlState);\n          exit = inner.mode.name == \"xml\" && inner.state.tagStart === null && !inner.state.context && inner.state.tokenize.isInText;\n        }\n\n        if (exit) {\n          state.f = inlineNormal;\n          state.block = blockNormal;\n          state.htmlState = null;\n        }\n      } // Reset state.trailingSpace\n\n\n      state.trailingSpace = 0;\n      state.trailingSpaceNewLine = false; // Mark this line as blank\n\n      state.prevLine = state.thisLine;\n      state.thisLine = {\n        stream: null\n      };\n      return null;\n    }\n\n    function blockNormal(stream, state) {\n      var firstTokenOnLine = stream.column() === state.indentation;\n      var prevLineLineIsEmpty = lineIsEmpty(state.prevLine.stream);\n      var prevLineIsIndentedCode = state.indentedCode;\n      var prevLineIsHr = state.prevLine.hr;\n      var prevLineIsList = state.list !== false;\n      var maxNonCodeIndentation = (state.listStack[state.listStack.length - 1] || 0) + 3;\n      state.indentedCode = false;\n      var lineIndentation = state.indentation; // compute once per line (on first token)\n\n      if (state.indentationDiff === null) {\n        state.indentationDiff = state.indentation;\n\n        if (prevLineIsList) {\n          state.list = null; // While this list item's marker's indentation is less than the deepest\n          //  list item's content's indentation,pop the deepest list item\n          //  indentation off the stack, and update block indentation state\n\n          while (lineIndentation < state.listStack[state.listStack.length - 1]) {\n            state.listStack.pop();\n\n            if (state.listStack.length) {\n              state.indentation = state.listStack[state.listStack.length - 1]; // less than the first list's indent -> the line is no longer a list\n            } else {\n              state.list = false;\n            }\n          }\n\n          if (state.list !== false) {\n            state.indentationDiff = lineIndentation - state.listStack[state.listStack.length - 1];\n          }\n        }\n      } // not comprehensive (currently only for setext detection purposes)\n\n\n      var allowsInlineContinuation = !prevLineLineIsEmpty && !prevLineIsHr && !state.prevLine.header && (!prevLineIsList || !prevLineIsIndentedCode) && !state.prevLine.fencedCodeEnd;\n      var isHr = (state.list === false || prevLineIsHr || prevLineLineIsEmpty) && state.indentation <= maxNonCodeIndentation && stream.match(hrRE);\n      var match = null;\n\n      if (state.indentationDiff >= 4 && (prevLineIsIndentedCode || state.prevLine.fencedCodeEnd || state.prevLine.header || prevLineLineIsEmpty)) {\n        stream.skipToEnd();\n        state.indentedCode = true;\n        return tokenTypes.code;\n      } else if (stream.eatSpace()) {\n        return null;\n      } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(atxHeaderRE)) && match[1].length <= 6) {\n        state.quote = 0;\n        state.header = match[1].length;\n        state.thisLine.header = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"header\";\n        state.f = state.inline;\n        return getType(state);\n      } else if (state.indentation <= maxNonCodeIndentation && stream.eat('>')) {\n        state.quote = firstTokenOnLine ? 1 : state.quote + 1;\n        if (modeCfg.highlightFormatting) state.formatting = \"quote\";\n        stream.eatSpace();\n        return getType(state);\n      } else if (!isHr && !state.setext && firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(listRE))) {\n        var listType = match[1] ? \"ol\" : \"ul\";\n        state.indentation = lineIndentation + stream.current().length;\n        state.list = true;\n        state.quote = 0; // Add this list item's content's indentation to the stack\n\n        state.listStack.push(state.indentation); // Reset inline styles which shouldn't propagate aross list items\n\n        state.em = false;\n        state.strong = false;\n        state.code = false;\n        state.strikethrough = false;\n\n        if (modeCfg.taskLists && stream.match(taskListRE, false)) {\n          state.taskList = true;\n        }\n\n        state.f = state.inline;\n        if (modeCfg.highlightFormatting) state.formatting = [\"list\", \"list-\" + listType];\n        return getType(state);\n      } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(fencedCodeRE, true))) {\n        state.quote = 0;\n        state.fencedEndRE = new RegExp(match[1] + \"+ *$\"); // try switching mode\n\n        state.localMode = modeCfg.fencedCodeBlockHighlighting && getMode(match[2]);\n        if (state.localMode) state.localState = CodeMirror.startState(state.localMode);\n        state.f = state.block = local;\n        if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n        state.code = -1;\n        return getType(state); // SETEXT has lowest block-scope precedence after HR, so check it after\n        //  the others (code, blockquote, list...)\n      } else if ( // if setext set, indicates line after ---/===\n      state.setext || // line before ---/===\n      (!allowsInlineContinuation || !prevLineIsList) && !state.quote && state.list === false && !state.code && !isHr && !linkDefRE.test(stream.string) && (match = stream.lookAhead(1)) && (match = match.match(setextHeaderRE))) {\n        if (!state.setext) {\n          state.header = match[0].charAt(0) == '=' ? 1 : 2;\n          state.setext = state.header;\n        } else {\n          state.header = state.setext; // has no effect on type so we can reset it now\n\n          state.setext = 0;\n          stream.skipToEnd();\n          if (modeCfg.highlightFormatting) state.formatting = \"header\";\n        }\n\n        state.thisLine.header = true;\n        state.f = state.inline;\n        return getType(state);\n      } else if (isHr) {\n        stream.skipToEnd();\n        state.hr = true;\n        state.thisLine.hr = true;\n        return tokenTypes.hr;\n      } else if (stream.peek() === '[') {\n        return switchInline(stream, state, footnoteLink);\n      }\n\n      return switchInline(stream, state, state.inline);\n    }\n\n    function htmlBlock(stream, state) {\n      var style = htmlMode.token(stream, state.htmlState);\n\n      if (!htmlModeMissing) {\n        var inner = CodeMirror.innerMode(htmlMode, state.htmlState);\n\n        if (inner.mode.name == \"xml\" && inner.state.tagStart === null && !inner.state.context && inner.state.tokenize.isInText || state.md_inside && stream.current().indexOf(\">\") > -1) {\n          state.f = inlineNormal;\n          state.block = blockNormal;\n          state.htmlState = null;\n        }\n      }\n\n      return style;\n    }\n\n    function local(stream, state) {\n      var currListInd = state.listStack[state.listStack.length - 1] || 0;\n      var hasExitedList = state.indentation < currListInd;\n      var maxFencedEndInd = currListInd + 3;\n\n      if (state.fencedEndRE && state.indentation <= maxFencedEndInd && (hasExitedList || stream.match(state.fencedEndRE))) {\n        if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n        var returnType;\n        if (!hasExitedList) returnType = getType(state);\n        state.localMode = state.localState = null;\n        state.block = blockNormal;\n        state.f = inlineNormal;\n        state.fencedEndRE = null;\n        state.code = 0;\n        state.thisLine.fencedCodeEnd = true;\n        if (hasExitedList) return switchBlock(stream, state, state.block);\n        return returnType;\n      } else if (state.localMode) {\n        return state.localMode.token(stream, state.localState);\n      } else {\n        stream.skipToEnd();\n        return tokenTypes.code;\n      }\n    } // Inline\n\n\n    function getType(state) {\n      var styles = [];\n\n      if (state.formatting) {\n        styles.push(tokenTypes.formatting);\n        if (typeof state.formatting === \"string\") state.formatting = [state.formatting];\n\n        for (var i = 0; i < state.formatting.length; i++) {\n          styles.push(tokenTypes.formatting + \"-\" + state.formatting[i]);\n\n          if (state.formatting[i] === \"header\") {\n            styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.header);\n          } // Add `formatting-quote` and `formatting-quote-#` for blockquotes\n          // Add `error` instead if the maximum blockquote nesting depth is passed\n\n\n          if (state.formatting[i] === \"quote\") {\n            if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n              styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.quote);\n            } else {\n              styles.push(\"error\");\n            }\n          }\n        }\n      }\n\n      if (state.taskOpen) {\n        styles.push(\"meta\");\n        return styles.length ? styles.join(' ') : null;\n      }\n\n      if (state.taskClosed) {\n        styles.push(\"property\");\n        return styles.length ? styles.join(' ') : null;\n      }\n\n      if (state.linkHref) {\n        styles.push(tokenTypes.linkHref, \"url\");\n      } else {\n        // Only apply inline styles to non-url text\n        if (state.strong) {\n          styles.push(tokenTypes.strong);\n        }\n\n        if (state.em) {\n          styles.push(tokenTypes.em);\n        }\n\n        if (state.strikethrough) {\n          styles.push(tokenTypes.strikethrough);\n        }\n\n        if (state.emoji) {\n          styles.push(tokenTypes.emoji);\n        }\n\n        if (state.linkText) {\n          styles.push(tokenTypes.linkText);\n        }\n\n        if (state.code) {\n          styles.push(tokenTypes.code);\n        }\n\n        if (state.image) {\n          styles.push(tokenTypes.image);\n        }\n\n        if (state.imageAltText) {\n          styles.push(tokenTypes.imageAltText, \"link\");\n        }\n\n        if (state.imageMarker) {\n          styles.push(tokenTypes.imageMarker);\n        }\n      }\n\n      if (state.header) {\n        styles.push(tokenTypes.header, tokenTypes.header + \"-\" + state.header);\n      }\n\n      if (state.quote) {\n        styles.push(tokenTypes.quote); // Add `quote-#` where the maximum for `#` is modeCfg.maxBlockquoteDepth\n\n        if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n          styles.push(tokenTypes.quote + \"-\" + state.quote);\n        } else {\n          styles.push(tokenTypes.quote + \"-\" + modeCfg.maxBlockquoteDepth);\n        }\n      }\n\n      if (state.list !== false) {\n        var listMod = (state.listStack.length - 1) % 3;\n\n        if (!listMod) {\n          styles.push(tokenTypes.list1);\n        } else if (listMod === 1) {\n          styles.push(tokenTypes.list2);\n        } else {\n          styles.push(tokenTypes.list3);\n        }\n      }\n\n      if (state.trailingSpaceNewLine) {\n        styles.push(\"trailing-space-new-line\");\n      } else if (state.trailingSpace) {\n        styles.push(\"trailing-space-\" + (state.trailingSpace % 2 ? \"a\" : \"b\"));\n      }\n\n      return styles.length ? styles.join(' ') : null;\n    }\n\n    function handleText(stream, state) {\n      if (stream.match(textRE, true)) {\n        return getType(state);\n      }\n\n      return undefined;\n    }\n\n    function inlineNormal(stream, state) {\n      var style = state.text(stream, state);\n      if (typeof style !== 'undefined') return style;\n\n      if (state.list) {\n        // List marker (*, +, -, 1., etc)\n        state.list = null;\n        return getType(state);\n      }\n\n      if (state.taskList) {\n        var taskOpen = stream.match(taskListRE, true)[1] === \" \";\n        if (taskOpen) state.taskOpen = true;else state.taskClosed = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"task\";\n        state.taskList = false;\n        return getType(state);\n      }\n\n      state.taskOpen = false;\n      state.taskClosed = false;\n\n      if (state.header && stream.match(/^#+$/, true)) {\n        if (modeCfg.highlightFormatting) state.formatting = \"header\";\n        return getType(state);\n      }\n\n      var ch = stream.next(); // Matches link titles present on next line\n\n      if (state.linkTitle) {\n        state.linkTitle = false;\n        var matchCh = ch;\n\n        if (ch === '(') {\n          matchCh = ')';\n        }\n\n        matchCh = (matchCh + '').replace(/([.?*+^\\[\\]\\\\(){}|-])/g, \"\\\\$1\");\n        var regex = '^\\\\s*(?:[^' + matchCh + '\\\\\\\\]+|\\\\\\\\\\\\\\\\|\\\\\\\\.)' + matchCh;\n\n        if (stream.match(new RegExp(regex), true)) {\n          return tokenTypes.linkHref;\n        }\n      } // If this block is changed, it may need to be updated in GFM mode\n\n\n      if (ch === '`') {\n        var previousFormatting = state.formatting;\n        if (modeCfg.highlightFormatting) state.formatting = \"code\";\n        stream.eatWhile('`');\n        var count = stream.current().length;\n\n        if (state.code == 0 && (!state.quote || count == 1)) {\n          state.code = count;\n          return getType(state);\n        } else if (count == state.code) {\n          // Must be exact\n          var t = getType(state);\n          state.code = 0;\n          return t;\n        } else {\n          state.formatting = previousFormatting;\n          return getType(state);\n        }\n      } else if (state.code) {\n        return getType(state);\n      }\n\n      if (ch === '\\\\') {\n        stream.next();\n\n        if (modeCfg.highlightFormatting) {\n          var type = getType(state);\n          var formattingEscape = tokenTypes.formatting + \"-escape\";\n          return type ? type + \" \" + formattingEscape : formattingEscape;\n        }\n      }\n\n      if (ch === '!' && stream.match(/\\[[^\\]]*\\] ?(?:\\(|\\[)/, false)) {\n        state.imageMarker = true;\n        state.image = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"image\";\n        return getType(state);\n      }\n\n      if (ch === '[' && state.imageMarker && stream.match(/[^\\]]*\\](\\(.*?\\)| ?\\[.*?\\])/, false)) {\n        state.imageMarker = false;\n        state.imageAltText = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"image\";\n        return getType(state);\n      }\n\n      if (ch === ']' && state.imageAltText) {\n        if (modeCfg.highlightFormatting) state.formatting = \"image\";\n        var type = getType(state);\n        state.imageAltText = false;\n        state.image = false;\n        state.inline = state.f = linkHref;\n        return type;\n      }\n\n      if (ch === '[' && !state.image) {\n        if (state.linkText && stream.match(/^.*?\\]/)) return getType(state);\n        state.linkText = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        return getType(state);\n      }\n\n      if (ch === ']' && state.linkText) {\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var type = getType(state);\n        state.linkText = false;\n        state.inline = state.f = stream.match(/\\(.*?\\)| ?\\[.*?\\]/, false) ? linkHref : inlineNormal;\n        return type;\n      }\n\n      if (ch === '<' && stream.match(/^(https?|ftps?):\\/\\/(?:[^\\\\>]|\\\\.)+>/, false)) {\n        state.f = state.inline = linkInline;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var type = getType(state);\n\n        if (type) {\n          type += \" \";\n        } else {\n          type = \"\";\n        }\n\n        return type + tokenTypes.linkInline;\n      }\n\n      if (ch === '<' && stream.match(/^[^> \\\\]+@(?:[^\\\\>]|\\\\.)+>/, false)) {\n        state.f = state.inline = linkInline;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var type = getType(state);\n\n        if (type) {\n          type += \" \";\n        } else {\n          type = \"\";\n        }\n\n        return type + tokenTypes.linkEmail;\n      }\n\n      if (modeCfg.xml && ch === '<' && stream.match(/^(!--|\\?|!\\[CDATA\\[|[a-z][a-z0-9-]*(?:\\s+[a-z_:.\\-]+(?:\\s*=\\s*[^>]+)?)*\\s*(?:>|$))/i, false)) {\n        var end = stream.string.indexOf(\">\", stream.pos);\n\n        if (end != -1) {\n          var atts = stream.string.substring(stream.start, end);\n          if (/markdown\\s*=\\s*('|\"){0,1}1('|\"){0,1}/.test(atts)) state.md_inside = true;\n        }\n\n        stream.backUp(1);\n        state.htmlState = CodeMirror.startState(htmlMode);\n        return switchBlock(stream, state, htmlBlock);\n      }\n\n      if (modeCfg.xml && ch === '<' && stream.match(/^\\/\\w*?>/)) {\n        state.md_inside = false;\n        return \"tag\";\n      } else if (ch === \"*\" || ch === \"_\") {\n        var len = 1,\n            before = stream.pos == 1 ? \" \" : stream.string.charAt(stream.pos - 2);\n\n        while (len < 3 && stream.eat(ch)) {\n          len++;\n        }\n\n        var after = stream.peek() || \" \"; // See http://spec.commonmark.org/0.27/#emphasis-and-strong-emphasis\n\n        var leftFlanking = !/\\s/.test(after) && (!punctuation.test(after) || /\\s/.test(before) || punctuation.test(before));\n        var rightFlanking = !/\\s/.test(before) && (!punctuation.test(before) || /\\s/.test(after) || punctuation.test(after));\n        var setEm = null,\n            setStrong = null;\n\n        if (len % 2) {\n          // Em\n          if (!state.em && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before))) setEm = true;else if (state.em == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after))) setEm = false;\n        }\n\n        if (len > 1) {\n          // Strong\n          if (!state.strong && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before))) setStrong = true;else if (state.strong == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after))) setStrong = false;\n        }\n\n        if (setStrong != null || setEm != null) {\n          if (modeCfg.highlightFormatting) state.formatting = setEm == null ? \"strong\" : setStrong == null ? \"em\" : \"strong em\";\n          if (setEm === true) state.em = ch;\n          if (setStrong === true) state.strong = ch;\n          var t = getType(state);\n          if (setEm === false) state.em = false;\n          if (setStrong === false) state.strong = false;\n          return t;\n        }\n      } else if (ch === ' ') {\n        if (stream.eat('*') || stream.eat('_')) {\n          // Probably surrounded by spaces\n          if (stream.peek() === ' ') {\n            // Surrounded by spaces, ignore\n            return getType(state);\n          } else {\n            // Not surrounded by spaces, back up pointer\n            stream.backUp(1);\n          }\n        }\n      }\n\n      if (modeCfg.strikethrough) {\n        if (ch === '~' && stream.eatWhile(ch)) {\n          if (state.strikethrough) {\n            // Remove strikethrough\n            if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n            var t = getType(state);\n            state.strikethrough = false;\n            return t;\n          } else if (stream.match(/^[^\\s]/, false)) {\n            // Add strikethrough\n            state.strikethrough = true;\n            if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n            return getType(state);\n          }\n        } else if (ch === ' ') {\n          if (stream.match(/^~~/, true)) {\n            // Probably surrounded by space\n            if (stream.peek() === ' ') {\n              // Surrounded by spaces, ignore\n              return getType(state);\n            } else {\n              // Not surrounded by spaces, back up pointer\n              stream.backUp(2);\n            }\n          }\n        }\n      }\n\n      if (modeCfg.emoji && ch === \":\" && stream.match(/^(?:[a-z_\\d+][a-z_\\d+-]*|\\-[a-z_\\d+][a-z_\\d+-]*):/)) {\n        state.emoji = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"emoji\";\n        var retType = getType(state);\n        state.emoji = false;\n        return retType;\n      }\n\n      if (ch === ' ') {\n        if (stream.match(/^ +$/, false)) {\n          state.trailingSpace++;\n        } else if (state.trailingSpace) {\n          state.trailingSpaceNewLine = true;\n        }\n      }\n\n      return getType(state);\n    }\n\n    function linkInline(stream, state) {\n      var ch = stream.next();\n\n      if (ch === \">\") {\n        state.f = state.inline = inlineNormal;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var type = getType(state);\n\n        if (type) {\n          type += \" \";\n        } else {\n          type = \"\";\n        }\n\n        return type + tokenTypes.linkInline;\n      }\n\n      stream.match(/^[^>]+/, true);\n      return tokenTypes.linkInline;\n    }\n\n    function linkHref(stream, state) {\n      // Check if space, and return NULL if so (to avoid marking the space)\n      if (stream.eatSpace()) {\n        return null;\n      }\n\n      var ch = stream.next();\n\n      if (ch === '(' || ch === '[') {\n        state.f = state.inline = getLinkHrefInside(ch === \"(\" ? \")\" : \"]\");\n        if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n        state.linkHref = true;\n        return getType(state);\n      }\n\n      return 'error';\n    }\n\n    var linkRE = {\n      \")\": /^(?:[^\\\\\\(\\)]|\\\\.|\\((?:[^\\\\\\(\\)]|\\\\.)*\\))*?(?=\\))/,\n      \"]\": /^(?:[^\\\\\\[\\]]|\\\\.|\\[(?:[^\\\\\\[\\]]|\\\\.)*\\])*?(?=\\])/\n    };\n\n    function getLinkHrefInside(endChar) {\n      return function (stream, state) {\n        var ch = stream.next();\n\n        if (ch === endChar) {\n          state.f = state.inline = inlineNormal;\n          if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n          var returnState = getType(state);\n          state.linkHref = false;\n          return returnState;\n        }\n\n        stream.match(linkRE[endChar]);\n        state.linkHref = true;\n        return getType(state);\n      };\n    }\n\n    function footnoteLink(stream, state) {\n      if (stream.match(/^([^\\]\\\\]|\\\\.)*\\]:/, false)) {\n        state.f = footnoteLinkInside;\n        stream.next(); // Consume [\n\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        state.linkText = true;\n        return getType(state);\n      }\n\n      return switchInline(stream, state, inlineNormal);\n    }\n\n    function footnoteLinkInside(stream, state) {\n      if (stream.match(/^\\]:/, true)) {\n        state.f = state.inline = footnoteUrl;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var returnType = getType(state);\n        state.linkText = false;\n        return returnType;\n      }\n\n      stream.match(/^([^\\]\\\\]|\\\\.)+/, true);\n      return tokenTypes.linkText;\n    }\n\n    function footnoteUrl(stream, state) {\n      // Check if space, and return NULL if so (to avoid marking the space)\n      if (stream.eatSpace()) {\n        return null;\n      } // Match URL\n\n\n      stream.match(/^[^\\s]+/, true); // Check for link title\n\n      if (stream.peek() === undefined) {\n        // End of line, set flag to check next line\n        state.linkTitle = true;\n      } else {\n        // More content on line, check if link title\n        stream.match(/^(?:\\s+(?:\"(?:[^\"\\\\]|\\\\\\\\|\\\\.)+\"|'(?:[^'\\\\]|\\\\\\\\|\\\\.)+'|\\((?:[^)\\\\]|\\\\\\\\|\\\\.)+\\)))?/, true);\n      }\n\n      state.f = state.inline = inlineNormal;\n      return tokenTypes.linkHref + \" url\";\n    }\n\n    var mode = {\n      startState: function startState() {\n        return {\n          f: blockNormal,\n          prevLine: {\n            stream: null\n          },\n          thisLine: {\n            stream: null\n          },\n          block: blockNormal,\n          htmlState: null,\n          indentation: 0,\n          inline: inlineNormal,\n          text: handleText,\n          formatting: false,\n          linkText: false,\n          linkHref: false,\n          linkTitle: false,\n          code: 0,\n          em: false,\n          strong: false,\n          header: 0,\n          setext: 0,\n          hr: false,\n          taskList: false,\n          list: false,\n          listStack: [],\n          quote: 0,\n          trailingSpace: 0,\n          trailingSpaceNewLine: false,\n          strikethrough: false,\n          emoji: false,\n          fencedEndRE: null\n        };\n      },\n      copyState: function copyState(s) {\n        return {\n          f: s.f,\n          prevLine: s.prevLine,\n          thisLine: s.thisLine,\n          block: s.block,\n          htmlState: s.htmlState && CodeMirror.copyState(htmlMode, s.htmlState),\n          indentation: s.indentation,\n          localMode: s.localMode,\n          localState: s.localMode ? CodeMirror.copyState(s.localMode, s.localState) : null,\n          inline: s.inline,\n          text: s.text,\n          formatting: false,\n          linkText: s.linkText,\n          linkTitle: s.linkTitle,\n          linkHref: s.linkHref,\n          code: s.code,\n          em: s.em,\n          strong: s.strong,\n          strikethrough: s.strikethrough,\n          emoji: s.emoji,\n          header: s.header,\n          setext: s.setext,\n          hr: s.hr,\n          taskList: s.taskList,\n          list: s.list,\n          listStack: s.listStack.slice(0),\n          quote: s.quote,\n          indentedCode: s.indentedCode,\n          trailingSpace: s.trailingSpace,\n          trailingSpaceNewLine: s.trailingSpaceNewLine,\n          md_inside: s.md_inside,\n          fencedEndRE: s.fencedEndRE\n        };\n      },\n      token: function token(stream, state) {\n        // Reset state.formatting\n        state.formatting = false;\n\n        if (stream != state.thisLine.stream) {\n          state.header = 0;\n          state.hr = false;\n\n          if (stream.match(/^\\s*$/, true)) {\n            blankLine(state);\n            return null;\n          }\n\n          state.prevLine = state.thisLine;\n          state.thisLine = {\n            stream: stream\n          }; // Reset state.taskList\n\n          state.taskList = false; // Reset state.trailingSpace\n\n          state.trailingSpace = 0;\n          state.trailingSpaceNewLine = false;\n\n          if (!state.localState) {\n            state.f = state.block;\n\n            if (state.f != htmlBlock) {\n              var indentation = stream.match(/^\\s*/, true)[0].replace(/\\t/g, expandedTab).length;\n              state.indentation = indentation;\n              state.indentationDiff = null;\n              if (indentation > 0) return null;\n            }\n          }\n        }\n\n        return state.f(stream, state);\n      },\n      innerMode: function innerMode(state) {\n        if (state.block == htmlBlock) return {\n          state: state.htmlState,\n          mode: htmlMode\n        };\n        if (state.localState) return {\n          state: state.localState,\n          mode: state.localMode\n        };\n        return {\n          state: state,\n          mode: mode\n        };\n      },\n      indent: function indent(state, textAfter, line) {\n        if (state.block == htmlBlock && htmlMode.indent) return htmlMode.indent(state.htmlState, textAfter, line);\n        if (state.localState && state.localMode.indent) return state.localMode.indent(state.localState, textAfter, line);\n        return CodeMirror.Pass;\n      },\n      blankLine: blankLine,\n      getType: getType,\n      blockCommentStart: \"<!--\",\n      blockCommentEnd: \"-->\",\n      closeBrackets: \"()[]{}''\\\"\\\"``\",\n      fold: \"markdown\"\n    };\n    return mode;\n  }, \"xml\");\n  CodeMirror.defineMIME(\"text/markdown\", \"markdown\");\n  CodeMirror.defineMIME(\"text/x-markdown\", \"markdown\");\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  var htmlConfig = {\n    autoSelfClosers: {\n      'area': true,\n      'base': true,\n      'br': true,\n      'col': true,\n      'command': true,\n      'embed': true,\n      'frame': true,\n      'hr': true,\n      'img': true,\n      'input': true,\n      'keygen': true,\n      'link': true,\n      'meta': true,\n      'param': true,\n      'source': true,\n      'track': true,\n      'wbr': true,\n      'menuitem': true\n    },\n    implicitlyClosed: {\n      'dd': true,\n      'li': true,\n      'optgroup': true,\n      'option': true,\n      'p': true,\n      'rp': true,\n      'rt': true,\n      'tbody': true,\n      'td': true,\n      'tfoot': true,\n      'th': true,\n      'tr': true\n    },\n    contextGrabbers: {\n      'dd': {\n        'dd': true,\n        'dt': true\n      },\n      'dt': {\n        'dd': true,\n        'dt': true\n      },\n      'li': {\n        'li': true\n      },\n      'option': {\n        'option': true,\n        'optgroup': true\n      },\n      'optgroup': {\n        'optgroup': true\n      },\n      'p': {\n        'address': true,\n        'article': true,\n        'aside': true,\n        'blockquote': true,\n        'dir': true,\n        'div': true,\n        'dl': true,\n        'fieldset': true,\n        'footer': true,\n        'form': true,\n        'h1': true,\n        'h2': true,\n        'h3': true,\n        'h4': true,\n        'h5': true,\n        'h6': true,\n        'header': true,\n        'hgroup': true,\n        'hr': true,\n        'menu': true,\n        'nav': true,\n        'ol': true,\n        'p': true,\n        'pre': true,\n        'section': true,\n        'table': true,\n        'ul': true\n      },\n      'rp': {\n        'rp': true,\n        'rt': true\n      },\n      'rt': {\n        'rp': true,\n        'rt': true\n      },\n      'tbody': {\n        'tbody': true,\n        'tfoot': true\n      },\n      'td': {\n        'td': true,\n        'th': true\n      },\n      'tfoot': {\n        'tbody': true\n      },\n      'th': {\n        'td': true,\n        'th': true\n      },\n      'thead': {\n        'tbody': true,\n        'tfoot': true\n      },\n      'tr': {\n        'tr': true\n      }\n    },\n    doNotIndent: {\n      \"pre\": true\n    },\n    allowUnquoted: true,\n    allowMissing: true,\n    caseFold: true\n  };\n  var xmlConfig = {\n    autoSelfClosers: {},\n    implicitlyClosed: {},\n    contextGrabbers: {},\n    doNotIndent: {},\n    allowUnquoted: false,\n    allowMissing: false,\n    allowMissingTagName: false,\n    caseFold: false\n  };\n  CodeMirror.defineMode(\"xml\", function (editorConf, config_) {\n    var indentUnit = editorConf.indentUnit;\n    var config = {};\n    var defaults = config_.htmlMode ? htmlConfig : xmlConfig;\n\n    for (var prop in defaults) {\n      config[prop] = defaults[prop];\n    }\n\n    for (var prop in config_) {\n      config[prop] = config_[prop];\n    } // Return variables for tokenizers\n\n\n    var type, setStyle;\n\n    function inText(stream, state) {\n      function chain(parser) {\n        state.tokenize = parser;\n        return parser(stream, state);\n      }\n\n      var ch = stream.next();\n\n      if (ch == \"<\") {\n        if (stream.eat(\"!\")) {\n          if (stream.eat(\"[\")) {\n            if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));else return null;\n          } else if (stream.match(\"--\")) {\n            return chain(inBlock(\"comment\", \"-->\"));\n          } else if (stream.match(\"DOCTYPE\", true, true)) {\n            stream.eatWhile(/[\\w\\._\\-]/);\n            return chain(doctype(1));\n          } else {\n            return null;\n          }\n        } else if (stream.eat(\"?\")) {\n          stream.eatWhile(/[\\w\\._\\-]/);\n          state.tokenize = inBlock(\"meta\", \"?>\");\n          return \"meta\";\n        } else {\n          type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n          state.tokenize = inTag;\n          return \"tag bracket\";\n        }\n      } else if (ch == \"&\") {\n        var ok;\n\n        if (stream.eat(\"#\")) {\n          if (stream.eat(\"x\")) {\n            ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n          } else {\n            ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n          }\n        } else {\n          ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n        }\n\n        return ok ? \"atom\" : \"error\";\n      } else {\n        stream.eatWhile(/[^&<]/);\n        return null;\n      }\n    }\n\n    inText.isInText = true;\n\n    function inTag(stream, state) {\n      var ch = stream.next();\n\n      if (ch == \">\" || ch == \"/\" && stream.eat(\">\")) {\n        state.tokenize = inText;\n        type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n        return \"tag bracket\";\n      } else if (ch == \"=\") {\n        type = \"equals\";\n        return null;\n      } else if (ch == \"<\") {\n        state.tokenize = inText;\n        state.state = baseState;\n        state.tagName = state.tagStart = null;\n        var next = state.tokenize(stream, state);\n        return next ? next + \" tag error\" : \"tag error\";\n      } else if (/[\\'\\\"]/.test(ch)) {\n        state.tokenize = inAttribute(ch);\n        state.stringStartCol = stream.column();\n        return state.tokenize(stream, state);\n      } else {\n        stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n        return \"word\";\n      }\n    }\n\n    function inAttribute(quote) {\n      var closure = function closure(stream, state) {\n        while (!stream.eol()) {\n          if (stream.next() == quote) {\n            state.tokenize = inTag;\n            break;\n          }\n        }\n\n        return \"string\";\n      };\n\n      closure.isInAttribute = true;\n      return closure;\n    }\n\n    function inBlock(style, terminator) {\n      return function (stream, state) {\n        while (!stream.eol()) {\n          if (stream.match(terminator)) {\n            state.tokenize = inText;\n            break;\n          }\n\n          stream.next();\n        }\n\n        return style;\n      };\n    }\n\n    function doctype(depth) {\n      return function (stream, state) {\n        var ch;\n\n        while ((ch = stream.next()) != null) {\n          if (ch == \"<\") {\n            state.tokenize = doctype(depth + 1);\n            return state.tokenize(stream, state);\n          } else if (ch == \">\") {\n            if (depth == 1) {\n              state.tokenize = inText;\n              break;\n            } else {\n              state.tokenize = doctype(depth - 1);\n              return state.tokenize(stream, state);\n            }\n          }\n        }\n\n        return \"meta\";\n      };\n    }\n\n    function Context(state, tagName, startOfLine) {\n      this.prev = state.context;\n      this.tagName = tagName;\n      this.indent = state.indented;\n      this.startOfLine = startOfLine;\n      if (config.doNotIndent.hasOwnProperty(tagName) || state.context && state.context.noIndent) this.noIndent = true;\n    }\n\n    function popContext(state) {\n      if (state.context) state.context = state.context.prev;\n    }\n\n    function maybePopContext(state, nextTagName) {\n      var parentTagName;\n\n      while (true) {\n        if (!state.context) {\n          return;\n        }\n\n        parentTagName = state.context.tagName;\n\n        if (!config.contextGrabbers.hasOwnProperty(parentTagName) || !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n          return;\n        }\n\n        popContext(state);\n      }\n    }\n\n    function baseState(type, stream, state) {\n      if (type == \"openTag\") {\n        state.tagStart = stream.column();\n        return tagNameState;\n      } else if (type == \"closeTag\") {\n        return closeTagNameState;\n      } else {\n        return baseState;\n      }\n    }\n\n    function tagNameState(type, stream, state) {\n      if (type == \"word\") {\n        state.tagName = stream.current();\n        setStyle = \"tag\";\n        return attrState;\n      } else if (config.allowMissingTagName && type == \"endTag\") {\n        setStyle = \"tag bracket\";\n        return attrState(type, stream, state);\n      } else {\n        setStyle = \"error\";\n        return tagNameState;\n      }\n    }\n\n    function closeTagNameState(type, stream, state) {\n      if (type == \"word\") {\n        var tagName = stream.current();\n        if (state.context && state.context.tagName != tagName && config.implicitlyClosed.hasOwnProperty(state.context.tagName)) popContext(state);\n\n        if (state.context && state.context.tagName == tagName || config.matchClosing === false) {\n          setStyle = \"tag\";\n          return closeState;\n        } else {\n          setStyle = \"tag error\";\n          return closeStateErr;\n        }\n      } else if (config.allowMissingTagName && type == \"endTag\") {\n        setStyle = \"tag bracket\";\n        return closeState(type, stream, state);\n      } else {\n        setStyle = \"error\";\n        return closeStateErr;\n      }\n    }\n\n    function closeState(type, _stream, state) {\n      if (type != \"endTag\") {\n        setStyle = \"error\";\n        return closeState;\n      }\n\n      popContext(state);\n      return baseState;\n    }\n\n    function closeStateErr(type, stream, state) {\n      setStyle = \"error\";\n      return closeState(type, stream, state);\n    }\n\n    function attrState(type, _stream, state) {\n      if (type == \"word\") {\n        setStyle = \"attribute\";\n        return attrEqState;\n      } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n        var tagName = state.tagName,\n            tagStart = state.tagStart;\n        state.tagName = state.tagStart = null;\n\n        if (type == \"selfcloseTag\" || config.autoSelfClosers.hasOwnProperty(tagName)) {\n          maybePopContext(state, tagName);\n        } else {\n          maybePopContext(state, tagName);\n          state.context = new Context(state, tagName, tagStart == state.indented);\n        }\n\n        return baseState;\n      }\n\n      setStyle = \"error\";\n      return attrState;\n    }\n\n    function attrEqState(type, stream, state) {\n      if (type == \"equals\") return attrValueState;\n      if (!config.allowMissing) setStyle = \"error\";\n      return attrState(type, stream, state);\n    }\n\n    function attrValueState(type, stream, state) {\n      if (type == \"string\") return attrContinuedState;\n\n      if (type == \"word\" && config.allowUnquoted) {\n        setStyle = \"string\";\n        return attrState;\n      }\n\n      setStyle = \"error\";\n      return attrState(type, stream, state);\n    }\n\n    function attrContinuedState(type, stream, state) {\n      if (type == \"string\") return attrContinuedState;\n      return attrState(type, stream, state);\n    }\n\n    return {\n      startState: function startState(baseIndent) {\n        var state = {\n          tokenize: inText,\n          state: baseState,\n          indented: baseIndent || 0,\n          tagName: null,\n          tagStart: null,\n          context: null\n        };\n        if (baseIndent != null) state.baseIndent = baseIndent;\n        return state;\n      },\n      token: function token(stream, state) {\n        if (!state.tagName && stream.sol()) state.indented = stream.indentation();\n        if (stream.eatSpace()) return null;\n        type = null;\n        var style = state.tokenize(stream, state);\n\n        if ((style || type) && style != \"comment\") {\n          setStyle = null;\n          state.state = state.state(type || style, stream, state);\n          if (setStyle) style = setStyle == \"error\" ? style + \" error\" : setStyle;\n        }\n\n        return style;\n      },\n      indent: function indent(state, textAfter, fullLine) {\n        var context = state.context; // Indent multi-line strings (e.g. css).\n\n        if (state.tokenize.isInAttribute) {\n          if (state.tagStart == state.indented) return state.stringStartCol + 1;else return state.indented + indentUnit;\n        }\n\n        if (context && context.noIndent) return CodeMirror.Pass;\n        if (state.tokenize != inTag && state.tokenize != inText) return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0; // Indent the starts of attribute names.\n\n        if (state.tagName) {\n          if (config.multilineTagIndentPastTag !== false) return state.tagStart + state.tagName.length + 2;else return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n        }\n\n        if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n        var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n\n        if (tagAfter && tagAfter[1]) {\n          // Closing tag spotted\n          while (context) {\n            if (context.tagName == tagAfter[2]) {\n              context = context.prev;\n              break;\n            } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n              context = context.prev;\n            } else {\n              break;\n            }\n          }\n        } else if (tagAfter) {\n          // Opening tag spotted\n          while (context) {\n            var grabbers = config.contextGrabbers[context.tagName];\n            if (grabbers && grabbers.hasOwnProperty(tagAfter[2])) context = context.prev;else break;\n          }\n        }\n\n        while (context && context.prev && !context.startOfLine) {\n          context = context.prev;\n        }\n\n        if (context) return context.indent + indentUnit;else return state.baseIndent || 0;\n      },\n      electricInput: /<\\/[\\s\\w:]+>$/,\n      blockCommentStart: \"<!--\",\n      blockCommentEnd: \"-->\",\n      configuration: config.htmlMode ? \"html\" : \"xml\",\n      helperType: config.htmlMode ? \"html\" : \"xml\",\n      skipAttribute: function skipAttribute(state) {\n        if (state.state == attrValueState) state.state = attrState;\n      },\n      xmlCurrentTag: function xmlCurrentTag(state) {\n        return state.tagName ? {\n          name: state.tagName,\n          close: state.type == \"closeTag\"\n        } : null;\n      },\n      xmlCurrentContext: function xmlCurrentContext(state) {\n        var context = [];\n\n        for (var cx = state.context; cx; cx = cx.prev) {\n          if (cx.tagName) context.push(cx.tagName);\n        }\n\n        return context.reverse();\n      }\n    };\n  });\n  CodeMirror.defineMIME(\"text/xml\", \"xml\");\n  CodeMirror.defineMIME(\"application/xml\", \"xml\");\n  if (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\")) CodeMirror.defineMIME(\"text/html\", {\n    name: \"xml\",\n    htmlMode: true\n  });\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n// Utility function that allows modes to be combined. The mode given\n// as the base argument takes care of most of the normal mode\n// functionality, but a second (typically simple) mode is used, which\n// can override the style of text. Both modes get to parse all of the\n// text, but when both assign a non-null style to a piece of code, the\n// overlay wins, unless the combine argument was true and not overridden,\n// or state.overlay.combineTokens was true, in which case the styles are\n// combined.\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.overlayMode = function (base, overlay, combine) {\n    return {\n      startState: function startState() {\n        return {\n          base: CodeMirror.startState(base),\n          overlay: CodeMirror.startState(overlay),\n          basePos: 0,\n          baseCur: null,\n          overlayPos: 0,\n          overlayCur: null,\n          streamSeen: null\n        };\n      },\n      copyState: function copyState(state) {\n        return {\n          base: CodeMirror.copyState(base, state.base),\n          overlay: CodeMirror.copyState(overlay, state.overlay),\n          basePos: state.basePos,\n          baseCur: null,\n          overlayPos: state.overlayPos,\n          overlayCur: null\n        };\n      },\n      token: function token(stream, state) {\n        if (stream != state.streamSeen || Math.min(state.basePos, state.overlayPos) < stream.start) {\n          state.streamSeen = stream;\n          state.basePos = state.overlayPos = stream.start;\n        }\n\n        if (stream.start == state.basePos) {\n          state.baseCur = base.token(stream, state.base);\n          state.basePos = stream.pos;\n        }\n\n        if (stream.start == state.overlayPos) {\n          stream.pos = stream.start;\n          state.overlayCur = overlay.token(stream, state.overlay);\n          state.overlayPos = stream.pos;\n        }\n\n        stream.pos = Math.min(state.basePos, state.overlayPos); // state.overlay.combineTokens always takes precedence over combine,\n        // unless set to null\n\n        if (state.overlayCur == null) return state.baseCur;else if (state.baseCur != null && state.overlay.combineTokens || combine && state.overlay.combineTokens == null) return state.baseCur + \" \" + state.overlayCur;else return state.overlayCur;\n      },\n      indent: base.indent && function (state, textAfter, line) {\n        return base.indent(state.base, textAfter, line);\n      },\n      electricChars: base.electricChars,\n      innerMode: function innerMode(state) {\n        return {\n          state: state.base,\n          mode: base\n        };\n      },\n      blankLine: function blankLine(state) {\n        var baseToken, overlayToken;\n        if (base.blankLine) baseToken = base.blankLine(state.base);\n        if (overlay.blankLine) overlayToken = overlay.blankLine(state.overlay);\n        return overlayToken == null ? baseToken : combine && baseToken != null ? baseToken + \" \" + overlayToken : overlayToken;\n      }\n    };\n  };\n});","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport moment from 'moment';\nimport { isAllowedDate, getTodayTime } from '../util/index';\n\nfunction noop() {}\n\nexport function getNowByCurrentStateValue(value) {\n  var ret = void 0;\n\n  if (value) {\n    ret = getTodayTime(value);\n  } else {\n    ret = moment();\n  }\n\n  return ret;\n}\nexport var calendarMixinPropTypes = {\n  value: PropTypes.object,\n  defaultValue: PropTypes.object,\n  onKeyDown: PropTypes.func\n};\nexport var calendarMixinDefaultProps = {\n  onKeyDown: noop\n};\nexport var calendarMixinWrapper = function calendarMixinWrapper(ComposeComponent) {\n  var _class, _temp2;\n\n  return _temp2 = _class = function (_ComposeComponent) {\n    _inherits(_class, _ComposeComponent);\n\n    function _class() {\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, _class);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, _ComposeComponent.call.apply(_ComposeComponent, [this].concat(args))), _this), _this.onSelect = function (value, cause) {\n        if (value) {\n          _this.setValue(value);\n        }\n\n        _this.setSelectedValue(value, cause);\n      }, _this.renderRoot = function (newProps) {\n        var _className;\n\n        var props = _this.props;\n        var prefixCls = props.prefixCls;\n        var className = (_className = {}, _className[prefixCls] = 1, _className[prefixCls + '-hidden'] = !props.visible, _className[props.className] = !!props.className, _className[newProps.className] = !!newProps.className, _className);\n        return React.createElement('div', {\n          ref: _this.saveRoot,\n          className: '' + classnames(className),\n          style: _this.props.style,\n          tabIndex: '0',\n          onKeyDown: _this.onKeyDown,\n          onBlur: _this.onBlur\n        }, newProps.children);\n      }, _this.setSelectedValue = function (selectedValue, cause) {\n        // if (this.isAllowedDate(selectedValue)) {\n        if (!('selectedValue' in _this.props)) {\n          _this.setState({\n            selectedValue: selectedValue\n          });\n        }\n\n        if (_this.props.onSelect) {\n          _this.props.onSelect(selectedValue, cause);\n        } // }\n\n      }, _this.setValue = function (value) {\n        var originalValue = _this.state.value;\n\n        if (!('value' in _this.props)) {\n          _this.setState({\n            value: value\n          });\n        }\n\n        if (originalValue && value && !originalValue.isSame(value) || !originalValue && value || originalValue && !value) {\n          _this.props.onChange(value);\n        }\n      }, _this.isAllowedDate = function (value) {\n        var disabledDate = _this.props.disabledDate;\n        var disabledTime = _this.props.disabledTime;\n        return isAllowedDate(value, disabledDate, disabledTime);\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _class.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      // Use origin function if provided\n      if (ComposeComponent.getDerivedStateFromProps) {\n        return ComposeComponent.getDerivedStateFromProps(nextProps, prevState);\n      }\n\n      var value = nextProps.value,\n          selectedValue = nextProps.selectedValue;\n      var newState = {};\n\n      if ('value' in nextProps) {\n        newState.value = value || nextProps.defaultValue || getNowByCurrentStateValue(prevState.value);\n      }\n\n      if ('selectedValue' in nextProps) {\n        newState.selectedValue = selectedValue;\n      }\n\n      return newState;\n    };\n\n    return _class;\n  }(ComposeComponent), _class.displayName = 'CalendarMixinWrapper', _class.defaultProps = ComposeComponent.defaultProps, _temp2;\n};","export default {\n  DATE_ROW_COUNT: 6,\n  DATE_COL_COUNT: 7\n};","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport DateConstants from './DateConstants';\nimport moment from 'moment';\n\nvar DateTHead = function (_React$Component) {\n  _inherits(DateTHead, _React$Component);\n\n  function DateTHead() {\n    _classCallCheck(this, DateTHead);\n\n    return _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n  }\n\n  DateTHead.prototype.render = function render() {\n    var props = this.props;\n    var value = props.value;\n    var localeData = value.localeData();\n    var prefixCls = props.prefixCls;\n    var veryShortWeekdays = [];\n    var weekDays = [];\n    var firstDayOfWeek = localeData.firstDayOfWeek();\n    var showWeekNumberEl = void 0;\n    var now = moment();\n\n    for (var dateColIndex = 0; dateColIndex < DateConstants.DATE_COL_COUNT; dateColIndex++) {\n      var index = (firstDayOfWeek + dateColIndex) % DateConstants.DATE_COL_COUNT;\n      now.day(index);\n      veryShortWeekdays[dateColIndex] = localeData.weekdaysMin(now);\n      weekDays[dateColIndex] = localeData.weekdaysShort(now);\n    }\n\n    if (props.showWeekNumber) {\n      showWeekNumberEl = React.createElement('th', {\n        role: 'columnheader',\n        className: prefixCls + '-column-header ' + prefixCls + '-week-number-header'\n      }, React.createElement('span', {\n        className: prefixCls + '-column-header-inner'\n      }, 'x'));\n    }\n\n    var weekDaysEls = weekDays.map(function (day, xindex) {\n      return React.createElement('th', {\n        key: xindex,\n        role: 'columnheader',\n        title: day,\n        className: prefixCls + '-column-header'\n      }, React.createElement('span', {\n        className: prefixCls + '-column-header-inner'\n      }, veryShortWeekdays[xindex]));\n    });\n    return React.createElement('thead', null, React.createElement('tr', {\n      role: 'row'\n    }, showWeekNumberEl, weekDaysEls));\n  };\n\n  return DateTHead;\n}(React.Component);\n\nexport default DateTHead;","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport DateConstants from './DateConstants';\nimport { getTitleString, getTodayTime } from '../util/';\n\nfunction isSameDay(one, two) {\n  return one && two && one.isSame(two, 'day');\n}\n\nfunction beforeCurrentMonthYear(current, today) {\n  if (current.year() < today.year()) {\n    return 1;\n  }\n\n  return current.year() === today.year() && current.month() < today.month();\n}\n\nfunction afterCurrentMonthYear(current, today) {\n  if (current.year() > today.year()) {\n    return 1;\n  }\n\n  return current.year() === today.year() && current.month() > today.month();\n}\n\nfunction getIdFromDate(date) {\n  return 'rc-calendar-' + date.year() + '-' + date.month() + '-' + date.date();\n}\n\nvar DateTBody = function (_React$Component) {\n  _inherits(DateTBody, _React$Component);\n\n  function DateTBody() {\n    _classCallCheck(this, DateTBody);\n\n    return _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n  }\n\n  DateTBody.prototype.render = function render() {\n    var props = this.props;\n    var contentRender = props.contentRender,\n        prefixCls = props.prefixCls,\n        selectedValue = props.selectedValue,\n        value = props.value,\n        showWeekNumber = props.showWeekNumber,\n        dateRender = props.dateRender,\n        disabledDate = props.disabledDate,\n        hoverValue = props.hoverValue;\n    var iIndex = void 0;\n    var jIndex = void 0;\n    var current = void 0;\n    var dateTable = [];\n    var today = getTodayTime(value);\n    var cellClass = prefixCls + '-cell';\n    var weekNumberCellClass = prefixCls + '-week-number-cell';\n    var dateClass = prefixCls + '-date';\n    var todayClass = prefixCls + '-today';\n    var selectedClass = prefixCls + '-selected-day';\n    var selectedDateClass = prefixCls + '-selected-date'; // do not move with mouse operation\n\n    var selectedStartDateClass = prefixCls + '-selected-start-date';\n    var selectedEndDateClass = prefixCls + '-selected-end-date';\n    var inRangeClass = prefixCls + '-in-range-cell';\n    var lastMonthDayClass = prefixCls + '-last-month-cell';\n    var nextMonthDayClass = prefixCls + '-next-month-btn-day';\n    var disabledClass = prefixCls + '-disabled-cell';\n    var firstDisableClass = prefixCls + '-disabled-cell-first-of-row';\n    var lastDisableClass = prefixCls + '-disabled-cell-last-of-row';\n    var lastDayOfMonthClass = prefixCls + '-last-day-of-month';\n    var month1 = value.clone();\n    month1.date(1);\n    var day = month1.day();\n    var lastMonthDiffDay = (day + 7 - value.localeData().firstDayOfWeek()) % 7; // calculate last month\n\n    var lastMonth1 = month1.clone();\n    lastMonth1.add(0 - lastMonthDiffDay, 'days');\n    var passed = 0;\n\n    for (iIndex = 0; iIndex < DateConstants.DATE_ROW_COUNT; iIndex++) {\n      for (jIndex = 0; jIndex < DateConstants.DATE_COL_COUNT; jIndex++) {\n        current = lastMonth1;\n\n        if (passed) {\n          current = current.clone();\n          current.add(passed, 'days');\n        }\n\n        dateTable.push(current);\n        passed++;\n      }\n    }\n\n    var tableHtml = [];\n    passed = 0;\n\n    for (iIndex = 0; iIndex < DateConstants.DATE_ROW_COUNT; iIndex++) {\n      var _cx;\n\n      var isCurrentWeek = void 0;\n      var weekNumberCell = void 0;\n      var isActiveWeek = false;\n      var dateCells = [];\n\n      if (showWeekNumber) {\n        weekNumberCell = React.createElement('td', {\n          key: dateTable[passed].week(),\n          role: 'gridcell',\n          className: weekNumberCellClass\n        }, dateTable[passed].week());\n      }\n\n      for (jIndex = 0; jIndex < DateConstants.DATE_COL_COUNT; jIndex++) {\n        var next = null;\n        var last = null;\n        current = dateTable[passed];\n\n        if (jIndex < DateConstants.DATE_COL_COUNT - 1) {\n          next = dateTable[passed + 1];\n        }\n\n        if (jIndex > 0) {\n          last = dateTable[passed - 1];\n        }\n\n        var cls = cellClass;\n        var disabled = false;\n        var selected = false;\n\n        if (isSameDay(current, today)) {\n          cls += ' ' + todayClass;\n          isCurrentWeek = true;\n        }\n\n        var isBeforeCurrentMonthYear = beforeCurrentMonthYear(current, value);\n        var isAfterCurrentMonthYear = afterCurrentMonthYear(current, value);\n\n        if (selectedValue && Array.isArray(selectedValue)) {\n          var rangeValue = hoverValue.length ? hoverValue : selectedValue;\n\n          if (!isBeforeCurrentMonthYear && !isAfterCurrentMonthYear) {\n            var startValue = rangeValue[0];\n            var endValue = rangeValue[1];\n\n            if (startValue) {\n              if (isSameDay(current, startValue)) {\n                selected = true;\n                isActiveWeek = true;\n                cls += ' ' + selectedStartDateClass;\n              }\n            }\n\n            if (startValue || endValue) {\n              if (isSameDay(current, endValue)) {\n                selected = true;\n                isActiveWeek = true;\n                cls += ' ' + selectedEndDateClass;\n              } else if ((startValue === null || startValue === undefined) && current.isBefore(endValue, 'day')) {\n                cls += ' ' + inRangeClass;\n              } else if ((endValue === null || endValue === undefined) && current.isAfter(startValue, 'day')) {\n                cls += ' ' + inRangeClass;\n              } else if (current.isAfter(startValue, 'day') && current.isBefore(endValue, 'day')) {\n                cls += ' ' + inRangeClass;\n              }\n            }\n          }\n        } else if (isSameDay(current, value)) {\n          // keyboard change value, highlight works\n          selected = true;\n          isActiveWeek = true;\n        }\n\n        if (isSameDay(current, selectedValue)) {\n          cls += ' ' + selectedDateClass;\n        }\n\n        if (isBeforeCurrentMonthYear) {\n          cls += ' ' + lastMonthDayClass;\n        }\n\n        if (isAfterCurrentMonthYear) {\n          cls += ' ' + nextMonthDayClass;\n        }\n\n        if (current.clone().endOf('month').date() === current.date()) {\n          cls += ' ' + lastDayOfMonthClass;\n        }\n\n        if (disabledDate) {\n          if (disabledDate(current, value)) {\n            disabled = true;\n\n            if (!last || !disabledDate(last, value)) {\n              cls += ' ' + firstDisableClass;\n            }\n\n            if (!next || !disabledDate(next, value)) {\n              cls += ' ' + lastDisableClass;\n            }\n          }\n        }\n\n        if (selected) {\n          cls += ' ' + selectedClass;\n        }\n\n        if (disabled) {\n          cls += ' ' + disabledClass;\n        }\n\n        var dateHtml = void 0;\n\n        if (dateRender) {\n          dateHtml = dateRender(current, value);\n        } else {\n          var content = contentRender ? contentRender(current, value) : current.date();\n          dateHtml = React.createElement('div', {\n            key: getIdFromDate(current),\n            className: dateClass,\n            'aria-selected': selected,\n            'aria-disabled': disabled\n          }, content);\n        }\n\n        dateCells.push(React.createElement('td', {\n          key: passed,\n          onClick: disabled ? undefined : props.onSelect.bind(null, current),\n          onMouseEnter: disabled ? undefined : props.onDayHover && props.onDayHover.bind(null, current) || undefined,\n          role: 'gridcell',\n          title: getTitleString(current),\n          className: cls\n        }, dateHtml));\n        passed++;\n      }\n\n      tableHtml.push(React.createElement('tr', {\n        key: iIndex,\n        role: 'row',\n        className: cx((_cx = {}, _cx[prefixCls + '-current-week'] = isCurrentWeek, _cx[prefixCls + '-active-week'] = isActiveWeek, _cx))\n      }, weekNumberCell, dateCells));\n    }\n\n    return React.createElement('tbody', {\n      className: prefixCls + '-tbody'\n    }, tableHtml);\n  };\n\n  return DateTBody;\n}(React.Component);\n\nDateTBody.propTypes = {\n  contentRender: PropTypes.func,\n  dateRender: PropTypes.func,\n  disabledDate: PropTypes.func,\n  prefixCls: PropTypes.string,\n  selectedValue: PropTypes.oneOfType([PropTypes.object, PropTypes.arrayOf(PropTypes.object)]),\n  value: PropTypes.object,\n  hoverValue: PropTypes.any,\n  showWeekNumber: PropTypes.bool\n};\nDateTBody.defaultProps = {\n  hoverValue: []\n};\nexport default DateTBody;","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport DateTHead from './DateTHead';\nimport DateTBody from './DateTBody';\n\nvar DateTable = function (_React$Component) {\n  _inherits(DateTable, _React$Component);\n\n  function DateTable() {\n    _classCallCheck(this, DateTable);\n\n    return _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n  }\n\n  DateTable.prototype.render = function render() {\n    var props = this.props;\n    var prefixCls = props.prefixCls;\n    return React.createElement('table', {\n      className: prefixCls + '-table',\n      cellSpacing: '0',\n      role: 'grid'\n    }, React.createElement(DateTHead, props), React.createElement(DateTBody, props));\n  };\n\n  return DateTable;\n}(React.Component);\n\nexport default DateTable;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar noop = function noop() {};\n\nvar _id = 0;\n\nvar generateId = function generateId() {\n  return \"simplemde-editor-\".concat(++_id);\n};\n\nvar SimpleMDEEditor =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(SimpleMDEEditor, _React$PureComponent);\n\n  function SimpleMDEEditor(props) {\n    var _this;\n\n    _classCallCheck(this, SimpleMDEEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SimpleMDEEditor).call(this, props));\n    _this.keyChange = false;\n    _this.state = {\n      value: _this.props.value || \"\"\n    };\n    _this.id = _this.props.id ? _this.props.id : generateId();\n    _this.simpleMde = null;\n    _this.editorEl = null;\n    _this.editorToolbarEl = null;\n\n    _this.createEditor = function () {\n      var SimpleMDE = require(\"easymde\");\n\n      var initialOptions = {\n        element: document.getElementById(_this.id),\n        initialValue: _this.props.value\n      };\n      var allOptions = Object.assign({}, initialOptions, _this.props.options);\n      _this.simpleMde = new SimpleMDE(allOptions);\n    };\n\n    _this.eventWrapper = function () {\n      _this.keyChange = true;\n\n      _this.setState({\n        value: _this.simpleMde.value()\n      });\n\n      _this.props.onChange(_this.simpleMde.value());\n    };\n\n    _this.removeEvents = function () {\n      if (_this.editorEl && _this.editorToolbarEl) {\n        _this.editorEl.removeEventListener(\"keyup\", _this.eventWrapper);\n\n        _this.editorEl.removeEventListener(\"paste\", _this.eventWrapper);\n\n        _this.editorToolbarEl.removeEventListener(\"click\", _this.eventWrapper);\n      }\n    };\n\n    _this.addEvents = function () {\n      if (_this.elementWrapperRef && _this.simpleMde) {\n        _this.editorEl = _this.elementWrapperRef;\n        _this.editorToolbarEl = _this.elementWrapperRef.getElementsByClassName(\"editor-toolbar\")[0];\n\n        _this.editorEl.addEventListener(\"keyup\", _this.eventWrapper);\n\n        _this.editorEl.addEventListener(\"paste\", _this.eventWrapper);\n\n        _this.editorToolbarEl && _this.editorToolbarEl.addEventListener(\"click\", _this.eventWrapper);\n\n        _this.simpleMde.codemirror.on(\"cursorActivity\", _this.getCursor);\n\n        var _events = _this.props.events; // Handle custom events\n\n        _events && Object.entries(_events).forEach(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              eventName = _ref2[0],\n              callback = _ref2[1];\n\n          if (eventName && callback) {\n            _this.simpleMde && _this.simpleMde.codemirror.on(eventName, callback);\n          }\n        });\n      }\n    };\n\n    _this.getCursor = function () {\n      // https://codemirror.net/doc/manual.html#api_selection\n      if (_this.props.getLineAndCursor) {\n        _this.props.getLineAndCursor(_this.simpleMde.codemirror.getDoc().getCursor());\n      }\n    };\n\n    _this.getMdeInstance = function () {\n      if (_this.props.getMdeInstance) {\n        _this.props.getMdeInstance(_this.simpleMde);\n      }\n    };\n\n    _this.addExtraKeys = function () {\n      // https://codemirror.net/doc/manual.html#option_extraKeys\n      if (_this.props.extraKeys) {\n        _this.simpleMde.codemirror.setOption(\"extraKeys\", _this.props.extraKeys);\n      }\n    };\n\n    _this.elementWrapperRef = null;\n\n    _this.setElementWrapperRef = function (element) {\n      _this.elementWrapperRef = element;\n    };\n\n    return _this;\n  }\n\n  _createClass(SimpleMDEEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (typeof window !== undefined) {\n        this.createEditor();\n        this.addEvents();\n        this.addExtraKeys();\n        this.getCursor();\n        this.getMdeInstance();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (!this.keyChange && this.props.value !== this.state.value && // This is somehow fixes moving cursor for controlled case\n      this.props.value !== prevProps.value // This one fixes no value change for uncontrolled input. If it's uncontrolled prevProps will be the same\n      ) {\n          this.simpleMde.value(this.props.value || \"\");\n        }\n\n      this.keyChange = false;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.editorEl !== null && this.editorEl !== undefined) {\n        this.removeEvents();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          events = _this$props.events,\n          value = _this$props.value,\n          options = _this$props.options,\n          children = _this$props.children,\n          extraKeys = _this$props.extraKeys,\n          getLineAndCursor = _this$props.getLineAndCursor,\n          getMdeInstance = _this$props.getMdeInstance,\n          label = _this$props.label,\n          onChange = _this$props.onChange,\n          id = _this$props.id,\n          rest = _objectWithoutProperties(_this$props, [\"events\", \"value\", \"options\", \"children\", \"extraKeys\", \"getLineAndCursor\", \"getMdeInstance\", \"label\", \"onChange\", \"id\"]);\n\n      return React.createElement(\"div\", Object.assign({\n        id: \"\".concat(this.id, \"-wrapper\")\n      }, rest, {\n        ref: this.setElementWrapperRef\n      }), label && React.createElement(\"label\", {\n        htmlFor: this.id\n      }, \" \", label, \" \"), React.createElement(\"textarea\", {\n        id: this.id\n      }));\n    }\n  }]);\n\n  return SimpleMDEEditor;\n}(React.PureComponent);\n\nexports.default = SimpleMDEEditor;\nSimpleMDEEditor.defaultProps = {\n  events: {},\n  onChange: noop,\n  options: {}\n};","'use strict';\n\nvar CodeMirror = require('codemirror');\n\nrequire('codemirror/addon/edit/continuelist.js');\n\nrequire('./codemirror/tablist');\n\nrequire('codemirror/addon/display/fullscreen.js');\n\nrequire('codemirror/mode/markdown/markdown.js');\n\nrequire('codemirror/addon/mode/overlay.js');\n\nrequire('codemirror/addon/display/placeholder.js');\n\nrequire('codemirror/addon/selection/mark-selection.js');\n\nrequire('codemirror/addon/search/searchcursor.js');\n\nrequire('codemirror/mode/gfm/gfm.js');\n\nrequire('codemirror/mode/xml/xml.js');\n\nvar CodeMirrorSpellChecker = require('codemirror-spell-checker');\n\nvar marked = require('marked'); // Some variables\n\n\nvar isMac = /Mac/.test(navigator.platform);\nvar anchorToExternalRegex = new RegExp(/(<a.*?https?:\\/\\/.*?[^a]>)+?/g); // Mapping of actions that can be bound to keyboard shortcuts or toolbar buttons\n\nvar bindings = {\n  'toggleBold': toggleBold,\n  'toggleItalic': toggleItalic,\n  'drawLink': drawLink,\n  'toggleHeadingSmaller': toggleHeadingSmaller,\n  'toggleHeadingBigger': toggleHeadingBigger,\n  'drawImage': drawImage,\n  'toggleBlockquote': toggleBlockquote,\n  'toggleOrderedList': toggleOrderedList,\n  'toggleUnorderedList': toggleUnorderedList,\n  'toggleCodeBlock': toggleCodeBlock,\n  'togglePreview': togglePreview,\n  'toggleStrikethrough': toggleStrikethrough,\n  'toggleHeading1': toggleHeading1,\n  'toggleHeading2': toggleHeading2,\n  'toggleHeading3': toggleHeading3,\n  'cleanBlock': cleanBlock,\n  'drawTable': drawTable,\n  'drawHorizontalRule': drawHorizontalRule,\n  'undo': undo,\n  'redo': redo,\n  'toggleSideBySide': toggleSideBySide,\n  'toggleFullScreen': toggleFullScreen\n};\nvar shortcuts = {\n  'toggleBold': 'Cmd-B',\n  'toggleItalic': 'Cmd-I',\n  'drawLink': 'Cmd-K',\n  'toggleHeadingSmaller': 'Cmd-H',\n  'toggleHeadingBigger': 'Shift-Cmd-H',\n  'cleanBlock': 'Cmd-E',\n  'drawImage': 'Cmd-Alt-I',\n  'toggleBlockquote': 'Cmd-\\'',\n  'toggleOrderedList': 'Cmd-Alt-L',\n  'toggleUnorderedList': 'Cmd-L',\n  'toggleCodeBlock': 'Cmd-Alt-C',\n  'togglePreview': 'Cmd-P',\n  'toggleSideBySide': 'F9',\n  'toggleFullScreen': 'F11'\n};\n\nvar getBindingName = function getBindingName(f) {\n  for (var key in bindings) {\n    if (bindings[key] === f) {\n      return key;\n    }\n  }\n\n  return null;\n};\n\nvar isMobile = function isMobile() {\n  var check = false;\n\n  (function (a) {\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0, 4))) check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n\n  return check;\n};\n/**\n * Modify HTML to add 'target=\"_blank\"' to links so they open in new tabs by default.\n * @param {string} htmlText - HTML to be modified.\n * @return {string} The modified HTML text.\n */\n\n\nfunction addAnchorTargetBlank(htmlText) {\n  var match;\n\n  while ((match = anchorToExternalRegex.exec(htmlText)) !== null) {\n    // With only one capture group in the RegExp, we can safely take the first index from the match.\n    var linkString = match[0];\n\n    if (linkString.indexOf('target=') === -1) {\n      var fixedLinkString = linkString.replace(/>$/, ' target=\"_blank\">');\n      htmlText = htmlText.replace(linkString, fixedLinkString);\n    }\n  }\n\n  return htmlText;\n}\n/**\n * Fix shortcut. Mac use Command, others use Ctrl.\n */\n\n\nfunction fixShortcut(name) {\n  if (isMac) {\n    name = name.replace('Ctrl', 'Cmd');\n  } else {\n    name = name.replace('Cmd', 'Ctrl');\n  }\n\n  return name;\n}\n/**\n * Create button element for toolbar.\n */\n\n\nfunction createToolbarButton(options, enableTooltips, shortcuts) {\n  options = options || {};\n  var el = document.createElement('button');\n  el.className = options.name;\n  el.setAttribute('type', 'button');\n  enableTooltips = enableTooltips == undefined ? true : enableTooltips; // Properly hande custom shortcuts\n\n  if (options.name && options.name in shortcuts) {\n    bindings[options.name] = options.action;\n  }\n\n  if (options.title && enableTooltips) {\n    el.title = createTooltip(options.title, options.action, shortcuts);\n\n    if (isMac) {\n      el.title = el.title.replace('Ctrl', '⌘');\n      el.title = el.title.replace('Alt', '⌥');\n    }\n  }\n\n  if (options.noDisable) {\n    el.classList.add('no-disable');\n  }\n\n  if (options.noMobile) {\n    el.classList.add('no-mobile');\n  } // Provide backwards compatibility with simple-markdown-editor by adding custom classes to the button.\n\n\n  var classNameParts = options.className.split(' ');\n  var iconClasses = [];\n\n  for (var classNameIndex = 0; classNameIndex < classNameParts.length; classNameIndex++) {\n    var classNamePart = classNameParts[classNameIndex]; // Split icon classes from the button.\n    // Regex will detect \"fa\", \"fas\", \"fa-something\" and \"fa-some-icon-1\", but not \"fanfare\".\n\n    if (classNamePart.match(/^fa([srlb]|(-[\\w-]*)|$)/)) {\n      iconClasses.push(classNamePart);\n    } else {\n      el.classList.add(classNamePart);\n    }\n  }\n\n  el.tabIndex = -1; // Create icon element and append as a child to the button\n\n  var icon = document.createElement('i');\n\n  for (var iconClassIndex = 0; iconClassIndex < iconClasses.length; iconClassIndex++) {\n    var iconClass = iconClasses[iconClassIndex];\n    icon.classList.add(iconClass);\n  }\n\n  el.appendChild(icon);\n  return el;\n}\n\nfunction createSep() {\n  var el = document.createElement('i');\n  el.className = 'separator';\n  el.innerHTML = '|';\n  return el;\n}\n\nfunction createTooltip(title, action, shortcuts) {\n  var actionName;\n  var tooltip = title;\n\n  if (action) {\n    actionName = getBindingName(action);\n\n    if (shortcuts[actionName]) {\n      tooltip += ' (' + fixShortcut(shortcuts[actionName]) + ')';\n    }\n  }\n\n  return tooltip;\n}\n/**\n * The state of CodeMirror at the given position.\n */\n\n\nfunction getState(cm, pos) {\n  pos = pos || cm.getCursor('start');\n  var stat = cm.getTokenAt(pos);\n  if (!stat.type) return {};\n  var types = stat.type.split(' ');\n  var ret = {},\n      data,\n      text;\n\n  for (var i = 0; i < types.length; i++) {\n    data = types[i];\n\n    if (data === 'strong') {\n      ret.bold = true;\n    } else if (data === 'variable-2') {\n      text = cm.getLine(pos.line);\n\n      if (/^\\s*\\d+\\.\\s/.test(text)) {\n        ret['ordered-list'] = true;\n      } else {\n        ret['unordered-list'] = true;\n      }\n    } else if (data === 'atom') {\n      ret.quote = true;\n    } else if (data === 'em') {\n      ret.italic = true;\n    } else if (data === 'quote') {\n      ret.quote = true;\n    } else if (data === 'strikethrough') {\n      ret.strikethrough = true;\n    } else if (data === 'comment') {\n      ret.code = true;\n    } else if (data === 'link') {\n      ret.link = true;\n    } else if (data === 'tag') {\n      ret.image = true;\n    } else if (data.match(/^header(-[1-6])?$/)) {\n      ret[data.replace('header', 'heading')] = true;\n    }\n  }\n\n  return ret;\n} // Saved overflow setting\n\n\nvar saved_overflow = '';\n/**\n * Toggle full screen of the editor.\n */\n\nfunction toggleFullScreen(editor) {\n  // Set fullscreen\n  var cm = editor.codemirror;\n  cm.setOption('fullScreen', !cm.getOption('fullScreen')); // Prevent scrolling on body during fullscreen active\n\n  if (cm.getOption('fullScreen')) {\n    saved_overflow = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n  } else {\n    document.body.style.overflow = saved_overflow;\n  } // Update toolbar class\n\n\n  var wrap = cm.getWrapperElement();\n\n  if (!/fullscreen/.test(wrap.previousSibling.className)) {\n    wrap.previousSibling.className += ' fullscreen';\n  } else {\n    wrap.previousSibling.className = wrap.previousSibling.className.replace(/\\s*fullscreen\\b/, '');\n  } // Update toolbar button\n\n\n  if (editor.toolbarElements && editor.toolbarElements.fullscreen) {\n    var toolbarButton = editor.toolbarElements.fullscreen;\n\n    if (!/active/.test(toolbarButton.className)) {\n      toolbarButton.className += ' active';\n    } else {\n      toolbarButton.className = toolbarButton.className.replace(/\\s*active\\s*/g, '');\n    }\n  } // Hide side by side if needed\n\n\n  var sidebyside = cm.getWrapperElement().nextSibling;\n  if (/editor-preview-active-side/.test(sidebyside.className)) toggleSideBySide(editor);\n\n  if (editor.options.onToggleFullScreen) {\n    editor.options.onToggleFullScreen(cm.getOption('fullScreen') || false);\n  }\n}\n/**\n * Action for toggling bold.\n */\n\n\nfunction toggleBold(editor) {\n  _toggleBlock(editor, 'bold', editor.options.blockStyles.bold);\n}\n/**\n * Action for toggling italic.\n */\n\n\nfunction toggleItalic(editor) {\n  _toggleBlock(editor, 'italic', editor.options.blockStyles.italic);\n}\n/**\n * Action for toggling strikethrough.\n */\n\n\nfunction toggleStrikethrough(editor) {\n  _toggleBlock(editor, 'strikethrough', '~~');\n}\n/**\n * Action for toggling code block.\n */\n\n\nfunction toggleCodeBlock(editor) {\n  var fenceCharsToInsert = editor.options.blockStyles.code;\n\n  function fencing_line(line) {\n    /* return true, if this is a ``` or ~~~ line */\n    if (typeof line !== 'object') {\n      throw 'fencing_line() takes a \\'line\\' object (not a line number, or line text).  Got: ' + typeof line + ': ' + line;\n    }\n\n    return line.styles && line.styles[2] && line.styles[2].indexOf('formatting-code-block') !== -1;\n  }\n\n  function token_state(token) {\n    // base goes an extra level deep when mode backdrops are used, e.g. spellchecker on\n    return token.state.base.base || token.state.base;\n  }\n\n  function code_type(cm, line_num, line, firstTok, lastTok) {\n    /*\n     * Return \"single\", \"indented\", \"fenced\" or false\n     *\n     * cm and line_num are required.  Others are optional for efficiency\n     *   To check in the middle of a line, pass in firstTok yourself.\n     */\n    line = line || cm.getLineHandle(line_num);\n    firstTok = firstTok || cm.getTokenAt({\n      line: line_num,\n      ch: 1\n    });\n    lastTok = lastTok || !!line.text && cm.getTokenAt({\n      line: line_num,\n      ch: line.text.length - 1\n    });\n    var types = firstTok.type ? firstTok.type.split(' ') : [];\n\n    if (lastTok && token_state(lastTok).indentedCode) {\n      // have to check last char, since first chars of first line aren\"t marked as indented\n      return 'indented';\n    } else if (types.indexOf('comment') === -1) {\n      // has to be after \"indented\" check, since first chars of first indented line aren\"t marked as such\n      return false;\n    } else if (token_state(firstTok).fencedChars || token_state(lastTok).fencedChars || fencing_line(line)) {\n      return 'fenced';\n    } else {\n      return 'single';\n    }\n  }\n\n  function insertFencingAtSelection(cm, cur_start, cur_end, fenceCharsToInsert) {\n    var start_line_sel = cur_start.line + 1,\n        end_line_sel = cur_end.line + 1,\n        sel_multi = cur_start.line !== cur_end.line,\n        repl_start = fenceCharsToInsert + '\\n',\n        repl_end = '\\n' + fenceCharsToInsert;\n\n    if (sel_multi) {\n      end_line_sel++;\n    } // handle last char including \\n or not\n\n\n    if (sel_multi && cur_end.ch === 0) {\n      repl_end = fenceCharsToInsert + '\\n';\n      end_line_sel--;\n    }\n\n    _replaceSelection(cm, false, [repl_start, repl_end]);\n\n    cm.setSelection({\n      line: start_line_sel,\n      ch: 0\n    }, {\n      line: end_line_sel,\n      ch: 0\n    });\n  }\n\n  var cm = editor.codemirror,\n      cur_start = cm.getCursor('start'),\n      cur_end = cm.getCursor('end'),\n      tok = cm.getTokenAt({\n    line: cur_start.line,\n    ch: cur_start.ch || 1\n  }),\n      // avoid ch 0 which is a cursor pos but not token\n  line = cm.getLineHandle(cur_start.line),\n      is_code = code_type(cm, cur_start.line, line, tok);\n  var block_start, block_end, lineCount;\n\n  if (is_code === 'single') {\n    // similar to some EasyMDE _toggleBlock logic\n    var start = line.text.slice(0, cur_start.ch).replace('`', ''),\n        end = line.text.slice(cur_start.ch).replace('`', '');\n    cm.replaceRange(start + end, {\n      line: cur_start.line,\n      ch: 0\n    }, {\n      line: cur_start.line,\n      ch: 99999999999999\n    });\n    cur_start.ch--;\n\n    if (cur_start !== cur_end) {\n      cur_end.ch--;\n    }\n\n    cm.setSelection(cur_start, cur_end);\n    cm.focus();\n  } else if (is_code === 'fenced') {\n    if (cur_start.line !== cur_end.line || cur_start.ch !== cur_end.ch) {\n      // use selection\n      // find the fenced line so we know what type it is (tilde, backticks, number of them)\n      for (block_start = cur_start.line; block_start >= 0; block_start--) {\n        line = cm.getLineHandle(block_start);\n\n        if (fencing_line(line)) {\n          break;\n        }\n      }\n\n      var fencedTok = cm.getTokenAt({\n        line: block_start,\n        ch: 1\n      });\n      var fence_chars = token_state(fencedTok).fencedChars;\n      var start_text, start_line;\n      var end_text, end_line; // check for selection going up against fenced lines, in which case we don't want to add more fencing\n\n      if (fencing_line(cm.getLineHandle(cur_start.line))) {\n        start_text = '';\n        start_line = cur_start.line;\n      } else if (fencing_line(cm.getLineHandle(cur_start.line - 1))) {\n        start_text = '';\n        start_line = cur_start.line - 1;\n      } else {\n        start_text = fence_chars + '\\n';\n        start_line = cur_start.line;\n      }\n\n      if (fencing_line(cm.getLineHandle(cur_end.line))) {\n        end_text = '';\n        end_line = cur_end.line;\n\n        if (cur_end.ch === 0) {\n          end_line += 1;\n        }\n      } else if (cur_end.ch !== 0 && fencing_line(cm.getLineHandle(cur_end.line + 1))) {\n        end_text = '';\n        end_line = cur_end.line + 1;\n      } else {\n        end_text = fence_chars + '\\n';\n        end_line = cur_end.line + 1;\n      }\n\n      if (cur_end.ch === 0) {\n        // full last line selected, putting cursor at beginning of next\n        end_line -= 1;\n      }\n\n      cm.operation(function () {\n        // end line first, so that line numbers don't change\n        cm.replaceRange(end_text, {\n          line: end_line,\n          ch: 0\n        }, {\n          line: end_line + (end_text ? 0 : 1),\n          ch: 0\n        });\n        cm.replaceRange(start_text, {\n          line: start_line,\n          ch: 0\n        }, {\n          line: start_line + (start_text ? 0 : 1),\n          ch: 0\n        });\n      });\n      cm.setSelection({\n        line: start_line + (start_text ? 1 : 0),\n        ch: 0\n      }, {\n        line: end_line + (start_text ? 1 : -1),\n        ch: 0\n      });\n      cm.focus();\n    } else {\n      // no selection, search for ends of this fenced block\n      var search_from = cur_start.line;\n\n      if (fencing_line(cm.getLineHandle(cur_start.line))) {\n        // gets a little tricky if cursor is right on a fenced line\n        if (code_type(cm, cur_start.line + 1) === 'fenced') {\n          block_start = cur_start.line;\n          search_from = cur_start.line + 1; // for searching for \"end\"\n        } else {\n          block_end = cur_start.line;\n          search_from = cur_start.line - 1; // for searching for \"start\"\n        }\n      }\n\n      if (block_start === undefined) {\n        for (block_start = search_from; block_start >= 0; block_start--) {\n          line = cm.getLineHandle(block_start);\n\n          if (fencing_line(line)) {\n            break;\n          }\n        }\n      }\n\n      if (block_end === undefined) {\n        lineCount = cm.lineCount();\n\n        for (block_end = search_from; block_end < lineCount; block_end++) {\n          line = cm.getLineHandle(block_end);\n\n          if (fencing_line(line)) {\n            break;\n          }\n        }\n      }\n\n      cm.operation(function () {\n        cm.replaceRange('', {\n          line: block_start,\n          ch: 0\n        }, {\n          line: block_start + 1,\n          ch: 0\n        });\n        cm.replaceRange('', {\n          line: block_end - 1,\n          ch: 0\n        }, {\n          line: block_end,\n          ch: 0\n        });\n      });\n      cm.focus();\n    }\n  } else if (is_code === 'indented') {\n    if (cur_start.line !== cur_end.line || cur_start.ch !== cur_end.ch) {\n      // use selection\n      block_start = cur_start.line;\n      block_end = cur_end.line;\n\n      if (cur_end.ch === 0) {\n        block_end--;\n      }\n    } else {\n      // no selection, search for ends of this indented block\n      for (block_start = cur_start.line; block_start >= 0; block_start--) {\n        line = cm.getLineHandle(block_start);\n\n        if (line.text.match(/^\\s*$/)) {\n          // empty or all whitespace - keep going\n          continue;\n        } else {\n          if (code_type(cm, block_start, line) !== 'indented') {\n            block_start += 1;\n            break;\n          }\n        }\n      }\n\n      lineCount = cm.lineCount();\n\n      for (block_end = cur_start.line; block_end < lineCount; block_end++) {\n        line = cm.getLineHandle(block_end);\n\n        if (line.text.match(/^\\s*$/)) {\n          // empty or all whitespace - keep going\n          continue;\n        } else {\n          if (code_type(cm, block_end, line) !== 'indented') {\n            block_end -= 1;\n            break;\n          }\n        }\n      }\n    } // if we are going to un-indent based on a selected set of lines, and the next line is indented too, we need to\n    // insert a blank line so that the next line(s) continue to be indented code\n\n\n    var next_line = cm.getLineHandle(block_end + 1),\n        next_line_last_tok = next_line && cm.getTokenAt({\n      line: block_end + 1,\n      ch: next_line.text.length - 1\n    }),\n        next_line_indented = next_line_last_tok && token_state(next_line_last_tok).indentedCode;\n\n    if (next_line_indented) {\n      cm.replaceRange('\\n', {\n        line: block_end + 1,\n        ch: 0\n      });\n    }\n\n    for (var i = block_start; i <= block_end; i++) {\n      cm.indentLine(i, 'subtract'); // TODO: this doesn't get tracked in the history, so can't be undone :(\n    }\n\n    cm.focus();\n  } else {\n    // insert code formatting\n    var no_sel_and_starting_of_line = cur_start.line === cur_end.line && cur_start.ch === cur_end.ch && cur_start.ch === 0;\n    var sel_multi = cur_start.line !== cur_end.line;\n\n    if (no_sel_and_starting_of_line || sel_multi) {\n      insertFencingAtSelection(cm, cur_start, cur_end, fenceCharsToInsert);\n    } else {\n      _replaceSelection(cm, false, ['`', '`']);\n    }\n  }\n}\n/**\n * Action for toggling blockquote.\n */\n\n\nfunction toggleBlockquote(editor) {\n  var cm = editor.codemirror;\n\n  _toggleLine(cm, 'quote');\n}\n/**\n * Action for toggling heading size: normal -> h1 -> h2 -> h3 -> h4 -> h5 -> h6 -> normal\n */\n\n\nfunction toggleHeadingSmaller(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, 'smaller');\n}\n/**\n * Action for toggling heading size: normal -> h6 -> h5 -> h4 -> h3 -> h2 -> h1 -> normal\n */\n\n\nfunction toggleHeadingBigger(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, 'bigger');\n}\n/**\n * Action for toggling heading size 1\n */\n\n\nfunction toggleHeading1(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, undefined, 1);\n}\n/**\n * Action for toggling heading size 2\n */\n\n\nfunction toggleHeading2(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, undefined, 2);\n}\n/**\n * Action for toggling heading size 3\n */\n\n\nfunction toggleHeading3(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, undefined, 3);\n}\n/**\n * Action for toggling ul.\n */\n\n\nfunction toggleUnorderedList(editor) {\n  var cm = editor.codemirror;\n\n  _toggleLine(cm, 'unordered-list');\n}\n/**\n * Action for toggling ol.\n */\n\n\nfunction toggleOrderedList(editor) {\n  var cm = editor.codemirror;\n\n  _toggleLine(cm, 'ordered-list');\n}\n/**\n * Action for clean block (remove headline, list, blockquote code, markers)\n */\n\n\nfunction cleanBlock(editor) {\n  var cm = editor.codemirror;\n\n  _cleanBlock(cm);\n}\n/**\n * Action for drawing a link.\n */\n\n\nfunction drawLink(editor) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n  var url = 'https://';\n\n  if (options.promptURLs) {\n    url = prompt(options.promptTexts.link, 'https://');\n\n    if (!url) {\n      return false;\n    }\n  }\n\n  _replaceSelection(cm, stat.link, options.insertTexts.link, url);\n}\n/**\n * Action for drawing an img.\n */\n\n\nfunction drawImage(editor) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n  var url = 'https://';\n\n  if (options.promptURLs) {\n    url = prompt(options.promptTexts.image, 'https://');\n\n    if (!url) {\n      return false;\n    }\n  }\n\n  _replaceSelection(cm, stat.image, options.insertTexts.image, url);\n}\n/**\n * Action for opening the browse-file window to upload an image to a server.\n * @param editor {EasyMDE} The EasyMDE object\n */\n\n\nfunction drawUploadedImage(editor) {\n  // TODO: Draw the image template with a fake url? ie: '![](importing foo.png...)'\n  editor.openBrowseFileWindow();\n}\n/**\n * Action executed after an image have been successfully imported on the server.\n * @param editor {EasyMDE} The EasyMDE object\n * @param url {string} The url of the uploaded image\n */\n\n\nfunction afterImageUploaded(editor, url) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n  var imageName = url.substr(url.lastIndexOf('/') + 1);\n\n  _replaceSelection(cm, stat.image, options.insertTexts.uploadedImage, url); // show uploaded image filename for 1000ms\n\n\n  editor.updateStatusBar('upload-image', editor.options.imageTexts.sbOnUploaded.replace('#image_name#', imageName));\n  setTimeout(function () {\n    editor.updateStatusBar('upload-image', editor.options.imageTexts.sbInit);\n  }, 1000);\n}\n/**\n * Action for drawing a table.\n */\n\n\nfunction drawTable(editor) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n\n  _replaceSelection(cm, stat.table, options.insertTexts.table);\n}\n/**\n * Action for drawing a horizontal rule.\n */\n\n\nfunction drawHorizontalRule(editor) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n\n  _replaceSelection(cm, stat.image, options.insertTexts.horizontalRule);\n}\n/**\n * Undo action.\n */\n\n\nfunction undo(editor) {\n  var cm = editor.codemirror;\n  cm.undo();\n  cm.focus();\n}\n/**\n * Redo action.\n */\n\n\nfunction redo(editor) {\n  var cm = editor.codemirror;\n  cm.redo();\n  cm.focus();\n}\n/**\n * Toggle side by side preview\n */\n\n\nfunction toggleSideBySide(editor) {\n  var cm = editor.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.nextSibling;\n  var toolbarButton = editor.toolbarElements && editor.toolbarElements['side-by-side'];\n  var useSideBySideListener = false;\n\n  if (/editor-preview-active-side/.test(preview.className)) {\n    preview.className = preview.className.replace(/\\s*editor-preview-active-side\\s*/g, '');\n    if (toolbarButton) toolbarButton.className = toolbarButton.className.replace(/\\s*active\\s*/g, '');\n    wrapper.className = wrapper.className.replace(/\\s*CodeMirror-sided\\s*/g, ' ');\n  } else {\n    // When the preview button is clicked for the first time,\n    // give some time for the transition from editor.css to fire and the view to slide from right to left,\n    // instead of just appearing.\n    setTimeout(function () {\n      if (!cm.getOption('fullScreen')) toggleFullScreen(editor);\n      preview.className += ' editor-preview-active-side';\n    }, 1);\n    if (toolbarButton) toolbarButton.className += ' active';\n    wrapper.className += ' CodeMirror-sided';\n    useSideBySideListener = true;\n  } // Hide normal preview if active\n\n\n  var previewNormal = wrapper.lastChild;\n\n  if (/editor-preview-active/.test(previewNormal.className)) {\n    previewNormal.className = previewNormal.className.replace(/\\s*editor-preview-active\\s*/g, '');\n    var toolbar = editor.toolbarElements.preview;\n    var toolbar_div = wrapper.previousSibling;\n    toolbar.className = toolbar.className.replace(/\\s*active\\s*/g, '');\n    toolbar_div.className = toolbar_div.className.replace(/\\s*disabled-for-preview*/g, '');\n  }\n\n  var sideBySideRenderingFunction = function sideBySideRenderingFunction() {\n    var newValue = editor.options.previewRender(editor.value(), preview);\n\n    if (newValue != null) {\n      preview.innerHTML = newValue;\n    }\n  };\n\n  if (!cm.sideBySideRenderingFunction) {\n    cm.sideBySideRenderingFunction = sideBySideRenderingFunction;\n  }\n\n  if (useSideBySideListener) {\n    var newValue = editor.options.previewRender(editor.value(), preview);\n\n    if (newValue != null) {\n      preview.innerHTML = newValue;\n    }\n\n    cm.on('update', cm.sideBySideRenderingFunction);\n  } else {\n    cm.off('update', cm.sideBySideRenderingFunction);\n  } // Refresh to fix selection being off (#309)\n\n\n  cm.refresh();\n}\n/**\n * Preview action.\n */\n\n\nfunction togglePreview(editor) {\n  var cm = editor.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var toolbar_div = wrapper.previousSibling;\n  var toolbar = editor.options.toolbar ? editor.toolbarElements.preview : false;\n  var preview = wrapper.lastChild;\n\n  if (!preview || !/editor-preview-full/.test(preview.className)) {\n    preview = document.createElement('div');\n    preview.className = 'editor-preview-full';\n\n    if (editor.options.previewClass) {\n      if (Array.isArray(editor.options.previewClass)) {\n        for (var i = 0; i < editor.options.previewClass.length; i++) {\n          preview.className += ' ' + editor.options.previewClass[i];\n        }\n      } else if (typeof editor.options.previewClass === 'string') {\n        preview.className += ' ' + editor.options.previewClass;\n      }\n    }\n\n    wrapper.appendChild(preview);\n  }\n\n  if (/editor-preview-active/.test(preview.className)) {\n    preview.className = preview.className.replace(/\\s*editor-preview-active\\s*/g, '');\n\n    if (toolbar) {\n      toolbar.className = toolbar.className.replace(/\\s*active\\s*/g, '');\n      toolbar_div.className = toolbar_div.className.replace(/\\s*disabled-for-preview*/g, '');\n    }\n  } else {\n    // When the preview button is clicked for the first time,\n    // give some time for the transition from editor.css to fire and the view to slide from right to left,\n    // instead of just appearing.\n    setTimeout(function () {\n      preview.className += ' editor-preview-active';\n    }, 1);\n\n    if (toolbar) {\n      toolbar.className += ' active';\n      toolbar_div.className += ' disabled-for-preview';\n    }\n  }\n\n  preview.innerHTML = editor.options.previewRender(editor.value(), preview); // Turn off side by side if needed\n\n  var sidebyside = cm.getWrapperElement().nextSibling;\n  if (/editor-preview-active-side/.test(sidebyside.className)) toggleSideBySide(editor);\n}\n\nfunction _replaceSelection(cm, active, startEnd, url) {\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var text;\n  var start = startEnd[0];\n  var end = startEnd[1];\n  var startPoint = {},\n      endPoint = {};\n  Object.assign(startPoint, cm.getCursor('start'));\n  Object.assign(endPoint, cm.getCursor('end'));\n\n  if (url) {\n    start = start.replace('#url#', url); // url is in start for upload-image\n\n    end = end.replace('#url#', url);\n  }\n\n  if (active) {\n    text = cm.getLine(startPoint.line);\n    start = text.slice(0, startPoint.ch);\n    end = text.slice(startPoint.ch);\n    cm.replaceRange(start + end, {\n      line: startPoint.line,\n      ch: 0\n    });\n  } else {\n    text = cm.getSelection();\n    cm.replaceSelection(start + text + end);\n    startPoint.ch += start.length;\n\n    if (startPoint !== endPoint) {\n      endPoint.ch += start.length;\n    }\n  }\n\n  cm.setSelection(startPoint, endPoint);\n  cm.focus();\n}\n\nfunction _toggleHeading(cm, direction, size) {\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var startPoint = cm.getCursor('start');\n  var endPoint = cm.getCursor('end');\n\n  for (var i = startPoint.line; i <= endPoint.line; i++) {\n    (function (i) {\n      var text = cm.getLine(i);\n      var currHeadingLevel = text.search(/[^#]/);\n\n      if (direction !== undefined) {\n        if (currHeadingLevel <= 0) {\n          if (direction == 'bigger') {\n            text = '###### ' + text;\n          } else {\n            text = '# ' + text;\n          }\n        } else if (currHeadingLevel == 6 && direction == 'smaller') {\n          text = text.substr(7);\n        } else if (currHeadingLevel == 1 && direction == 'bigger') {\n          text = text.substr(2);\n        } else {\n          if (direction == 'bigger') {\n            text = text.substr(1);\n          } else {\n            text = '#' + text;\n          }\n        }\n      } else {\n        if (size == 1) {\n          if (currHeadingLevel <= 0) {\n            text = '# ' + text;\n          } else if (currHeadingLevel == size) {\n            text = text.substr(currHeadingLevel + 1);\n          } else {\n            text = '# ' + text.substr(currHeadingLevel + 1);\n          }\n        } else if (size == 2) {\n          if (currHeadingLevel <= 0) {\n            text = '## ' + text;\n          } else if (currHeadingLevel == size) {\n            text = text.substr(currHeadingLevel + 1);\n          } else {\n            text = '## ' + text.substr(currHeadingLevel + 1);\n          }\n        } else {\n          if (currHeadingLevel <= 0) {\n            text = '### ' + text;\n          } else if (currHeadingLevel == size) {\n            text = text.substr(currHeadingLevel + 1);\n          } else {\n            text = '### ' + text.substr(currHeadingLevel + 1);\n          }\n        }\n      }\n\n      cm.replaceRange(text, {\n        line: i,\n        ch: 0\n      }, {\n        line: i,\n        ch: 99999999999999\n      });\n    })(i);\n  }\n\n  cm.focus();\n}\n\nfunction _toggleLine(cm, name) {\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var listRegexp = /^(\\s*)(\\*|-|\\+|\\d*\\.)(\\s+)/;\n  var whitespacesRegexp = /^\\s*/;\n  var stat = getState(cm);\n  var startPoint = cm.getCursor('start');\n  var endPoint = cm.getCursor('end');\n  var repl = {\n    'quote': /^(\\s*)>\\s+/,\n    'unordered-list': listRegexp,\n    'ordered-list': listRegexp\n  };\n\n  var _getChar = function _getChar(name, i) {\n    var map = {\n      'quote': '>',\n      'unordered-list': '*',\n      'ordered-list': '%%i.'\n    };\n    return map[name].replace('%%i', i);\n  };\n\n  var _checkChar = function _checkChar(name, char) {\n    var map = {\n      'quote': '>',\n      'unordered-list': '*',\n      'ordered-list': '\\\\d+.'\n    };\n    var rt = new RegExp(map[name]);\n    return char && rt.test(char);\n  };\n\n  var _toggle = function _toggle(name, text, untoggleOnly) {\n    var arr = listRegexp.exec(text);\n\n    var char = _getChar(name, line);\n\n    if (arr !== null) {\n      if (_checkChar(name, arr[2])) {\n        char = '';\n      }\n\n      text = arr[1] + char + arr[3] + text.replace(whitespacesRegexp, '').replace(repl[name], '$1');\n    } else if (untoggleOnly == false) {\n      text = char + ' ' + text;\n    }\n\n    return text;\n  };\n\n  var line = 1;\n\n  for (var i = startPoint.line; i <= endPoint.line; i++) {\n    (function (i) {\n      var text = cm.getLine(i);\n\n      if (stat[name]) {\n        text = text.replace(repl[name], '$1');\n      } else {\n        // If we're toggling unordered-list formatting, check if the current line\n        // is part of an ordered-list, and if so, untoggle that first.\n        // Workaround for https://github.com/Ionaru/easy-markdown-editor/issues/92\n        if (name == 'unordered-list') {\n          text = _toggle('ordered-list', text, true);\n        }\n\n        text = _toggle(name, text, false);\n        line += 1;\n      }\n\n      cm.replaceRange(text, {\n        line: i,\n        ch: 0\n      }, {\n        line: i,\n        ch: 99999999999999\n      });\n    })(i);\n  }\n\n  cm.focus();\n}\n\nfunction _toggleBlock(editor, type, start_chars, end_chars) {\n  if (/editor-preview-active/.test(editor.codemirror.getWrapperElement().lastChild.className)) return;\n  end_chars = typeof end_chars === 'undefined' ? start_chars : end_chars;\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var text;\n  var start = start_chars;\n  var end = end_chars;\n  var startPoint = cm.getCursor('start');\n  var endPoint = cm.getCursor('end');\n\n  if (stat[type]) {\n    text = cm.getLine(startPoint.line);\n    start = text.slice(0, startPoint.ch);\n    end = text.slice(startPoint.ch);\n\n    if (type == 'bold') {\n      start = start.replace(/(\\*\\*|__)(?![\\s\\S]*(\\*\\*|__))/, '');\n      end = end.replace(/(\\*\\*|__)/, '');\n    } else if (type == 'italic') {\n      start = start.replace(/(\\*|_)(?![\\s\\S]*(\\*|_))/, '');\n      end = end.replace(/(\\*|_)/, '');\n    } else if (type == 'strikethrough') {\n      start = start.replace(/(\\*\\*|~~)(?![\\s\\S]*(\\*\\*|~~))/, '');\n      end = end.replace(/(\\*\\*|~~)/, '');\n    }\n\n    cm.replaceRange(start + end, {\n      line: startPoint.line,\n      ch: 0\n    }, {\n      line: startPoint.line,\n      ch: 99999999999999\n    });\n\n    if (type == 'bold' || type == 'strikethrough') {\n      startPoint.ch -= 2;\n\n      if (startPoint !== endPoint) {\n        endPoint.ch -= 2;\n      }\n    } else if (type == 'italic') {\n      startPoint.ch -= 1;\n\n      if (startPoint !== endPoint) {\n        endPoint.ch -= 1;\n      }\n    }\n  } else {\n    text = cm.getSelection();\n\n    if (type == 'bold') {\n      text = text.split('**').join('');\n      text = text.split('__').join('');\n    } else if (type == 'italic') {\n      text = text.split('*').join('');\n      text = text.split('_').join('');\n    } else if (type == 'strikethrough') {\n      text = text.split('~~').join('');\n    }\n\n    cm.replaceSelection(start + text + end);\n    startPoint.ch += start_chars.length;\n    endPoint.ch = startPoint.ch + text.length;\n  }\n\n  cm.setSelection(startPoint, endPoint);\n  cm.focus();\n}\n\nfunction _cleanBlock(cm) {\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var startPoint = cm.getCursor('start');\n  var endPoint = cm.getCursor('end');\n  var text;\n\n  for (var line = startPoint.line; line <= endPoint.line; line++) {\n    text = cm.getLine(line);\n    text = text.replace(/^[ ]*([# ]+|\\*|-|[> ]+|[0-9]+(.|\\)))[ ]*/, '');\n    cm.replaceRange(text, {\n      line: line,\n      ch: 0\n    }, {\n      line: line,\n      ch: 99999999999999\n    });\n  }\n}\n/**\n * Convert a number of bytes to a human-readable file size.\n * @param bytes {integer} A number of bytes, as integer. Ex: 421137\n * @param units {number[]} An array of human-readable units, ie. ['b', 'Kb', 'Mb']\n * @returns string A human-readable file size. Ex: '412Kb'\n */\n\n\nfunction humanFileSize(bytes, units) {\n  if (Math.abs(bytes) < 1024) {\n    return '' + bytes + units[0];\n  }\n\n  var u = 0;\n\n  do {\n    bytes /= 1024;\n    ++u;\n  } while (Math.abs(bytes) >= 1024 && u < units.length);\n\n  return '' + bytes.toFixed(1) + units[u];\n} // Merge the properties of one object into another.\n\n\nfunction _mergeProperties(target, source) {\n  for (var property in source) {\n    if (Object.prototype.hasOwnProperty.call(source, property)) {\n      if (source[property] instanceof Array) {\n        target[property] = source[property].concat(target[property] instanceof Array ? target[property] : []);\n      } else if (source[property] !== null && typeof source[property] === 'object' && source[property].constructor === Object) {\n        target[property] = _mergeProperties(target[property] || {}, source[property]);\n      } else {\n        target[property] = source[property];\n      }\n    }\n  }\n\n  return target;\n} // Merge an arbitrary number of objects into one.\n\n\nfunction extend(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    target = _mergeProperties(target, arguments[i]);\n  }\n\n  return target;\n}\n/* The right word count in respect for CJK. */\n\n\nfunction wordCount(data) {\n  var pattern = /[a-zA-Z0-9_\\u00A0-\\u02AF\\u0392-\\u03c9\\u0410-\\u04F9]+|[\\u4E00-\\u9FFF\\u3400-\\u4dbf\\uf900-\\ufaff\\u3040-\\u309f\\uac00-\\ud7af]+/g;\n  var m = data.match(pattern);\n  var count = 0;\n  if (m === null) return count;\n\n  for (var i = 0; i < m.length; i++) {\n    if (m[i].charCodeAt(0) >= 0x4E00) {\n      count += m[i].length;\n    } else {\n      count += 1;\n    }\n  }\n\n  return count;\n}\n\nvar toolbarBuiltInButtons = {\n  'bold': {\n    name: 'bold',\n    action: toggleBold,\n    className: 'fa fa-bold',\n    title: 'Bold',\n    default: true\n  },\n  'italic': {\n    name: 'italic',\n    action: toggleItalic,\n    className: 'fa fa-italic',\n    title: 'Italic',\n    default: true\n  },\n  'strikethrough': {\n    name: 'strikethrough',\n    action: toggleStrikethrough,\n    className: 'fa fa-strikethrough',\n    title: 'Strikethrough'\n  },\n  'heading': {\n    name: 'heading',\n    action: toggleHeadingSmaller,\n    className: 'fa fa-header fa-heading',\n    title: 'Heading',\n    default: true\n  },\n  'heading-smaller': {\n    name: 'heading-smaller',\n    action: toggleHeadingSmaller,\n    className: 'fa fa-header fa-heading header-smaller',\n    title: 'Smaller Heading'\n  },\n  'heading-bigger': {\n    name: 'heading-bigger',\n    action: toggleHeadingBigger,\n    className: 'fa fa-header fa-heading header-bigger',\n    title: 'Bigger Heading'\n  },\n  'heading-1': {\n    name: 'heading-1',\n    action: toggleHeading1,\n    className: 'fa fa-header fa-heading header-1',\n    title: 'Big Heading'\n  },\n  'heading-2': {\n    name: 'heading-2',\n    action: toggleHeading2,\n    className: 'fa fa-header fa-heading header-2',\n    title: 'Medium Heading'\n  },\n  'heading-3': {\n    name: 'heading-3',\n    action: toggleHeading3,\n    className: 'fa fa-header fa-heading header-3',\n    title: 'Small Heading'\n  },\n  'separator-1': {\n    name: 'separator-1'\n  },\n  'code': {\n    name: 'code',\n    action: toggleCodeBlock,\n    className: 'fa fa-code',\n    title: 'Code'\n  },\n  'quote': {\n    name: 'quote',\n    action: toggleBlockquote,\n    className: 'fa fa-quote-left',\n    title: 'Quote',\n    default: true\n  },\n  'unordered-list': {\n    name: 'unordered-list',\n    action: toggleUnorderedList,\n    className: 'fa fa-list-ul',\n    title: 'Generic List',\n    default: true\n  },\n  'ordered-list': {\n    name: 'ordered-list',\n    action: toggleOrderedList,\n    className: 'fa fa-list-ol',\n    title: 'Numbered List',\n    default: true\n  },\n  'clean-block': {\n    name: 'clean-block',\n    action: cleanBlock,\n    className: 'fa fa-eraser',\n    title: 'Clean block'\n  },\n  'separator-2': {\n    name: 'separator-2'\n  },\n  'link': {\n    name: 'link',\n    action: drawLink,\n    className: 'fa fa-link',\n    title: 'Create Link',\n    default: true\n  },\n  'image': {\n    name: 'image',\n    action: drawImage,\n    className: 'fa fa-image',\n    title: 'Insert Image',\n    default: true\n  },\n  'upload-image': {\n    name: 'upload-image',\n    action: drawUploadedImage,\n    className: 'fa fa-image',\n    title: 'Import an image'\n  },\n  'table': {\n    name: 'table',\n    action: drawTable,\n    className: 'fa fa-table',\n    title: 'Insert Table'\n  },\n  'horizontal-rule': {\n    name: 'horizontal-rule',\n    action: drawHorizontalRule,\n    className: 'fa fa-minus',\n    title: 'Insert Horizontal Line'\n  },\n  'separator-3': {\n    name: 'separator-3'\n  },\n  'preview': {\n    name: 'preview',\n    action: togglePreview,\n    className: 'fa fa-eye',\n    noDisable: true,\n    title: 'Toggle Preview',\n    default: true\n  },\n  'side-by-side': {\n    name: 'side-by-side',\n    action: toggleSideBySide,\n    className: 'fa fa-columns',\n    noDisable: true,\n    noMobile: true,\n    title: 'Toggle Side by Side',\n    default: true\n  },\n  'fullscreen': {\n    name: 'fullscreen',\n    action: toggleFullScreen,\n    className: 'fa fa-arrows-alt',\n    noDisable: true,\n    noMobile: true,\n    title: 'Toggle Fullscreen',\n    default: true\n  },\n  'separator-4': {\n    name: 'separator-4'\n  },\n  'guide': {\n    name: 'guide',\n    action: 'https://www.markdownguide.org/basic-syntax/',\n    className: 'fa fa-question-circle',\n    noDisable: true,\n    title: 'Markdown Guide',\n    default: true\n  },\n  'separator-5': {\n    name: 'separator-5'\n  },\n  'undo': {\n    name: 'undo',\n    action: undo,\n    className: 'fa fa-undo',\n    noDisable: true,\n    title: 'Undo'\n  },\n  'redo': {\n    name: 'redo',\n    action: redo,\n    className: 'fa fa-repeat fa-redo',\n    noDisable: true,\n    title: 'Redo'\n  }\n};\nvar insertTexts = {\n  link: ['[', '](#url#)'],\n  image: ['![](', '#url#)'],\n  uploadedImage: ['![](#url#)', ''],\n  // uploadedImage: ['![](#url#)\\n', ''], // TODO: New line insertion doesn't work here.\n  table: ['', '\\n\\n| Column 1 | Column 2 | Column 3 |\\n| -------- | -------- | -------- |\\n| Text     | Text     | Text     |\\n\\n'],\n  horizontalRule: ['', '\\n\\n-----\\n\\n']\n};\nvar promptTexts = {\n  link: 'URL for the link:',\n  image: 'URL of the image:'\n};\nvar blockStyles = {\n  'bold': '**',\n  'code': '```',\n  'italic': '*'\n};\n/**\n * Texts displayed to the user (mainly on the status bar) for the import image\n * feature. Can be used for customization or internationalization.\n */\n\nvar imageTexts = {\n  sbInit: 'Attach files by drag and dropping or pasting from clipboard.',\n  sbOnDragEnter: 'Drop image to upload it.',\n  sbOnDrop: 'Uploading image #images_names#...',\n  sbProgress: 'Uploading #file_name#: #progress#%',\n  sbOnUploaded: 'Uploaded #image_name#',\n  sizeUnits: 'b,Kb,Mb'\n};\n/**\n * Errors displayed to the user, using the `errorCallback` option. Can be used for\n * customization or internationalization.\n */\n\nvar errorMessages = {\n  noFileGiven: 'You must select a file.',\n  typeNotAllowed: 'This image type is not allowed.',\n  fileTooLarge: 'Image #image_name# is too big (#image_size#).\\n' + 'Maximum file size is #image_max_size#.',\n  importError: 'Something went wrong when uploading the image #image_name#.'\n};\n/**\n * Interface of EasyMDE.\n */\n\nfunction EasyMDE(options) {\n  // Handle options parameter\n  options = options || {}; // Used later to refer to it\"s parent\n\n  options.parent = this; // Check if Font Awesome needs to be auto downloaded\n\n  var autoDownloadFA = true;\n\n  if (options.autoDownloadFontAwesome === false) {\n    autoDownloadFA = false;\n  }\n\n  if (options.autoDownloadFontAwesome !== true) {\n    var styleSheets = document.styleSheets;\n\n    for (var i = 0; i < styleSheets.length; i++) {\n      if (!styleSheets[i].href) continue;\n\n      if (styleSheets[i].href.indexOf('//maxcdn.bootstrapcdn.com/font-awesome/') > -1) {\n        autoDownloadFA = false;\n      }\n    }\n  }\n\n  if (autoDownloadFA) {\n    var link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = 'https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css';\n    document.getElementsByTagName('head')[0].appendChild(link);\n  } // Find the textarea to use\n\n\n  if (options.element) {\n    this.element = options.element;\n  } else if (options.element === null) {\n    // This means that the element option was specified, but no element was found\n    console.log('EasyMDE: Error. No element was found.');\n    return;\n  } // Handle toolbar\n\n\n  if (options.toolbar === undefined) {\n    // Initialize\n    options.toolbar = []; // Loop over the built in buttons, to get the preferred order\n\n    for (var key in toolbarBuiltInButtons) {\n      if (Object.prototype.hasOwnProperty.call(toolbarBuiltInButtons, key)) {\n        if (key.indexOf('separator-') != -1) {\n          options.toolbar.push('|');\n        }\n\n        if (toolbarBuiltInButtons[key].default === true || options.showIcons && options.showIcons.constructor === Array && options.showIcons.indexOf(key) != -1) {\n          options.toolbar.push(key);\n        }\n      }\n    }\n  } // Editor preview styling class.\n\n\n  if (!Object.prototype.hasOwnProperty.call(options, 'previewClass')) {\n    options.previewClass = 'editor-preview';\n  } // Handle status bar\n\n\n  if (!Object.prototype.hasOwnProperty.call(options, 'status')) {\n    options.status = ['autosave', 'lines', 'words', 'cursor'];\n\n    if (options.uploadImage) {\n      options.status.unshift('upload-image');\n    }\n  } // Add default preview rendering function\n\n\n  if (!options.previewRender) {\n    options.previewRender = function (plainText) {\n      // Note: \"this\" refers to the options object\n      return this.parent.markdown(plainText);\n    };\n  } // Set default options for parsing config\n\n\n  options.parsingConfig = extend({\n    highlightFormatting: true // needed for toggleCodeBlock to detect types of code\n\n  }, options.parsingConfig || {}); // Merging the insertTexts, with the given options\n\n  options.insertTexts = extend({}, insertTexts, options.insertTexts || {}); // Merging the promptTexts, with the given options\n\n  options.promptTexts = extend({}, promptTexts, options.promptTexts || {}); // Merging the blockStyles, with the given options\n\n  options.blockStyles = extend({}, blockStyles, options.blockStyles || {}); // Merging the shortcuts, with the given options\n\n  options.shortcuts = extend({}, shortcuts, options.shortcuts || {});\n  options.minHeight = options.minHeight || '300px';\n\n  options.errorCallback = options.errorCallback || function (errorMessage) {\n    alert(errorMessage);\n  }; // Import-image default configuration\n\n\n  options.uploadImage = options.uploadImage || false;\n  options.imageMaxSize = options.imageMaxSize || 2097152; // 1024 * 1024 * 2\n\n  options.imageAccept = options.imageAccept || 'image/png, image/jpeg';\n  options.imageTexts = extend({}, imageTexts, options.imageTexts || {});\n  options.errorMessages = extend({}, errorMessages, options.errorMessages || {}); // Change unique_id to uniqueId for backwards compatibility\n\n  if (options.autosave != undefined && options.autosave.unique_id != undefined && options.autosave.unique_id != '') options.autosave.uniqueId = options.autosave.unique_id; // Update this options\n\n  this.options = options; // Auto render\n\n  this.render(); // The codemirror component is only available after rendering\n  // so, the setter for the initialValue can only run after\n  // the element has been rendered\n\n  if (options.initialValue && (!this.options.autosave || this.options.autosave.foundSavedValue !== true)) {\n    this.value(options.initialValue);\n  }\n\n  if (options.uploadImage) {\n    var self = this;\n    this.codemirror.on('dragenter', function (cm, event) {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbOnDragEnter);\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.codemirror.on('dragend', function (cm, event) {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.codemirror.on('dragleave', function (cm, event) {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.codemirror.on('dragover', function (cm, event) {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbOnDragEnter);\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.codemirror.on('drop', function (cm, event) {\n      event.stopPropagation();\n      event.preventDefault();\n\n      if (options.imageUploadFunction) {\n        self.uploadImagesUsingCustomFunction(options.imageUploadFunction, event.dataTransfer.files);\n      } else {\n        self.uploadImages(event.dataTransfer.files);\n      }\n    });\n    this.codemirror.on('paste', function (cm, event) {\n      if (options.imageUploadFunction) {\n        self.uploadImagesUsingCustomFunction(options.imageUploadFunction, event.clipboardData.files);\n      } else {\n        self.uploadImages(event.clipboardData.files);\n      }\n    });\n  }\n}\n/**\n * Upload asynchronously a list of images to a server.\n *\n * Can be triggered by:\n * - drag&drop;\n * - copy-paste;\n * - the browse-file window (opened when the user clicks on the *upload-image* icon).\n * @param {FileList} files The files to upload the the server.\n * @param [onSuccess] {function} see EasyMDE.prototype.uploadImage\n * @param [onError] {function} see EasyMDE.prototype.uploadImage\n */\n\n\nEasyMDE.prototype.uploadImages = function (files, onSuccess, onError) {\n  if (files.length === 0) {\n    return;\n  }\n\n  var names = [];\n\n  for (var i = 0; i < files.length; i++) {\n    names.push(files[i].name);\n    this.uploadImage(files[i], onSuccess, onError);\n  }\n\n  this.updateStatusBar('upload-image', this.options.imageTexts.sbOnDrop.replace('#images_names#', names.join(', ')));\n};\n/**\n * Upload asynchronously a list of images to a server.\n *\n * Can be triggered by:\n * - drag&drop;\n * - copy-paste;\n * - the browse-file window (opened when the user clicks on the *upload-image* icon).\n * @param imageUploadFunction {Function} The custom function to upload the image passed in options.\n * @param {FileList} files The files to upload the the server.\n */\n\n\nEasyMDE.prototype.uploadImagesUsingCustomFunction = function (imageUploadFunction, files) {\n  if (files.length === 0) {\n    return;\n  }\n\n  var names = [];\n\n  for (var i = 0; i < files.length; i++) {\n    names.push(files[i].name);\n    this.uploadImageUsingCustomFunction(imageUploadFunction, files[i]);\n  }\n\n  this.updateStatusBar('upload-image', this.options.imageTexts.sbOnDrop.replace('#images_names#', names.join(', ')));\n};\n/**\n * Update an item in the status bar.\n * @param itemName {string} The name of the item to update (ie. 'upload-image', 'autosave', etc.).\n * @param content {string} the new content of the item to write in the status bar.\n */\n\n\nEasyMDE.prototype.updateStatusBar = function (itemName, content) {\n  var matchingClasses = this.gui.statusbar.getElementsByClassName(itemName);\n\n  if (matchingClasses.length === 1) {\n    this.gui.statusbar.getElementsByClassName(itemName)[0].textContent = content;\n  } else if (matchingClasses.length === 0) {\n    console.log('EasyMDE: status bar item ' + itemName + ' was not found.');\n  } else {\n    console.log('EasyMDE: Several status bar items named ' + itemName + ' was found.');\n  }\n};\n/**\n * Default markdown render.\n */\n\n\nEasyMDE.prototype.markdown = function (text) {\n  if (marked) {\n    // Initialize\n    var markedOptions;\n\n    if (this.options && this.options.renderingConfig && this.options.renderingConfig.markedOptions) {\n      markedOptions = this.options.renderingConfig.markedOptions;\n    } else {\n      markedOptions = {};\n    } // Update options\n\n\n    if (this.options && this.options.renderingConfig && this.options.renderingConfig.singleLineBreaks === false) {\n      markedOptions.breaks = false;\n    } else {\n      markedOptions.breaks = true;\n    }\n\n    if (this.options && this.options.renderingConfig && this.options.renderingConfig.codeSyntaxHighlighting === true) {\n      /* Get HLJS from config or window */\n      var hljs = this.options.renderingConfig.hljs || window.hljs;\n      /* Check if HLJS loaded */\n\n      if (hljs) {\n        markedOptions.highlight = function (code) {\n          return hljs.highlightAuto(code).value;\n        };\n      }\n    } // Set options\n\n\n    marked.setOptions(markedOptions); // Convert the markdown to HTML\n\n    var htmlText = marked(text); // Edit the HTML anchors to add 'target=\"_blank\"' by default.\n\n    htmlText = addAnchorTargetBlank(htmlText);\n    return htmlText;\n  }\n};\n/**\n * Render editor to the given element.\n */\n\n\nEasyMDE.prototype.render = function (el) {\n  if (!el) {\n    el = this.element || document.getElementsByTagName('textarea')[0];\n  }\n\n  if (this._rendered && this._rendered === el) {\n    // Already rendered.\n    return;\n  }\n\n  this.element = el;\n  var options = this.options;\n  var self = this;\n  var keyMaps = {};\n\n  for (var key in options.shortcuts) {\n    // null stands for \"do not bind this command\"\n    if (options.shortcuts[key] !== null && bindings[key] !== null) {\n      (function (key) {\n        keyMaps[fixShortcut(options.shortcuts[key])] = function () {\n          var action = bindings[key];\n\n          if (typeof action === 'function') {\n            action(self);\n          } else if (typeof action === 'string') {\n            window.open(action, '_blank');\n          }\n        };\n      })(key);\n    }\n  }\n\n  keyMaps['Enter'] = 'newlineAndIndentContinueMarkdownList';\n  keyMaps['Tab'] = 'tabAndIndentMarkdownList';\n  keyMaps['Shift-Tab'] = 'shiftTabAndUnindentMarkdownList';\n\n  keyMaps['Esc'] = function (cm) {\n    if (cm.getOption('fullScreen')) toggleFullScreen(self);\n  };\n\n  document.addEventListener('keydown', function (e) {\n    e = e || window.event;\n\n    if (e.keyCode == 27) {\n      if (self.codemirror.getOption('fullScreen')) toggleFullScreen(self);\n    }\n  }, false);\n  var mode, backdrop;\n\n  if (options.spellChecker !== false) {\n    mode = 'spell-checker';\n    backdrop = options.parsingConfig;\n    backdrop.name = 'gfm';\n    backdrop.gitHubSpice = false;\n    CodeMirrorSpellChecker({\n      codeMirrorInstance: CodeMirror\n    });\n  } else {\n    mode = options.parsingConfig;\n    mode.name = 'gfm';\n    mode.gitHubSpice = false;\n  } // eslint-disable-next-line no-unused-vars\n\n\n  function configureMouse(cm, repeat, event) {\n    return {\n      addNew: false\n    };\n  }\n\n  this.codemirror = CodeMirror.fromTextArea(el, {\n    mode: mode,\n    backdrop: backdrop,\n    theme: options.theme != undefined ? options.theme : 'easymde',\n    tabSize: options.tabSize != undefined ? options.tabSize : 2,\n    indentUnit: options.tabSize != undefined ? options.tabSize : 2,\n    indentWithTabs: options.indentWithTabs === false ? false : true,\n    lineNumbers: false,\n    autofocus: options.autofocus === true ? true : false,\n    extraKeys: keyMaps,\n    lineWrapping: options.lineWrapping === false ? false : true,\n    allowDropFileTypes: ['text/plain'],\n    placeholder: options.placeholder || el.getAttribute('placeholder') || '',\n    styleSelectedText: options.styleSelectedText != undefined ? options.styleSelectedText : !isMobile(),\n    configureMouse: configureMouse\n  });\n  this.codemirror.getScrollerElement().style.minHeight = options.minHeight;\n\n  if (options.forceSync === true) {\n    var cm = this.codemirror;\n    cm.on('change', function () {\n      cm.save();\n    });\n  }\n\n  this.gui = {};\n\n  if (options.toolbar !== false) {\n    this.gui.toolbar = this.createToolbar();\n  }\n\n  if (options.status !== false) {\n    this.gui.statusbar = this.createStatusbar();\n  }\n\n  if (options.autosave != undefined && options.autosave.enabled === true) {\n    this.autosave();\n  }\n\n  this.gui.sideBySide = this.createSideBySide();\n  this._rendered = this.element; // Fixes CodeMirror bug (#344)\n\n  var temp_cm = this.codemirror;\n  setTimeout(function () {\n    temp_cm.refresh();\n  }.bind(temp_cm), 0);\n}; // Safari, in Private Browsing Mode, looks like it supports localStorage but all calls to setItem throw QuotaExceededError. We're going to detect this and set a variable accordingly.\n\n\nfunction isLocalStorageAvailable() {\n  if (typeof localStorage === 'object') {\n    try {\n      localStorage.setItem('smde_localStorage', 1);\n      localStorage.removeItem('smde_localStorage');\n    } catch (e) {\n      return false;\n    }\n  } else {\n    return false;\n  }\n\n  return true;\n}\n\nEasyMDE.prototype.autosave = function () {\n  if (isLocalStorageAvailable()) {\n    var easyMDE = this;\n\n    if (this.options.autosave.uniqueId == undefined || this.options.autosave.uniqueId == '') {\n      console.log('EasyMDE: You must set a uniqueId to use the autosave feature');\n      return;\n    }\n\n    if (this.options.autosave.binded !== true) {\n      if (easyMDE.element.form != null && easyMDE.element.form != undefined) {\n        easyMDE.element.form.addEventListener('submit', function () {\n          clearTimeout(easyMDE.autosaveTimeoutId);\n          easyMDE.autosaveTimeoutId = undefined;\n          localStorage.removeItem('smde_' + easyMDE.options.autosave.uniqueId); // Restart autosaving in case the submit will be cancelled down the line\n\n          setTimeout(function () {\n            easyMDE.autosave();\n          }, easyMDE.options.autosave.delay || 10000);\n        });\n      }\n\n      this.options.autosave.binded = true;\n    }\n\n    if (this.options.autosave.loaded !== true) {\n      if (typeof localStorage.getItem('smde_' + this.options.autosave.uniqueId) == 'string' && localStorage.getItem('smde_' + this.options.autosave.uniqueId) != '') {\n        this.codemirror.setValue(localStorage.getItem('smde_' + this.options.autosave.uniqueId));\n        this.options.autosave.foundSavedValue = true;\n      }\n\n      this.options.autosave.loaded = true;\n    }\n\n    localStorage.setItem('smde_' + this.options.autosave.uniqueId, easyMDE.value());\n    var el = document.getElementById('autosaved');\n\n    if (el != null && el != undefined && el != '') {\n      var d = new Date();\n      var hh = d.getHours();\n      var m = d.getMinutes();\n      var dd = 'am';\n      var h = hh;\n\n      if (h >= 12) {\n        h = hh - 12;\n        dd = 'pm';\n      }\n\n      if (h == 0) {\n        h = 12;\n      }\n\n      m = m < 10 ? '0' + m : m;\n      el.innerHTML = 'Autosaved: ' + h + ':' + m + ' ' + dd;\n    }\n\n    this.autosaveTimeoutId = setTimeout(function () {\n      easyMDE.autosave();\n    }, this.options.autosave.delay || 10000);\n  } else {\n    console.log('EasyMDE: localStorage not available, cannot autosave');\n  }\n};\n\nEasyMDE.prototype.clearAutosavedValue = function () {\n  if (isLocalStorageAvailable()) {\n    if (this.options.autosave == undefined || this.options.autosave.uniqueId == undefined || this.options.autosave.uniqueId == '') {\n      console.log('EasyMDE: You must set a uniqueId to clear the autosave value');\n      return;\n    }\n\n    localStorage.removeItem('smde_' + this.options.autosave.uniqueId);\n  } else {\n    console.log('EasyMDE: localStorage not available, cannot autosave');\n  }\n};\n/**\n * Open the browse-file window to upload an image to a server.\n * @param [onSuccess] {function} see EasyMDE.prototype.uploadImage\n * @param [onError] {function} see EasyMDE.prototype.uploadImage\n */\n\n\nEasyMDE.prototype.openBrowseFileWindow = function (onSuccess, onError) {\n  var self = this;\n  var imageInput = this.gui.toolbar.getElementsByClassName('imageInput')[0];\n  imageInput.click(); //dispatchEvent(new MouseEvent('click'));  // replaced with click() for IE11 compatibility.\n\n  function onChange(event) {\n    if (self.options.imageUploadFunction) {\n      self.uploadImagesUsingCustomFunction(self.options.imageUploadFunction, event.target.files);\n    } else {\n      self.uploadImages(event.target.files, onSuccess, onError);\n    }\n\n    imageInput.removeEventListener('change', onChange);\n  }\n\n  imageInput.addEventListener('change', onChange);\n};\n/**\n * Upload an image to the server.\n *\n * @param file {File} The image to upload, as a HTML5 File object (https://developer.mozilla.org/en-US/docs/Web/API/File)\n * @param [onSuccess] {function} A callback function to execute after the image has been successfully uploaded, with one parameter:\n * - url (string): The URL of the uploaded image.\n * @param [onError] {function} A callback function to execute when the image upload fails, with one parameter:\n * - error (string): the detailed error to display to the user (based on messages from options.errorMessages).\n */\n\n\nEasyMDE.prototype.uploadImage = function (file, onSuccess, onError) {\n  var self = this;\n\n  onSuccess = onSuccess || function onSuccess(imageUrl) {\n    afterImageUploaded(self, imageUrl);\n  };\n\n  function onErrorSup(errorMessage) {\n    // show error on status bar and reset after 10000ms\n    self.updateStatusBar('upload-image', errorMessage);\n    setTimeout(function () {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n    }, 10000); // run custom error handler\n\n    if (onError && typeof onError === 'function') {\n      onError(errorMessage);\n    } // run error handler from options, this alerts the message.\n\n\n    self.options.errorCallback(errorMessage);\n  }\n\n  function fillErrorMessage(errorMessage) {\n    var units = self.options.imageTexts.sizeUnits.split(',');\n    return errorMessage.replace('#image_name#', file.name).replace('#image_size#', humanFileSize(file.size, units)).replace('#image_max_size#', humanFileSize(self.options.imageMaxSize, units));\n  }\n\n  if (file.size > this.options.imageMaxSize) {\n    onErrorSup(fillErrorMessage(this.options.errorMessages.fileTooLarge));\n    return;\n  }\n\n  var formData = new FormData();\n  formData.append('image', file); // insert CSRF token if provided in config.\n\n  if (self.options.imageCSRFToken) {\n    formData.append('csrfmiddlewaretoken', self.options.imageCSRFToken);\n  }\n\n  var request = new XMLHttpRequest();\n\n  request.upload.onprogress = function (event) {\n    if (event.lengthComputable) {\n      var progress = '' + Math.round(event.loaded * 100 / event.total);\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbProgress.replace('#file_name#', file.name).replace('#progress#', progress));\n    }\n  };\n\n  request.open('POST', this.options.imageUploadEndpoint);\n\n  request.onload = function () {\n    try {\n      var response = JSON.parse(this.responseText);\n    } catch (error) {\n      console.error('EasyMDE: The server did not return a valid json.');\n      onErrorSup(fillErrorMessage(self.options.errorMessages.importError));\n      return;\n    }\n\n    if (this.status === 200 && response && !response.error && response.data && response.data.filePath) {\n      onSuccess(window.location.origin + '/' + response.data.filePath);\n    } else {\n      if (response.error && response.error in self.options.errorMessages) {\n        // preformatted error message\n        onErrorSup(fillErrorMessage(self.options.errorMessages[response.error]));\n      } else if (response.error) {\n        // server side generated error message\n        onErrorSup(fillErrorMessage(response.error));\n      } else {\n        //unknown error\n        console.error('EasyMDE: Received an unexpected response after uploading the image.' + this.status + ' (' + this.statusText + ')');\n        onErrorSup(fillErrorMessage(self.options.errorMessages.importError));\n      }\n    }\n  };\n\n  request.onerror = function (event) {\n    console.error('EasyMDE: An unexpected error occurred when trying to upload the image.' + event.target.status + ' (' + event.target.statusText + ')');\n    onErrorSup(self.options.errorMessages.importError);\n  };\n\n  request.send(formData);\n};\n/**\n * Upload an image to the server using a custom upload function.\n *\n * @param imageUploadFunction {Function} The custom function to upload the image passed in options\n * @param file {File} The image to upload, as a HTML5 File object (https://developer.mozilla.org/en-US/docs/Web/API/File).\n */\n\n\nEasyMDE.prototype.uploadImageUsingCustomFunction = function (imageUploadFunction, file) {\n  var self = this;\n\n  function onSuccess(imageUrl) {\n    afterImageUploaded(self, imageUrl);\n  }\n\n  function onError(errorMessage) {\n    var filledErrorMessage = fillErrorMessage(errorMessage); // show error on status bar and reset after 10000ms\n\n    self.updateStatusBar('upload-image', filledErrorMessage);\n    setTimeout(function () {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n    }, 10000); // run error handler from options, this alerts the message.\n\n    self.options.errorCallback(filledErrorMessage);\n  }\n\n  function fillErrorMessage(errorMessage) {\n    var units = self.options.imageTexts.sizeUnits.split(',');\n    return errorMessage.replace('#image_name#', file.name).replace('#image_size#', humanFileSize(file.size, units)).replace('#image_max_size#', humanFileSize(self.options.imageMaxSize, units));\n  }\n\n  imageUploadFunction(file, onSuccess, onError);\n};\n\nEasyMDE.prototype.createSideBySide = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.nextSibling;\n\n  if (!preview || !/editor-preview-side/.test(preview.className)) {\n    preview = document.createElement('div');\n    preview.className = 'editor-preview-side';\n\n    if (this.options.previewClass) {\n      if (Array.isArray(this.options.previewClass)) {\n        for (var i = 0; i < this.options.previewClass.length; i++) {\n          preview.className += ' ' + this.options.previewClass[i];\n        }\n      } else if (typeof this.options.previewClass === 'string') {\n        preview.className += ' ' + this.options.previewClass;\n      }\n    }\n\n    wrapper.parentNode.insertBefore(preview, wrapper.nextSibling);\n  }\n\n  if (this.options.syncSideBySidePreviewScroll === false) return preview; // Syncs scroll  editor -> preview\n\n  var cScroll = false;\n  var pScroll = false;\n  cm.on('scroll', function (v) {\n    if (cScroll) {\n      cScroll = false;\n      return;\n    }\n\n    pScroll = true;\n    var height = v.getScrollInfo().height - v.getScrollInfo().clientHeight;\n    var ratio = parseFloat(v.getScrollInfo().top) / height;\n    var move = (preview.scrollHeight - preview.clientHeight) * ratio;\n    preview.scrollTop = move;\n  }); // Syncs scroll  preview -> editor\n\n  preview.onscroll = function () {\n    if (pScroll) {\n      pScroll = false;\n      return;\n    }\n\n    cScroll = true;\n    var height = preview.scrollHeight - preview.clientHeight;\n    var ratio = parseFloat(preview.scrollTop) / height;\n    var move = (cm.getScrollInfo().height - cm.getScrollInfo().clientHeight) * ratio;\n    cm.scrollTo(0, move);\n  };\n\n  return preview;\n};\n\nEasyMDE.prototype.createToolbar = function (items) {\n  items = items || this.options.toolbar;\n\n  if (!items || items.length === 0) {\n    return;\n  }\n\n  var i;\n\n  for (i = 0; i < items.length; i++) {\n    if (toolbarBuiltInButtons[items[i]] != undefined) {\n      items[i] = toolbarBuiltInButtons[items[i]];\n    }\n  }\n\n  var bar = document.createElement('div');\n  bar.className = 'editor-toolbar';\n  var self = this;\n  var toolbarData = {};\n  self.toolbar = items;\n\n  for (i = 0; i < items.length; i++) {\n    if (items[i].name == 'guide' && self.options.toolbarGuideIcon === false) continue;\n    if (self.options.hideIcons && self.options.hideIcons.indexOf(items[i].name) != -1) continue; // Fullscreen does not work well on mobile devices (even tablets)\n    // In the future, hopefully this can be resolved\n\n    if ((items[i].name == 'fullscreen' || items[i].name == 'side-by-side') && isMobile()) continue; // Don't include trailing separators\n\n    if (items[i] === '|') {\n      var nonSeparatorIconsFollow = false;\n\n      for (var x = i + 1; x < items.length; x++) {\n        if (items[x] !== '|' && (!self.options.hideIcons || self.options.hideIcons.indexOf(items[x].name) == -1)) {\n          nonSeparatorIconsFollow = true;\n        }\n      }\n\n      if (!nonSeparatorIconsFollow) continue;\n    } // Create the icon and append to the toolbar\n\n\n    (function (item) {\n      var el;\n\n      if (item === '|') {\n        el = createSep();\n      } else {\n        el = createToolbarButton(item, self.options.toolbarTips, self.options.shortcuts);\n      } // bind events, special for info\n\n\n      if (item.action) {\n        if (typeof item.action === 'function') {\n          el.onclick = function (e) {\n            e.preventDefault();\n            item.action(self);\n          };\n        } else if (typeof item.action === 'string') {\n          el.onclick = function (e) {\n            e.preventDefault();\n            window.open(item.action, '_blank');\n          };\n        }\n      }\n\n      toolbarData[item.name || item] = el;\n      bar.appendChild(el); // Create the input element (ie. <input type='file'>), used among\n      // with the 'import-image' icon to open the browse-file window.\n\n      if (item.name === 'upload-image') {\n        var imageInput = document.createElement('input');\n        imageInput.className = 'imageInput';\n        imageInput.type = 'file';\n        imageInput.multiple = true;\n        imageInput.name = 'image';\n        imageInput.accept = self.options.imageAccept;\n        imageInput.style.display = 'none';\n        imageInput.style.opacity = 0;\n        bar.appendChild(imageInput);\n      }\n    })(items[i]);\n  }\n\n  self.toolbarElements = toolbarData;\n  var cm = this.codemirror;\n  cm.on('cursorActivity', function () {\n    var stat = getState(cm);\n\n    for (var key in toolbarData) {\n      (function (key) {\n        var el = toolbarData[key];\n\n        if (stat[key]) {\n          el.className += ' active';\n        } else if (key != 'fullscreen' && key != 'side-by-side') {\n          el.className = el.className.replace(/\\s*active\\s*/g, '');\n        }\n      })(key);\n    }\n  });\n  var cmWrapper = cm.getWrapperElement();\n  cmWrapper.parentNode.insertBefore(bar, cmWrapper);\n  return bar;\n};\n\nEasyMDE.prototype.createStatusbar = function (status) {\n  // Initialize\n  status = status || this.options.status;\n  var options = this.options;\n  var cm = this.codemirror; // Make sure the status variable is valid\n\n  if (!status || status.length === 0) {\n    return;\n  } // Set up the built-in items\n\n\n  var items = [];\n  var i, onUpdate, defaultValue;\n\n  for (i = 0; i < status.length; i++) {\n    // Reset some values\n    onUpdate = undefined;\n    defaultValue = undefined; // Handle if custom or not\n\n    if (typeof status[i] === 'object') {\n      items.push({\n        className: status[i].className,\n        defaultValue: status[i].defaultValue,\n        onUpdate: status[i].onUpdate\n      });\n    } else {\n      var name = status[i];\n\n      if (name === 'words') {\n        defaultValue = function defaultValue(el) {\n          el.innerHTML = wordCount(cm.getValue());\n        };\n\n        onUpdate = function onUpdate(el) {\n          el.innerHTML = wordCount(cm.getValue());\n        };\n      } else if (name === 'lines') {\n        defaultValue = function defaultValue(el) {\n          el.innerHTML = cm.lineCount();\n        };\n\n        onUpdate = function onUpdate(el) {\n          el.innerHTML = cm.lineCount();\n        };\n      } else if (name === 'cursor') {\n        defaultValue = function defaultValue(el) {\n          el.innerHTML = '0:0';\n        };\n\n        onUpdate = function onUpdate(el) {\n          var pos = cm.getCursor();\n          el.innerHTML = pos.line + ':' + pos.ch;\n        };\n      } else if (name === 'autosave') {\n        defaultValue = function defaultValue(el) {\n          if (options.autosave != undefined && options.autosave.enabled === true) {\n            el.setAttribute('id', 'autosaved');\n          }\n        };\n      } else if (name === 'upload-image') {\n        defaultValue = function defaultValue(el) {\n          el.innerHTML = options.imageTexts.sbInit;\n        };\n      }\n\n      items.push({\n        className: name,\n        defaultValue: defaultValue,\n        onUpdate: onUpdate\n      });\n    }\n  } // Create element for the status bar\n\n\n  var bar = document.createElement('div');\n  bar.className = 'editor-statusbar'; // Create a new span for each item\n\n  for (i = 0; i < items.length; i++) {\n    // Store in temporary variable\n    var item = items[i]; // Create span element\n\n    var el = document.createElement('span');\n    el.className = item.className; // Ensure the defaultValue is a function\n\n    if (typeof item.defaultValue === 'function') {\n      item.defaultValue(el);\n    } // Ensure the onUpdate is a function\n\n\n    if (typeof item.onUpdate === 'function') {\n      // Create a closure around the span of the current action, then execute the onUpdate handler\n      this.codemirror.on('update', function (el, item) {\n        return function () {\n          item.onUpdate(el);\n        };\n      }(el, item));\n    } // Append the item to the status bar\n\n\n    bar.appendChild(el);\n  } // Insert the status bar into the DOM\n\n\n  var cmWrapper = this.codemirror.getWrapperElement();\n  cmWrapper.parentNode.insertBefore(bar, cmWrapper.nextSibling);\n  return bar;\n};\n/**\n * Get or set the text content.\n */\n\n\nEasyMDE.prototype.value = function (val) {\n  var cm = this.codemirror;\n\n  if (val === undefined) {\n    return cm.getValue();\n  } else {\n    cm.getDoc().setValue(val);\n\n    if (this.isPreviewActive()) {\n      var wrapper = cm.getWrapperElement();\n      var preview = wrapper.lastChild;\n      preview.innerHTML = this.options.previewRender(val, preview);\n    }\n\n    return this;\n  }\n};\n/**\n * Bind static methods for exports.\n */\n\n\nEasyMDE.toggleBold = toggleBold;\nEasyMDE.toggleItalic = toggleItalic;\nEasyMDE.toggleStrikethrough = toggleStrikethrough;\nEasyMDE.toggleBlockquote = toggleBlockquote;\nEasyMDE.toggleHeadingSmaller = toggleHeadingSmaller;\nEasyMDE.toggleHeadingBigger = toggleHeadingBigger;\nEasyMDE.toggleHeading1 = toggleHeading1;\nEasyMDE.toggleHeading2 = toggleHeading2;\nEasyMDE.toggleHeading3 = toggleHeading3;\nEasyMDE.toggleCodeBlock = toggleCodeBlock;\nEasyMDE.toggleUnorderedList = toggleUnorderedList;\nEasyMDE.toggleOrderedList = toggleOrderedList;\nEasyMDE.cleanBlock = cleanBlock;\nEasyMDE.drawLink = drawLink;\nEasyMDE.drawImage = drawImage;\nEasyMDE.drawTable = drawTable;\nEasyMDE.drawHorizontalRule = drawHorizontalRule;\nEasyMDE.undo = undo;\nEasyMDE.redo = redo;\nEasyMDE.togglePreview = togglePreview;\nEasyMDE.toggleSideBySide = toggleSideBySide;\nEasyMDE.toggleFullScreen = toggleFullScreen;\n/**\n * Bind instance methods for exports.\n */\n\nEasyMDE.prototype.toggleBold = function () {\n  toggleBold(this);\n};\n\nEasyMDE.prototype.toggleItalic = function () {\n  toggleItalic(this);\n};\n\nEasyMDE.prototype.toggleStrikethrough = function () {\n  toggleStrikethrough(this);\n};\n\nEasyMDE.prototype.toggleBlockquote = function () {\n  toggleBlockquote(this);\n};\n\nEasyMDE.prototype.toggleHeadingSmaller = function () {\n  toggleHeadingSmaller(this);\n};\n\nEasyMDE.prototype.toggleHeadingBigger = function () {\n  toggleHeadingBigger(this);\n};\n\nEasyMDE.prototype.toggleHeading1 = function () {\n  toggleHeading1(this);\n};\n\nEasyMDE.prototype.toggleHeading2 = function () {\n  toggleHeading2(this);\n};\n\nEasyMDE.prototype.toggleHeading3 = function () {\n  toggleHeading3(this);\n};\n\nEasyMDE.prototype.toggleCodeBlock = function () {\n  toggleCodeBlock(this);\n};\n\nEasyMDE.prototype.toggleUnorderedList = function () {\n  toggleUnorderedList(this);\n};\n\nEasyMDE.prototype.toggleOrderedList = function () {\n  toggleOrderedList(this);\n};\n\nEasyMDE.prototype.cleanBlock = function () {\n  cleanBlock(this);\n};\n\nEasyMDE.prototype.drawLink = function () {\n  drawLink(this);\n};\n\nEasyMDE.prototype.drawImage = function () {\n  drawImage(this);\n};\n\nEasyMDE.prototype.drawTable = function () {\n  drawTable(this);\n};\n\nEasyMDE.prototype.drawHorizontalRule = function () {\n  drawHorizontalRule(this);\n};\n\nEasyMDE.prototype.undo = function () {\n  undo(this);\n};\n\nEasyMDE.prototype.redo = function () {\n  redo(this);\n};\n\nEasyMDE.prototype.togglePreview = function () {\n  togglePreview(this);\n};\n\nEasyMDE.prototype.toggleSideBySide = function () {\n  toggleSideBySide(this);\n};\n\nEasyMDE.prototype.toggleFullScreen = function () {\n  toggleFullScreen(this);\n};\n\nEasyMDE.prototype.isPreviewActive = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.lastChild;\n  return /editor-preview-active/.test(preview.className);\n};\n\nEasyMDE.prototype.isSideBySideActive = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.nextSibling;\n  return /editor-preview-active-side/.test(preview.className);\n};\n\nEasyMDE.prototype.isFullscreenActive = function () {\n  var cm = this.codemirror;\n  return cm.getOption('fullScreen');\n};\n\nEasyMDE.prototype.getState = function () {\n  var cm = this.codemirror;\n  return getState(cm);\n};\n\nEasyMDE.prototype.toTextArea = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n\n  if (wrapper.parentNode) {\n    if (this.gui.toolbar) {\n      wrapper.parentNode.removeChild(this.gui.toolbar);\n    }\n\n    if (this.gui.statusbar) {\n      wrapper.parentNode.removeChild(this.gui.statusbar);\n    }\n\n    if (this.gui.sideBySide) {\n      wrapper.parentNode.removeChild(this.gui.sideBySide);\n    }\n  }\n\n  cm.toTextArea();\n\n  if (this.autosaveTimeoutId) {\n    clearTimeout(this.autosaveTimeoutId);\n    this.autosaveTimeoutId = undefined;\n    this.clearAutosavedValue();\n  }\n};\n\nmodule.exports = EasyMDE;","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  var listRE = /^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]\\s|[*+-]\\s|(\\d+)([.)]))(\\s*)/,\n      emptyListRE = /^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]|[*+-]|(\\d+)[.)])(\\s*)$/,\n      unorderedListRE = /[*+-]\\s/;\n\n  CodeMirror.commands.newlineAndIndentContinueMarkdownList = function (cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    var ranges = cm.listSelections(),\n        replacements = [];\n\n    for (var i = 0; i < ranges.length; i++) {\n      var pos = ranges[i].head; // If we're not in Markdown mode, fall back to normal newlineAndIndent\n\n      var eolState = cm.getStateAfter(pos.line);\n      var inner = CodeMirror.innerMode(cm.getMode(), eolState);\n\n      if (inner.mode.name !== \"markdown\") {\n        cm.execCommand(\"newlineAndIndent\");\n        return;\n      } else {\n        eolState = inner.state;\n      }\n\n      var inList = eolState.list !== false;\n      var inQuote = eolState.quote !== 0;\n      var line = cm.getLine(pos.line),\n          match = listRE.exec(line);\n      var cursorBeforeBullet = /^\\s*$/.test(line.slice(0, pos.ch));\n\n      if (!ranges[i].empty() || !inList && !inQuote || !match || cursorBeforeBullet) {\n        cm.execCommand(\"newlineAndIndent\");\n        return;\n      }\n\n      if (emptyListRE.test(line)) {\n        if (!/>\\s*$/.test(line)) cm.replaceRange(\"\", {\n          line: pos.line,\n          ch: 0\n        }, {\n          line: pos.line,\n          ch: pos.ch + 1\n        });\n        replacements[i] = \"\\n\";\n      } else {\n        var indent = match[1],\n            after = match[5];\n        var numbered = !(unorderedListRE.test(match[2]) || match[2].indexOf(\">\") >= 0);\n        var bullet = numbered ? parseInt(match[3], 10) + 1 + match[4] : match[2].replace(\"x\", \" \");\n        replacements[i] = \"\\n\" + indent + bullet + after;\n        if (numbered) incrementRemainingMarkdownListNumbers(cm, pos);\n      }\n    }\n\n    cm.replaceSelections(replacements);\n  }; // Auto-updating Markdown list numbers when a new item is added to the\n  // middle of a list\n\n\n  function incrementRemainingMarkdownListNumbers(cm, pos) {\n    var startLine = pos.line,\n        lookAhead = 0,\n        skipCount = 0;\n    var startItem = listRE.exec(cm.getLine(startLine)),\n        startIndent = startItem[1];\n\n    do {\n      lookAhead += 1;\n      var nextLineNumber = startLine + lookAhead;\n      var nextLine = cm.getLine(nextLineNumber),\n          nextItem = listRE.exec(nextLine);\n\n      if (nextItem) {\n        var nextIndent = nextItem[1];\n        var newNumber = parseInt(startItem[3], 10) + lookAhead - skipCount;\n        var nextNumber = parseInt(nextItem[3], 10),\n            itemNumber = nextNumber;\n\n        if (startIndent === nextIndent && !isNaN(nextNumber)) {\n          if (newNumber === nextNumber) itemNumber = nextNumber + 1;\n          if (newNumber > nextNumber) itemNumber = newNumber + 1;\n          cm.replaceRange(nextLine.replace(listRE, nextIndent + itemNumber + nextItem[4] + nextItem[5]), {\n            line: nextLineNumber,\n            ch: 0\n          }, {\n            line: nextLineNumber,\n            ch: nextLine.length\n          });\n        } else {\n          if (startIndent.length > nextIndent.length) return; // This doesn't run if the next line immediatley indents, as it is\n          // not clear of the users intention (new indented item or same level)\n\n          if (startIndent.length < nextIndent.length && lookAhead === 1) return;\n          skipCount += 1;\n        }\n      }\n    } while (nextItem);\n  }\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\nvar CodeMirror = require('codemirror');\n\nCodeMirror.commands.tabAndIndentMarkdownList = function (cm) {\n  var ranges = cm.listSelections();\n  var pos = ranges[0].head;\n  var eolState = cm.getStateAfter(pos.line);\n  var inList = eolState.list !== false;\n\n  if (inList) {\n    cm.execCommand('indentMore');\n    return;\n  }\n\n  if (cm.options.indentWithTabs) {\n    cm.execCommand('insertTab');\n  } else {\n    var spaces = Array(cm.options.tabSize + 1).join(' ');\n    cm.replaceSelection(spaces);\n  }\n};\n\nCodeMirror.commands.shiftTabAndUnindentMarkdownList = function (cm) {\n  var ranges = cm.listSelections();\n  var pos = ranges[0].head;\n  var eolState = cm.getStateAfter(pos.line);\n  var inList = eolState.list !== false;\n\n  if (inList) {\n    cm.execCommand('indentLess');\n    return;\n  }\n\n  if (cm.options.indentWithTabs) {\n    cm.execCommand('insertTab');\n  } else {\n    var spaces = Array(cm.options.tabSize + 1).join(' ');\n    cm.replaceSelection(spaces);\n  }\n};","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"fullScreen\", false, function (cm, val, old) {\n    if (old == CodeMirror.Init) old = false;\n    if (!old == !val) return;\n    if (val) setFullscreen(cm);else setNormal(cm);\n  });\n\n  function setFullscreen(cm) {\n    var wrap = cm.getWrapperElement();\n    cm.state.fullScreenRestore = {\n      scrollTop: window.pageYOffset,\n      scrollLeft: window.pageXOffset,\n      width: wrap.style.width,\n      height: wrap.style.height\n    };\n    wrap.style.width = \"\";\n    wrap.style.height = \"auto\";\n    wrap.className += \" CodeMirror-fullscreen\";\n    document.documentElement.style.overflow = \"hidden\";\n    cm.refresh();\n  }\n\n  function setNormal(cm) {\n    var wrap = cm.getWrapperElement();\n    wrap.className = wrap.className.replace(/\\s*CodeMirror-fullscreen\\b/, \"\");\n    document.documentElement.style.overflow = \"\";\n    var info = cm.state.fullScreenRestore;\n    wrap.style.width = info.width;\n    wrap.style.height = info.height;\n    window.scrollTo(info.scrollLeft, info.scrollTop);\n    cm.refresh();\n  }\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.modeInfo = [{\n    name: \"APL\",\n    mime: \"text/apl\",\n    mode: \"apl\",\n    ext: [\"dyalog\", \"apl\"]\n  }, {\n    name: \"PGP\",\n    mimes: [\"application/pgp\", \"application/pgp-encrypted\", \"application/pgp-keys\", \"application/pgp-signature\"],\n    mode: \"asciiarmor\",\n    ext: [\"asc\", \"pgp\", \"sig\"]\n  }, {\n    name: \"ASN.1\",\n    mime: \"text/x-ttcn-asn\",\n    mode: \"asn.1\",\n    ext: [\"asn\", \"asn1\"]\n  }, {\n    name: \"Asterisk\",\n    mime: \"text/x-asterisk\",\n    mode: \"asterisk\",\n    file: /^extensions\\.conf$/i\n  }, {\n    name: \"Brainfuck\",\n    mime: \"text/x-brainfuck\",\n    mode: \"brainfuck\",\n    ext: [\"b\", \"bf\"]\n  }, {\n    name: \"C\",\n    mime: \"text/x-csrc\",\n    mode: \"clike\",\n    ext: [\"c\", \"h\", \"ino\"]\n  }, {\n    name: \"C++\",\n    mime: \"text/x-c++src\",\n    mode: \"clike\",\n    ext: [\"cpp\", \"c++\", \"cc\", \"cxx\", \"hpp\", \"h++\", \"hh\", \"hxx\"],\n    alias: [\"cpp\"]\n  }, {\n    name: \"Cobol\",\n    mime: \"text/x-cobol\",\n    mode: \"cobol\",\n    ext: [\"cob\", \"cpy\"]\n  }, {\n    name: \"C#\",\n    mime: \"text/x-csharp\",\n    mode: \"clike\",\n    ext: [\"cs\"],\n    alias: [\"csharp\", \"cs\"]\n  }, {\n    name: \"Clojure\",\n    mime: \"text/x-clojure\",\n    mode: \"clojure\",\n    ext: [\"clj\", \"cljc\", \"cljx\"]\n  }, {\n    name: \"ClojureScript\",\n    mime: \"text/x-clojurescript\",\n    mode: \"clojure\",\n    ext: [\"cljs\"]\n  }, {\n    name: \"Closure Stylesheets (GSS)\",\n    mime: \"text/x-gss\",\n    mode: \"css\",\n    ext: [\"gss\"]\n  }, {\n    name: \"CMake\",\n    mime: \"text/x-cmake\",\n    mode: \"cmake\",\n    ext: [\"cmake\", \"cmake.in\"],\n    file: /^CMakeLists.txt$/\n  }, {\n    name: \"CoffeeScript\",\n    mimes: [\"application/vnd.coffeescript\", \"text/coffeescript\", \"text/x-coffeescript\"],\n    mode: \"coffeescript\",\n    ext: [\"coffee\"],\n    alias: [\"coffee\", \"coffee-script\"]\n  }, {\n    name: \"Common Lisp\",\n    mime: \"text/x-common-lisp\",\n    mode: \"commonlisp\",\n    ext: [\"cl\", \"lisp\", \"el\"],\n    alias: [\"lisp\"]\n  }, {\n    name: \"Cypher\",\n    mime: \"application/x-cypher-query\",\n    mode: \"cypher\",\n    ext: [\"cyp\", \"cypher\"]\n  }, {\n    name: \"Cython\",\n    mime: \"text/x-cython\",\n    mode: \"python\",\n    ext: [\"pyx\", \"pxd\", \"pxi\"]\n  }, {\n    name: \"Crystal\",\n    mime: \"text/x-crystal\",\n    mode: \"crystal\",\n    ext: [\"cr\"]\n  }, {\n    name: \"CSS\",\n    mime: \"text/css\",\n    mode: \"css\",\n    ext: [\"css\"]\n  }, {\n    name: \"CQL\",\n    mime: \"text/x-cassandra\",\n    mode: \"sql\",\n    ext: [\"cql\"]\n  }, {\n    name: \"D\",\n    mime: \"text/x-d\",\n    mode: \"d\",\n    ext: [\"d\"]\n  }, {\n    name: \"Dart\",\n    mimes: [\"application/dart\", \"text/x-dart\"],\n    mode: \"dart\",\n    ext: [\"dart\"]\n  }, {\n    name: \"diff\",\n    mime: \"text/x-diff\",\n    mode: \"diff\",\n    ext: [\"diff\", \"patch\"]\n  }, {\n    name: \"Django\",\n    mime: \"text/x-django\",\n    mode: \"django\"\n  }, {\n    name: \"Dockerfile\",\n    mime: \"text/x-dockerfile\",\n    mode: \"dockerfile\",\n    file: /^Dockerfile$/\n  }, {\n    name: \"DTD\",\n    mime: \"application/xml-dtd\",\n    mode: \"dtd\",\n    ext: [\"dtd\"]\n  }, {\n    name: \"Dylan\",\n    mime: \"text/x-dylan\",\n    mode: \"dylan\",\n    ext: [\"dylan\", \"dyl\", \"intr\"]\n  }, {\n    name: \"EBNF\",\n    mime: \"text/x-ebnf\",\n    mode: \"ebnf\"\n  }, {\n    name: \"ECL\",\n    mime: \"text/x-ecl\",\n    mode: \"ecl\",\n    ext: [\"ecl\"]\n  }, {\n    name: \"edn\",\n    mime: \"application/edn\",\n    mode: \"clojure\",\n    ext: [\"edn\"]\n  }, {\n    name: \"Eiffel\",\n    mime: \"text/x-eiffel\",\n    mode: \"eiffel\",\n    ext: [\"e\"]\n  }, {\n    name: \"Elm\",\n    mime: \"text/x-elm\",\n    mode: \"elm\",\n    ext: [\"elm\"]\n  }, {\n    name: \"Embedded Javascript\",\n    mime: \"application/x-ejs\",\n    mode: \"htmlembedded\",\n    ext: [\"ejs\"]\n  }, {\n    name: \"Embedded Ruby\",\n    mime: \"application/x-erb\",\n    mode: \"htmlembedded\",\n    ext: [\"erb\"]\n  }, {\n    name: \"Erlang\",\n    mime: \"text/x-erlang\",\n    mode: \"erlang\",\n    ext: [\"erl\"]\n  }, {\n    name: \"Esper\",\n    mime: \"text/x-esper\",\n    mode: \"sql\"\n  }, {\n    name: \"Factor\",\n    mime: \"text/x-factor\",\n    mode: \"factor\",\n    ext: [\"factor\"]\n  }, {\n    name: \"FCL\",\n    mime: \"text/x-fcl\",\n    mode: \"fcl\"\n  }, {\n    name: \"Forth\",\n    mime: \"text/x-forth\",\n    mode: \"forth\",\n    ext: [\"forth\", \"fth\", \"4th\"]\n  }, {\n    name: \"Fortran\",\n    mime: \"text/x-fortran\",\n    mode: \"fortran\",\n    ext: [\"f\", \"for\", \"f77\", \"f90\", \"f95\"]\n  }, {\n    name: \"F#\",\n    mime: \"text/x-fsharp\",\n    mode: \"mllike\",\n    ext: [\"fs\"],\n    alias: [\"fsharp\"]\n  }, {\n    name: \"Gas\",\n    mime: \"text/x-gas\",\n    mode: \"gas\",\n    ext: [\"s\"]\n  }, {\n    name: \"Gherkin\",\n    mime: \"text/x-feature\",\n    mode: \"gherkin\",\n    ext: [\"feature\"]\n  }, {\n    name: \"GitHub Flavored Markdown\",\n    mime: \"text/x-gfm\",\n    mode: \"gfm\",\n    file: /^(readme|contributing|history).md$/i\n  }, {\n    name: \"Go\",\n    mime: \"text/x-go\",\n    mode: \"go\",\n    ext: [\"go\"]\n  }, {\n    name: \"Groovy\",\n    mime: \"text/x-groovy\",\n    mode: \"groovy\",\n    ext: [\"groovy\", \"gradle\"],\n    file: /^Jenkinsfile$/\n  }, {\n    name: \"HAML\",\n    mime: \"text/x-haml\",\n    mode: \"haml\",\n    ext: [\"haml\"]\n  }, {\n    name: \"Haskell\",\n    mime: \"text/x-haskell\",\n    mode: \"haskell\",\n    ext: [\"hs\"]\n  }, {\n    name: \"Haskell (Literate)\",\n    mime: \"text/x-literate-haskell\",\n    mode: \"haskell-literate\",\n    ext: [\"lhs\"]\n  }, {\n    name: \"Haxe\",\n    mime: \"text/x-haxe\",\n    mode: \"haxe\",\n    ext: [\"hx\"]\n  }, {\n    name: \"HXML\",\n    mime: \"text/x-hxml\",\n    mode: \"haxe\",\n    ext: [\"hxml\"]\n  }, {\n    name: \"ASP.NET\",\n    mime: \"application/x-aspx\",\n    mode: \"htmlembedded\",\n    ext: [\"aspx\"],\n    alias: [\"asp\", \"aspx\"]\n  }, {\n    name: \"HTML\",\n    mime: \"text/html\",\n    mode: \"htmlmixed\",\n    ext: [\"html\", \"htm\", \"handlebars\", \"hbs\"],\n    alias: [\"xhtml\"]\n  }, {\n    name: \"HTTP\",\n    mime: \"message/http\",\n    mode: \"http\"\n  }, {\n    name: \"IDL\",\n    mime: \"text/x-idl\",\n    mode: \"idl\",\n    ext: [\"pro\"]\n  }, {\n    name: \"Pug\",\n    mime: \"text/x-pug\",\n    mode: \"pug\",\n    ext: [\"jade\", \"pug\"],\n    alias: [\"jade\"]\n  }, {\n    name: \"Java\",\n    mime: \"text/x-java\",\n    mode: \"clike\",\n    ext: [\"java\"]\n  }, {\n    name: \"Java Server Pages\",\n    mime: \"application/x-jsp\",\n    mode: \"htmlembedded\",\n    ext: [\"jsp\"],\n    alias: [\"jsp\"]\n  }, {\n    name: \"JavaScript\",\n    mimes: [\"text/javascript\", \"text/ecmascript\", \"application/javascript\", \"application/x-javascript\", \"application/ecmascript\"],\n    mode: \"javascript\",\n    ext: [\"js\"],\n    alias: [\"ecmascript\", \"js\", \"node\"]\n  }, {\n    name: \"JSON\",\n    mimes: [\"application/json\", \"application/x-json\"],\n    mode: \"javascript\",\n    ext: [\"json\", \"map\"],\n    alias: [\"json5\"]\n  }, {\n    name: \"JSON-LD\",\n    mime: \"application/ld+json\",\n    mode: \"javascript\",\n    ext: [\"jsonld\"],\n    alias: [\"jsonld\"]\n  }, {\n    name: \"JSX\",\n    mime: \"text/jsx\",\n    mode: \"jsx\",\n    ext: [\"jsx\"]\n  }, {\n    name: \"Jinja2\",\n    mime: \"text/jinja2\",\n    mode: \"jinja2\",\n    ext: [\"j2\", \"jinja\", \"jinja2\"]\n  }, {\n    name: \"Julia\",\n    mime: \"text/x-julia\",\n    mode: \"julia\",\n    ext: [\"jl\"]\n  }, {\n    name: \"Kotlin\",\n    mime: \"text/x-kotlin\",\n    mode: \"clike\",\n    ext: [\"kt\"]\n  }, {\n    name: \"LESS\",\n    mime: \"text/x-less\",\n    mode: \"css\",\n    ext: [\"less\"]\n  }, {\n    name: \"LiveScript\",\n    mime: \"text/x-livescript\",\n    mode: \"livescript\",\n    ext: [\"ls\"],\n    alias: [\"ls\"]\n  }, {\n    name: \"Lua\",\n    mime: \"text/x-lua\",\n    mode: \"lua\",\n    ext: [\"lua\"]\n  }, {\n    name: \"Markdown\",\n    mime: \"text/x-markdown\",\n    mode: \"markdown\",\n    ext: [\"markdown\", \"md\", \"mkd\"]\n  }, {\n    name: \"mIRC\",\n    mime: \"text/mirc\",\n    mode: \"mirc\"\n  }, {\n    name: \"MariaDB SQL\",\n    mime: \"text/x-mariadb\",\n    mode: \"sql\"\n  }, {\n    name: \"Mathematica\",\n    mime: \"text/x-mathematica\",\n    mode: \"mathematica\",\n    ext: [\"m\", \"nb\", \"wl\", \"wls\"]\n  }, {\n    name: \"Modelica\",\n    mime: \"text/x-modelica\",\n    mode: \"modelica\",\n    ext: [\"mo\"]\n  }, {\n    name: \"MUMPS\",\n    mime: \"text/x-mumps\",\n    mode: \"mumps\",\n    ext: [\"mps\"]\n  }, {\n    name: \"MS SQL\",\n    mime: \"text/x-mssql\",\n    mode: \"sql\"\n  }, {\n    name: \"mbox\",\n    mime: \"application/mbox\",\n    mode: \"mbox\",\n    ext: [\"mbox\"]\n  }, {\n    name: \"MySQL\",\n    mime: \"text/x-mysql\",\n    mode: \"sql\"\n  }, {\n    name: \"Nginx\",\n    mime: \"text/x-nginx-conf\",\n    mode: \"nginx\",\n    file: /nginx.*\\.conf$/i\n  }, {\n    name: \"NSIS\",\n    mime: \"text/x-nsis\",\n    mode: \"nsis\",\n    ext: [\"nsh\", \"nsi\"]\n  }, {\n    name: \"NTriples\",\n    mimes: [\"application/n-triples\", \"application/n-quads\", \"text/n-triples\"],\n    mode: \"ntriples\",\n    ext: [\"nt\", \"nq\"]\n  }, {\n    name: \"Objective-C\",\n    mime: \"text/x-objectivec\",\n    mode: \"clike\",\n    ext: [\"m\"],\n    alias: [\"objective-c\", \"objc\"]\n  }, {\n    name: \"Objective-C++\",\n    mime: \"text/x-objectivec++\",\n    mode: \"clike\",\n    ext: [\"mm\"],\n    alias: [\"objective-c++\", \"objc++\"]\n  }, {\n    name: \"OCaml\",\n    mime: \"text/x-ocaml\",\n    mode: \"mllike\",\n    ext: [\"ml\", \"mli\", \"mll\", \"mly\"]\n  }, {\n    name: \"Octave\",\n    mime: \"text/x-octave\",\n    mode: \"octave\",\n    ext: [\"m\"]\n  }, {\n    name: \"Oz\",\n    mime: \"text/x-oz\",\n    mode: \"oz\",\n    ext: [\"oz\"]\n  }, {\n    name: \"Pascal\",\n    mime: \"text/x-pascal\",\n    mode: \"pascal\",\n    ext: [\"p\", \"pas\"]\n  }, {\n    name: \"PEG.js\",\n    mime: \"null\",\n    mode: \"pegjs\",\n    ext: [\"jsonld\"]\n  }, {\n    name: \"Perl\",\n    mime: \"text/x-perl\",\n    mode: \"perl\",\n    ext: [\"pl\", \"pm\"]\n  }, {\n    name: \"PHP\",\n    mimes: [\"text/x-php\", \"application/x-httpd-php\", \"application/x-httpd-php-open\"],\n    mode: \"php\",\n    ext: [\"php\", \"php3\", \"php4\", \"php5\", \"php7\", \"phtml\"]\n  }, {\n    name: \"Pig\",\n    mime: \"text/x-pig\",\n    mode: \"pig\",\n    ext: [\"pig\"]\n  }, {\n    name: \"Plain Text\",\n    mime: \"text/plain\",\n    mode: \"null\",\n    ext: [\"txt\", \"text\", \"conf\", \"def\", \"list\", \"log\"]\n  }, {\n    name: \"PLSQL\",\n    mime: \"text/x-plsql\",\n    mode: \"sql\",\n    ext: [\"pls\"]\n  }, {\n    name: \"PostgreSQL\",\n    mime: \"text/x-pgsql\",\n    mode: \"sql\"\n  }, {\n    name: \"PowerShell\",\n    mime: \"application/x-powershell\",\n    mode: \"powershell\",\n    ext: [\"ps1\", \"psd1\", \"psm1\"]\n  }, {\n    name: \"Properties files\",\n    mime: \"text/x-properties\",\n    mode: \"properties\",\n    ext: [\"properties\", \"ini\", \"in\"],\n    alias: [\"ini\", \"properties\"]\n  }, {\n    name: \"ProtoBuf\",\n    mime: \"text/x-protobuf\",\n    mode: \"protobuf\",\n    ext: [\"proto\"]\n  }, {\n    name: \"Python\",\n    mime: \"text/x-python\",\n    mode: \"python\",\n    ext: [\"BUILD\", \"bzl\", \"py\", \"pyw\"],\n    file: /^(BUCK|BUILD)$/\n  }, {\n    name: \"Puppet\",\n    mime: \"text/x-puppet\",\n    mode: \"puppet\",\n    ext: [\"pp\"]\n  }, {\n    name: \"Q\",\n    mime: \"text/x-q\",\n    mode: \"q\",\n    ext: [\"q\"]\n  }, {\n    name: \"R\",\n    mime: \"text/x-rsrc\",\n    mode: \"r\",\n    ext: [\"r\", \"R\"],\n    alias: [\"rscript\"]\n  }, {\n    name: \"reStructuredText\",\n    mime: \"text/x-rst\",\n    mode: \"rst\",\n    ext: [\"rst\"],\n    alias: [\"rst\"]\n  }, {\n    name: \"RPM Changes\",\n    mime: \"text/x-rpm-changes\",\n    mode: \"rpm\"\n  }, {\n    name: \"RPM Spec\",\n    mime: \"text/x-rpm-spec\",\n    mode: \"rpm\",\n    ext: [\"spec\"]\n  }, {\n    name: \"Ruby\",\n    mime: \"text/x-ruby\",\n    mode: \"ruby\",\n    ext: [\"rb\"],\n    alias: [\"jruby\", \"macruby\", \"rake\", \"rb\", \"rbx\"]\n  }, {\n    name: \"Rust\",\n    mime: \"text/x-rustsrc\",\n    mode: \"rust\",\n    ext: [\"rs\"]\n  }, {\n    name: \"SAS\",\n    mime: \"text/x-sas\",\n    mode: \"sas\",\n    ext: [\"sas\"]\n  }, {\n    name: \"Sass\",\n    mime: \"text/x-sass\",\n    mode: \"sass\",\n    ext: [\"sass\"]\n  }, {\n    name: \"Scala\",\n    mime: \"text/x-scala\",\n    mode: \"clike\",\n    ext: [\"scala\"]\n  }, {\n    name: \"Scheme\",\n    mime: \"text/x-scheme\",\n    mode: \"scheme\",\n    ext: [\"scm\", \"ss\"]\n  }, {\n    name: \"SCSS\",\n    mime: \"text/x-scss\",\n    mode: \"css\",\n    ext: [\"scss\"]\n  }, {\n    name: \"Shell\",\n    mimes: [\"text/x-sh\", \"application/x-sh\"],\n    mode: \"shell\",\n    ext: [\"sh\", \"ksh\", \"bash\"],\n    alias: [\"bash\", \"sh\", \"zsh\"],\n    file: /^PKGBUILD$/\n  }, {\n    name: \"Sieve\",\n    mime: \"application/sieve\",\n    mode: \"sieve\",\n    ext: [\"siv\", \"sieve\"]\n  }, {\n    name: \"Slim\",\n    mimes: [\"text/x-slim\", \"application/x-slim\"],\n    mode: \"slim\",\n    ext: [\"slim\"]\n  }, {\n    name: \"Smalltalk\",\n    mime: \"text/x-stsrc\",\n    mode: \"smalltalk\",\n    ext: [\"st\"]\n  }, {\n    name: \"Smarty\",\n    mime: \"text/x-smarty\",\n    mode: \"smarty\",\n    ext: [\"tpl\"]\n  }, {\n    name: \"Solr\",\n    mime: \"text/x-solr\",\n    mode: \"solr\"\n  }, {\n    name: \"SML\",\n    mime: \"text/x-sml\",\n    mode: \"mllike\",\n    ext: [\"sml\", \"sig\", \"fun\", \"smackspec\"]\n  }, {\n    name: \"Soy\",\n    mime: \"text/x-soy\",\n    mode: \"soy\",\n    ext: [\"soy\"],\n    alias: [\"closure template\"]\n  }, {\n    name: \"SPARQL\",\n    mime: \"application/sparql-query\",\n    mode: \"sparql\",\n    ext: [\"rq\", \"sparql\"],\n    alias: [\"sparul\"]\n  }, {\n    name: \"Spreadsheet\",\n    mime: \"text/x-spreadsheet\",\n    mode: \"spreadsheet\",\n    alias: [\"excel\", \"formula\"]\n  }, {\n    name: \"SQL\",\n    mime: \"text/x-sql\",\n    mode: \"sql\",\n    ext: [\"sql\"]\n  }, {\n    name: \"SQLite\",\n    mime: \"text/x-sqlite\",\n    mode: \"sql\"\n  }, {\n    name: \"Squirrel\",\n    mime: \"text/x-squirrel\",\n    mode: \"clike\",\n    ext: [\"nut\"]\n  }, {\n    name: \"Stylus\",\n    mime: \"text/x-styl\",\n    mode: \"stylus\",\n    ext: [\"styl\"]\n  }, {\n    name: \"Swift\",\n    mime: \"text/x-swift\",\n    mode: \"swift\",\n    ext: [\"swift\"]\n  }, {\n    name: \"sTeX\",\n    mime: \"text/x-stex\",\n    mode: \"stex\"\n  }, {\n    name: \"LaTeX\",\n    mime: \"text/x-latex\",\n    mode: \"stex\",\n    ext: [\"text\", \"ltx\", \"tex\"],\n    alias: [\"tex\"]\n  }, {\n    name: \"SystemVerilog\",\n    mime: \"text/x-systemverilog\",\n    mode: \"verilog\",\n    ext: [\"v\", \"sv\", \"svh\"]\n  }, {\n    name: \"Tcl\",\n    mime: \"text/x-tcl\",\n    mode: \"tcl\",\n    ext: [\"tcl\"]\n  }, {\n    name: \"Textile\",\n    mime: \"text/x-textile\",\n    mode: \"textile\",\n    ext: [\"textile\"]\n  }, {\n    name: \"TiddlyWiki \",\n    mime: \"text/x-tiddlywiki\",\n    mode: \"tiddlywiki\"\n  }, {\n    name: \"Tiki wiki\",\n    mime: \"text/tiki\",\n    mode: \"tiki\"\n  }, {\n    name: \"TOML\",\n    mime: \"text/x-toml\",\n    mode: \"toml\",\n    ext: [\"toml\"]\n  }, {\n    name: \"Tornado\",\n    mime: \"text/x-tornado\",\n    mode: \"tornado\"\n  }, {\n    name: \"troff\",\n    mime: \"text/troff\",\n    mode: \"troff\",\n    ext: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"]\n  }, {\n    name: \"TTCN\",\n    mime: \"text/x-ttcn\",\n    mode: \"ttcn\",\n    ext: [\"ttcn\", \"ttcn3\", \"ttcnpp\"]\n  }, {\n    name: \"TTCN_CFG\",\n    mime: \"text/x-ttcn-cfg\",\n    mode: \"ttcn-cfg\",\n    ext: [\"cfg\"]\n  }, {\n    name: \"Turtle\",\n    mime: \"text/turtle\",\n    mode: \"turtle\",\n    ext: [\"ttl\"]\n  }, {\n    name: \"TypeScript\",\n    mime: \"application/typescript\",\n    mode: \"javascript\",\n    ext: [\"ts\"],\n    alias: [\"ts\"]\n  }, {\n    name: \"TypeScript-JSX\",\n    mime: \"text/typescript-jsx\",\n    mode: \"jsx\",\n    ext: [\"tsx\"],\n    alias: [\"tsx\"]\n  }, {\n    name: \"Twig\",\n    mime: \"text/x-twig\",\n    mode: \"twig\"\n  }, {\n    name: \"Web IDL\",\n    mime: \"text/x-webidl\",\n    mode: \"webidl\",\n    ext: [\"webidl\"]\n  }, {\n    name: \"VB.NET\",\n    mime: \"text/x-vb\",\n    mode: \"vb\",\n    ext: [\"vb\"]\n  }, {\n    name: \"VBScript\",\n    mime: \"text/vbscript\",\n    mode: \"vbscript\",\n    ext: [\"vbs\"]\n  }, {\n    name: \"Velocity\",\n    mime: \"text/velocity\",\n    mode: \"velocity\",\n    ext: [\"vtl\"]\n  }, {\n    name: \"Verilog\",\n    mime: \"text/x-verilog\",\n    mode: \"verilog\",\n    ext: [\"v\"]\n  }, {\n    name: \"VHDL\",\n    mime: \"text/x-vhdl\",\n    mode: \"vhdl\",\n    ext: [\"vhd\", \"vhdl\"]\n  }, {\n    name: \"Vue.js Component\",\n    mimes: [\"script/x-vue\", \"text/x-vue\"],\n    mode: \"vue\",\n    ext: [\"vue\"]\n  }, {\n    name: \"XML\",\n    mimes: [\"application/xml\", \"text/xml\"],\n    mode: \"xml\",\n    ext: [\"xml\", \"xsl\", \"xsd\", \"svg\"],\n    alias: [\"rss\", \"wsdl\", \"xsd\"]\n  }, {\n    name: \"XQuery\",\n    mime: \"application/xquery\",\n    mode: \"xquery\",\n    ext: [\"xy\", \"xquery\"]\n  }, {\n    name: \"Yacas\",\n    mime: \"text/x-yacas\",\n    mode: \"yacas\",\n    ext: [\"ys\"]\n  }, {\n    name: \"YAML\",\n    mimes: [\"text/x-yaml\", \"text/yaml\"],\n    mode: \"yaml\",\n    ext: [\"yaml\", \"yml\"],\n    alias: [\"yml\"]\n  }, {\n    name: \"Z80\",\n    mime: \"text/x-z80\",\n    mode: \"z80\",\n    ext: [\"z80\"]\n  }, {\n    name: \"mscgen\",\n    mime: \"text/x-mscgen\",\n    mode: \"mscgen\",\n    ext: [\"mscgen\", \"mscin\", \"msc\"]\n  }, {\n    name: \"xu\",\n    mime: \"text/x-xu\",\n    mode: \"mscgen\",\n    ext: [\"xu\"]\n  }, {\n    name: \"msgenny\",\n    mime: \"text/x-msgenny\",\n    mode: \"mscgen\",\n    ext: [\"msgenny\"]\n  }]; // Ensure all modes have a mime property for backwards compatibility\n\n  for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n    var info = CodeMirror.modeInfo[i];\n    if (info.mimes) info.mime = info.mimes[0];\n  }\n\n  CodeMirror.findModeByMIME = function (mime) {\n    mime = mime.toLowerCase();\n\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.mime == mime) return info;\n      if (info.mimes) for (var j = 0; j < info.mimes.length; j++) {\n        if (info.mimes[j] == mime) return info;\n      }\n    }\n\n    if (/\\+xml$/.test(mime)) return CodeMirror.findModeByMIME(\"application/xml\");\n    if (/\\+json$/.test(mime)) return CodeMirror.findModeByMIME(\"application/json\");\n  };\n\n  CodeMirror.findModeByExtension = function (ext) {\n    ext = ext.toLowerCase();\n\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.ext) for (var j = 0; j < info.ext.length; j++) {\n        if (info.ext[j] == ext) return info;\n      }\n    }\n  };\n\n  CodeMirror.findModeByFileName = function (filename) {\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.file && info.file.test(filename)) return info;\n    }\n\n    var dot = filename.lastIndexOf(\".\");\n    var ext = dot > -1 && filename.substring(dot + 1, filename.length);\n    if (ext) return CodeMirror.findModeByExtension(ext);\n  };\n\n  CodeMirror.findModeByName = function (name) {\n    name = name.toLowerCase();\n\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.name.toLowerCase() == name) return info;\n      if (info.alias) for (var j = 0; j < info.alias.length; j++) {\n        if (info.alias[j].toLowerCase() == name) return info;\n      }\n    }\n  };\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  CodeMirror.defineOption(\"placeholder\", \"\", function (cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n\n    if (val && !prev) {\n      cm.on(\"blur\", onBlur);\n      cm.on(\"change\", onChange);\n      cm.on(\"swapDoc\", onChange);\n      onChange(cm);\n    } else if (!val && prev) {\n      cm.off(\"blur\", onBlur);\n      cm.off(\"change\", onChange);\n      cm.off(\"swapDoc\", onChange);\n      clearPlaceholder(cm);\n      var wrapper = cm.getWrapperElement();\n      wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\");\n    }\n\n    if (val && !cm.hasFocus()) onBlur(cm);\n  });\n\n  function clearPlaceholder(cm) {\n    if (cm.state.placeholder) {\n      cm.state.placeholder.parentNode.removeChild(cm.state.placeholder);\n      cm.state.placeholder = null;\n    }\n  }\n\n  function setPlaceholder(cm) {\n    clearPlaceholder(cm);\n    var elt = cm.state.placeholder = document.createElement(\"pre\");\n    elt.style.cssText = \"height: 0; overflow: visible\";\n    elt.style.direction = cm.getOption(\"direction\");\n    elt.className = \"CodeMirror-placeholder CodeMirror-line-like\";\n    var placeHolder = cm.getOption(\"placeholder\");\n    if (typeof placeHolder == \"string\") placeHolder = document.createTextNode(placeHolder);\n    elt.appendChild(placeHolder);\n    cm.display.lineSpace.insertBefore(elt, cm.display.lineSpace.firstChild);\n  }\n\n  function onBlur(cm) {\n    if (isEmpty(cm)) setPlaceholder(cm);\n  }\n\n  function onChange(cm) {\n    var wrapper = cm.getWrapperElement(),\n        empty = isEmpty(cm);\n    wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\") + (empty ? \" CodeMirror-empty\" : \"\");\n    if (empty) setPlaceholder(cm);else clearPlaceholder(cm);\n  }\n\n  function isEmpty(cm) {\n    return cm.lineCount() === 1 && cm.getLine(0) === \"\";\n  }\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n// Because sometimes you need to mark the selected *text*.\n//\n// Adds an option 'styleSelectedText' which, when enabled, gives\n// selected text the CSS class given as option value, or\n// \"CodeMirror-selectedtext\" when the value is not a string.\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"styleSelectedText\", false, function (cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n\n    if (val && !prev) {\n      cm.state.markedSelection = [];\n      cm.state.markedSelectionStyle = typeof val == \"string\" ? val : \"CodeMirror-selectedtext\";\n      reset(cm);\n      cm.on(\"cursorActivity\", onCursorActivity);\n      cm.on(\"change\", onChange);\n    } else if (!val && prev) {\n      cm.off(\"cursorActivity\", onCursorActivity);\n      cm.off(\"change\", onChange);\n      clear(cm);\n      cm.state.markedSelection = cm.state.markedSelectionStyle = null;\n    }\n  });\n\n  function onCursorActivity(cm) {\n    if (cm.state.markedSelection) cm.operation(function () {\n      update(cm);\n    });\n  }\n\n  function onChange(cm) {\n    if (cm.state.markedSelection && cm.state.markedSelection.length) cm.operation(function () {\n      clear(cm);\n    });\n  }\n\n  var CHUNK_SIZE = 8;\n  var Pos = CodeMirror.Pos;\n  var cmp = CodeMirror.cmpPos;\n\n  function coverRange(cm, from, to, addAt) {\n    if (cmp(from, to) == 0) return;\n    var array = cm.state.markedSelection;\n    var cls = cm.state.markedSelectionStyle;\n\n    for (var line = from.line;;) {\n      var start = line == from.line ? from : Pos(line, 0);\n      var endLine = line + CHUNK_SIZE,\n          atEnd = endLine >= to.line;\n      var end = atEnd ? to : Pos(endLine, 0);\n      var mark = cm.markText(start, end, {\n        className: cls\n      });\n      if (addAt == null) array.push(mark);else array.splice(addAt++, 0, mark);\n      if (atEnd) break;\n      line = endLine;\n    }\n  }\n\n  function clear(cm) {\n    var array = cm.state.markedSelection;\n\n    for (var i = 0; i < array.length; ++i) {\n      array[i].clear();\n    }\n\n    array.length = 0;\n  }\n\n  function reset(cm) {\n    clear(cm);\n    var ranges = cm.listSelections();\n\n    for (var i = 0; i < ranges.length; i++) {\n      coverRange(cm, ranges[i].from(), ranges[i].to());\n    }\n  }\n\n  function update(cm) {\n    if (!cm.somethingSelected()) return clear(cm);\n    if (cm.listSelections().length > 1) return reset(cm);\n    var from = cm.getCursor(\"start\"),\n        to = cm.getCursor(\"end\");\n    var array = cm.state.markedSelection;\n    if (!array.length) return coverRange(cm, from, to);\n    var coverStart = array[0].find(),\n        coverEnd = array[array.length - 1].find();\n    if (!coverStart || !coverEnd || to.line - from.line <= CHUNK_SIZE || cmp(from, coverEnd.to) >= 0 || cmp(to, coverStart.from) <= 0) return reset(cm);\n\n    while (cmp(from, coverStart.from) > 0) {\n      array.shift().clear();\n      coverStart = array[0].find();\n    }\n\n    if (cmp(from, coverStart.from) < 0) {\n      if (coverStart.to.line - from.line < CHUNK_SIZE) {\n        array.shift().clear();\n        coverRange(cm, from, coverStart.to, 0);\n      } else {\n        coverRange(cm, from, coverStart.from, 0);\n      }\n    }\n\n    while (cmp(to, coverEnd.to) < 0) {\n      array.pop().clear();\n      coverEnd = array[array.length - 1].find();\n    }\n\n    if (cmp(to, coverEnd.to) > 0) {\n      if (to.line - coverEnd.from.line < CHUNK_SIZE) {\n        array.pop().clear();\n        coverRange(cm, coverEnd.from, to);\n      } else {\n        coverRange(cm, coverEnd.to, to);\n      }\n    }\n  }\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  var Pos = CodeMirror.Pos;\n\n  function regexpFlags(regexp) {\n    var flags = regexp.flags;\n    return flags != null ? flags : (regexp.ignoreCase ? \"i\" : \"\") + (regexp.global ? \"g\" : \"\") + (regexp.multiline ? \"m\" : \"\");\n  }\n\n  function ensureFlags(regexp, flags) {\n    var current = regexpFlags(regexp),\n        target = current;\n\n    for (var i = 0; i < flags.length; i++) {\n      if (target.indexOf(flags.charAt(i)) == -1) target += flags.charAt(i);\n    }\n\n    return current == target ? regexp : new RegExp(regexp.source, target);\n  }\n\n  function maybeMultiline(regexp) {\n    return /\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(regexp.source);\n  }\n\n  function searchRegexpForward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\");\n\n    for (var line = start.line, ch = start.ch, last = doc.lastLine(); line <= last; line++, ch = 0) {\n      regexp.lastIndex = ch;\n      var string = doc.getLine(line),\n          match = regexp.exec(string);\n      if (match) return {\n        from: Pos(line, match.index),\n        to: Pos(line, match.index + match[0].length),\n        match: match\n      };\n    }\n  }\n\n  function searchRegexpForwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpForward(doc, regexp, start);\n    regexp = ensureFlags(regexp, \"gm\");\n    var string,\n        chunk = 1;\n\n    for (var line = start.line, last = doc.lastLine(); line <= last;) {\n      // This grows the search buffer in exponentially-sized chunks\n      // between matches, so that nearby matches are fast and don't\n      // require concatenating the whole document (in case we're\n      // searching for something that has tons of matches), but at the\n      // same time, the amount of retries is limited.\n      for (var i = 0; i < chunk; i++) {\n        if (line > last) break;\n        var curLine = doc.getLine(line++);\n        string = string == null ? curLine : string + \"\\n\" + curLine;\n      }\n\n      chunk = chunk * 2;\n      regexp.lastIndex = start.ch;\n      var match = regexp.exec(string);\n\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"),\n            inside = match[0].split(\"\\n\");\n        var startLine = start.line + before.length - 1,\n            startCh = before[before.length - 1].length;\n        return {\n          from: Pos(startLine, startCh),\n          to: Pos(startLine + inside.length - 1, inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n          match: match\n        };\n      }\n    }\n  }\n\n  function lastMatchIn(string, regexp, endMargin) {\n    var match,\n        from = 0;\n\n    while (from <= string.length) {\n      regexp.lastIndex = from;\n      var newMatch = regexp.exec(string);\n      if (!newMatch) break;\n      var end = newMatch.index + newMatch[0].length;\n      if (end > string.length - endMargin) break;\n      if (!match || end > match.index + match[0].length) match = newMatch;\n      from = newMatch.index + 1;\n    }\n\n    return match;\n  }\n\n  function searchRegexpBackward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\");\n\n    for (var line = start.line, ch = start.ch, first = doc.firstLine(); line >= first; line--, ch = -1) {\n      var string = doc.getLine(line);\n      var match = lastMatchIn(string, regexp, ch < 0 ? 0 : string.length - ch);\n      if (match) return {\n        from: Pos(line, match.index),\n        to: Pos(line, match.index + match[0].length),\n        match: match\n      };\n    }\n  }\n\n  function searchRegexpBackwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpBackward(doc, regexp, start);\n    regexp = ensureFlags(regexp, \"gm\");\n    var string,\n        chunkSize = 1,\n        endMargin = doc.getLine(start.line).length - start.ch;\n\n    for (var line = start.line, first = doc.firstLine(); line >= first;) {\n      for (var i = 0; i < chunkSize && line >= first; i++) {\n        var curLine = doc.getLine(line--);\n        string = string == null ? curLine : curLine + \"\\n\" + string;\n      }\n\n      chunkSize *= 2;\n      var match = lastMatchIn(string, regexp, endMargin);\n\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"),\n            inside = match[0].split(\"\\n\");\n        var startLine = line + before.length,\n            startCh = before[before.length - 1].length;\n        return {\n          from: Pos(startLine, startCh),\n          to: Pos(startLine + inside.length - 1, inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n          match: match\n        };\n      }\n    }\n  }\n\n  var doFold, noFold;\n\n  if (String.prototype.normalize) {\n    doFold = function doFold(str) {\n      return str.normalize(\"NFD\").toLowerCase();\n    };\n\n    noFold = function noFold(str) {\n      return str.normalize(\"NFD\");\n    };\n  } else {\n    doFold = function doFold(str) {\n      return str.toLowerCase();\n    };\n\n    noFold = function noFold(str) {\n      return str;\n    };\n  } // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n\n\n  function adjustPos(orig, folded, pos, foldFunc) {\n    if (orig.length == folded.length) return pos;\n\n    for (var min = 0, max = pos + Math.max(0, orig.length - folded.length);;) {\n      if (min == max) return min;\n      var mid = min + max >> 1;\n      var len = foldFunc(orig.slice(0, mid)).length;\n      if (len == pos) return mid;else if (len > pos) max = mid;else min = mid + 1;\n    }\n  }\n\n  function searchStringForward(doc, query, start, caseFold) {\n    // Empty string would match anything and never progress, so we\n    // define it to match nothing instead.\n    if (!query.length) return null;\n    var fold = caseFold ? doFold : noFold;\n    var lines = fold(query).split(/\\r|\\n\\r?/);\n\n    search: for (var line = start.line, ch = start.ch, last = doc.lastLine() + 1 - lines.length; line <= last; line++, ch = 0) {\n      var orig = doc.getLine(line).slice(ch),\n          string = fold(orig);\n\n      if (lines.length == 1) {\n        var found = string.indexOf(lines[0]);\n        if (found == -1) continue search;\n        var start = adjustPos(orig, string, found, fold) + ch;\n        return {\n          from: Pos(line, adjustPos(orig, string, found, fold) + ch),\n          to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold) + ch)\n        };\n      } else {\n        var cutFrom = string.length - lines[0].length;\n        if (string.slice(cutFrom) != lines[0]) continue search;\n\n        for (var i = 1; i < lines.length - 1; i++) {\n          if (fold(doc.getLine(line + i)) != lines[i]) continue search;\n        }\n\n        var end = doc.getLine(line + lines.length - 1),\n            endString = fold(end),\n            lastLine = lines[lines.length - 1];\n        if (endString.slice(0, lastLine.length) != lastLine) continue search;\n        return {\n          from: Pos(line, adjustPos(orig, string, cutFrom, fold) + ch),\n          to: Pos(line + lines.length - 1, adjustPos(end, endString, lastLine.length, fold))\n        };\n      }\n    }\n  }\n\n  function searchStringBackward(doc, query, start, caseFold) {\n    if (!query.length) return null;\n    var fold = caseFold ? doFold : noFold;\n    var lines = fold(query).split(/\\r|\\n\\r?/);\n\n    search: for (var line = start.line, ch = start.ch, first = doc.firstLine() - 1 + lines.length; line >= first; line--, ch = -1) {\n      var orig = doc.getLine(line);\n      if (ch > -1) orig = orig.slice(0, ch);\n      var string = fold(orig);\n\n      if (lines.length == 1) {\n        var found = string.lastIndexOf(lines[0]);\n        if (found == -1) continue search;\n        return {\n          from: Pos(line, adjustPos(orig, string, found, fold)),\n          to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold))\n        };\n      } else {\n        var lastLine = lines[lines.length - 1];\n        if (string.slice(0, lastLine.length) != lastLine) continue search;\n\n        for (var i = 1, start = line - lines.length + 1; i < lines.length - 1; i++) {\n          if (fold(doc.getLine(start + i)) != lines[i]) continue search;\n        }\n\n        var top = doc.getLine(line + 1 - lines.length),\n            topString = fold(top);\n        if (topString.slice(topString.length - lines[0].length) != lines[0]) continue search;\n        return {\n          from: Pos(line + 1 - lines.length, adjustPos(top, topString, top.length - lines[0].length, fold)),\n          to: Pos(line, adjustPos(orig, string, lastLine.length, fold))\n        };\n      }\n    }\n  }\n\n  function SearchCursor(doc, query, pos, options) {\n    this.atOccurrence = false;\n    this.doc = doc;\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0);\n    this.pos = {\n      from: pos,\n      to: pos\n    };\n    var caseFold;\n\n    if (typeof options == \"object\") {\n      caseFold = options.caseFold;\n    } else {\n      // Backwards compat for when caseFold was the 4th argument\n      caseFold = options;\n      options = null;\n    }\n\n    if (typeof query == \"string\") {\n      if (caseFold == null) caseFold = false;\n\n      this.matches = function (reverse, pos) {\n        return (reverse ? searchStringBackward : searchStringForward)(doc, query, pos, caseFold);\n      };\n    } else {\n      query = ensureFlags(query, \"gm\");\n      if (!options || options.multiline !== false) this.matches = function (reverse, pos) {\n        return (reverse ? searchRegexpBackwardMultiline : searchRegexpForwardMultiline)(doc, query, pos);\n      };else this.matches = function (reverse, pos) {\n        return (reverse ? searchRegexpBackward : searchRegexpForward)(doc, query, pos);\n      };\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext: function findNext() {\n      return this.find(false);\n    },\n    findPrevious: function findPrevious() {\n      return this.find(true);\n    },\n    find: function find(reverse) {\n      var result = this.matches(reverse, this.doc.clipPos(reverse ? this.pos.from : this.pos.to)); // Implements weird auto-growing behavior on null-matches for\n      // backwards-compatiblity with the vim code (unfortunately)\n\n      while (result && CodeMirror.cmpPos(result.from, result.to) == 0) {\n        if (reverse) {\n          if (result.from.ch) result.from = Pos(result.from.line, result.from.ch - 1);else if (result.from.line == this.doc.firstLine()) result = null;else result = this.matches(reverse, this.doc.clipPos(Pos(result.from.line - 1)));\n        } else {\n          if (result.to.ch < this.doc.getLine(result.to.line).length) result.to = Pos(result.to.line, result.to.ch + 1);else if (result.to.line == this.doc.lastLine()) result = null;else result = this.matches(reverse, Pos(result.to.line + 1, 0));\n        }\n      }\n\n      if (result) {\n        this.pos = result;\n        this.atOccurrence = true;\n        return this.pos.match || true;\n      } else {\n        var end = Pos(reverse ? this.doc.firstLine() : this.doc.lastLine() + 1, 0);\n        this.pos = {\n          from: end,\n          to: end\n        };\n        return this.atOccurrence = false;\n      }\n    },\n    from: function from() {\n      if (this.atOccurrence) return this.pos.from;\n    },\n    to: function to() {\n      if (this.atOccurrence) return this.pos.to;\n    },\n    replace: function replace(newText, origin) {\n      if (!this.atOccurrence) return;\n      var lines = CodeMirror.splitLines(newText);\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin);\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1, lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0));\n    }\n  };\n  CodeMirror.defineExtension(\"getSearchCursor\", function (query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold);\n  });\n  CodeMirror.defineDocExtension(\"getSearchCursor\", function (query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold);\n  });\n  CodeMirror.defineExtension(\"selectMatches\", function (query, caseFold) {\n    var ranges = [];\n    var cur = this.getSearchCursor(query, this.getCursor(\"from\"), caseFold);\n\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor(\"to\")) > 0) break;\n      ranges.push({\n        anchor: cur.from(),\n        head: cur.to()\n      });\n    }\n\n    if (ranges.length) this.setSelections(ranges, 0);\n  });\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../markdown/markdown\"), require(\"../../addon/mode/overlay\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../markdown/markdown\", \"../../addon/mode/overlay\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  var urlRE = /^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\\.beep|\\.lwz|\\.xpc|\\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\\.beeps?|xmpp|xri|ymsgr|z39\\.50[rs]?):(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]|\\([^\\s()<>]*\\))+(?:\\([^\\s()<>]*\\)|[^\\s`*!()\\[\\]{};:'\".,<>?«»“”‘’]))/i;\n  CodeMirror.defineMode(\"gfm\", function (config, modeConfig) {\n    var codeDepth = 0;\n\n    function blankLine(state) {\n      state.code = false;\n      return null;\n    }\n\n    var gfmOverlay = {\n      startState: function startState() {\n        return {\n          code: false,\n          codeBlock: false,\n          ateSpace: false\n        };\n      },\n      copyState: function copyState(s) {\n        return {\n          code: s.code,\n          codeBlock: s.codeBlock,\n          ateSpace: s.ateSpace\n        };\n      },\n      token: function token(stream, state) {\n        state.combineTokens = null; // Hack to prevent formatting override inside code blocks (block and inline)\n\n        if (state.codeBlock) {\n          if (stream.match(/^```+/)) {\n            state.codeBlock = false;\n            return null;\n          }\n\n          stream.skipToEnd();\n          return null;\n        }\n\n        if (stream.sol()) {\n          state.code = false;\n        }\n\n        if (stream.sol() && stream.match(/^```+/)) {\n          stream.skipToEnd();\n          state.codeBlock = true;\n          return null;\n        } // If this block is changed, it may need to be updated in Markdown mode\n\n\n        if (stream.peek() === '`') {\n          stream.next();\n          var before = stream.pos;\n          stream.eatWhile('`');\n          var difference = 1 + stream.pos - before;\n\n          if (!state.code) {\n            codeDepth = difference;\n            state.code = true;\n          } else {\n            if (difference === codeDepth) {\n              // Must be exact\n              state.code = false;\n            }\n          }\n\n          return null;\n        } else if (state.code) {\n          stream.next();\n          return null;\n        } // Check if space. If so, links can be formatted later on\n\n\n        if (stream.eatSpace()) {\n          state.ateSpace = true;\n          return null;\n        }\n\n        if (stream.sol() || state.ateSpace) {\n          state.ateSpace = false;\n\n          if (modeConfig.gitHubSpice !== false) {\n            if (stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+@)?(?=.{0,6}\\d)(?:[a-f0-9]{7,40}\\b)/)) {\n              // User/Project@SHA\n              // User@SHA\n              // SHA\n              state.combineTokens = true;\n              return \"link\";\n            } else if (stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+)?#[0-9]+\\b/)) {\n              // User/Project#Num\n              // User#Num\n              // #Num\n              state.combineTokens = true;\n              return \"link\";\n            }\n          }\n        }\n\n        if (stream.match(urlRE) && stream.string.slice(stream.start - 2, stream.start) != \"](\" && (stream.start == 0 || /\\W/.test(stream.string.charAt(stream.start - 1)))) {\n          // URLs\n          // Taken from http://daringfireball.net/2010/07/improved_regex_for_matching_urls\n          // And then (issue #1160) simplified to make it not crash the Chrome Regexp engine\n          // And then limited url schemes to the CommonMark list, so foo:bar isn't matched as a URL\n          state.combineTokens = true;\n          return \"link\";\n        }\n\n        stream.next();\n        return null;\n      },\n      blankLine: blankLine\n    };\n    var markdownConfig = {\n      taskLists: true,\n      strikethrough: true,\n      emoji: true\n    };\n\n    for (var attr in modeConfig) {\n      markdownConfig[attr] = modeConfig[attr];\n    }\n\n    markdownConfig.name = \"markdown\";\n    return CodeMirror.overlayMode(CodeMirror.getMode(config, markdownConfig), gfmOverlay);\n  }, \"markdown\");\n  CodeMirror.defineMIME(\"text/x-gfm\", \"gfm\");\n});","// Use strict mode (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)\n\"use strict\"; // Requires\n\nvar Typo = require(\"typo-js\"); // Create function\n\n\nfunction CodeMirrorSpellChecker(options) {\n  // Initialize\n  options = options || {}; // Verify\n\n  if (typeof options.codeMirrorInstance !== \"function\" || typeof options.codeMirrorInstance.defineMode !== \"function\") {\n    console.log(\"CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`\");\n    return;\n  } // Because some browsers don't support this functionality yet\n\n\n  if (!String.prototype.includes) {\n    String.prototype.includes = function () {\n      \"use strict\";\n\n      return String.prototype.indexOf.apply(this, arguments) !== -1;\n    };\n  } // Define the new mode\n\n\n  options.codeMirrorInstance.defineMode(\"spell-checker\", function (config) {\n    // Load AFF/DIC data\n    if (!CodeMirrorSpellChecker.aff_loading) {\n      CodeMirrorSpellChecker.aff_loading = true;\n      var xhr_aff = new XMLHttpRequest();\n      xhr_aff.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff\", true);\n\n      xhr_aff.onload = function () {\n        if (xhr_aff.readyState === 4 && xhr_aff.status === 200) {\n          CodeMirrorSpellChecker.aff_data = xhr_aff.responseText;\n          CodeMirrorSpellChecker.num_loaded++;\n\n          if (CodeMirrorSpellChecker.num_loaded == 2) {\n            CodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n              platform: \"any\"\n            });\n          }\n        }\n      };\n\n      xhr_aff.send(null);\n    }\n\n    if (!CodeMirrorSpellChecker.dic_loading) {\n      CodeMirrorSpellChecker.dic_loading = true;\n      var xhr_dic = new XMLHttpRequest();\n      xhr_dic.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic\", true);\n\n      xhr_dic.onload = function () {\n        if (xhr_dic.readyState === 4 && xhr_dic.status === 200) {\n          CodeMirrorSpellChecker.dic_data = xhr_dic.responseText;\n          CodeMirrorSpellChecker.num_loaded++;\n\n          if (CodeMirrorSpellChecker.num_loaded == 2) {\n            CodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n              platform: \"any\"\n            });\n          }\n        }\n      };\n\n      xhr_dic.send(null);\n    } // Define what separates a word\n\n\n    var rx_word = \"!\\\"#$%&()*+,-./:;<=>?@[\\\\]^_`{|}~ \"; // Create the overlay and such\n\n    var overlay = {\n      token: function token(stream) {\n        var ch = stream.peek();\n        var word = \"\";\n\n        if (rx_word.includes(ch)) {\n          stream.next();\n          return null;\n        }\n\n        while ((ch = stream.peek()) != null && !rx_word.includes(ch)) {\n          word += ch;\n          stream.next();\n        }\n\n        if (CodeMirrorSpellChecker.typo && !CodeMirrorSpellChecker.typo.check(word)) return \"spell-error\"; // CSS class: cm-spell-error\n\n        return null;\n      }\n    };\n    var mode = options.codeMirrorInstance.getMode(config, config.backdrop || \"text/plain\");\n    return options.codeMirrorInstance.overlayMode(mode, overlay, true);\n  });\n} // Initialize data globally to reduce memory consumption\n\n\nCodeMirrorSpellChecker.num_loaded = 0;\nCodeMirrorSpellChecker.aff_loading = false;\nCodeMirrorSpellChecker.dic_loading = false;\nCodeMirrorSpellChecker.aff_data = \"\";\nCodeMirrorSpellChecker.dic_data = \"\";\nCodeMirrorSpellChecker.typo; // Export\n\nmodule.exports = CodeMirrorSpellChecker;","/* globals chrome: false */\n\n/* globals __dirname: false */\n\n/* globals require: false */\n\n/* globals Buffer: false */\n\n/* globals module: false */\n\n/**\n * Typo is a JavaScript implementation of a spellchecker using hunspell-style \n * dictionaries.\n */\nvar Typo;\n\n(function () {\n  \"use strict\";\n  /**\n   * Typo constructor.\n   *\n   * @param {String} [dictionary] The locale code of the dictionary being used. e.g.,\n   *                              \"en_US\". This is only used to auto-load dictionaries.\n   * @param {String} [affData]    The data from the dictionary's .aff file. If omitted\n   *                              and Typo.js is being used in a Chrome extension, the .aff\n   *                              file will be loaded automatically from\n   *                              lib/typo/dictionaries/[dictionary]/[dictionary].aff\n   *                              In other environments, it will be loaded from\n   *                              [settings.dictionaryPath]/dictionaries/[dictionary]/[dictionary].aff\n   * @param {String} [wordsData]  The data from the dictionary's .dic file. If omitted\n   *                              and Typo.js is being used in a Chrome extension, the .dic\n   *                              file will be loaded automatically from\n   *                              lib/typo/dictionaries/[dictionary]/[dictionary].dic\n   *                              In other environments, it will be loaded from\n   *                              [settings.dictionaryPath]/dictionaries/[dictionary]/[dictionary].dic\n   * @param {Object} [settings]   Constructor settings. Available properties are:\n   *                              {String} [dictionaryPath]: path to load dictionary from in non-chrome\n   *                              environment.\n   *                              {Object} [flags]: flag information.\n   *                              {Boolean} [asyncLoad]: If true, affData and wordsData will be loaded\n   *                              asynchronously.\n   *                              {Function} [loadedCallback]: Called when both affData and wordsData\n   *                              have been loaded. Only used if asyncLoad is set to true. The parameter\n   *                              is the instantiated Typo object.\n   *\n   * @returns {Typo} A Typo object.\n   */\n\n  Typo = function Typo(dictionary, affData, wordsData, settings) {\n    settings = settings || {};\n    this.dictionary = null;\n    this.rules = {};\n    this.dictionaryTable = {};\n    this.compoundRules = [];\n    this.compoundRuleCodes = {};\n    this.replacementTable = [];\n    this.flags = settings.flags || {};\n    this.memoized = {};\n    this.loaded = false;\n    var self = this;\n    var path; // Loop-control variables.\n\n    var i, j, _len, _jlen;\n\n    if (dictionary) {\n      self.dictionary = dictionary; // If the data is preloaded, just setup the Typo object.\n\n      if (affData && wordsData) {\n        setup();\n      } // Loading data for Chrome extentions.\n      else if (typeof window !== 'undefined' && 'chrome' in window && 'extension' in window.chrome && 'getURL' in window.chrome.extension) {\n          if (settings.dictionaryPath) {\n            path = settings.dictionaryPath;\n          } else {\n            path = \"typo/dictionaries\";\n          }\n\n          if (!affData) readDataFile(chrome.extension.getURL(path + \"/\" + dictionary + \"/\" + dictionary + \".aff\"), setAffData);\n          if (!wordsData) readDataFile(chrome.extension.getURL(path + \"/\" + dictionary + \"/\" + dictionary + \".dic\"), setWordsData);\n        } else {\n          if (settings.dictionaryPath) {\n            path = settings.dictionaryPath;\n          } else if (typeof __dirname !== 'undefined') {\n            path = __dirname + '/dictionaries';\n          } else {\n            path = './dictionaries';\n          }\n\n          if (!affData) readDataFile(path + \"/\" + dictionary + \"/\" + dictionary + \".aff\", setAffData);\n          if (!wordsData) readDataFile(path + \"/\" + dictionary + \"/\" + dictionary + \".dic\", setWordsData);\n        }\n    }\n\n    function readDataFile(url, setFunc) {\n      var response = self._readFile(url, null, settings.asyncLoad);\n\n      if (settings.asyncLoad) {\n        response.then(function (data) {\n          setFunc(data);\n        });\n      } else {\n        setFunc(response);\n      }\n    }\n\n    function setAffData(data) {\n      affData = data;\n\n      if (wordsData) {\n        setup();\n      }\n    }\n\n    function setWordsData(data) {\n      wordsData = data;\n\n      if (affData) {\n        setup();\n      }\n    }\n\n    function setup() {\n      self.rules = self._parseAFF(affData); // Save the rule codes that are used in compound rules.\n\n      self.compoundRuleCodes = {};\n\n      for (i = 0, _len = self.compoundRules.length; i < _len; i++) {\n        var rule = self.compoundRules[i];\n\n        for (j = 0, _jlen = rule.length; j < _jlen; j++) {\n          self.compoundRuleCodes[rule[j]] = [];\n        }\n      } // If we add this ONLYINCOMPOUND flag to self.compoundRuleCodes, then _parseDIC\n      // will do the work of saving the list of words that are compound-only.\n\n\n      if (\"ONLYINCOMPOUND\" in self.flags) {\n        self.compoundRuleCodes[self.flags.ONLYINCOMPOUND] = [];\n      }\n\n      self.dictionaryTable = self._parseDIC(wordsData); // Get rid of any codes from the compound rule codes that are never used \n      // (or that were special regex characters).  Not especially necessary... \n\n      for (i in self.compoundRuleCodes) {\n        if (self.compoundRuleCodes[i].length === 0) {\n          delete self.compoundRuleCodes[i];\n        }\n      } // Build the full regular expressions for each compound rule.\n      // I have a feeling (but no confirmation yet) that this method of \n      // testing for compound words is probably slow.\n\n\n      for (i = 0, _len = self.compoundRules.length; i < _len; i++) {\n        var ruleText = self.compoundRules[i];\n        var expressionText = \"\";\n\n        for (j = 0, _jlen = ruleText.length; j < _jlen; j++) {\n          var character = ruleText[j];\n\n          if (character in self.compoundRuleCodes) {\n            expressionText += \"(\" + self.compoundRuleCodes[character].join(\"|\") + \")\";\n          } else {\n            expressionText += character;\n          }\n        }\n\n        self.compoundRules[i] = new RegExp(expressionText, \"i\");\n      }\n\n      self.loaded = true;\n\n      if (settings.asyncLoad && settings.loadedCallback) {\n        settings.loadedCallback(self);\n      }\n    }\n\n    return this;\n  };\n\n  Typo.prototype = {\n    /**\n     * Loads a Typo instance from a hash of all of the Typo properties.\n     *\n     * @param object obj A hash of Typo properties, probably gotten from a JSON.parse(JSON.stringify(typo_instance)).\n     */\n    load: function load(obj) {\n      for (var i in obj) {\n        if (obj.hasOwnProperty(i)) {\n          this[i] = obj[i];\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Read the contents of a file.\n     * \n     * @param {String} path The path (relative) to the file.\n     * @param {String} [charset=\"ISO8859-1\"] The expected charset of the file\n     * @param {Boolean} async If true, the file will be read asynchronously. For node.js this does nothing, all\n     *        files are read synchronously.\n     * @returns {String} The file data if async is false, otherwise a promise object. If running node.js, the data is\n     *          always returned.\n     */\n    _readFile: function _readFile(path, charset, async) {\n      charset = charset || \"utf8\";\n\n      if (typeof XMLHttpRequest !== 'undefined') {\n        var promise;\n        var req = new XMLHttpRequest();\n        req.open(\"GET\", path, async);\n\n        if (async) {\n          promise = new Promise(function (resolve, reject) {\n            req.onload = function () {\n              if (req.status === 200) {\n                resolve(req.responseText);\n              } else {\n                reject(req.statusText);\n              }\n            };\n\n            req.onerror = function () {\n              reject(req.statusText);\n            };\n          });\n        }\n\n        if (req.overrideMimeType) req.overrideMimeType(\"text/plain; charset=\" + charset);\n        req.send(null);\n        return async ? promise : req.responseText;\n      } else if (typeof require !== 'undefined') {\n        // Node.js\n        var fs = require(\"fs\");\n\n        try {\n          if (fs.existsSync(path)) {\n            return fs.readFileSync(path, charset);\n          } else {\n            console.log(\"Path \" + path + \" does not exist.\");\n          }\n        } catch (e) {\n          console.log(e);\n          return '';\n        }\n      }\n    },\n\n    /**\n     * Parse the rules out from a .aff file.\n     *\n     * @param {String} data The contents of the affix file.\n     * @returns object The rules from the file.\n     */\n    _parseAFF: function _parseAFF(data) {\n      var rules = {};\n      var line, subline, numEntries, lineParts;\n\n      var i, j, _len, _jlen; // Remove comment lines\n\n\n      data = this._removeAffixComments(data);\n      var lines = data.split(/\\r?\\n/);\n\n      for (i = 0, _len = lines.length; i < _len; i++) {\n        line = lines[i];\n        var definitionParts = line.split(/\\s+/);\n        var ruleType = definitionParts[0];\n\n        if (ruleType == \"PFX\" || ruleType == \"SFX\") {\n          var ruleCode = definitionParts[1];\n          var combineable = definitionParts[2];\n          numEntries = parseInt(definitionParts[3], 10);\n          var entries = [];\n\n          for (j = i + 1, _jlen = i + 1 + numEntries; j < _jlen; j++) {\n            subline = lines[j];\n            lineParts = subline.split(/\\s+/);\n            var charactersToRemove = lineParts[2];\n            var additionParts = lineParts[3].split(\"/\");\n            var charactersToAdd = additionParts[0];\n            if (charactersToAdd === \"0\") charactersToAdd = \"\";\n            var continuationClasses = this.parseRuleCodes(additionParts[1]);\n            var regexToMatch = lineParts[4];\n            var entry = {};\n            entry.add = charactersToAdd;\n            if (continuationClasses.length > 0) entry.continuationClasses = continuationClasses;\n\n            if (regexToMatch !== \".\") {\n              if (ruleType === \"SFX\") {\n                entry.match = new RegExp(regexToMatch + \"$\");\n              } else {\n                entry.match = new RegExp(\"^\" + regexToMatch);\n              }\n            }\n\n            if (charactersToRemove != \"0\") {\n              if (ruleType === \"SFX\") {\n                entry.remove = new RegExp(charactersToRemove + \"$\");\n              } else {\n                entry.remove = charactersToRemove;\n              }\n            }\n\n            entries.push(entry);\n          }\n\n          rules[ruleCode] = {\n            \"type\": ruleType,\n            \"combineable\": combineable == \"Y\",\n            \"entries\": entries\n          };\n          i += numEntries;\n        } else if (ruleType === \"COMPOUNDRULE\") {\n          numEntries = parseInt(definitionParts[1], 10);\n\n          for (j = i + 1, _jlen = i + 1 + numEntries; j < _jlen; j++) {\n            line = lines[j];\n            lineParts = line.split(/\\s+/);\n            this.compoundRules.push(lineParts[1]);\n          }\n\n          i += numEntries;\n        } else if (ruleType === \"REP\") {\n          lineParts = line.split(/\\s+/);\n\n          if (lineParts.length === 3) {\n            this.replacementTable.push([lineParts[1], lineParts[2]]);\n          }\n        } else {\n          // ONLYINCOMPOUND\n          // COMPOUNDMIN\n          // FLAG\n          // KEEPCASE\n          // NEEDAFFIX\n          this.flags[ruleType] = definitionParts[1];\n        }\n      }\n\n      return rules;\n    },\n\n    /**\n     * Removes comment lines and then cleans up blank lines and trailing whitespace.\n     *\n     * @param {String} data The data from an affix file.\n     * @return {String} The cleaned-up data.\n     */\n    _removeAffixComments: function _removeAffixComments(data) {\n      // Remove comments\n      // This used to remove any string starting with '#' up to the end of the line,\n      // but some COMPOUNDRULE definitions include '#' as part of the rule.\n      // I haven't seen any affix files that use comments on the same line as real data,\n      // so I don't think this will break anything.\n      data = data.replace(/^\\s*#.*$/mg, \"\"); // Trim each line\n\n      data = data.replace(/^\\s\\s*/m, '').replace(/\\s\\s*$/m, ''); // Remove blank lines.\n\n      data = data.replace(/\\n{2,}/g, \"\\n\"); // Trim the entire string\n\n      data = data.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n      return data;\n    },\n\n    /**\n     * Parses the words out from the .dic file.\n     *\n     * @param {String} data The data from the dictionary file.\n     * @returns object The lookup table containing all of the words and\n     *                 word forms from the dictionary.\n     */\n    _parseDIC: function _parseDIC(data) {\n      data = this._removeDicComments(data);\n      var lines = data.split(/\\r?\\n/);\n      var dictionaryTable = {};\n\n      function addWord(word, rules) {\n        // Some dictionaries will list the same word multiple times with different rule sets.\n        if (!dictionaryTable.hasOwnProperty(word)) {\n          dictionaryTable[word] = null;\n        }\n\n        if (rules.length > 0) {\n          if (dictionaryTable[word] === null) {\n            dictionaryTable[word] = [];\n          }\n\n          dictionaryTable[word].push(rules);\n        }\n      } // The first line is the number of words in the dictionary.\n\n\n      for (var i = 1, _len = lines.length; i < _len; i++) {\n        var line = lines[i];\n\n        if (!line) {\n          // Ignore empty lines.\n          continue;\n        }\n\n        var parts = line.split(\"/\", 2);\n        var word = parts[0]; // Now for each affix rule, generate that form of the word.\n\n        if (parts.length > 1) {\n          var ruleCodesArray = this.parseRuleCodes(parts[1]); // Save the ruleCodes for compound word situations.\n\n          if (!(\"NEEDAFFIX\" in this.flags) || ruleCodesArray.indexOf(this.flags.NEEDAFFIX) == -1) {\n            addWord(word, ruleCodesArray);\n          }\n\n          for (var j = 0, _jlen = ruleCodesArray.length; j < _jlen; j++) {\n            var code = ruleCodesArray[j];\n            var rule = this.rules[code];\n\n            if (rule) {\n              var newWords = this._applyRule(word, rule);\n\n              for (var ii = 0, _iilen = newWords.length; ii < _iilen; ii++) {\n                var newWord = newWords[ii];\n                addWord(newWord, []);\n\n                if (rule.combineable) {\n                  for (var k = j + 1; k < _jlen; k++) {\n                    var combineCode = ruleCodesArray[k];\n                    var combineRule = this.rules[combineCode];\n\n                    if (combineRule) {\n                      if (combineRule.combineable && rule.type != combineRule.type) {\n                        var otherNewWords = this._applyRule(newWord, combineRule);\n\n                        for (var iii = 0, _iiilen = otherNewWords.length; iii < _iiilen; iii++) {\n                          var otherNewWord = otherNewWords[iii];\n                          addWord(otherNewWord, []);\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n\n            if (code in this.compoundRuleCodes) {\n              this.compoundRuleCodes[code].push(word);\n            }\n          }\n        } else {\n          addWord(word.trim(), []);\n        }\n      }\n\n      return dictionaryTable;\n    },\n\n    /**\n     * Removes comment lines and then cleans up blank lines and trailing whitespace.\n     *\n     * @param {String} data The data from a .dic file.\n     * @return {String} The cleaned-up data.\n     */\n    _removeDicComments: function _removeDicComments(data) {\n      // I can't find any official documentation on it, but at least the de_DE\n      // dictionary uses tab-indented lines as comments.\n      // Remove comments\n      data = data.replace(/^\\t.*$/mg, \"\");\n      return data;\n    },\n    parseRuleCodes: function parseRuleCodes(textCodes) {\n      if (!textCodes) {\n        return [];\n      } else if (!(\"FLAG\" in this.flags)) {\n        return textCodes.split(\"\");\n      } else if (this.flags.FLAG === \"long\") {\n        var flags = [];\n\n        for (var i = 0, _len = textCodes.length; i < _len; i += 2) {\n          flags.push(textCodes.substr(i, 2));\n        }\n\n        return flags;\n      } else if (this.flags.FLAG === \"num\") {\n        return textCodes.split(\",\");\n      }\n    },\n\n    /**\n     * Applies an affix rule to a word.\n     *\n     * @param {String} word The base word.\n     * @param {Object} rule The affix rule.\n     * @returns {String[]} The new words generated by the rule.\n     */\n    _applyRule: function _applyRule(word, rule) {\n      var entries = rule.entries;\n      var newWords = [];\n\n      for (var i = 0, _len = entries.length; i < _len; i++) {\n        var entry = entries[i];\n\n        if (!entry.match || word.match(entry.match)) {\n          var newWord = word;\n\n          if (entry.remove) {\n            newWord = newWord.replace(entry.remove, \"\");\n          }\n\n          if (rule.type === \"SFX\") {\n            newWord = newWord + entry.add;\n          } else {\n            newWord = entry.add + newWord;\n          }\n\n          newWords.push(newWord);\n\n          if (\"continuationClasses\" in entry) {\n            for (var j = 0, _jlen = entry.continuationClasses.length; j < _jlen; j++) {\n              var continuationRule = this.rules[entry.continuationClasses[j]];\n\n              if (continuationRule) {\n                newWords = newWords.concat(this._applyRule(newWord, continuationRule));\n              }\n              /*\n              else {\n              \t// This shouldn't happen, but it does, at least in the de_DE dictionary.\n              \t// I think the author mistakenly supplied lower-case rule codes instead \n              \t// of upper-case.\n              }\n              */\n\n            }\n          }\n        }\n      }\n\n      return newWords;\n    },\n\n    /**\n     * Checks whether a word or a capitalization variant exists in the current dictionary.\n     * The word is trimmed and several variations of capitalizations are checked.\n     * If you want to check a word without any changes made to it, call checkExact()\n     *\n     * @see http://blog.stevenlevithan.com/archives/faster-trim-javascript re:trimming function\n     *\n     * @param {String} aWord The word to check.\n     * @returns {Boolean}\n     */\n    check: function check(aWord) {\n      if (!this.loaded) {\n        throw \"Dictionary not loaded.\";\n      } // Remove leading and trailing whitespace\n\n\n      var trimmedWord = aWord.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\n      if (this.checkExact(trimmedWord)) {\n        return true;\n      } // The exact word is not in the dictionary.\n\n\n      if (trimmedWord.toUpperCase() === trimmedWord) {\n        // The word was supplied in all uppercase.\n        // Check for a capitalized form of the word.\n        var capitalizedWord = trimmedWord[0] + trimmedWord.substring(1).toLowerCase();\n\n        if (this.hasFlag(capitalizedWord, \"KEEPCASE\")) {\n          // Capitalization variants are not allowed for this word.\n          return false;\n        }\n\n        if (this.checkExact(capitalizedWord)) {\n          return true;\n        }\n      }\n\n      var lowercaseWord = trimmedWord.toLowerCase();\n\n      if (lowercaseWord !== trimmedWord) {\n        if (this.hasFlag(lowercaseWord, \"KEEPCASE\")) {\n          // Capitalization variants are not allowed for this word.\n          return false;\n        } // Check for a lowercase form\n\n\n        if (this.checkExact(lowercaseWord)) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Checks whether a word exists in the current dictionary.\n     *\n     * @param {String} word The word to check.\n     * @returns {Boolean}\n     */\n    checkExact: function checkExact(word) {\n      if (!this.loaded) {\n        throw \"Dictionary not loaded.\";\n      }\n\n      var ruleCodes = this.dictionaryTable[word];\n\n      var i, _len;\n\n      if (typeof ruleCodes === 'undefined') {\n        // Check if this might be a compound word.\n        if (\"COMPOUNDMIN\" in this.flags && word.length >= this.flags.COMPOUNDMIN) {\n          for (i = 0, _len = this.compoundRules.length; i < _len; i++) {\n            if (word.match(this.compoundRules[i])) {\n              return true;\n            }\n          }\n        }\n      } else if (ruleCodes === null) {\n        // a null (but not undefined) value for an entry in the dictionary table\n        // means that the word is in the dictionary but has no flags.\n        return true;\n      } else if (typeof ruleCodes === 'object') {\n        // this.dictionary['hasOwnProperty'] will be a function.\n        for (i = 0, _len = ruleCodes.length; i < _len; i++) {\n          if (!this.hasFlag(word, \"ONLYINCOMPOUND\", ruleCodes[i])) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Looks up whether a given word is flagged with a given flag.\n     *\n     * @param {String} word The word in question.\n     * @param {String} flag The flag in question.\n     * @return {Boolean}\n     */\n    hasFlag: function hasFlag(word, flag, wordFlags) {\n      if (!this.loaded) {\n        throw \"Dictionary not loaded.\";\n      }\n\n      if (flag in this.flags) {\n        if (typeof wordFlags === 'undefined') {\n          wordFlags = Array.prototype.concat.apply([], this.dictionaryTable[word]);\n        }\n\n        if (wordFlags && wordFlags.indexOf(this.flags[flag]) !== -1) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Returns a list of suggestions for a misspelled word.\n     *\n     * @see http://www.norvig.com/spell-correct.html for the basis of this suggestor.\n     * This suggestor is primitive, but it works.\n     *\n     * @param {String} word The misspelling.\n     * @param {Number} [limit=5] The maximum number of suggestions to return.\n     * @returns {String[]} The array of suggestions.\n     */\n    alphabet: \"\",\n    suggest: function suggest(word, limit) {\n      if (!this.loaded) {\n        throw \"Dictionary not loaded.\";\n      }\n\n      limit = limit || 5;\n\n      if (this.memoized.hasOwnProperty(word)) {\n        var memoizedLimit = this.memoized[word]['limit']; // Only return the cached list if it's big enough or if there weren't enough suggestions\n        // to fill a smaller limit.\n\n        if (limit <= memoizedLimit || this.memoized[word]['suggestions'].length < memoizedLimit) {\n          return this.memoized[word]['suggestions'].slice(0, limit);\n        }\n      }\n\n      if (this.check(word)) return []; // Check the replacement table.\n\n      for (var i = 0, _len = this.replacementTable.length; i < _len; i++) {\n        var replacementEntry = this.replacementTable[i];\n\n        if (word.indexOf(replacementEntry[0]) !== -1) {\n          var correctedWord = word.replace(replacementEntry[0], replacementEntry[1]);\n\n          if (this.check(correctedWord)) {\n            return [correctedWord];\n          }\n        }\n      }\n\n      var self = this;\n      self.alphabet = \"abcdefghijklmnopqrstuvwxyz\";\n      /*\n      if (!self.alphabet) {\n      \t// Use the alphabet as implicitly defined by the words in the dictionary.\n      \tvar alphaHash = {};\n      \t\n      \tfor (var i in self.dictionaryTable) {\n      \t\tfor (var j = 0, _len = i.length; j < _len; j++) {\n      \t\t\talphaHash[i[j]] = true;\n      \t\t}\n      \t}\n      \t\n      \tfor (var i in alphaHash) {\n      \t\tself.alphabet += i;\n      \t}\n      \t\n      \tvar alphaArray = self.alphabet.split(\"\");\n      \talphaArray.sort();\n      \tself.alphabet = alphaArray.join(\"\");\n      }\n      */\n\n      /**\n       * Returns a hash keyed by all of the strings that can be made by making a single edit to the word (or words in) `words`\n       * The value of each entry is the number of unique ways that the resulting word can be made.\n       *\n       * @arg mixed words Either a hash keyed by words or a string word to operate on.\n       * @arg bool known_only Whether this function should ignore strings that are not in the dictionary.\n       */\n\n      function edits1(words, known_only) {\n        var rv = {};\n\n        var i, j, _iilen, _len, _jlen, _edit;\n\n        if (typeof words == 'string') {\n          var word = words;\n          words = {};\n          words[word] = true;\n        }\n\n        for (var word in words) {\n          for (i = 0, _len = word.length + 1; i < _len; i++) {\n            var s = [word.substring(0, i), word.substring(i)];\n\n            if (s[1]) {\n              _edit = s[0] + s[1].substring(1);\n\n              if (!known_only || self.check(_edit)) {\n                if (!(_edit in rv)) {\n                  rv[_edit] = 1;\n                } else {\n                  rv[_edit] += 1;\n                }\n              }\n            } // Eliminate transpositions of identical letters\n\n\n            if (s[1].length > 1 && s[1][1] !== s[1][0]) {\n              _edit = s[0] + s[1][1] + s[1][0] + s[1].substring(2);\n\n              if (!known_only || self.check(_edit)) {\n                if (!(_edit in rv)) {\n                  rv[_edit] = 1;\n                } else {\n                  rv[_edit] += 1;\n                }\n              }\n            }\n\n            if (s[1]) {\n              for (j = 0, _jlen = self.alphabet.length; j < _jlen; j++) {\n                // Eliminate replacement of a letter by itself\n                if (self.alphabet[j] != s[1].substring(0, 1)) {\n                  _edit = s[0] + self.alphabet[j] + s[1].substring(1);\n\n                  if (!known_only || self.check(_edit)) {\n                    if (!(_edit in rv)) {\n                      rv[_edit] = 1;\n                    } else {\n                      rv[_edit] += 1;\n                    }\n                  }\n                }\n              }\n            }\n\n            if (s[1]) {\n              for (j = 0, _jlen = self.alphabet.length; j < _jlen; j++) {\n                _edit = s[0] + self.alphabet[j] + s[1];\n\n                if (!known_only || self.check(_edit)) {\n                  if (!(_edit in rv)) {\n                    rv[_edit] = 1;\n                  } else {\n                    rv[_edit] += 1;\n                  }\n                }\n              }\n            }\n          }\n        }\n\n        return rv;\n      }\n\n      function correct(word) {\n        // Get the edit-distance-1 and edit-distance-2 forms of this word.\n        var ed1 = edits1(word);\n        var ed2 = edits1(ed1, true); // Sort the edits based on how many different ways they were created.\n\n        var weighted_corrections = ed2;\n\n        for (var ed1word in ed1) {\n          if (!self.check(ed1word)) {\n            continue;\n          }\n\n          if (ed1word in weighted_corrections) {\n            weighted_corrections[ed1word] += ed1[ed1word];\n          } else {\n            weighted_corrections[ed1word] = ed1[ed1word];\n          }\n        }\n\n        var i, _len;\n\n        var sorted_corrections = [];\n\n        for (i in weighted_corrections) {\n          if (weighted_corrections.hasOwnProperty(i)) {\n            sorted_corrections.push([i, weighted_corrections[i]]);\n          }\n        }\n\n        function sorter(a, b) {\n          var a_val = a[1];\n          var b_val = b[1];\n\n          if (a_val < b_val) {\n            return -1;\n          } else if (a_val > b_val) {\n            return 1;\n          } // @todo If a and b are equally weighted, add our own weight based on something like the key locations on this language's default keyboard.\n\n\n          return b[0].localeCompare(a[0]);\n        }\n\n        sorted_corrections.sort(sorter).reverse();\n        var rv = [];\n        var capitalization_scheme = \"lowercase\";\n\n        if (word.toUpperCase() === word) {\n          capitalization_scheme = \"uppercase\";\n        } else if (word.substr(0, 1).toUpperCase() + word.substr(1).toLowerCase() === word) {\n          capitalization_scheme = \"capitalized\";\n        }\n\n        var working_limit = limit;\n\n        for (i = 0; i < Math.min(working_limit, sorted_corrections.length); i++) {\n          if (\"uppercase\" === capitalization_scheme) {\n            sorted_corrections[i][0] = sorted_corrections[i][0].toUpperCase();\n          } else if (\"capitalized\" === capitalization_scheme) {\n            sorted_corrections[i][0] = sorted_corrections[i][0].substr(0, 1).toUpperCase() + sorted_corrections[i][0].substr(1);\n          }\n\n          if (!self.hasFlag(sorted_corrections[i][0], \"NOSUGGEST\") && rv.indexOf(sorted_corrections[i][0]) == -1) {\n            rv.push(sorted_corrections[i][0]);\n          } else {\n            // If one of the corrections is not eligible as a suggestion , make sure we still return the right number of suggestions.\n            working_limit++;\n          }\n        }\n\n        return rv;\n      }\n\n      this.memoized[word] = {\n        'suggestions': correct(word),\n        'limit': limit\n      };\n      return this.memoized[word]['suggestions'];\n    }\n  };\n})(); // Support for use as a node.js module.\n\n\nif (typeof module !== 'undefined') {\n  module.exports = Typo;\n}","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { getTodayTime, getMonthName } from '../util/index';\nvar ROW = 4;\nvar COL = 3;\n\nfunction chooseMonth(month) {\n  var next = this.state.value.clone();\n  next.month(month);\n  this.setAndSelectValue(next);\n}\n\nfunction noop() {}\n\nvar MonthTable = function (_Component) {\n  _inherits(MonthTable, _Component);\n\n  function MonthTable(props) {\n    _classCallCheck(this, MonthTable);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.state = {\n      value: props.value\n    };\n    return _this;\n  }\n\n  MonthTable.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if ('value' in nextProps) {\n      this.setState({\n        value: nextProps.value\n      });\n    }\n  };\n\n  MonthTable.prototype.setAndSelectValue = function setAndSelectValue(value) {\n    this.setState({\n      value: value\n    });\n    this.props.onSelect(value);\n  };\n\n  MonthTable.prototype.months = function months() {\n    var value = this.state.value;\n    var current = value.clone();\n    var months = [];\n    var index = 0;\n\n    for (var rowIndex = 0; rowIndex < ROW; rowIndex++) {\n      months[rowIndex] = [];\n\n      for (var colIndex = 0; colIndex < COL; colIndex++) {\n        current.month(index);\n        var content = getMonthName(current);\n        months[rowIndex][colIndex] = {\n          value: index,\n          content: content,\n          title: content\n        };\n        index++;\n      }\n    }\n\n    return months;\n  };\n\n  MonthTable.prototype.render = function render() {\n    var _this2 = this;\n\n    var props = this.props;\n    var value = this.state.value;\n    var today = getTodayTime(value);\n    var months = this.months();\n    var currentMonth = value.month();\n    var prefixCls = props.prefixCls,\n        locale = props.locale,\n        contentRender = props.contentRender,\n        cellRender = props.cellRender;\n    var monthsEls = months.map(function (month, index) {\n      var tds = month.map(function (monthData) {\n        var _classNameMap;\n\n        var disabled = false;\n\n        if (props.disabledDate) {\n          var testValue = value.clone();\n          testValue.month(monthData.value);\n          disabled = props.disabledDate(testValue);\n        }\n\n        var classNameMap = (_classNameMap = {}, _classNameMap[prefixCls + '-cell'] = 1, _classNameMap[prefixCls + '-cell-disabled'] = disabled, _classNameMap[prefixCls + '-selected-cell'] = monthData.value === currentMonth, _classNameMap[prefixCls + '-current-cell'] = today.year() === value.year() && monthData.value === today.month(), _classNameMap);\n        var cellEl = void 0;\n\n        if (cellRender) {\n          var currentValue = value.clone();\n          currentValue.month(monthData.value);\n          cellEl = cellRender(currentValue, locale);\n        } else {\n          var content = void 0;\n\n          if (contentRender) {\n            var _currentValue = value.clone();\n\n            _currentValue.month(monthData.value);\n\n            content = contentRender(_currentValue, locale);\n          } else {\n            content = monthData.content;\n          }\n\n          cellEl = React.createElement('a', {\n            className: prefixCls + '-month'\n          }, content);\n        }\n\n        return React.createElement('td', {\n          role: 'gridcell',\n          key: monthData.value,\n          onClick: disabled ? null : chooseMonth.bind(_this2, monthData.value),\n          title: monthData.title,\n          className: classnames(classNameMap)\n        }, cellEl);\n      });\n      return React.createElement('tr', {\n        key: index,\n        role: 'row'\n      }, tds);\n    });\n    return React.createElement('table', {\n      className: prefixCls + '-table',\n      cellSpacing: '0',\n      role: 'grid'\n    }, React.createElement('tbody', {\n      className: prefixCls + '-tbody'\n    }, monthsEls));\n  };\n\n  return MonthTable;\n}(Component);\n\nMonthTable.defaultProps = {\n  onSelect: noop\n};\nMonthTable.propTypes = {\n  onSelect: PropTypes.func,\n  cellRender: PropTypes.func,\n  prefixCls: PropTypes.string,\n  value: PropTypes.object\n};\nexport default MonthTable;","import React from 'react';\n\nfunction mirror(o) {\n  return o;\n}\n\nexport default function mapSelf(children) {\n  // return ReactFragment\n  return React.Children.map(children, mirror);\n}","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { polyfill } from 'react-lifecycles-compat';\nimport MonthTable from './MonthTable';\n\nfunction goYear(direction) {\n  this.props.changeYear(direction);\n}\n\nfunction noop() {}\n\nvar MonthPanel = function (_React$Component) {\n  _inherits(MonthPanel, _React$Component);\n\n  function MonthPanel(props) {\n    _classCallCheck(this, MonthPanel);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.setAndSelectValue = function (value) {\n      _this.setValue(value);\n\n      _this.props.onSelect(value);\n    };\n\n    _this.setValue = function (value) {\n      if ('value' in _this.props) {\n        _this.setState({\n          value: value\n        });\n      }\n    };\n\n    _this.nextYear = goYear.bind(_this, 1);\n    _this.previousYear = goYear.bind(_this, -1);\n    _this.prefixCls = props.rootPrefixCls + '-month-panel';\n    _this.state = {\n      value: props.value || props.defaultValue\n    };\n    return _this;\n  }\n\n  MonthPanel.getDerivedStateFromProps = function getDerivedStateFromProps(props) {\n    var newState = {};\n\n    if ('value' in props) {\n      newState = {\n        value: props.value\n      };\n    }\n\n    return newState;\n  };\n\n  MonthPanel.prototype.render = function render() {\n    var props = this.props;\n    var value = this.state.value;\n    var locale = props.locale,\n        cellRender = props.cellRender,\n        contentRender = props.contentRender,\n        renderFooter = props.renderFooter;\n    var year = value.year();\n    var prefixCls = this.prefixCls;\n    var footer = renderFooter && renderFooter('month');\n    return React.createElement('div', {\n      className: prefixCls,\n      style: props.style\n    }, React.createElement('div', null, React.createElement('div', {\n      className: prefixCls + '-header'\n    }, React.createElement('a', {\n      className: prefixCls + '-prev-year-btn',\n      role: 'button',\n      onClick: this.previousYear,\n      title: locale.previousYear\n    }), React.createElement('a', {\n      className: prefixCls + '-year-select',\n      role: 'button',\n      onClick: props.onYearPanelShow,\n      title: locale.yearSelect\n    }, React.createElement('span', {\n      className: prefixCls + '-year-select-content'\n    }, year), React.createElement('span', {\n      className: prefixCls + '-year-select-arrow'\n    }, 'x')), React.createElement('a', {\n      className: prefixCls + '-next-year-btn',\n      role: 'button',\n      onClick: this.nextYear,\n      title: locale.nextYear\n    })), React.createElement('div', {\n      className: prefixCls + '-body'\n    }, React.createElement(MonthTable, {\n      disabledDate: props.disabledDate,\n      onSelect: this.setAndSelectValue,\n      locale: locale,\n      value: value,\n      cellRender: cellRender,\n      contentRender: contentRender,\n      prefixCls: prefixCls\n    })), footer && React.createElement('div', {\n      className: prefixCls + '-footer'\n    }, footer)));\n  };\n\n  return MonthPanel;\n}(React.Component);\n\nMonthPanel.propTypes = {\n  onChange: PropTypes.func,\n  disabledDate: PropTypes.func,\n  onSelect: PropTypes.func,\n  renderFooter: PropTypes.func,\n  rootPrefixCls: PropTypes.string,\n  value: PropTypes.object,\n  defaultValue: PropTypes.object\n};\nMonthPanel.defaultProps = {\n  onChange: noop,\n  onSelect: noop\n};\npolyfill(MonthPanel);\nexport default MonthPanel;","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nvar ROW = 4;\nvar COL = 3;\n\nfunction goYear(direction) {\n  var value = this.state.value.clone();\n  value.add(direction, 'year');\n  this.setState({\n    value: value\n  });\n}\n\nfunction chooseYear(year) {\n  var value = this.state.value.clone();\n  value.year(year);\n  value.month(this.state.value.month());\n  this.setState({\n    value: value\n  });\n  this.props.onSelect(value);\n}\n\nvar YearPanel = function (_React$Component) {\n  _inherits(YearPanel, _React$Component);\n\n  function YearPanel(props) {\n    _classCallCheck(this, YearPanel);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.prefixCls = props.rootPrefixCls + '-year-panel';\n    _this.state = {\n      value: props.value || props.defaultValue\n    };\n    _this.nextDecade = goYear.bind(_this, 10);\n    _this.previousDecade = goYear.bind(_this, -10);\n    return _this;\n  }\n\n  YearPanel.prototype.years = function years() {\n    var value = this.state.value;\n    var currentYear = value.year();\n    var startYear = parseInt(currentYear / 10, 10) * 10;\n    var previousYear = startYear - 1;\n    var years = [];\n    var index = 0;\n\n    for (var rowIndex = 0; rowIndex < ROW; rowIndex++) {\n      years[rowIndex] = [];\n\n      for (var colIndex = 0; colIndex < COL; colIndex++) {\n        var year = previousYear + index;\n        var content = String(year);\n        years[rowIndex][colIndex] = {\n          content: content,\n          year: year,\n          title: content\n        };\n        index++;\n      }\n    }\n\n    return years;\n  };\n\n  YearPanel.prototype.render = function render() {\n    var _this2 = this;\n\n    var props = this.props;\n    var value = this.state.value;\n    var locale = props.locale,\n        renderFooter = props.renderFooter;\n    var years = this.years();\n    var currentYear = value.year();\n    var startYear = parseInt(currentYear / 10, 10) * 10;\n    var endYear = startYear + 9;\n    var prefixCls = this.prefixCls;\n    var yeasEls = years.map(function (row, index) {\n      var tds = row.map(function (yearData) {\n        var _classNameMap;\n\n        var classNameMap = (_classNameMap = {}, _classNameMap[prefixCls + '-cell'] = 1, _classNameMap[prefixCls + '-selected-cell'] = yearData.year === currentYear, _classNameMap[prefixCls + '-last-decade-cell'] = yearData.year < startYear, _classNameMap[prefixCls + '-next-decade-cell'] = yearData.year > endYear, _classNameMap);\n        var clickHandler = void 0;\n\n        if (yearData.year < startYear) {\n          clickHandler = _this2.previousDecade;\n        } else if (yearData.year > endYear) {\n          clickHandler = _this2.nextDecade;\n        } else {\n          clickHandler = chooseYear.bind(_this2, yearData.year);\n        }\n\n        return React.createElement('td', {\n          role: 'gridcell',\n          title: yearData.title,\n          key: yearData.content,\n          onClick: clickHandler,\n          className: classnames(classNameMap)\n        }, React.createElement('a', {\n          className: prefixCls + '-year'\n        }, yearData.content));\n      });\n      return React.createElement('tr', {\n        key: index,\n        role: 'row'\n      }, tds);\n    });\n    var footer = renderFooter && renderFooter('year');\n    return React.createElement('div', {\n      className: this.prefixCls\n    }, React.createElement('div', null, React.createElement('div', {\n      className: prefixCls + '-header'\n    }, React.createElement('a', {\n      className: prefixCls + '-prev-decade-btn',\n      role: 'button',\n      onClick: this.previousDecade,\n      title: locale.previousDecade\n    }), React.createElement('a', {\n      className: prefixCls + '-decade-select',\n      role: 'button',\n      onClick: props.onDecadePanelShow,\n      title: locale.decadeSelect\n    }, React.createElement('span', {\n      className: prefixCls + '-decade-select-content'\n    }, startYear, '-', endYear), React.createElement('span', {\n      className: prefixCls + '-decade-select-arrow'\n    }, 'x')), React.createElement('a', {\n      className: prefixCls + '-next-decade-btn',\n      role: 'button',\n      onClick: this.nextDecade,\n      title: locale.nextDecade\n    })), React.createElement('div', {\n      className: prefixCls + '-body'\n    }, React.createElement('table', {\n      className: prefixCls + '-table',\n      cellSpacing: '0',\n      role: 'grid'\n    }, React.createElement('tbody', {\n      className: prefixCls + '-tbody'\n    }, yeasEls))), footer && React.createElement('div', {\n      className: prefixCls + '-footer'\n    }, footer)));\n  };\n\n  return YearPanel;\n}(React.Component);\n\nexport default YearPanel;\nYearPanel.propTypes = {\n  rootPrefixCls: PropTypes.string,\n  value: PropTypes.object,\n  defaultValue: PropTypes.object,\n  renderFooter: PropTypes.func\n};\nYearPanel.defaultProps = {\n  onSelect: function onSelect() {}\n};","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nvar ROW = 4;\nvar COL = 3;\nimport classnames from 'classnames';\n\nfunction goYear(direction) {\n  var next = this.state.value.clone();\n  next.add(direction, 'years');\n  this.setState({\n    value: next\n  });\n}\n\nfunction chooseDecade(year, event) {\n  var next = this.state.value.clone();\n  next.year(year);\n  next.month(this.state.value.month());\n  this.props.onSelect(next);\n  event.preventDefault();\n}\n\nvar DecadePanel = function (_React$Component) {\n  _inherits(DecadePanel, _React$Component);\n\n  function DecadePanel(props) {\n    _classCallCheck(this, DecadePanel);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.state = {\n      value: props.value || props.defaultValue\n    }; // bind methods\n\n    _this.prefixCls = props.rootPrefixCls + '-decade-panel';\n    _this.nextCentury = goYear.bind(_this, 100);\n    _this.previousCentury = goYear.bind(_this, -100);\n    return _this;\n  }\n\n  DecadePanel.prototype.render = function render() {\n    var _this2 = this;\n\n    var value = this.state.value;\n    var _props = this.props,\n        locale = _props.locale,\n        renderFooter = _props.renderFooter;\n    var currentYear = value.year();\n    var startYear = parseInt(currentYear / 100, 10) * 100;\n    var preYear = startYear - 10;\n    var endYear = startYear + 99;\n    var decades = [];\n    var index = 0;\n    var prefixCls = this.prefixCls;\n\n    for (var rowIndex = 0; rowIndex < ROW; rowIndex++) {\n      decades[rowIndex] = [];\n\n      for (var colIndex = 0; colIndex < COL; colIndex++) {\n        var startDecade = preYear + index * 10;\n        var endDecade = preYear + index * 10 + 9;\n        decades[rowIndex][colIndex] = {\n          startDecade: startDecade,\n          endDecade: endDecade\n        };\n        index++;\n      }\n    }\n\n    var footer = renderFooter && renderFooter('decade');\n    var decadesEls = decades.map(function (row, decadeIndex) {\n      var tds = row.map(function (decadeData) {\n        var _classNameMap;\n\n        var dStartDecade = decadeData.startDecade;\n        var dEndDecade = decadeData.endDecade;\n        var isLast = dStartDecade < startYear;\n        var isNext = dEndDecade > endYear;\n        var classNameMap = (_classNameMap = {}, _classNameMap[prefixCls + '-cell'] = 1, _classNameMap[prefixCls + '-selected-cell'] = dStartDecade <= currentYear && currentYear <= dEndDecade, _classNameMap[prefixCls + '-last-century-cell'] = isLast, _classNameMap[prefixCls + '-next-century-cell'] = isNext, _classNameMap);\n        var content = dStartDecade + '-' + dEndDecade;\n        var clickHandler = void 0;\n\n        if (isLast) {\n          clickHandler = _this2.previousCentury;\n        } else if (isNext) {\n          clickHandler = _this2.nextCentury;\n        } else {\n          clickHandler = chooseDecade.bind(_this2, dStartDecade);\n        }\n\n        return React.createElement('td', {\n          key: dStartDecade,\n          onClick: clickHandler,\n          role: 'gridcell',\n          className: classnames(classNameMap)\n        }, React.createElement('a', {\n          className: prefixCls + '-decade'\n        }, content));\n      });\n      return React.createElement('tr', {\n        key: decadeIndex,\n        role: 'row'\n      }, tds);\n    });\n    return React.createElement('div', {\n      className: this.prefixCls\n    }, React.createElement('div', {\n      className: prefixCls + '-header'\n    }, React.createElement('a', {\n      className: prefixCls + '-prev-century-btn',\n      role: 'button',\n      onClick: this.previousCentury,\n      title: locale.previousCentury\n    }), React.createElement('div', {\n      className: prefixCls + '-century'\n    }, startYear, '-', endYear), React.createElement('a', {\n      className: prefixCls + '-next-century-btn',\n      role: 'button',\n      onClick: this.nextCentury,\n      title: locale.nextCentury\n    })), React.createElement('div', {\n      className: prefixCls + '-body'\n    }, React.createElement('table', {\n      className: prefixCls + '-table',\n      cellSpacing: '0',\n      role: 'grid'\n    }, React.createElement('tbody', {\n      className: prefixCls + '-tbody'\n    }, decadesEls))), footer && React.createElement('div', {\n      className: prefixCls + '-footer'\n    }, footer));\n  };\n\n  return DecadePanel;\n}(React.Component);\n\nexport default DecadePanel;\nDecadePanel.propTypes = {\n  locale: PropTypes.object,\n  value: PropTypes.object,\n  defaultValue: PropTypes.object,\n  rootPrefixCls: PropTypes.string,\n  renderFooter: PropTypes.func\n};\nDecadePanel.defaultProps = {\n  onSelect: function onSelect() {}\n};","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport toFragment from 'rc-util/es/Children/mapSelf';\nimport MonthPanel from '../month/MonthPanel';\nimport YearPanel from '../year/YearPanel';\nimport DecadePanel from '../decade/DecadePanel';\n\nfunction goMonth(direction) {\n  var next = this.props.value.clone();\n  next.add(direction, 'months');\n  this.props.onValueChange(next);\n}\n\nfunction goYear(direction) {\n  var next = this.props.value.clone();\n  next.add(direction, 'years');\n  this.props.onValueChange(next);\n}\n\nfunction showIf(condition, el) {\n  return condition ? el : null;\n}\n\nvar CalendarHeader = function (_React$Component) {\n  _inherits(CalendarHeader, _React$Component);\n\n  function CalendarHeader(props) {\n    _classCallCheck(this, CalendarHeader);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.nextMonth = goMonth.bind(_this, 1);\n    _this.previousMonth = goMonth.bind(_this, -1);\n    _this.nextYear = goYear.bind(_this, 1);\n    _this.previousYear = goYear.bind(_this, -1);\n    _this.state = {\n      yearPanelReferer: null\n    };\n    return _this;\n  }\n\n  CalendarHeader.prototype.render = function render() {\n    var _this2 = this;\n\n    var props = this.props;\n    var prefixCls = props.prefixCls,\n        locale = props.locale,\n        mode = props.mode,\n        value = props.value,\n        showTimePicker = props.showTimePicker,\n        enableNext = props.enableNext,\n        enablePrev = props.enablePrev,\n        disabledMonth = props.disabledMonth,\n        renderFooter = props.renderFooter;\n    var panel = null;\n\n    if (mode === 'month') {\n      panel = React.createElement(MonthPanel, {\n        locale: locale,\n        value: value,\n        rootPrefixCls: prefixCls,\n        onSelect: this.onMonthSelect,\n        onYearPanelShow: function onYearPanelShow() {\n          return _this2.showYearPanel('month');\n        },\n        disabledDate: disabledMonth,\n        cellRender: props.monthCellRender,\n        contentRender: props.monthCellContentRender,\n        renderFooter: renderFooter,\n        changeYear: this.changeYear\n      });\n    }\n\n    if (mode === 'year') {\n      panel = React.createElement(YearPanel, {\n        locale: locale,\n        defaultValue: value,\n        rootPrefixCls: prefixCls,\n        onSelect: this.onYearSelect,\n        onDecadePanelShow: this.showDecadePanel,\n        renderFooter: renderFooter\n      });\n    }\n\n    if (mode === 'decade') {\n      panel = React.createElement(DecadePanel, {\n        locale: locale,\n        defaultValue: value,\n        rootPrefixCls: prefixCls,\n        onSelect: this.onDecadeSelect,\n        renderFooter: renderFooter\n      });\n    }\n\n    return React.createElement('div', {\n      className: prefixCls + '-header'\n    }, React.createElement('div', {\n      style: {\n        position: 'relative'\n      }\n    }, showIf(enablePrev && !showTimePicker, React.createElement('a', {\n      className: prefixCls + '-prev-year-btn',\n      role: 'button',\n      onClick: this.previousYear,\n      title: locale.previousYear\n    })), showIf(enablePrev && !showTimePicker, React.createElement('a', {\n      className: prefixCls + '-prev-month-btn',\n      role: 'button',\n      onClick: this.previousMonth,\n      title: locale.previousMonth\n    })), this.monthYearElement(showTimePicker), showIf(enableNext && !showTimePicker, React.createElement('a', {\n      className: prefixCls + '-next-month-btn',\n      onClick: this.nextMonth,\n      title: locale.nextMonth\n    })), showIf(enableNext && !showTimePicker, React.createElement('a', {\n      className: prefixCls + '-next-year-btn',\n      onClick: this.nextYear,\n      title: locale.nextYear\n    }))), panel);\n  };\n\n  return CalendarHeader;\n}(React.Component);\n\nCalendarHeader.propTypes = {\n  prefixCls: PropTypes.string,\n  value: PropTypes.object,\n  onValueChange: PropTypes.func,\n  showTimePicker: PropTypes.bool,\n  onPanelChange: PropTypes.func,\n  locale: PropTypes.object,\n  enablePrev: PropTypes.any,\n  enableNext: PropTypes.any,\n  disabledMonth: PropTypes.func,\n  renderFooter: PropTypes.func,\n  onMonthSelect: PropTypes.func\n};\nCalendarHeader.defaultProps = {\n  enableNext: 1,\n  enablePrev: 1,\n  onPanelChange: function onPanelChange() {},\n  onValueChange: function onValueChange() {}\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onMonthSelect = function (value) {\n    _this3.props.onPanelChange(value, 'date');\n\n    if (_this3.props.onMonthSelect) {\n      _this3.props.onMonthSelect(value);\n    } else {\n      _this3.props.onValueChange(value);\n    }\n  };\n\n  this.onYearSelect = function (value) {\n    var referer = _this3.state.yearPanelReferer;\n\n    _this3.setState({\n      yearPanelReferer: null\n    });\n\n    _this3.props.onPanelChange(value, referer);\n\n    _this3.props.onValueChange(value);\n  };\n\n  this.onDecadeSelect = function (value) {\n    _this3.props.onPanelChange(value, 'year');\n\n    _this3.props.onValueChange(value);\n  };\n\n  this.changeYear = function (direction) {\n    if (direction > 0) {\n      _this3.nextYear();\n    } else {\n      _this3.previousYear();\n    }\n  };\n\n  this.monthYearElement = function (showTimePicker) {\n    var props = _this3.props;\n    var prefixCls = props.prefixCls;\n    var locale = props.locale;\n    var value = props.value;\n    var localeData = value.localeData();\n    var monthBeforeYear = locale.monthBeforeYear;\n    var selectClassName = prefixCls + '-' + (monthBeforeYear ? 'my-select' : 'ym-select');\n    var timeClassName = showTimePicker ? ' ' + prefixCls + '-time-status' : '';\n    var year = React.createElement('a', {\n      className: prefixCls + '-year-select' + timeClassName,\n      role: 'button',\n      onClick: showTimePicker ? null : function () {\n        return _this3.showYearPanel('date');\n      },\n      title: showTimePicker ? null : locale.yearSelect\n    }, value.format(locale.yearFormat));\n    var month = React.createElement('a', {\n      className: prefixCls + '-month-select' + timeClassName,\n      role: 'button',\n      onClick: showTimePicker ? null : _this3.showMonthPanel,\n      title: showTimePicker ? null : locale.monthSelect\n    }, locale.monthFormat ? value.format(locale.monthFormat) : localeData.monthsShort(value));\n    var day = void 0;\n\n    if (showTimePicker) {\n      day = React.createElement('a', {\n        className: prefixCls + '-day-select' + timeClassName,\n        role: 'button'\n      }, value.format(locale.dayFormat));\n    }\n\n    var my = [];\n\n    if (monthBeforeYear) {\n      my = [month, day, year];\n    } else {\n      my = [year, month, day];\n    }\n\n    return React.createElement('span', {\n      className: selectClassName\n    }, toFragment(my));\n  };\n\n  this.showMonthPanel = function () {\n    // null means that users' interaction doesn't change value\n    _this3.props.onPanelChange(null, 'month');\n  };\n\n  this.showYearPanel = function (referer) {\n    _this3.setState({\n      yearPanelReferer: referer\n    });\n\n    _this3.props.onPanelChange(null, 'year');\n  };\n\n  this.showDecadePanel = function () {\n    _this3.props.onPanelChange(null, 'decade');\n  };\n};\n\nexport default CalendarHeader;","import React from 'react';\nimport { getTodayTimeStr, getTodayTime, isAllowedDate } from '../util/';\nexport default function TodayButton(_ref) {\n  var prefixCls = _ref.prefixCls,\n      locale = _ref.locale,\n      value = _ref.value,\n      timePicker = _ref.timePicker,\n      disabled = _ref.disabled,\n      disabledDate = _ref.disabledDate,\n      onToday = _ref.onToday,\n      text = _ref.text;\n  var localeNow = (!text && timePicker ? locale.now : text) || locale.today;\n  var disabledToday = disabledDate && !isAllowedDate(getTodayTime(value), disabledDate);\n  var isDisabled = disabledToday || disabled;\n  var disabledTodayClass = isDisabled ? prefixCls + '-today-btn-disabled' : '';\n  return React.createElement('a', {\n    className: prefixCls + '-today-btn ' + disabledTodayClass,\n    role: 'button',\n    onClick: isDisabled ? null : onToday,\n    title: getTodayTimeStr(value)\n  }, localeNow);\n}","import React from 'react';\nexport default function OkButton(_ref) {\n  var prefixCls = _ref.prefixCls,\n      locale = _ref.locale,\n      okDisabled = _ref.okDisabled,\n      onOk = _ref.onOk;\n  var className = prefixCls + \"-ok-btn\";\n\n  if (okDisabled) {\n    className += \" \" + prefixCls + \"-ok-btn-disabled\";\n  }\n\n  return React.createElement(\"a\", {\n    className: className,\n    role: \"button\",\n    onClick: okDisabled ? null : onOk\n  }, locale.ok);\n}","import React from 'react';\nimport classnames from 'classnames';\nexport default function TimePickerButton(_ref) {\n  var _classnames;\n\n  var prefixCls = _ref.prefixCls,\n      locale = _ref.locale,\n      showTimePicker = _ref.showTimePicker,\n      onOpenTimePicker = _ref.onOpenTimePicker,\n      onCloseTimePicker = _ref.onCloseTimePicker,\n      timePickerDisabled = _ref.timePickerDisabled;\n  var className = classnames((_classnames = {}, _classnames[prefixCls + '-time-picker-btn'] = true, _classnames[prefixCls + '-time-picker-btn-disabled'] = timePickerDisabled, _classnames));\n  var onClick = null;\n\n  if (!timePickerDisabled) {\n    onClick = showTimePicker ? onCloseTimePicker : onOpenTimePicker;\n  }\n\n  return React.createElement('a', {\n    className: className,\n    role: 'button',\n    onClick: onClick\n  }, showTimePicker ? locale.dateSelect : locale.timeSelect);\n}","import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport toFragment from 'rc-util/es/Children/mapSelf';\nimport cx from 'classnames';\nimport TodayButton from '../calendar/TodayButton';\nimport OkButton from '../calendar/OkButton';\nimport TimePickerButton from '../calendar/TimePickerButton';\n\nvar CalendarFooter = function (_React$Component) {\n  _inherits(CalendarFooter, _React$Component);\n\n  function CalendarFooter() {\n    _classCallCheck(this, CalendarFooter);\n\n    return _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n  }\n\n  CalendarFooter.prototype.onSelect = function onSelect(value) {\n    this.props.onSelect(value);\n  };\n\n  CalendarFooter.prototype.getRootDOMNode = function getRootDOMNode() {\n    return ReactDOM.findDOMNode(this);\n  };\n\n  CalendarFooter.prototype.render = function render() {\n    var props = this.props;\n    var value = props.value,\n        prefixCls = props.prefixCls,\n        showOk = props.showOk,\n        timePicker = props.timePicker,\n        renderFooter = props.renderFooter,\n        mode = props.mode;\n    var footerEl = null;\n    var extraFooter = renderFooter && renderFooter(mode);\n\n    if (props.showToday || timePicker || extraFooter) {\n      var _cx;\n\n      var nowEl = void 0;\n\n      if (props.showToday) {\n        nowEl = React.createElement(TodayButton, _extends({}, props, {\n          value: value\n        }));\n      }\n\n      var okBtn = void 0;\n\n      if (showOk === true || showOk !== false && !!props.timePicker) {\n        okBtn = React.createElement(OkButton, props);\n      }\n\n      var timePickerBtn = void 0;\n\n      if (!!props.timePicker) {\n        timePickerBtn = React.createElement(TimePickerButton, props);\n      }\n\n      var footerBtn = void 0;\n\n      if (nowEl || timePickerBtn || okBtn || extraFooter) {\n        footerBtn = React.createElement('span', {\n          className: prefixCls + '-footer-btn'\n        }, extraFooter, toFragment([nowEl, timePickerBtn, okBtn]));\n      }\n\n      var cls = cx(prefixCls + '-footer', (_cx = {}, _cx[prefixCls + '-footer-show-ok'] = okBtn, _cx));\n      footerEl = React.createElement('div', {\n        className: cls\n      }, footerBtn);\n    }\n\n    return footerEl;\n  };\n\n  return CalendarFooter;\n}(React.Component);\n\nCalendarFooter.propTypes = {\n  prefixCls: PropTypes.string,\n  showDateInput: PropTypes.bool,\n  disabledTime: PropTypes.any,\n  timePicker: PropTypes.element,\n  selectedValue: PropTypes.any,\n  showOk: PropTypes.bool,\n  onSelect: PropTypes.func,\n  value: PropTypes.object,\n  renderFooter: PropTypes.func,\n  defaultValue: PropTypes.object,\n  mode: PropTypes.string\n};\nexport default CalendarFooter;","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport { polyfill } from 'react-lifecycles-compat';\nimport moment from 'moment';\nimport { formatDate } from '../util';\nvar cachedSelectionStart = void 0;\nvar cachedSelectionEnd = void 0;\nvar dateInputInstance = void 0;\n\nvar DateInput = function (_React$Component) {\n  _inherits(DateInput, _React$Component);\n\n  function DateInput(props) {\n    _classCallCheck(this, DateInput);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var selectedValue = props.selectedValue;\n    _this.state = {\n      str: formatDate(selectedValue, _this.props.format),\n      invalid: false,\n      hasFocus: false\n    };\n    return _this;\n  }\n\n  DateInput.prototype.componentDidUpdate = function componentDidUpdate() {\n    if (dateInputInstance && this.state.hasFocus && !this.state.invalid && !(cachedSelectionStart === 0 && cachedSelectionEnd === 0)) {\n      dateInputInstance.setSelectionRange(cachedSelectionStart, cachedSelectionEnd);\n    }\n  };\n\n  DateInput.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var newState = {};\n\n    if (dateInputInstance) {\n      cachedSelectionStart = dateInputInstance.selectionStart;\n      cachedSelectionEnd = dateInputInstance.selectionEnd;\n    } // when popup show, click body will call this, bug!\n\n\n    var selectedValue = nextProps.selectedValue;\n\n    if (!state.hasFocus) {\n      newState = {\n        str: formatDate(selectedValue, nextProps.format),\n        invalid: false\n      };\n    }\n\n    return newState;\n  };\n\n  DateInput.getInstance = function getInstance() {\n    return dateInputInstance;\n  };\n\n  DateInput.prototype.render = function render() {\n    var props = this.props;\n    var _state = this.state,\n        invalid = _state.invalid,\n        str = _state.str;\n    var locale = props.locale,\n        prefixCls = props.prefixCls,\n        placeholder = props.placeholder,\n        clearIcon = props.clearIcon,\n        inputMode = props.inputMode;\n    var invalidClass = invalid ? prefixCls + '-input-invalid' : '';\n    return React.createElement('div', {\n      className: prefixCls + '-input-wrap'\n    }, React.createElement('div', {\n      className: prefixCls + '-date-input-wrap'\n    }, React.createElement('input', {\n      ref: this.saveDateInput,\n      className: prefixCls + '-input ' + invalidClass,\n      value: str,\n      disabled: props.disabled,\n      placeholder: placeholder,\n      onChange: this.onInputChange,\n      onKeyDown: this.onKeyDown,\n      onFocus: this.onFocus,\n      onBlur: this.onBlur,\n      inputMode: inputMode\n    })), props.showClear ? React.createElement('a', {\n      role: 'button',\n      title: locale.clear,\n      onClick: this.onClear\n    }, clearIcon || React.createElement('span', {\n      className: prefixCls + '-clear-btn'\n    })) : null);\n  };\n\n  return DateInput;\n}(React.Component);\n\nDateInput.propTypes = {\n  prefixCls: PropTypes.string,\n  timePicker: PropTypes.object,\n  value: PropTypes.object,\n  disabledTime: PropTypes.any,\n  format: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  locale: PropTypes.object,\n  disabledDate: PropTypes.func,\n  onChange: PropTypes.func,\n  onClear: PropTypes.func,\n  placeholder: PropTypes.string,\n  onSelect: PropTypes.func,\n  selectedValue: PropTypes.object,\n  clearIcon: PropTypes.node,\n  inputMode: PropTypes.string\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onClear = function () {\n    _this2.setState({\n      str: ''\n    });\n\n    _this2.props.onClear(null);\n  };\n\n  this.onInputChange = function (event) {\n    var str = event.target.value;\n    var _props = _this2.props,\n        disabledDate = _props.disabledDate,\n        format = _props.format,\n        onChange = _props.onChange,\n        selectedValue = _props.selectedValue; // 没有内容，合法并直接退出\n\n    if (!str) {\n      onChange(null);\n\n      _this2.setState({\n        invalid: false,\n        str: str\n      });\n\n      return;\n    } // 不合法直接退出\n\n\n    var parsed = moment(str, format, true);\n\n    if (!parsed.isValid()) {\n      _this2.setState({\n        invalid: true,\n        str: str\n      });\n\n      return;\n    }\n\n    var value = _this2.props.value.clone();\n\n    value.year(parsed.year()).month(parsed.month()).date(parsed.date()).hour(parsed.hour()).minute(parsed.minute()).second(parsed.second());\n\n    if (!value || disabledDate && disabledDate(value)) {\n      _this2.setState({\n        invalid: true,\n        str: str\n      });\n\n      return;\n    }\n\n    if (selectedValue !== value || selectedValue && value && !selectedValue.isSame(value)) {\n      _this2.setState({\n        invalid: false,\n        str: str\n      });\n\n      onChange(value);\n    }\n  };\n\n  this.onFocus = function () {\n    _this2.setState({\n      hasFocus: true\n    });\n  };\n\n  this.onBlur = function () {\n    _this2.setState(function (prevState, prevProps) {\n      return {\n        hasFocus: false,\n        str: formatDate(prevProps.value, prevProps.format)\n      };\n    });\n  };\n\n  this.onKeyDown = function (event) {\n    var keyCode = event.keyCode;\n    var _props2 = _this2.props,\n        onSelect = _props2.onSelect,\n        value = _props2.value,\n        disabledDate = _props2.disabledDate;\n\n    if (keyCode === KeyCode.ENTER && onSelect) {\n      var validateDate = !disabledDate || !disabledDate(value);\n\n      if (validateDate) {\n        onSelect(value.clone());\n      }\n\n      event.preventDefault();\n    }\n  };\n\n  this.getRootDOMNode = function () {\n    return ReactDOM.findDOMNode(_this2);\n  };\n\n  this.focus = function () {\n    if (dateInputInstance) {\n      dateInputInstance.focus();\n    }\n  };\n\n  this.saveDateInput = function (dateInput) {\n    dateInputInstance = dateInput;\n  };\n};\n\npolyfill(DateInput);\nexport default DateInput;","export function goStartMonth(time) {\n  return time.clone().startOf('month');\n}\nexport function goEndMonth(time) {\n  return time.clone().endOf('month');\n}\nexport function goTime(time, direction, unit) {\n  return time.clone().add(direction, unit);\n}\nexport function includesTime() {\n  var timeList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var time = arguments[1];\n  var unit = arguments[2];\n  return timeList.some(function (t) {\n    return t.isSame(time, unit);\n  });\n}","import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport { polyfill } from 'react-lifecycles-compat';\nimport DateTable from './date/DateTable';\nimport CalendarHeader from './calendar/CalendarHeader';\nimport CalendarFooter from './calendar/CalendarFooter';\nimport { calendarMixinWrapper, calendarMixinPropTypes, calendarMixinDefaultProps, getNowByCurrentStateValue } from './mixin/CalendarMixin';\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\nimport DateInput from './date/DateInput';\nimport { getTimeConfig, getTodayTime, syncTime } from './util';\nimport { goStartMonth, goEndMonth, goTime } from './util/toTime';\nimport moment from 'moment';\n\nfunction noop() {}\n\nvar getMomentObjectIfValid = function getMomentObjectIfValid(date) {\n  if (moment.isMoment(date) && date.isValid()) {\n    return date;\n  }\n\n  return false;\n};\n\nvar Calendar = function (_React$Component) {\n  _inherits(Calendar, _React$Component);\n\n  function Calendar(props) {\n    _classCallCheck(this, Calendar);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      mode: _this.props.mode || 'date',\n      value: getMomentObjectIfValid(props.value) || getMomentObjectIfValid(props.defaultValue) || moment(),\n      selectedValue: props.selectedValue || props.defaultSelectedValue\n    };\n    return _this;\n  }\n\n  Calendar.prototype.componentDidMount = function componentDidMount() {\n    if (this.props.showDateInput) {\n      this.saveFocusElement(DateInput.getInstance());\n    }\n  };\n\n  Calendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var value = nextProps.value,\n        selectedValue = nextProps.selectedValue;\n    var newState = {};\n\n    if ('mode' in nextProps && state.mode !== nextProps.mode) {\n      newState = {\n        mode: nextProps.mode\n      };\n    }\n\n    if ('value' in nextProps) {\n      newState.value = getMomentObjectIfValid(value) || getMomentObjectIfValid(nextProps.defaultValue) || getNowByCurrentStateValue(state.value);\n    }\n\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = selectedValue;\n    }\n\n    return newState;\n  };\n\n  Calendar.prototype.render = function render() {\n    var props = this.props,\n        state = this.state;\n    var locale = props.locale,\n        prefixCls = props.prefixCls,\n        disabledDate = props.disabledDate,\n        dateInputPlaceholder = props.dateInputPlaceholder,\n        timePicker = props.timePicker,\n        disabledTime = props.disabledTime,\n        clearIcon = props.clearIcon,\n        renderFooter = props.renderFooter,\n        inputMode = props.inputMode,\n        monthCellRender = props.monthCellRender,\n        monthCellContentRender = props.monthCellContentRender;\n    var value = state.value,\n        selectedValue = state.selectedValue,\n        mode = state.mode;\n    var showTimePicker = mode === 'time';\n    var disabledTimeConfig = showTimePicker && disabledTime && timePicker ? getTimeConfig(selectedValue, disabledTime) : null;\n    var timePickerEle = null;\n\n    if (timePicker && showTimePicker) {\n      var timePickerProps = _extends({\n        showHour: true,\n        showSecond: true,\n        showMinute: true\n      }, timePicker.props, disabledTimeConfig, {\n        onChange: this.onDateInputChange,\n        value: selectedValue,\n        disabledTime: disabledTime\n      });\n\n      if (timePicker.props.defaultValue !== undefined) {\n        timePickerProps.defaultOpenValue = timePicker.props.defaultValue;\n      }\n\n      timePickerEle = React.cloneElement(timePicker, timePickerProps);\n    }\n\n    var dateInputElement = props.showDateInput ? React.createElement(DateInput, {\n      format: this.getFormat(),\n      key: 'date-input',\n      value: value,\n      locale: locale,\n      placeholder: dateInputPlaceholder,\n      showClear: true,\n      disabledTime: disabledTime,\n      disabledDate: disabledDate,\n      onClear: this.onClear,\n      prefixCls: prefixCls,\n      selectedValue: selectedValue,\n      onChange: this.onDateInputChange,\n      onSelect: this.onDateInputSelect,\n      clearIcon: clearIcon,\n      inputMode: inputMode\n    }) : null;\n    var children = [];\n\n    if (props.renderSidebar) {\n      children.push(props.renderSidebar());\n    }\n\n    children.push(React.createElement('div', {\n      className: prefixCls + '-panel',\n      key: 'panel'\n    }, dateInputElement, React.createElement('div', {\n      tabIndex: this.props.focusablePanel ? 0 : undefined,\n      className: prefixCls + '-date-panel'\n    }, React.createElement(CalendarHeader, {\n      locale: locale,\n      mode: mode,\n      value: value,\n      onValueChange: this.setValue,\n      onPanelChange: this.onPanelChange,\n      renderFooter: renderFooter,\n      showTimePicker: showTimePicker,\n      prefixCls: prefixCls,\n      monthCellRender: monthCellRender,\n      monthCellContentRender: monthCellContentRender\n    }), timePicker && showTimePicker ? React.createElement('div', {\n      className: prefixCls + '-time-picker'\n    }, React.createElement('div', {\n      className: prefixCls + '-time-picker-panel'\n    }, timePickerEle)) : null, React.createElement('div', {\n      className: prefixCls + '-body'\n    }, React.createElement(DateTable, {\n      locale: locale,\n      value: value,\n      selectedValue: selectedValue,\n      prefixCls: prefixCls,\n      dateRender: props.dateRender,\n      onSelect: this.onDateTableSelect,\n      disabledDate: disabledDate,\n      showWeekNumber: props.showWeekNumber\n    })), React.createElement(CalendarFooter, {\n      showOk: props.showOk,\n      mode: mode,\n      renderFooter: props.renderFooter,\n      locale: locale,\n      prefixCls: prefixCls,\n      showToday: props.showToday,\n      disabledTime: disabledTime,\n      showTimePicker: showTimePicker,\n      showDateInput: props.showDateInput,\n      timePicker: timePicker,\n      selectedValue: selectedValue,\n      value: value,\n      disabledDate: disabledDate,\n      okDisabled: props.showOk !== false && (!selectedValue || !this.isAllowedDate(selectedValue)),\n      onOk: this.onOk,\n      onSelect: this.onSelect,\n      onToday: this.onToday,\n      onOpenTimePicker: this.openTimePicker,\n      onCloseTimePicker: this.closeTimePicker\n    }))));\n    return this.renderRoot({\n      children: children,\n      className: props.showWeekNumber ? prefixCls + '-week-number' : ''\n    });\n  };\n\n  return Calendar;\n}(React.Component);\n\nCalendar.propTypes = _extends({}, calendarMixinPropTypes, propType, {\n  prefixCls: PropTypes.string,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  defaultValue: PropTypes.object,\n  value: PropTypes.object,\n  selectedValue: PropTypes.object,\n  defaultSelectedValue: PropTypes.object,\n  mode: PropTypes.oneOf(['time', 'date', 'month', 'year', 'decade']),\n  locale: PropTypes.object,\n  showDateInput: PropTypes.bool,\n  showWeekNumber: PropTypes.bool,\n  showToday: PropTypes.bool,\n  showOk: PropTypes.bool,\n  onSelect: PropTypes.func,\n  onOk: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  timePicker: PropTypes.element,\n  dateInputPlaceholder: PropTypes.any,\n  onClear: PropTypes.func,\n  onChange: PropTypes.func,\n  onPanelChange: PropTypes.func,\n  disabledDate: PropTypes.func,\n  disabledTime: PropTypes.any,\n  dateRender: PropTypes.func,\n  renderFooter: PropTypes.func,\n  renderSidebar: PropTypes.func,\n  clearIcon: PropTypes.node,\n  focusablePanel: PropTypes.bool,\n  inputMode: PropTypes.string,\n  onBlur: PropTypes.func\n});\nCalendar.defaultProps = _extends({}, calendarMixinDefaultProps, defaultProp, {\n  showToday: true,\n  showDateInput: true,\n  timePicker: null,\n  onOk: noop,\n  onPanelChange: noop,\n  focusablePanel: true\n});\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n\n    if (!('mode' in props)) {\n      _this2.setState({\n        mode: mode\n      });\n    }\n\n    props.onPanelChange(value || state.value, mode);\n  };\n\n  this.onKeyDown = function (event) {\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return undefined;\n    }\n\n    var keyCode = event.keyCode; // mac\n\n    var ctrlKey = event.ctrlKey || event.metaKey;\n    var disabledDate = _this2.props.disabledDate;\n    var value = _this2.state.value;\n\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        _this2.goTime(1, 'weeks');\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.UP:\n        _this2.goTime(-1, 'weeks');\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          _this2.goTime(-1, 'years');\n        } else {\n          _this2.goTime(-1, 'days');\n        }\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          _this2.goTime(1, 'years');\n        } else {\n          _this2.goTime(1, 'days');\n        }\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.HOME:\n        _this2.setValue(goStartMonth(_this2.state.value));\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.END:\n        _this2.setValue(goEndMonth(_this2.state.value));\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.PAGE_DOWN:\n        _this2.goTime(1, 'month');\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.PAGE_UP:\n        _this2.goTime(-1, 'month');\n\n        event.preventDefault();\n        return 1;\n\n      case KeyCode.ENTER:\n        if (!disabledDate || !disabledDate(value)) {\n          _this2.onSelect(value, {\n            source: 'keyboard'\n          });\n        }\n\n        event.preventDefault();\n        return 1;\n\n      default:\n        _this2.props.onKeyDown(event);\n\n        return 1;\n    }\n  };\n\n  this.onClear = function () {\n    _this2.onSelect(null);\n\n    _this2.props.onClear();\n  };\n\n  this.onOk = function () {\n    var selectedValue = _this2.state.selectedValue;\n\n    if (_this2.isAllowedDate(selectedValue)) {\n      _this2.props.onOk(selectedValue);\n    }\n  };\n\n  this.onDateInputChange = function (value) {\n    _this2.onSelect(value, {\n      source: 'dateInput'\n    });\n  };\n\n  this.onDateInputSelect = function (value) {\n    _this2.onSelect(value, {\n      source: 'dateInputSelect'\n    });\n  };\n\n  this.onDateTableSelect = function (value) {\n    var timePicker = _this2.props.timePicker;\n    var selectedValue = _this2.state.selectedValue;\n\n    if (!selectedValue && timePicker) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n\n      if (timePickerDefaultValue) {\n        syncTime(timePickerDefaultValue, value);\n      }\n    }\n\n    _this2.onSelect(value);\n  };\n\n  this.onToday = function () {\n    var value = _this2.state.value;\n    var now = getTodayTime(value);\n\n    _this2.onSelect(now, {\n      source: 'todayButton'\n    });\n  };\n\n  this.onBlur = function (event) {\n    setTimeout(function () {\n      var dateInput = DateInput.getInstance();\n      var rootInstance = _this2.rootInstance;\n\n      if (!rootInstance || rootInstance.contains(document.activeElement) || dateInput && dateInput.contains(document.activeElement)) {\n        // focused element is still part of Calendar\n        return;\n      }\n\n      if (_this2.props.onBlur) {\n        _this2.props.onBlur(event);\n      }\n    }, 0);\n  };\n\n  this.getRootDOMNode = function () {\n    return ReactDOM.findDOMNode(_this2);\n  };\n\n  this.openTimePicker = function () {\n    _this2.onPanelChange(null, 'time');\n  };\n\n  this.closeTimePicker = function () {\n    _this2.onPanelChange(null, 'date');\n  };\n\n  this.goTime = function (direction, unit) {\n    _this2.setValue(goTime(_this2.state.value, direction, unit));\n  };\n};\n\npolyfill(Calendar);\nexport default calendarMixinWrapper(commonMixinWrapper(Calendar));","import Calendar from './Calendar';\nexport default Calendar;","import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport { polyfill } from 'react-lifecycles-compat';\nimport CalendarHeader from './calendar/CalendarHeader';\nimport CalendarFooter from './calendar/CalendarFooter';\nimport { calendarMixinWrapper, calendarMixinPropTypes, calendarMixinDefaultProps } from './mixin/CalendarMixin';\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\nimport moment from 'moment';\n\nvar MonthCalendar = function (_React$Component) {\n  _inherits(MonthCalendar, _React$Component);\n\n  function MonthCalendar(props) {\n    _classCallCheck(this, MonthCalendar);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.onKeyDown = function (event) {\n      var keyCode = event.keyCode;\n      var ctrlKey = event.ctrlKey || event.metaKey;\n      var stateValue = _this.state.value;\n      var disabledDate = _this.props.disabledDate;\n      var value = stateValue;\n\n      switch (keyCode) {\n        case KeyCode.DOWN:\n          value = stateValue.clone();\n          value.add(3, 'months');\n          break;\n\n        case KeyCode.UP:\n          value = stateValue.clone();\n          value.add(-3, 'months');\n          break;\n\n        case KeyCode.LEFT:\n          value = stateValue.clone();\n\n          if (ctrlKey) {\n            value.add(-1, 'years');\n          } else {\n            value.add(-1, 'months');\n          }\n\n          break;\n\n        case KeyCode.RIGHT:\n          value = stateValue.clone();\n\n          if (ctrlKey) {\n            value.add(1, 'years');\n          } else {\n            value.add(1, 'months');\n          }\n\n          break;\n\n        case KeyCode.ENTER:\n          if (!disabledDate || !disabledDate(stateValue)) {\n            _this.onSelect(stateValue);\n          }\n\n          event.preventDefault();\n          return 1;\n\n        default:\n          return undefined;\n      }\n\n      if (value !== stateValue) {\n        _this.setValue(value);\n\n        event.preventDefault();\n        return 1;\n      }\n    };\n\n    _this.handlePanelChange = function (_, mode) {\n      if (mode !== 'date') {\n        _this.setState({\n          mode: mode\n        });\n      }\n    };\n\n    _this.state = {\n      mode: 'month',\n      value: props.value || props.defaultValue || moment(),\n      selectedValue: props.selectedValue || props.defaultSelectedValue\n    };\n    return _this;\n  }\n\n  MonthCalendar.prototype.render = function render() {\n    var props = this.props,\n        state = this.state;\n    var mode = state.mode,\n        value = state.value;\n    var children = React.createElement('div', {\n      className: props.prefixCls + '-month-calendar-content'\n    }, React.createElement('div', {\n      className: props.prefixCls + '-month-header-wrap'\n    }, React.createElement(CalendarHeader, {\n      prefixCls: props.prefixCls,\n      mode: mode,\n      value: value,\n      locale: props.locale,\n      disabledMonth: props.disabledDate,\n      monthCellRender: props.monthCellRender,\n      monthCellContentRender: props.monthCellContentRender,\n      onMonthSelect: this.onSelect,\n      onValueChange: this.setValue,\n      onPanelChange: this.handlePanelChange\n    })), React.createElement(CalendarFooter, {\n      prefixCls: props.prefixCls,\n      renderFooter: props.renderFooter\n    }));\n    return this.renderRoot({\n      className: props.prefixCls + '-month-calendar',\n      children: children\n    });\n  };\n\n  return MonthCalendar;\n}(React.Component);\n\nMonthCalendar.propTypes = _extends({}, calendarMixinPropTypes, propType, {\n  monthCellRender: PropTypes.func,\n  value: PropTypes.object,\n  defaultValue: PropTypes.object,\n  selectedValue: PropTypes.object,\n  defaultSelectedValue: PropTypes.object,\n  disabledDate: PropTypes.func\n});\nMonthCalendar.defaultProps = _extends({}, defaultProp, calendarMixinDefaultProps);\nexport default polyfill(calendarMixinWrapper(commonMixinWrapper(MonthCalendar)));","var autoAdjustOverflow = {\n  adjustX: 1,\n  adjustY: 1\n};\nvar targetOffset = [0, 0];\nvar placements = {\n  bottomLeft: {\n    points: ['tl', 'tl'],\n    overflow: autoAdjustOverflow,\n    offset: [0, -3],\n    targetOffset: targetOffset\n  },\n  bottomRight: {\n    points: ['tr', 'tr'],\n    overflow: autoAdjustOverflow,\n    offset: [0, -3],\n    targetOffset: targetOffset\n  },\n  topRight: {\n    points: ['br', 'br'],\n    overflow: autoAdjustOverflow,\n    offset: [0, 3],\n    targetOffset: targetOffset\n  },\n  topLeft: {\n    points: ['bl', 'bl'],\n    overflow: autoAdjustOverflow,\n    offset: [0, 3],\n    targetOffset: targetOffset\n  }\n};\nexport default placements;","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { polyfill } from 'react-lifecycles-compat';\nimport createChainedFunction from 'rc-util/es/createChainedFunction';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport placements from './picker/placements';\nimport Trigger from 'rc-trigger';\n\nfunction noop() {}\n\nfunction refFn(field, component) {\n  this[field] = component;\n}\n\nvar Picker = function (_React$Component) {\n  _inherits(Picker, _React$Component);\n\n  function Picker(props) {\n    _classCallCheck(this, Picker);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var open = void 0;\n\n    if ('open' in props) {\n      open = props.open;\n    } else {\n      open = props.defaultOpen;\n    }\n\n    var value = props.value || props.defaultValue;\n    _this.saveCalendarRef = refFn.bind(_this, 'calendarInstance');\n    _this.state = {\n      open: open,\n      value: value\n    };\n    return _this;\n  }\n\n  Picker.prototype.componentDidUpdate = function componentDidUpdate(_, prevState) {\n    if (!prevState.open && this.state.open) {\n      // setTimeout is for making sure saveCalendarRef happen before focusCalendar\n      this.focusTimeout = setTimeout(this.focusCalendar, 0, this);\n    }\n  };\n\n  Picker.prototype.componentWillUnmount = function componentWillUnmount() {\n    clearTimeout(this.focusTimeout);\n  };\n\n  Picker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps) {\n    var newState = {};\n    var value = nextProps.value,\n        open = nextProps.open;\n\n    if ('value' in nextProps) {\n      newState.value = value;\n    }\n\n    if (open !== undefined) {\n      newState.open = open;\n    }\n\n    return newState;\n  };\n\n  Picker.prototype.render = function render() {\n    var props = this.props;\n    var prefixCls = props.prefixCls,\n        placement = props.placement,\n        style = props.style,\n        getCalendarContainer = props.getCalendarContainer,\n        align = props.align,\n        animation = props.animation,\n        disabled = props.disabled,\n        dropdownClassName = props.dropdownClassName,\n        transitionName = props.transitionName,\n        children = props.children;\n    var state = this.state;\n    return React.createElement(Trigger, {\n      popup: this.getCalendarElement(),\n      popupAlign: align,\n      builtinPlacements: placements,\n      popupPlacement: placement,\n      action: disabled && !state.open ? [] : ['click'],\n      destroyPopupOnHide: true,\n      getPopupContainer: getCalendarContainer,\n      popupStyle: style,\n      popupAnimation: animation,\n      popupTransitionName: transitionName,\n      popupVisible: state.open,\n      onPopupVisibleChange: this.onVisibleChange,\n      prefixCls: prefixCls,\n      popupClassName: dropdownClassName\n    }, React.cloneElement(children(state, props), {\n      onKeyDown: this.onKeyDown\n    }));\n  };\n\n  return Picker;\n}(React.Component);\n\nPicker.propTypes = {\n  animation: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  disabled: PropTypes.bool,\n  transitionName: PropTypes.string,\n  onChange: PropTypes.func,\n  onOpenChange: PropTypes.func,\n  children: PropTypes.func,\n  getCalendarContainer: PropTypes.func,\n  calendar: PropTypes.element,\n  style: PropTypes.object,\n  open: PropTypes.bool,\n  defaultOpen: PropTypes.bool,\n  prefixCls: PropTypes.string,\n  placement: PropTypes.any,\n  value: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  defaultValue: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  align: PropTypes.object,\n  dateRender: PropTypes.func,\n  onBlur: PropTypes.func\n};\nPicker.defaultProps = {\n  prefixCls: 'rc-calendar-picker',\n  style: {},\n  align: {},\n  placement: 'bottomLeft',\n  defaultOpen: false,\n  onChange: noop,\n  onOpenChange: noop,\n  onBlur: noop\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onCalendarKeyDown = function (event) {\n    if (event.keyCode === KeyCode.ESC) {\n      event.stopPropagation();\n\n      _this2.close(_this2.focus);\n    }\n  };\n\n  this.onCalendarSelect = function (value) {\n    var cause = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var props = _this2.props;\n\n    if (!('value' in props)) {\n      _this2.setState({\n        value: value\n      });\n    }\n\n    if (cause.source === 'keyboard' || cause.source === 'dateInputSelect' || !props.calendar.props.timePicker && cause.source !== 'dateInput' || cause.source === 'todayButton') {\n      _this2.close(_this2.focus);\n    }\n\n    props.onChange(value);\n  };\n\n  this.onKeyDown = function (event) {\n    if (!_this2.state.open && (event.keyCode === KeyCode.DOWN || event.keyCode === KeyCode.ENTER)) {\n      _this2.open();\n\n      event.preventDefault();\n    }\n  };\n\n  this.onCalendarOk = function () {\n    _this2.close(_this2.focus);\n  };\n\n  this.onCalendarClear = function () {\n    _this2.close(_this2.focus);\n  };\n\n  this.onCalendarBlur = function () {\n    _this2.setOpen(false);\n  };\n\n  this.onVisibleChange = function (open) {\n    _this2.setOpen(open);\n  };\n\n  this.getCalendarElement = function () {\n    var props = _this2.props;\n    var state = _this2.state;\n    var calendarProps = props.calendar.props;\n    var value = state.value;\n    var defaultValue = value;\n    var extraProps = {\n      ref: _this2.saveCalendarRef,\n      defaultValue: defaultValue || calendarProps.defaultValue,\n      selectedValue: value,\n      onKeyDown: _this2.onCalendarKeyDown,\n      onOk: createChainedFunction(calendarProps.onOk, _this2.onCalendarOk),\n      onSelect: createChainedFunction(calendarProps.onSelect, _this2.onCalendarSelect),\n      onClear: createChainedFunction(calendarProps.onClear, _this2.onCalendarClear),\n      onBlur: createChainedFunction(calendarProps.onBlur, _this2.onCalendarBlur)\n    };\n    return React.cloneElement(props.calendar, extraProps);\n  };\n\n  this.setOpen = function (open, callback) {\n    var onOpenChange = _this2.props.onOpenChange;\n\n    if (_this2.state.open !== open) {\n      if (!('open' in _this2.props)) {\n        _this2.setState({\n          open: open\n        }, callback);\n      }\n\n      onOpenChange(open);\n    }\n  };\n\n  this.open = function (callback) {\n    _this2.setOpen(true, callback);\n  };\n\n  this.close = function (callback) {\n    _this2.setOpen(false, callback);\n  };\n\n  this.focus = function () {\n    if (!_this2.state.open) {\n      ReactDOM.findDOMNode(_this2).focus();\n    }\n  };\n\n  this.focusCalendar = function () {\n    if (_this2.state.open && !!_this2.calendarInstance) {\n      _this2.calendarInstance.focus();\n    }\n  };\n};\n\npolyfill(Picker);\nexport default Picker;","// https://github.com/moment/moment/issues/3650\n// since we are using ts 3.5.1, it should be safe to remove.\nexport default function interopDefault(m) {\n  return m[\"default\"] || m;\n}","// eslint-disable-next-line import/prefer-default-export\nexport function formatDate(value, format) {\n  if (!value) {\n    return '';\n  }\n\n  if (Array.isArray(format)) {\n    format = format[0];\n  }\n\n  return value.format(format);\n}","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport * as moment from 'moment';\nimport { polyfill } from 'react-lifecycles-compat';\nimport MonthCalendar from \"rc-calendar/es/MonthCalendar\";\nimport RcDatePicker from \"rc-calendar/es/Picker\";\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport Icon from '../icon';\nimport { ConfigConsumer } from '../config-provider';\nimport warning from '../_util/warning';\nimport interopDefault from '../_util/interopDefault';\nimport getDataOrAriaProps from '../_util/getDataOrAriaProps';\nimport { formatDate } from './utils';\nexport default function createPicker(TheCalendar) {\n  var CalenderWrapper =\n  /*#__PURE__*/\n  function (_React$Component) {\n    _inherits(CalenderWrapper, _React$Component);\n\n    function CalenderWrapper(props) {\n      var _this;\n\n      _classCallCheck(this, CalenderWrapper);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(CalenderWrapper).call(this, props));\n\n      _this.saveInput = function (node) {\n        _this.input = node;\n      };\n\n      _this.clearSelection = function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        _this.handleChange(null);\n      };\n\n      _this.handleChange = function (value) {\n        var _assertThisInitialize = _assertThisInitialized(_this),\n            props = _assertThisInitialize.props;\n\n        if (!('value' in props)) {\n          _this.setState({\n            value: value,\n            showDate: value\n          });\n        }\n\n        props.onChange(value, formatDate(value, props.format));\n      };\n\n      _this.handleCalendarChange = function (value) {\n        _this.setState({\n          showDate: value\n        });\n      };\n\n      _this.handleOpenChange = function (open) {\n        var onOpenChange = _this.props.onOpenChange;\n\n        if (!('open' in _this.props)) {\n          _this.setState({\n            open: open\n          });\n        }\n\n        if (onOpenChange) {\n          onOpenChange(open);\n        }\n      };\n\n      _this.renderFooter = function () {\n        var renderExtraFooter = _this.props.renderExtraFooter;\n\n        var _assertThisInitialize2 = _assertThisInitialized(_this),\n            prefixCls = _assertThisInitialize2.prefixCls;\n\n        return renderExtraFooter ? React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-footer-extra\")\n        }, renderExtraFooter.apply(void 0, arguments)) : null;\n      };\n\n      _this.renderPicker = function (_ref) {\n        var _classNames, _classNames2;\n\n        var getPrefixCls = _ref.getPrefixCls;\n        var _this$state = _this.state,\n            value = _this$state.value,\n            showDate = _this$state.showDate,\n            open = _this$state.open;\n        var props = omit(_this.props, ['onChange']);\n        var customizePrefixCls = props.prefixCls,\n            locale = props.locale,\n            localeCode = props.localeCode,\n            suffixIcon = props.suffixIcon;\n        var prefixCls = getPrefixCls('calendar', customizePrefixCls); // To support old version react.\n        // Have to add prefixCls on the instance.\n        // https://github.com/facebook/react/issues/12397\n\n        _this.prefixCls = prefixCls;\n        var placeholder = 'placeholder' in props ? props.placeholder : locale.lang.placeholder;\n        var disabledTime = props.showTime ? props.disabledTime : null;\n        var calendarClassName = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-time\"), props.showTime), _defineProperty(_classNames, \"\".concat(prefixCls, \"-month\"), MonthCalendar === TheCalendar), _classNames));\n\n        if (value && localeCode) {\n          value.locale(localeCode);\n        }\n\n        var pickerProps = {};\n        var calendarProps = {};\n        var pickerStyle = {};\n\n        if (props.showTime) {\n          calendarProps = {\n            // fix https://github.com/ant-design/ant-design/issues/1902\n            onSelect: _this.handleChange\n          };\n          pickerStyle.minWidth = 195;\n        } else {\n          pickerProps = {\n            onChange: _this.handleChange\n          };\n        }\n\n        if ('mode' in props) {\n          calendarProps.mode = props.mode;\n        }\n\n        warning(!('onOK' in props), 'DatePicker', 'It should be `DatePicker[onOk]` or `MonthPicker[onOk]`, instead of `onOK`!');\n        var calendar = React.createElement(TheCalendar, _extends({}, calendarProps, {\n          disabledDate: props.disabledDate,\n          disabledTime: disabledTime,\n          locale: locale.lang,\n          timePicker: props.timePicker,\n          defaultValue: props.defaultPickerValue || interopDefault(moment)(),\n          dateInputPlaceholder: placeholder,\n          prefixCls: prefixCls,\n          className: calendarClassName,\n          onOk: props.onOk,\n          dateRender: props.dateRender,\n          format: props.format,\n          showToday: props.showToday,\n          monthCellContentRender: props.monthCellContentRender,\n          renderFooter: _this.renderFooter,\n          onPanelChange: props.onPanelChange,\n          onChange: _this.handleCalendarChange,\n          value: showDate\n        }));\n        var clearIcon = !props.disabled && props.allowClear && value ? React.createElement(Icon, {\n          type: \"close-circle\",\n          className: \"\".concat(prefixCls, \"-picker-clear\"),\n          onClick: _this.clearSelection,\n          theme: \"filled\"\n        }) : null;\n        var inputIcon = suffixIcon && (React.isValidElement(suffixIcon) ? React.cloneElement(suffixIcon, {\n          className: classNames((_classNames2 = {}, _defineProperty(_classNames2, suffixIcon.props.className, suffixIcon.props.className), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-picker-icon\"), true), _classNames2))\n        }) : React.createElement(\"span\", {\n          className: \"\".concat(prefixCls, \"-picker-icon\")\n        }, suffixIcon)) || React.createElement(Icon, {\n          type: \"calendar\",\n          className: \"\".concat(prefixCls, \"-picker-icon\")\n        });\n        var dataOrAriaProps = getDataOrAriaProps(props);\n\n        var input = function input(_ref2) {\n          var inputValue = _ref2.value;\n          return React.createElement(\"div\", null, React.createElement(\"input\", _extends({\n            ref: _this.saveInput,\n            disabled: props.disabled,\n            readOnly: true,\n            value: formatDate(inputValue, props.format),\n            placeholder: placeholder,\n            className: props.pickerInputClass,\n            tabIndex: props.tabIndex,\n            name: props.name\n          }, dataOrAriaProps)), clearIcon, inputIcon);\n        };\n\n        return React.createElement(\"span\", {\n          id: props.id,\n          className: classNames(props.className, props.pickerClass),\n          style: _extends(_extends({}, pickerStyle), props.style),\n          onFocus: props.onFocus,\n          onBlur: props.onBlur,\n          onMouseEnter: props.onMouseEnter,\n          onMouseLeave: props.onMouseLeave\n        }, React.createElement(RcDatePicker, _extends({}, props, pickerProps, {\n          calendar: calendar,\n          value: value,\n          prefixCls: \"\".concat(prefixCls, \"-picker-container\"),\n          style: props.popupStyle,\n          open: open,\n          onOpenChange: _this.handleOpenChange\n        }), input));\n      };\n\n      var value = props.value || props.defaultValue;\n\n      if (value && !interopDefault(moment).isMoment(value)) {\n        throw new Error('The value/defaultValue of DatePicker or MonthPicker must be ' + 'a moment object after `antd@2.0`, see: https://u.ant.design/date-picker-value');\n      }\n\n      _this.state = {\n        value: value,\n        showDate: value,\n        open: false\n      };\n      return _this;\n    }\n\n    _createClass(CalenderWrapper, [{\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(_, prevState) {\n        if (!('open' in this.props) && prevState.open && !this.state.open) {\n          this.focus();\n        }\n      }\n    }, {\n      key: \"focus\",\n      value: function focus() {\n        this.input.focus();\n      }\n    }, {\n      key: \"blur\",\n      value: function blur() {\n        this.input.blur();\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return React.createElement(ConfigConsumer, null, this.renderPicker);\n      }\n    }], [{\n      key: \"getDerivedStateFromProps\",\n      value: function getDerivedStateFromProps(nextProps, prevState) {\n        var state = {};\n        var open = prevState.open;\n\n        if ('open' in nextProps) {\n          state.open = nextProps.open;\n          open = nextProps.open || false;\n        }\n\n        if ('value' in nextProps) {\n          state.value = nextProps.value;\n\n          if (nextProps.value !== prevState.value || !open && nextProps.value !== prevState.showDate) {\n            state.showDate = nextProps.value;\n          }\n        }\n\n        return Object.keys(state).length > 0 ? state : null;\n      }\n    }]);\n\n    return CalenderWrapper;\n  }(React.Component);\n\n  CalenderWrapper.defaultProps = {\n    allowClear: true,\n    showToday: true\n  };\n  polyfill(CalenderWrapper);\n  return CalenderWrapper;\n}","export default function getDataOrAriaProps(props) {\n  return Object.keys(props).reduce(function (prev, key) {\n    if ((key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role') && key.substr(0, 7) !== 'data-__') {\n      prev[key] = props[key];\n    }\n\n    return prev;\n  }, {});\n}","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classNames from 'classnames';\n\nvar Header =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Header, _Component);\n\n  function Header(props) {\n    var _this;\n\n    _classCallCheck(this, Header);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Header).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onInputChange\", function (event) {\n      var str = event.target.value;\n\n      _this.setState({\n        str: str\n      });\n\n      var _this$props = _this.props,\n          format = _this$props.format,\n          hourOptions = _this$props.hourOptions,\n          minuteOptions = _this$props.minuteOptions,\n          secondOptions = _this$props.secondOptions,\n          disabledHours = _this$props.disabledHours,\n          disabledMinutes = _this$props.disabledMinutes,\n          disabledSeconds = _this$props.disabledSeconds,\n          onChange = _this$props.onChange;\n\n      if (str) {\n        var originalValue = _this.props.value;\n\n        var value = _this.getProtoValue().clone();\n\n        var parsed = moment(str, format, true);\n\n        if (!parsed.isValid()) {\n          _this.setState({\n            invalid: true\n          });\n\n          return;\n        }\n\n        value.hour(parsed.hour()).minute(parsed.minute()).second(parsed.second()); // if time value not allowed, response warning.\n\n        if (hourOptions.indexOf(value.hour()) < 0 || minuteOptions.indexOf(value.minute()) < 0 || secondOptions.indexOf(value.second()) < 0) {\n          _this.setState({\n            invalid: true\n          });\n\n          return;\n        } // if time value is disabled, response warning.\n\n\n        var disabledHourOptions = disabledHours();\n        var disabledMinuteOptions = disabledMinutes(value.hour());\n        var disabledSecondOptions = disabledSeconds(value.hour(), value.minute());\n\n        if (disabledHourOptions && disabledHourOptions.indexOf(value.hour()) >= 0 || disabledMinuteOptions && disabledMinuteOptions.indexOf(value.minute()) >= 0 || disabledSecondOptions && disabledSecondOptions.indexOf(value.second()) >= 0) {\n          _this.setState({\n            invalid: true\n          });\n\n          return;\n        }\n\n        if (originalValue) {\n          if (originalValue.hour() !== value.hour() || originalValue.minute() !== value.minute() || originalValue.second() !== value.second()) {\n            // keep other fields for rc-calendar\n            var changedValue = originalValue.clone();\n            changedValue.hour(value.hour());\n            changedValue.minute(value.minute());\n            changedValue.second(value.second());\n            onChange(changedValue);\n          }\n        } else if (originalValue !== value) {\n          onChange(value);\n        }\n      } else {\n        onChange(null);\n      }\n\n      _this.setState({\n        invalid: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (e) {\n      var _this$props2 = _this.props,\n          onEsc = _this$props2.onEsc,\n          onKeyDown = _this$props2.onKeyDown;\n\n      if (e.keyCode === 27) {\n        onEsc();\n      }\n\n      onKeyDown(e);\n    });\n\n    var _value = props.value,\n        _format = props.format;\n    _this.state = {\n      str: _value && _value.format(_format) || '',\n      invalid: false\n    };\n    return _this;\n  }\n\n  _createClass(Header, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var focusOnOpen = this.props.focusOnOpen;\n\n      if (focusOnOpen) {\n        // Wait one frame for the panel to be positioned before focusing\n        var requestAnimationFrame = window.requestAnimationFrame || window.setTimeout;\n        requestAnimationFrame(function () {\n          _this2.refInput.focus();\n\n          _this2.refInput.select();\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props3 = this.props,\n          value = _this$props3.value,\n          format = _this$props3.format;\n\n      if (value !== prevProps.value) {\n        // eslint-disable-next-line react/no-did-update-set-state\n        this.setState({\n          str: value && value.format(format) || '',\n          invalid: false\n        });\n      }\n    }\n  }, {\n    key: \"getProtoValue\",\n    value: function getProtoValue() {\n      var _this$props4 = this.props,\n          value = _this$props4.value,\n          defaultOpenValue = _this$props4.defaultOpenValue;\n      return value || defaultOpenValue;\n    }\n  }, {\n    key: \"getInput\",\n    value: function getInput() {\n      var _this3 = this;\n\n      var _this$props5 = this.props,\n          prefixCls = _this$props5.prefixCls,\n          placeholder = _this$props5.placeholder,\n          inputReadOnly = _this$props5.inputReadOnly;\n      var _this$state = this.state,\n          invalid = _this$state.invalid,\n          str = _this$state.str;\n      var invalidClass = invalid ? \"\".concat(prefixCls, \"-input-invalid\") : '';\n      return React.createElement(\"input\", {\n        className: classNames(\"\".concat(prefixCls, \"-input\"), invalidClass),\n        ref: function ref(_ref) {\n          _this3.refInput = _ref;\n        },\n        onKeyDown: this.onKeyDown,\n        value: str,\n        placeholder: placeholder,\n        onChange: this.onInputChange,\n        readOnly: !!inputReadOnly\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var prefixCls = this.props.prefixCls;\n      return React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-input-wrap\")\n      }, this.getInput());\n    }\n  }]);\n\n  return Header;\n}(Component);\n\n_defineProperty(Header, \"propTypes\", {\n  format: PropTypes.string,\n  prefixCls: PropTypes.string,\n  disabledDate: PropTypes.func,\n  placeholder: PropTypes.string,\n  clearText: PropTypes.string,\n  value: PropTypes.object,\n  inputReadOnly: PropTypes.bool,\n  hourOptions: PropTypes.array,\n  minuteOptions: PropTypes.array,\n  secondOptions: PropTypes.array,\n  disabledHours: PropTypes.func,\n  disabledMinutes: PropTypes.func,\n  disabledSeconds: PropTypes.func,\n  onChange: PropTypes.func,\n  onEsc: PropTypes.func,\n  defaultOpenValue: PropTypes.object,\n  currentSelectPanel: PropTypes.string,\n  focusOnOpen: PropTypes.bool,\n  onKeyDown: PropTypes.func,\n  clearIcon: PropTypes.node\n});\n\n_defineProperty(Header, \"defaultProps\", {\n  inputReadOnly: false\n});\n\nexport default Header;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/* eslint jsx-a11y/no-noninteractive-element-to-interactive-role: 0 */\n\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDom from 'react-dom';\nimport classNames from 'classnames';\nimport raf from 'raf';\n\nvar scrollTo = function scrollTo(element, to, duration) {\n  // jump to target if duration zero\n  if (duration <= 0) {\n    raf(function () {\n      element.scrollTop = to;\n    });\n    return;\n  }\n\n  var difference = to - element.scrollTop;\n  var perTick = difference / duration * 10;\n  raf(function () {\n    element.scrollTop += perTick;\n    if (element.scrollTop === to) return;\n    scrollTo(element, to, duration - 10);\n  });\n};\n\nvar Select =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Select, _Component);\n\n  function Select() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Select)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      active: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelect\", function (value) {\n      var _this$props = _this.props,\n          onSelect = _this$props.onSelect,\n          type = _this$props.type;\n      onSelect(type, value);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseEnter\", function (e) {\n      var onMouseEnter = _this.props.onMouseEnter;\n\n      _this.setState({\n        active: true\n      });\n\n      onMouseEnter(e);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseLeave\", function () {\n      _this.setState({\n        active: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"saveList\", function (node) {\n      _this.list = node;\n    });\n\n    return _this;\n  }\n\n  _createClass(Select, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // jump to selected option\n      this.scrollToSelected(0);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var selectedIndex = this.props.selectedIndex; // smooth scroll to selected option\n\n      if (prevProps.selectedIndex !== selectedIndex) {\n        this.scrollToSelected(120);\n      }\n    }\n  }, {\n    key: \"getOptions\",\n    value: function getOptions() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          options = _this$props2.options,\n          selectedIndex = _this$props2.selectedIndex,\n          prefixCls = _this$props2.prefixCls,\n          onEsc = _this$props2.onEsc;\n      return options.map(function (item, index) {\n        var _classNames;\n\n        var cls = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-select-option-selected\"), selectedIndex === index), _defineProperty(_classNames, \"\".concat(prefixCls, \"-select-option-disabled\"), item.disabled), _classNames));\n        var onClick = item.disabled ? undefined : function () {\n          _this2.onSelect(item.value);\n        };\n\n        var onKeyDown = function onKeyDown(e) {\n          if (e.keyCode === 13) onClick();else if (e.keyCode === 27) onEsc();\n        };\n\n        return React.createElement(\"li\", {\n          role: \"button\",\n          onClick: onClick,\n          className: cls,\n          key: index,\n          disabled: item.disabled,\n          tabIndex: \"0\",\n          onKeyDown: onKeyDown\n        }, item.value);\n      });\n    }\n  }, {\n    key: \"scrollToSelected\",\n    value: function scrollToSelected(duration) {\n      // move to selected item\n      var selectedIndex = this.props.selectedIndex;\n      var select = ReactDom.findDOMNode(this);\n      var list = ReactDom.findDOMNode(this.list);\n\n      if (!list) {\n        return;\n      }\n\n      var index = selectedIndex;\n\n      if (index < 0) {\n        index = 0;\n      }\n\n      var topOption = list.children[index];\n      var to = topOption.offsetTop;\n      scrollTo(select, to, duration);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          prefixCls = _this$props3.prefixCls,\n          options = _this$props3.options;\n      var active = this.state.active;\n\n      if (options.length === 0) {\n        return null;\n      }\n\n      var cls = classNames(\"\".concat(prefixCls, \"-select\"), _defineProperty({}, \"\".concat(prefixCls, \"-select-active\"), active));\n      return React.createElement(\"div\", {\n        className: cls,\n        onMouseEnter: this.handleMouseEnter,\n        onMouseLeave: this.handleMouseLeave\n      }, React.createElement(\"ul\", {\n        ref: this.saveList\n      }, this.getOptions()));\n    }\n  }]);\n\n  return Select;\n}(Component);\n\n_defineProperty(Select, \"propTypes\", {\n  prefixCls: PropTypes.string,\n  options: PropTypes.array,\n  selectedIndex: PropTypes.number,\n  type: PropTypes.string,\n  onSelect: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  onEsc: PropTypes.func\n});\n\nexport default Select;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Select from './Select';\n\nvar formatOption = function formatOption(option, disabledOptions) {\n  var value = \"\".concat(option);\n\n  if (option < 10) {\n    value = \"0\".concat(option);\n  }\n\n  var disabled = false;\n\n  if (disabledOptions && disabledOptions.indexOf(option) >= 0) {\n    disabled = true;\n  }\n\n  return {\n    value: value,\n    disabled: disabled\n  };\n};\n\nvar Combobox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Combobox, _Component);\n\n  function Combobox() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Combobox);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Combobox)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"onItemChange\", function (type, itemValue) {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          defaultOpenValue = _this$props.defaultOpenValue,\n          use12Hours = _this$props.use12Hours,\n          propValue = _this$props.value,\n          isAM = _this$props.isAM,\n          onAmPmChange = _this$props.onAmPmChange;\n      var value = (propValue || defaultOpenValue).clone();\n\n      if (type === 'hour') {\n        if (use12Hours) {\n          if (isAM) {\n            value.hour(+itemValue % 12);\n          } else {\n            value.hour(+itemValue % 12 + 12);\n          }\n        } else {\n          value.hour(+itemValue);\n        }\n      } else if (type === 'minute') {\n        value.minute(+itemValue);\n      } else if (type === 'ampm') {\n        var ampm = itemValue.toUpperCase();\n\n        if (use12Hours) {\n          if (ampm === 'PM' && value.hour() < 12) {\n            value.hour(value.hour() % 12 + 12);\n          }\n\n          if (ampm === 'AM') {\n            if (value.hour() >= 12) {\n              value.hour(value.hour() - 12);\n            }\n          }\n        }\n\n        onAmPmChange(ampm);\n      } else {\n        value.second(+itemValue);\n      }\n\n      onChange(value);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEnterSelectPanel\", function (range) {\n      var onCurrentSelectPanelChange = _this.props.onCurrentSelectPanelChange;\n      onCurrentSelectPanelChange(range);\n    });\n\n    return _this;\n  }\n\n  _createClass(Combobox, [{\n    key: \"getHourSelect\",\n    value: function getHourSelect(hour) {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          prefixCls = _this$props2.prefixCls,\n          hourOptions = _this$props2.hourOptions,\n          disabledHours = _this$props2.disabledHours,\n          showHour = _this$props2.showHour,\n          use12Hours = _this$props2.use12Hours,\n          onEsc = _this$props2.onEsc;\n\n      if (!showHour) {\n        return null;\n      }\n\n      var disabledOptions = disabledHours();\n      var hourOptionsAdj;\n      var hourAdj;\n\n      if (use12Hours) {\n        hourOptionsAdj = [12].concat(hourOptions.filter(function (h) {\n          return h < 12 && h > 0;\n        }));\n        hourAdj = hour % 12 || 12;\n      } else {\n        hourOptionsAdj = hourOptions;\n        hourAdj = hour;\n      }\n\n      return React.createElement(Select, {\n        prefixCls: prefixCls,\n        options: hourOptionsAdj.map(function (option) {\n          return formatOption(option, disabledOptions);\n        }),\n        selectedIndex: hourOptionsAdj.indexOf(hourAdj),\n        type: \"hour\",\n        onSelect: this.onItemChange,\n        onMouseEnter: function onMouseEnter() {\n          return _this2.onEnterSelectPanel('hour');\n        },\n        onEsc: onEsc\n      });\n    }\n  }, {\n    key: \"getMinuteSelect\",\n    value: function getMinuteSelect(minute) {\n      var _this3 = this;\n\n      var _this$props3 = this.props,\n          prefixCls = _this$props3.prefixCls,\n          minuteOptions = _this$props3.minuteOptions,\n          disabledMinutes = _this$props3.disabledMinutes,\n          defaultOpenValue = _this$props3.defaultOpenValue,\n          showMinute = _this$props3.showMinute,\n          propValue = _this$props3.value,\n          onEsc = _this$props3.onEsc;\n\n      if (!showMinute) {\n        return null;\n      }\n\n      var value = propValue || defaultOpenValue;\n      var disabledOptions = disabledMinutes(value.hour());\n      return React.createElement(Select, {\n        prefixCls: prefixCls,\n        options: minuteOptions.map(function (option) {\n          return formatOption(option, disabledOptions);\n        }),\n        selectedIndex: minuteOptions.indexOf(minute),\n        type: \"minute\",\n        onSelect: this.onItemChange,\n        onMouseEnter: function onMouseEnter() {\n          return _this3.onEnterSelectPanel('minute');\n        },\n        onEsc: onEsc\n      });\n    }\n  }, {\n    key: \"getSecondSelect\",\n    value: function getSecondSelect(second) {\n      var _this4 = this;\n\n      var _this$props4 = this.props,\n          prefixCls = _this$props4.prefixCls,\n          secondOptions = _this$props4.secondOptions,\n          disabledSeconds = _this$props4.disabledSeconds,\n          showSecond = _this$props4.showSecond,\n          defaultOpenValue = _this$props4.defaultOpenValue,\n          propValue = _this$props4.value,\n          onEsc = _this$props4.onEsc;\n\n      if (!showSecond) {\n        return null;\n      }\n\n      var value = propValue || defaultOpenValue;\n      var disabledOptions = disabledSeconds(value.hour(), value.minute());\n      return React.createElement(Select, {\n        prefixCls: prefixCls,\n        options: secondOptions.map(function (option) {\n          return formatOption(option, disabledOptions);\n        }),\n        selectedIndex: secondOptions.indexOf(second),\n        type: \"second\",\n        onSelect: this.onItemChange,\n        onMouseEnter: function onMouseEnter() {\n          return _this4.onEnterSelectPanel('second');\n        },\n        onEsc: onEsc\n      });\n    }\n  }, {\n    key: \"getAMPMSelect\",\n    value: function getAMPMSelect() {\n      var _this5 = this;\n\n      var _this$props5 = this.props,\n          prefixCls = _this$props5.prefixCls,\n          use12Hours = _this$props5.use12Hours,\n          format = _this$props5.format,\n          isAM = _this$props5.isAM,\n          onEsc = _this$props5.onEsc;\n\n      if (!use12Hours) {\n        return null;\n      }\n\n      var AMPMOptions = ['am', 'pm'] // If format has A char, then we should uppercase AM/PM\n      .map(function (c) {\n        return format.match(/\\sA/) ? c.toUpperCase() : c;\n      }).map(function (c) {\n        return {\n          value: c\n        };\n      });\n      var selected = isAM ? 0 : 1;\n      return React.createElement(Select, {\n        prefixCls: prefixCls,\n        options: AMPMOptions,\n        selectedIndex: selected,\n        type: \"ampm\",\n        onSelect: this.onItemChange,\n        onMouseEnter: function onMouseEnter() {\n          return _this5.onEnterSelectPanel('ampm');\n        },\n        onEsc: onEsc\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props6 = this.props,\n          prefixCls = _this$props6.prefixCls,\n          defaultOpenValue = _this$props6.defaultOpenValue,\n          propValue = _this$props6.value;\n      var value = propValue || defaultOpenValue;\n      return React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-combobox\")\n      }, this.getHourSelect(value.hour()), this.getMinuteSelect(value.minute()), this.getSecondSelect(value.second()), this.getAMPMSelect(value.hour()));\n    }\n  }]);\n\n  return Combobox;\n}(Component);\n\n_defineProperty(Combobox, \"propTypes\", {\n  format: PropTypes.string,\n  defaultOpenValue: PropTypes.object,\n  prefixCls: PropTypes.string,\n  value: PropTypes.object,\n  onChange: PropTypes.func,\n  onAmPmChange: PropTypes.func,\n  showHour: PropTypes.bool,\n  showMinute: PropTypes.bool,\n  showSecond: PropTypes.bool,\n  hourOptions: PropTypes.array,\n  minuteOptions: PropTypes.array,\n  secondOptions: PropTypes.array,\n  disabledHours: PropTypes.func,\n  disabledMinutes: PropTypes.func,\n  disabledSeconds: PropTypes.func,\n  onCurrentSelectPanelChange: PropTypes.func,\n  use12Hours: PropTypes.bool,\n  onEsc: PropTypes.func,\n  isAM: PropTypes.bool\n});\n\nexport default Combobox;","function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classNames from 'classnames';\nimport { polyfill } from 'react-lifecycles-compat';\nimport Header from './Header';\nimport Combobox from './Combobox';\n\nfunction noop() {}\n\nfunction generateOptions(length, disabledOptions, hideDisabledOptions) {\n  var step = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  var arr = [];\n\n  for (var value = 0; value < length; value += step) {\n    if (!disabledOptions || disabledOptions.indexOf(value) < 0 || !hideDisabledOptions) {\n      arr.push(value);\n    }\n  }\n\n  return arr;\n}\n\nfunction toNearestValidTime(time, hourOptions, minuteOptions, secondOptions) {\n  var hour = hourOptions.slice().sort(function (a, b) {\n    return Math.abs(time.hour() - a) - Math.abs(time.hour() - b);\n  })[0];\n  var minute = minuteOptions.slice().sort(function (a, b) {\n    return Math.abs(time.minute() - a) - Math.abs(time.minute() - b);\n  })[0];\n  var second = secondOptions.slice().sort(function (a, b) {\n    return Math.abs(time.second() - a) - Math.abs(time.second() - b);\n  })[0];\n  return moment(\"\".concat(hour, \":\").concat(minute, \":\").concat(second), 'HH:mm:ss');\n}\n\nvar Panel =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Panel, _Component);\n\n  function Panel() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Panel);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Panel)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (newValue) {\n      var onChange = _this.props.onChange;\n\n      _this.setState({\n        value: newValue\n      });\n\n      onChange(newValue);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAmPmChange\", function (ampm) {\n      var onAmPmChange = _this.props.onAmPmChange;\n      onAmPmChange(ampm);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCurrentSelectPanelChange\", function (currentSelectPanel) {\n      _this.setState({\n        currentSelectPanel: currentSelectPanel\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"disabledHours\", function () {\n      var _this$props = _this.props,\n          use12Hours = _this$props.use12Hours,\n          disabledHours = _this$props.disabledHours;\n      var disabledOptions = disabledHours();\n\n      if (use12Hours && Array.isArray(disabledOptions)) {\n        if (_this.isAM()) {\n          disabledOptions = disabledOptions.filter(function (h) {\n            return h < 12;\n          }).map(function (h) {\n            return h === 0 ? 12 : h;\n          });\n        } else {\n          disabledOptions = disabledOptions.map(function (h) {\n            return h === 12 ? 12 : h - 12;\n          });\n        }\n      }\n\n      return disabledOptions;\n    });\n\n    return _this;\n  }\n\n  _createClass(Panel, [{\n    key: \"close\",\n    // https://github.com/ant-design/ant-design/issues/5829\n    value: function close() {\n      var onEsc = this.props.onEsc;\n      onEsc();\n    }\n  }, {\n    key: \"isAM\",\n    value: function isAM() {\n      var defaultOpenValue = this.props.defaultOpenValue;\n      var value = this.state.value;\n      var realValue = value || defaultOpenValue;\n      return realValue.hour() >= 0 && realValue.hour() < 12;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          prefixCls = _this$props2.prefixCls,\n          className = _this$props2.className,\n          placeholder = _this$props2.placeholder,\n          disabledMinutes = _this$props2.disabledMinutes,\n          disabledSeconds = _this$props2.disabledSeconds,\n          hideDisabledOptions = _this$props2.hideDisabledOptions,\n          showHour = _this$props2.showHour,\n          showMinute = _this$props2.showMinute,\n          showSecond = _this$props2.showSecond,\n          format = _this$props2.format,\n          defaultOpenValue = _this$props2.defaultOpenValue,\n          clearText = _this$props2.clearText,\n          onEsc = _this$props2.onEsc,\n          addon = _this$props2.addon,\n          use12Hours = _this$props2.use12Hours,\n          focusOnOpen = _this$props2.focusOnOpen,\n          onKeyDown = _this$props2.onKeyDown,\n          hourStep = _this$props2.hourStep,\n          minuteStep = _this$props2.minuteStep,\n          secondStep = _this$props2.secondStep,\n          inputReadOnly = _this$props2.inputReadOnly,\n          clearIcon = _this$props2.clearIcon;\n      var _this$state = this.state,\n          value = _this$state.value,\n          currentSelectPanel = _this$state.currentSelectPanel;\n      var disabledHourOptions = this.disabledHours();\n      var disabledMinuteOptions = disabledMinutes(value ? value.hour() : null);\n      var disabledSecondOptions = disabledSeconds(value ? value.hour() : null, value ? value.minute() : null);\n      var hourOptions = generateOptions(24, disabledHourOptions, hideDisabledOptions, hourStep);\n      var minuteOptions = generateOptions(60, disabledMinuteOptions, hideDisabledOptions, minuteStep);\n      var secondOptions = generateOptions(60, disabledSecondOptions, hideDisabledOptions, secondStep);\n      var validDefaultOpenValue = toNearestValidTime(defaultOpenValue, hourOptions, minuteOptions, secondOptions);\n      return React.createElement(\"div\", {\n        className: classNames(className, \"\".concat(prefixCls, \"-inner\"))\n      }, React.createElement(Header, {\n        clearText: clearText,\n        prefixCls: prefixCls,\n        defaultOpenValue: validDefaultOpenValue,\n        value: value,\n        currentSelectPanel: currentSelectPanel,\n        onEsc: onEsc,\n        format: format,\n        placeholder: placeholder,\n        hourOptions: hourOptions,\n        minuteOptions: minuteOptions,\n        secondOptions: secondOptions,\n        disabledHours: this.disabledHours,\n        disabledMinutes: disabledMinutes,\n        disabledSeconds: disabledSeconds,\n        onChange: this.onChange,\n        focusOnOpen: focusOnOpen,\n        onKeyDown: onKeyDown,\n        inputReadOnly: inputReadOnly,\n        clearIcon: clearIcon\n      }), React.createElement(Combobox, {\n        prefixCls: prefixCls,\n        value: value,\n        defaultOpenValue: validDefaultOpenValue,\n        format: format,\n        onChange: this.onChange,\n        onAmPmChange: this.onAmPmChange,\n        showHour: showHour,\n        showMinute: showMinute,\n        showSecond: showSecond,\n        hourOptions: hourOptions,\n        minuteOptions: minuteOptions,\n        secondOptions: secondOptions,\n        disabledHours: this.disabledHours,\n        disabledMinutes: disabledMinutes,\n        disabledSeconds: disabledSeconds,\n        onCurrentSelectPanelChange: this.onCurrentSelectPanelChange,\n        use12Hours: use12Hours,\n        onEsc: onEsc,\n        isAM: this.isAM()\n      }), addon(this));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if ('value' in props) {\n        return _objectSpread({}, state, {\n          value: props.value\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return Panel;\n}(Component);\n\n_defineProperty(Panel, \"propTypes\", {\n  clearText: PropTypes.string,\n  prefixCls: PropTypes.string,\n  className: PropTypes.string,\n  defaultOpenValue: PropTypes.object,\n  value: PropTypes.object,\n  placeholder: PropTypes.string,\n  format: PropTypes.string,\n  inputReadOnly: PropTypes.bool,\n  disabledHours: PropTypes.func,\n  disabledMinutes: PropTypes.func,\n  disabledSeconds: PropTypes.func,\n  hideDisabledOptions: PropTypes.bool,\n  onChange: PropTypes.func,\n  onAmPmChange: PropTypes.func,\n  onEsc: PropTypes.func,\n  showHour: PropTypes.bool,\n  showMinute: PropTypes.bool,\n  showSecond: PropTypes.bool,\n  use12Hours: PropTypes.bool,\n  hourStep: PropTypes.number,\n  minuteStep: PropTypes.number,\n  secondStep: PropTypes.number,\n  addon: PropTypes.func,\n  focusOnOpen: PropTypes.bool,\n  onKeyDown: PropTypes.func,\n  clearIcon: PropTypes.node\n});\n\n_defineProperty(Panel, \"defaultProps\", {\n  prefixCls: 'rc-time-picker-panel',\n  onChange: noop,\n  disabledHours: noop,\n  disabledMinutes: noop,\n  disabledSeconds: noop,\n  defaultOpenValue: moment(),\n  use12Hours: false,\n  addon: noop,\n  onKeyDown: noop,\n  onAmPmChange: noop,\n  inputReadOnly: false\n});\n\npolyfill(Panel);\nexport default Panel;","var autoAdjustOverflow = {\n  adjustX: 1,\n  adjustY: 1\n};\nvar targetOffset = [0, 0];\nvar placements = {\n  bottomLeft: {\n    points: ['tl', 'tl'],\n    overflow: autoAdjustOverflow,\n    offset: [0, -3],\n    targetOffset: targetOffset\n  },\n  bottomRight: {\n    points: ['tr', 'tr'],\n    overflow: autoAdjustOverflow,\n    offset: [0, -3],\n    targetOffset: targetOffset\n  },\n  topRight: {\n    points: ['br', 'br'],\n    overflow: autoAdjustOverflow,\n    offset: [0, 3],\n    targetOffset: targetOffset\n  },\n  topLeft: {\n    points: ['bl', 'bl'],\n    overflow: autoAdjustOverflow,\n    offset: [0, 3],\n    targetOffset: targetOffset\n  }\n};\nexport default placements;","function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/* eslint jsx-a11y/no-autofocus: 0 */\n\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Trigger from 'rc-trigger';\nimport moment from 'moment';\nimport { polyfill } from 'react-lifecycles-compat';\nimport classNames from 'classnames';\nimport Panel from './Panel';\nimport placements from './placements';\n\nfunction noop() {}\n\nfunction refFn(field, component) {\n  this[field] = component;\n}\n\nvar Picker =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Picker, _Component);\n\n  function Picker(props) {\n    var _this;\n\n    _classCallCheck(this, Picker);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Picker).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onPanelChange\", function (value) {\n      _this.setValue(value);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAmPmChange\", function (ampm) {\n      var onAmPmChange = _this.props.onAmPmChange;\n      onAmPmChange(ampm);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClear\", function (event) {\n      event.stopPropagation();\n\n      _this.setValue(null);\n\n      _this.setOpen(false);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onVisibleChange\", function (open) {\n      _this.setOpen(open);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEsc\", function () {\n      _this.setOpen(false);\n\n      _this.focus();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (e) {\n      if (e.keyCode === 40) {\n        _this.setOpen(true);\n      }\n    });\n\n    _this.saveInputRef = refFn.bind(_assertThisInitialized(_this), 'picker');\n    _this.savePanelRef = refFn.bind(_assertThisInitialized(_this), 'panelInstance');\n\n    var defaultOpen = props.defaultOpen,\n        defaultValue = props.defaultValue,\n        _props$open = props.open,\n        _open = _props$open === void 0 ? defaultOpen : _props$open,\n        _props$value = props.value,\n        _value = _props$value === void 0 ? defaultValue : _props$value;\n\n    _this.state = {\n      open: _open,\n      value: _value\n    };\n    return _this;\n  }\n\n  _createClass(Picker, [{\n    key: \"setValue\",\n    value: function setValue(value) {\n      var onChange = this.props.onChange;\n\n      if (!('value' in this.props)) {\n        this.setState({\n          value: value\n        });\n      }\n\n      onChange(value);\n    }\n  }, {\n    key: \"getFormat\",\n    value: function getFormat() {\n      var _this$props = this.props,\n          format = _this$props.format,\n          showHour = _this$props.showHour,\n          showMinute = _this$props.showMinute,\n          showSecond = _this$props.showSecond,\n          use12Hours = _this$props.use12Hours;\n\n      if (format) {\n        return format;\n      }\n\n      if (use12Hours) {\n        var fmtString = [showHour ? 'h' : '', showMinute ? 'mm' : '', showSecond ? 'ss' : ''].filter(function (item) {\n          return !!item;\n        }).join(':');\n        return fmtString.concat(' a');\n      }\n\n      return [showHour ? 'HH' : '', showMinute ? 'mm' : '', showSecond ? 'ss' : ''].filter(function (item) {\n        return !!item;\n      }).join(':');\n    }\n  }, {\n    key: \"getPanelElement\",\n    value: function getPanelElement() {\n      var _this$props2 = this.props,\n          prefixCls = _this$props2.prefixCls,\n          placeholder = _this$props2.placeholder,\n          disabledHours = _this$props2.disabledHours,\n          disabledMinutes = _this$props2.disabledMinutes,\n          disabledSeconds = _this$props2.disabledSeconds,\n          hideDisabledOptions = _this$props2.hideDisabledOptions,\n          inputReadOnly = _this$props2.inputReadOnly,\n          showHour = _this$props2.showHour,\n          showMinute = _this$props2.showMinute,\n          showSecond = _this$props2.showSecond,\n          defaultOpenValue = _this$props2.defaultOpenValue,\n          clearText = _this$props2.clearText,\n          addon = _this$props2.addon,\n          use12Hours = _this$props2.use12Hours,\n          focusOnOpen = _this$props2.focusOnOpen,\n          onKeyDown = _this$props2.onKeyDown,\n          hourStep = _this$props2.hourStep,\n          minuteStep = _this$props2.minuteStep,\n          secondStep = _this$props2.secondStep,\n          clearIcon = _this$props2.clearIcon;\n      var value = this.state.value;\n      return React.createElement(Panel, {\n        clearText: clearText,\n        prefixCls: \"\".concat(prefixCls, \"-panel\"),\n        ref: this.savePanelRef,\n        value: value,\n        inputReadOnly: inputReadOnly,\n        onChange: this.onPanelChange,\n        onAmPmChange: this.onAmPmChange,\n        defaultOpenValue: defaultOpenValue,\n        showHour: showHour,\n        showMinute: showMinute,\n        showSecond: showSecond,\n        onEsc: this.onEsc,\n        format: this.getFormat(),\n        placeholder: placeholder,\n        disabledHours: disabledHours,\n        disabledMinutes: disabledMinutes,\n        disabledSeconds: disabledSeconds,\n        hideDisabledOptions: hideDisabledOptions,\n        use12Hours: use12Hours,\n        hourStep: hourStep,\n        minuteStep: minuteStep,\n        secondStep: secondStep,\n        addon: addon,\n        focusOnOpen: focusOnOpen,\n        onKeyDown: onKeyDown,\n        clearIcon: clearIcon\n      });\n    }\n  }, {\n    key: \"getPopupClassName\",\n    value: function getPopupClassName() {\n      var _this$props3 = this.props,\n          showHour = _this$props3.showHour,\n          showMinute = _this$props3.showMinute,\n          showSecond = _this$props3.showSecond,\n          use12Hours = _this$props3.use12Hours,\n          prefixCls = _this$props3.prefixCls,\n          popupClassName = _this$props3.popupClassName;\n      var selectColumnCount = 0;\n\n      if (showHour) {\n        selectColumnCount += 1;\n      }\n\n      if (showMinute) {\n        selectColumnCount += 1;\n      }\n\n      if (showSecond) {\n        selectColumnCount += 1;\n      }\n\n      if (use12Hours) {\n        selectColumnCount += 1;\n      } // Keep it for old compatibility\n\n\n      return classNames(popupClassName, _defineProperty({}, \"\".concat(prefixCls, \"-panel-narrow\"), (!showHour || !showMinute || !showSecond) && !use12Hours), \"\".concat(prefixCls, \"-panel-column-\").concat(selectColumnCount));\n    }\n  }, {\n    key: \"setOpen\",\n    value: function setOpen(open) {\n      var _this$props4 = this.props,\n          onOpen = _this$props4.onOpen,\n          onClose = _this$props4.onClose;\n      var currentOpen = this.state.open;\n\n      if (currentOpen !== open) {\n        if (!('open' in this.props)) {\n          this.setState({\n            open: open\n          });\n        }\n\n        if (open) {\n          onOpen({\n            open: open\n          });\n        } else {\n          onClose({\n            open: open\n          });\n        }\n      }\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.picker.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.picker.blur();\n    }\n  }, {\n    key: \"renderClearButton\",\n    value: function renderClearButton() {\n      var _this2 = this;\n\n      var value = this.state.value;\n      var _this$props5 = this.props,\n          prefixCls = _this$props5.prefixCls,\n          allowEmpty = _this$props5.allowEmpty,\n          clearIcon = _this$props5.clearIcon,\n          clearText = _this$props5.clearText,\n          disabled = _this$props5.disabled;\n\n      if (!allowEmpty || !value || disabled) {\n        return null;\n      }\n\n      if (React.isValidElement(clearIcon)) {\n        var _ref = clearIcon.props || {},\n            _onClick = _ref.onClick;\n\n        return React.cloneElement(clearIcon, {\n          onClick: function onClick() {\n            if (_onClick) _onClick.apply(void 0, arguments);\n\n            _this2.onClear.apply(_this2, arguments);\n          }\n        });\n      }\n\n      return React.createElement(\"a\", {\n        role: \"button\",\n        className: \"\".concat(prefixCls, \"-clear\"),\n        title: clearText,\n        onClick: this.onClear,\n        tabIndex: 0\n      }, clearIcon || React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-clear-icon\")\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props6 = this.props,\n          prefixCls = _this$props6.prefixCls,\n          placeholder = _this$props6.placeholder,\n          placement = _this$props6.placement,\n          align = _this$props6.align,\n          id = _this$props6.id,\n          disabled = _this$props6.disabled,\n          transitionName = _this$props6.transitionName,\n          style = _this$props6.style,\n          className = _this$props6.className,\n          getPopupContainer = _this$props6.getPopupContainer,\n          name = _this$props6.name,\n          autoComplete = _this$props6.autoComplete,\n          onFocus = _this$props6.onFocus,\n          onBlur = _this$props6.onBlur,\n          autoFocus = _this$props6.autoFocus,\n          inputReadOnly = _this$props6.inputReadOnly,\n          inputIcon = _this$props6.inputIcon,\n          popupStyle = _this$props6.popupStyle;\n      var _this$state = this.state,\n          open = _this$state.open,\n          value = _this$state.value;\n      var popupClassName = this.getPopupClassName();\n      return React.createElement(Trigger, {\n        prefixCls: \"\".concat(prefixCls, \"-panel\"),\n        popupClassName: popupClassName,\n        popupStyle: popupStyle,\n        popup: this.getPanelElement(),\n        popupAlign: align,\n        builtinPlacements: placements,\n        popupPlacement: placement,\n        action: disabled ? [] : ['click'],\n        destroyPopupOnHide: true,\n        getPopupContainer: getPopupContainer,\n        popupTransitionName: transitionName,\n        popupVisible: open,\n        onPopupVisibleChange: this.onVisibleChange\n      }, React.createElement(\"span\", {\n        className: classNames(prefixCls, className),\n        style: style\n      }, React.createElement(\"input\", {\n        className: \"\".concat(prefixCls, \"-input\"),\n        ref: this.saveInputRef,\n        type: \"text\",\n        placeholder: placeholder,\n        name: name,\n        onKeyDown: this.onKeyDown,\n        disabled: disabled,\n        value: value && value.format(this.getFormat()) || '',\n        autoComplete: autoComplete,\n        onFocus: onFocus,\n        onBlur: onBlur,\n        autoFocus: autoFocus,\n        onChange: noop,\n        readOnly: !!inputReadOnly,\n        id: id\n      }), inputIcon || React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-icon\")\n      }), this.renderClearButton()));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var newState = {};\n\n      if ('value' in props) {\n        newState.value = props.value;\n      }\n\n      if (props.open !== undefined) {\n        newState.open = props.open;\n      }\n\n      return Object.keys(newState).length > 0 ? _objectSpread({}, state, {}, newState) : null;\n    }\n  }]);\n\n  return Picker;\n}(Component);\n\n_defineProperty(Picker, \"propTypes\", {\n  prefixCls: PropTypes.string,\n  clearText: PropTypes.string,\n  value: PropTypes.object,\n  defaultOpenValue: PropTypes.object,\n  inputReadOnly: PropTypes.bool,\n  disabled: PropTypes.bool,\n  allowEmpty: PropTypes.bool,\n  defaultValue: PropTypes.object,\n  open: PropTypes.bool,\n  defaultOpen: PropTypes.bool,\n  align: PropTypes.object,\n  placement: PropTypes.any,\n  transitionName: PropTypes.string,\n  getPopupContainer: PropTypes.func,\n  placeholder: PropTypes.string,\n  format: PropTypes.string,\n  showHour: PropTypes.bool,\n  showMinute: PropTypes.bool,\n  showSecond: PropTypes.bool,\n  style: PropTypes.object,\n  className: PropTypes.string,\n  popupClassName: PropTypes.string,\n  popupStyle: PropTypes.object,\n  disabledHours: PropTypes.func,\n  disabledMinutes: PropTypes.func,\n  disabledSeconds: PropTypes.func,\n  hideDisabledOptions: PropTypes.bool,\n  onChange: PropTypes.func,\n  onAmPmChange: PropTypes.func,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  addon: PropTypes.func,\n  name: PropTypes.string,\n  autoComplete: PropTypes.string,\n  use12Hours: PropTypes.bool,\n  hourStep: PropTypes.number,\n  minuteStep: PropTypes.number,\n  secondStep: PropTypes.number,\n  focusOnOpen: PropTypes.bool,\n  onKeyDown: PropTypes.func,\n  autoFocus: PropTypes.bool,\n  id: PropTypes.string,\n  inputIcon: PropTypes.node,\n  clearIcon: PropTypes.node\n});\n\n_defineProperty(Picker, \"defaultProps\", {\n  clearText: 'clear',\n  prefixCls: 'rc-time-picker',\n  defaultOpen: false,\n  inputReadOnly: false,\n  style: {},\n  className: '',\n  popupClassName: '',\n  popupStyle: {},\n  id: '',\n  align: {},\n  defaultOpenValue: moment(),\n  allowEmpty: true,\n  showHour: true,\n  showMinute: true,\n  showSecond: true,\n  disabledHours: noop,\n  disabledMinutes: noop,\n  disabledSeconds: noop,\n  hideDisabledOptions: false,\n  placement: 'bottomLeft',\n  onChange: noop,\n  onAmPmChange: noop,\n  onOpen: noop,\n  onClose: noop,\n  onFocus: noop,\n  onBlur: noop,\n  addon: noop,\n  use12Hours: false,\n  focusOnOpen: false,\n  onKeyDown: noop\n});\n\npolyfill(Picker);\nexport default Picker;","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport * as moment from 'moment';\nimport omit from 'omit.js';\nimport { polyfill } from 'react-lifecycles-compat';\nimport RcTimePicker from \"rc-time-picker/es/TimePicker\";\nimport classNames from 'classnames';\nimport warning from '../_util/warning';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport { ConfigConsumer } from '../config-provider';\nimport enUS from './locale/en_US';\nimport interopDefault from '../_util/interopDefault';\nimport Icon from '../icon';\nexport function generateShowHourMinuteSecond(format) {\n  // Ref: http://momentjs.com/docs/#/parsing/string-format/\n  return {\n    showHour: format.indexOf('H') > -1 || format.indexOf('h') > -1 || format.indexOf('k') > -1,\n    showMinute: format.indexOf('m') > -1,\n    showSecond: format.indexOf('s') > -1\n  };\n}\n\nvar TimePicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TimePicker, _React$Component);\n\n  function TimePicker(props) {\n    var _this;\n\n    _classCallCheck(this, TimePicker);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TimePicker).call(this, props));\n\n    _this.getDefaultLocale = function () {\n      var defaultLocale = _extends(_extends({}, enUS), _this.props.locale);\n\n      return defaultLocale;\n    };\n\n    _this.handleOpenClose = function (_ref) {\n      var open = _ref.open;\n      var onOpenChange = _this.props.onOpenChange;\n\n      if (onOpenChange) {\n        onOpenChange(open);\n      }\n    };\n\n    _this.saveTimePicker = function (timePickerRef) {\n      _this.timePickerRef = timePickerRef;\n    };\n\n    _this.handleChange = function (value) {\n      if (!('value' in _this.props)) {\n        _this.setState({\n          value: value\n        });\n      }\n\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          _this$props$format = _this$props.format,\n          format = _this$props$format === void 0 ? 'HH:mm:ss' : _this$props$format;\n\n      if (onChange) {\n        onChange(value, value && value.format(format) || '');\n      }\n    };\n\n    _this.renderTimePicker = function (locale) {\n      return React.createElement(ConfigConsumer, null, function (_ref2) {\n        var getContextPopupContainer = _ref2.getPopupContainer,\n            getPrefixCls = _ref2.getPrefixCls;\n\n        var _a = _this.props,\n            getPopupContainer = _a.getPopupContainer,\n            customizePrefixCls = _a.prefixCls,\n            className = _a.className,\n            addon = _a.addon,\n            placeholder = _a.placeholder,\n            props = __rest(_a, [\"getPopupContainer\", \"prefixCls\", \"className\", \"addon\", \"placeholder\"]);\n\n        var size = props.size;\n        var pickerProps = omit(props, ['defaultValue', 'suffixIcon', 'allowEmpty', 'allowClear']);\n\n        var format = _this.getDefaultFormat();\n\n        var prefixCls = getPrefixCls('time-picker', customizePrefixCls);\n        var pickerClassName = classNames(className, _defineProperty({}, \"\".concat(prefixCls, \"-\").concat(size), !!size));\n\n        var pickerAddon = function pickerAddon(panel) {\n          return addon ? React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-panel-addon\")\n          }, addon(panel)) : null;\n        };\n\n        return React.createElement(RcTimePicker, _extends({}, generateShowHourMinuteSecond(format), pickerProps, {\n          allowEmpty: _this.getAllowClear(),\n          prefixCls: prefixCls,\n          getPopupContainer: getPopupContainer || getContextPopupContainer,\n          ref: _this.saveTimePicker,\n          format: format,\n          className: pickerClassName,\n          value: _this.state.value,\n          placeholder: placeholder === undefined ? locale.placeholder : placeholder,\n          onChange: _this.handleChange,\n          onOpen: _this.handleOpenClose,\n          onClose: _this.handleOpenClose,\n          addon: pickerAddon,\n          inputIcon: _this.renderInputIcon(prefixCls),\n          clearIcon: _this.renderClearIcon(prefixCls)\n        }));\n      });\n    };\n\n    var value = props.value || props.defaultValue;\n\n    if (value && !interopDefault(moment).isMoment(value)) {\n      throw new Error('The value/defaultValue of TimePicker must be a moment object after `antd@2.0`, ' + 'see: https://u.ant.design/time-picker-value');\n    }\n\n    _this.state = {\n      value: value\n    };\n    warning(!('allowEmpty' in props), 'TimePicker', '`allowEmpty` is deprecated. Please use `allowClear` instead.');\n    return _this;\n  }\n\n  _createClass(TimePicker, [{\n    key: \"getDefaultFormat\",\n    value: function getDefaultFormat() {\n      var _this$props2 = this.props,\n          format = _this$props2.format,\n          use12Hours = _this$props2.use12Hours;\n\n      if (format) {\n        return format;\n      }\n\n      if (use12Hours) {\n        return 'h:mm:ss a';\n      }\n\n      return 'HH:mm:ss';\n    }\n  }, {\n    key: \"getAllowClear\",\n    value: function getAllowClear() {\n      var _this$props3 = this.props,\n          allowClear = _this$props3.allowClear,\n          allowEmpty = _this$props3.allowEmpty;\n\n      if ('allowClear' in this.props) {\n        return allowClear;\n      }\n\n      return allowEmpty;\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.timePickerRef.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.timePickerRef.blur();\n    }\n  }, {\n    key: \"renderInputIcon\",\n    value: function renderInputIcon(prefixCls) {\n      var suffixIcon = this.props.suffixIcon;\n      var clockIcon = suffixIcon && React.isValidElement(suffixIcon) && React.cloneElement(suffixIcon, {\n        className: classNames(suffixIcon.props.className, \"\".concat(prefixCls, \"-clock-icon\"))\n      }) || React.createElement(Icon, {\n        type: \"clock-circle\",\n        className: \"\".concat(prefixCls, \"-clock-icon\")\n      });\n      return React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-icon\")\n      }, clockIcon);\n    }\n  }, {\n    key: \"renderClearIcon\",\n    value: function renderClearIcon(prefixCls) {\n      var clearIcon = this.props.clearIcon;\n      var clearIconPrefixCls = \"\".concat(prefixCls, \"-clear\");\n\n      if (clearIcon && React.isValidElement(clearIcon)) {\n        return React.cloneElement(clearIcon, {\n          className: classNames(clearIcon.props.className, clearIconPrefixCls)\n        });\n      }\n\n      return React.createElement(Icon, {\n        type: \"close-circle\",\n        className: clearIconPrefixCls,\n        theme: \"filled\"\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(LocaleReceiver, {\n        componentName: \"TimePicker\",\n        defaultLocale: this.getDefaultLocale()\n      }, this.renderTimePicker);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps) {\n      if ('value' in nextProps) {\n        return {\n          value: nextProps.value\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return TimePicker;\n}(React.Component);\n\nTimePicker.defaultProps = {\n  align: {\n    offset: [0, -2]\n  },\n  disabledHours: undefined,\n  disabledMinutes: undefined,\n  disabledSeconds: undefined,\n  hideDisabledOptions: false,\n  placement: 'bottomLeft',\n  transitionName: 'slide-up',\n  focusOnOpen: true\n};\npolyfill(TimePicker);\nexport default TimePicker;","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport TimePickerPanel from \"rc-time-picker/es/Panel\";\nimport classNames from 'classnames';\nimport * as moment from 'moment';\nimport enUS from './locale/en_US';\nimport interopDefault from '../_util/interopDefault';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport { generateShowHourMinuteSecond } from '../time-picker';\nimport { ConfigConsumer } from '../config-provider';\nimport warning from '../_util/warning';\nvar DEFAULT_FORMAT = {\n  date: 'YYYY-MM-DD',\n  dateTime: 'YYYY-MM-DD HH:mm:ss',\n  week: 'gggg-wo',\n  month: 'YYYY-MM'\n};\nvar LOCALE_FORMAT_MAPPING = {\n  date: 'dateFormat',\n  dateTime: 'dateTimeFormat',\n  week: 'weekFormat',\n  month: 'monthFormat'\n};\n\nfunction getColumns(_ref) {\n  var showHour = _ref.showHour,\n      showMinute = _ref.showMinute,\n      showSecond = _ref.showSecond,\n      use12Hours = _ref.use12Hours;\n  var column = 0;\n\n  if (showHour) {\n    column += 1;\n  }\n\n  if (showMinute) {\n    column += 1;\n  }\n\n  if (showSecond) {\n    column += 1;\n  }\n\n  if (use12Hours) {\n    column += 1;\n  }\n\n  return column;\n}\n\nfunction checkValidate(value, propName) {\n  var values = Array.isArray(value) ? value : [value];\n  values.forEach(function (val) {\n    if (!val) return;\n    warning(!interopDefault(moment).isMoment(val) || val.isValid(), 'DatePicker', \"`\".concat(propName, \"` provides invalidate moment time. If you want to set empty value, use `null` instead.\"));\n  });\n}\n\nexport default function wrapPicker(Picker, pickerType) {\n  var PickerWrapper =\n  /*#__PURE__*/\n  function (_React$Component) {\n    _inherits(PickerWrapper, _React$Component);\n\n    function PickerWrapper() {\n      var _this;\n\n      _classCallCheck(this, PickerWrapper);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(PickerWrapper).apply(this, arguments)); // Since we need call `getDerivedStateFromProps` for check. Need leave an empty `state` here.\n\n      _this.state = {};\n\n      _this.savePicker = function (node) {\n        _this.picker = node;\n      };\n\n      _this.getDefaultLocale = function () {\n        var result = _extends(_extends({}, enUS), _this.props.locale);\n\n        result.lang = _extends(_extends({}, result.lang), (_this.props.locale || {}).lang);\n        return result;\n      };\n\n      _this.handleOpenChange = function (open) {\n        var onOpenChange = _this.props.onOpenChange;\n        onOpenChange(open);\n      };\n\n      _this.handleFocus = function (e) {\n        var onFocus = _this.props.onFocus;\n\n        if (onFocus) {\n          onFocus(e);\n        }\n      };\n\n      _this.handleBlur = function (e) {\n        var onBlur = _this.props.onBlur;\n\n        if (onBlur) {\n          onBlur(e);\n        }\n      };\n\n      _this.handleMouseEnter = function (e) {\n        var onMouseEnter = _this.props.onMouseEnter;\n\n        if (onMouseEnter) {\n          onMouseEnter(e);\n        }\n      };\n\n      _this.handleMouseLeave = function (e) {\n        var onMouseLeave = _this.props.onMouseLeave;\n\n        if (onMouseLeave) {\n          onMouseLeave(e);\n        }\n      };\n\n      _this.renderPicker = function (locale, localeCode) {\n        var _this$props = _this.props,\n            format = _this$props.format,\n            showTime = _this$props.showTime;\n        var mergedPickerType = showTime ? \"\".concat(pickerType, \"Time\") : pickerType;\n        var mergedFormat = format || locale[LOCALE_FORMAT_MAPPING[mergedPickerType]] || DEFAULT_FORMAT[mergedPickerType];\n        return React.createElement(ConfigConsumer, null, function (_ref2) {\n          var _classNames2;\n\n          var getPrefixCls = _ref2.getPrefixCls,\n              getContextPopupContainer = _ref2.getPopupContainer;\n          var _this$props2 = _this.props,\n              customizePrefixCls = _this$props2.prefixCls,\n              customizeInputPrefixCls = _this$props2.inputPrefixCls,\n              getCalendarContainer = _this$props2.getCalendarContainer,\n              size = _this$props2.size,\n              disabled = _this$props2.disabled;\n          var getPopupContainer = getCalendarContainer || getContextPopupContainer;\n          var prefixCls = getPrefixCls('calendar', customizePrefixCls);\n          var inputPrefixCls = getPrefixCls('input', customizeInputPrefixCls);\n          var pickerClass = classNames(\"\".concat(prefixCls, \"-picker\"), _defineProperty({}, \"\".concat(prefixCls, \"-picker-\").concat(size), !!size));\n          var pickerInputClass = classNames(\"\".concat(prefixCls, \"-picker-input\"), inputPrefixCls, (_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(inputPrefixCls, \"-lg\"), size === 'large'), _defineProperty(_classNames2, \"\".concat(inputPrefixCls, \"-sm\"), size === 'small'), _defineProperty(_classNames2, \"\".concat(inputPrefixCls, \"-disabled\"), disabled), _classNames2));\n          var timeFormat = showTime && showTime.format || 'HH:mm:ss';\n\n          var rcTimePickerProps = _extends(_extends({}, generateShowHourMinuteSecond(timeFormat)), {\n            format: timeFormat,\n            use12Hours: showTime && showTime.use12Hours\n          });\n\n          var columns = getColumns(rcTimePickerProps);\n          var timePickerCls = \"\".concat(prefixCls, \"-time-picker-column-\").concat(columns);\n          var timePicker = showTime ? React.createElement(TimePickerPanel, _extends({}, rcTimePickerProps, showTime, {\n            prefixCls: \"\".concat(prefixCls, \"-time-picker\"),\n            className: timePickerCls,\n            placeholder: locale.timePickerLocale.placeholder,\n            transitionName: \"slide-up\",\n            onEsc: function onEsc() {}\n          })) : null;\n          return React.createElement(Picker, _extends({}, _this.props, {\n            getCalendarContainer: getPopupContainer,\n            format: mergedFormat,\n            ref: _this.savePicker,\n            pickerClass: pickerClass,\n            pickerInputClass: pickerInputClass,\n            locale: locale,\n            localeCode: localeCode,\n            timePicker: timePicker,\n            onOpenChange: _this.handleOpenChange,\n            onFocus: _this.handleFocus,\n            onBlur: _this.handleBlur,\n            onMouseEnter: _this.handleMouseEnter,\n            onMouseLeave: _this.handleMouseLeave\n          }));\n        });\n      };\n\n      return _this;\n    }\n\n    _createClass(PickerWrapper, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this$props3 = this.props,\n            autoFocus = _this$props3.autoFocus,\n            disabled = _this$props3.disabled;\n\n        if (autoFocus && !disabled) {\n          this.focus();\n        }\n      }\n    }, {\n      key: \"focus\",\n      value: function focus() {\n        this.picker.focus();\n      }\n    }, {\n      key: \"blur\",\n      value: function blur() {\n        this.picker.blur();\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return React.createElement(LocaleReceiver, {\n          componentName: \"DatePicker\",\n          defaultLocale: this.getDefaultLocale\n        }, this.renderPicker);\n      }\n    }], [{\n      key: \"getDerivedStateFromProps\",\n      value: function getDerivedStateFromProps(_ref3) {\n        var value = _ref3.value,\n            defaultValue = _ref3.defaultValue;\n        checkValidate(defaultValue, 'defaultValue');\n        checkValidate(value, 'value');\n        return {};\n      }\n    }]);\n\n    return PickerWrapper;\n  }(React.Component);\n\n  PickerWrapper.defaultProps = {\n    transitionName: 'slide-up',\n    popupStyle: {},\n    onChange: function onChange() {},\n    onOk: function onOk() {},\n    onOpenChange: function onOpenChange() {},\n    locale: {}\n  };\n  polyfill(PickerWrapper);\n  return PickerWrapper;\n}","import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport CalendarHeader from '../calendar/CalendarHeader';\nimport DateTable from '../date/DateTable';\nimport DateInput from '../date/DateInput';\nimport { getTimeConfig } from '../util/index';\n\nvar CalendarPart = function (_React$Component) {\n  _inherits(CalendarPart, _React$Component);\n\n  function CalendarPart() {\n    _classCallCheck(this, CalendarPart);\n\n    return _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n  }\n\n  CalendarPart.prototype.render = function render() {\n    var props = this.props;\n    var prefixCls = props.prefixCls,\n        value = props.value,\n        hoverValue = props.hoverValue,\n        selectedValue = props.selectedValue,\n        mode = props.mode,\n        direction = props.direction,\n        locale = props.locale,\n        format = props.format,\n        placeholder = props.placeholder,\n        disabledDate = props.disabledDate,\n        timePicker = props.timePicker,\n        disabledTime = props.disabledTime,\n        timePickerDisabledTime = props.timePickerDisabledTime,\n        showTimePicker = props.showTimePicker,\n        onInputChange = props.onInputChange,\n        onInputSelect = props.onInputSelect,\n        enablePrev = props.enablePrev,\n        enableNext = props.enableNext,\n        clearIcon = props.clearIcon,\n        showClear = props.showClear,\n        inputMode = props.inputMode;\n    var shouldShowTimePicker = showTimePicker && timePicker;\n    var disabledTimeConfig = shouldShowTimePicker && disabledTime ? getTimeConfig(selectedValue, disabledTime) : null;\n    var rangeClassName = prefixCls + '-range';\n    var newProps = {\n      locale: locale,\n      value: value,\n      prefixCls: prefixCls,\n      showTimePicker: showTimePicker\n    };\n    var index = direction === 'left' ? 0 : 1;\n    var timePickerEle = shouldShowTimePicker && React.cloneElement(timePicker, _extends({\n      showHour: true,\n      showMinute: true,\n      showSecond: true\n    }, timePicker.props, disabledTimeConfig, timePickerDisabledTime, {\n      onChange: onInputChange,\n      defaultOpenValue: value,\n      value: selectedValue[index]\n    }));\n    var dateInputElement = props.showDateInput && React.createElement(DateInput, {\n      format: format,\n      locale: locale,\n      prefixCls: prefixCls,\n      timePicker: timePicker,\n      disabledDate: disabledDate,\n      placeholder: placeholder,\n      disabledTime: disabledTime,\n      value: value,\n      showClear: showClear || false,\n      selectedValue: selectedValue[index],\n      onChange: onInputChange,\n      onSelect: onInputSelect,\n      clearIcon: clearIcon,\n      inputMode: inputMode\n    });\n    return React.createElement('div', {\n      className: rangeClassName + '-part ' + rangeClassName + '-' + direction\n    }, dateInputElement, React.createElement('div', {\n      style: {\n        outline: 'none'\n      }\n    }, React.createElement(CalendarHeader, _extends({}, newProps, {\n      mode: mode,\n      enableNext: enableNext,\n      enablePrev: enablePrev,\n      onValueChange: props.onValueChange,\n      onPanelChange: props.onPanelChange,\n      disabledMonth: props.disabledMonth\n    })), showTimePicker ? React.createElement('div', {\n      className: prefixCls + '-time-picker'\n    }, React.createElement('div', {\n      className: prefixCls + '-time-picker-panel'\n    }, timePickerEle)) : null, React.createElement('div', {\n      className: prefixCls + '-body'\n    }, React.createElement(DateTable, _extends({}, newProps, {\n      hoverValue: hoverValue,\n      selectedValue: selectedValue,\n      dateRender: props.dateRender,\n      onSelect: props.onSelect,\n      onDayHover: props.onDayHover,\n      disabledDate: disabledDate,\n      showWeekNumber: props.showWeekNumber\n    })))));\n  };\n\n  return CalendarPart;\n}(React.Component);\n\nCalendarPart.propTypes = {\n  prefixCls: PropTypes.string,\n  value: PropTypes.any,\n  hoverValue: PropTypes.any,\n  selectedValue: PropTypes.any,\n  direction: PropTypes.any,\n  locale: PropTypes.any,\n  showDateInput: PropTypes.bool,\n  showTimePicker: PropTypes.bool,\n  format: PropTypes.any,\n  placeholder: PropTypes.any,\n  disabledDate: PropTypes.any,\n  timePicker: PropTypes.any,\n  disabledTime: PropTypes.any,\n  onInputChange: PropTypes.func,\n  onInputSelect: PropTypes.func,\n  timePickerDisabledTime: PropTypes.object,\n  enableNext: PropTypes.any,\n  enablePrev: PropTypes.any,\n  clearIcon: PropTypes.node,\n  dateRender: PropTypes.func,\n  inputMode: PropTypes.string\n};\nexport default CalendarPart;","import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classnames from 'classnames';\nimport { polyfill } from 'react-lifecycles-compat';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport CalendarPart from './range-calendar/CalendarPart';\nimport TodayButton from './calendar/TodayButton';\nimport OkButton from './calendar/OkButton';\nimport TimePickerButton from './calendar/TimePickerButton';\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\nimport { syncTime, getTodayTime, isAllowedDate } from './util';\nimport { goTime, goStartMonth, goEndMonth, includesTime } from './util/toTime';\n\nfunction noop() {}\n\nfunction isEmptyArray(arr) {\n  return Array.isArray(arr) && (arr.length === 0 || arr.every(function (i) {\n    return !i;\n  }));\n}\n\nfunction isArraysEqual(a, b) {\n  if (a === b) return true;\n\n  if (a === null || typeof a === 'undefined' || b === null || typeof b === 'undefined') {\n    return false;\n  }\n\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n\n  return true;\n}\n\nfunction getValueFromSelectedValue(selectedValue) {\n  var start = selectedValue[0],\n      end = selectedValue[1];\n\n  if (end && (start === undefined || start === null)) {\n    start = end.clone().subtract(1, 'month');\n  }\n\n  if (start && (end === undefined || end === null)) {\n    end = start.clone().add(1, 'month');\n  }\n\n  return [start, end];\n}\n\nfunction normalizeAnchor(props, init) {\n  var selectedValue = props.selectedValue || init && props.defaultSelectedValue;\n  var value = props.value || init && props.defaultValue;\n  var normalizedValue = value ? getValueFromSelectedValue(value) : getValueFromSelectedValue(selectedValue);\n  return !isEmptyArray(normalizedValue) ? normalizedValue : init && [moment(), moment().add(1, 'months')];\n}\n\nfunction generateOptions(length, extraOptionGen) {\n  var arr = extraOptionGen ? extraOptionGen().concat() : [];\n\n  for (var value = 0; value < length; value++) {\n    if (arr.indexOf(value) === -1) {\n      arr.push(value);\n    }\n  }\n\n  return arr;\n}\n\nfunction onInputSelect(direction, value, cause) {\n  if (!value) {\n    return;\n  }\n\n  var originalValue = this.state.selectedValue;\n  var selectedValue = originalValue.concat();\n  var index = direction === 'left' ? 0 : 1;\n  selectedValue[index] = value;\n\n  if (selectedValue[0] && this.compare(selectedValue[0], selectedValue[1]) > 0) {\n    selectedValue[1 - index] = this.state.showTimePicker ? selectedValue[index] : undefined;\n  }\n\n  this.props.onInputSelect(selectedValue);\n  this.fireSelectValueChange(selectedValue, null, cause || {\n    source: 'dateInput'\n  });\n}\n\nvar RangeCalendar = function (_React$Component) {\n  _inherits(RangeCalendar, _React$Component);\n\n  function RangeCalendar(props) {\n    _classCallCheck(this, RangeCalendar);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var selectedValue = props.selectedValue || props.defaultSelectedValue;\n    var value = normalizeAnchor(props, 1);\n    _this.state = {\n      selectedValue: selectedValue,\n      prevSelectedValue: selectedValue,\n      firstSelectedValue: null,\n      hoverValue: props.hoverValue || [],\n      value: value,\n      showTimePicker: false,\n      mode: props.mode || ['date', 'date'],\n      panelTriggerSource: '' // Trigger by which picker panel: 'start' & 'end'\n\n    };\n    return _this;\n  }\n\n  RangeCalendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var newState = {};\n\n    if ('value' in nextProps) {\n      newState.value = normalizeAnchor(nextProps, 0);\n    }\n\n    if ('hoverValue' in nextProps && !isArraysEqual(state.hoverValue, nextProps.hoverValue)) {\n      newState.hoverValue = nextProps.hoverValue;\n    }\n\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = nextProps.selectedValue;\n      newState.prevSelectedValue = nextProps.selectedValue;\n    }\n\n    if ('mode' in nextProps && !isArraysEqual(state.mode, nextProps.mode)) {\n      newState.mode = nextProps.mode;\n    }\n\n    return newState;\n  }; // get disabled hours for second picker\n\n\n  RangeCalendar.prototype.render = function render() {\n    var _className, _classnames;\n\n    var props = this.props,\n        state = this.state;\n    var prefixCls = props.prefixCls,\n        dateInputPlaceholder = props.dateInputPlaceholder,\n        seperator = props.seperator,\n        timePicker = props.timePicker,\n        showOk = props.showOk,\n        locale = props.locale,\n        showClear = props.showClear,\n        showToday = props.showToday,\n        type = props.type,\n        clearIcon = props.clearIcon;\n    var hoverValue = state.hoverValue,\n        selectedValue = state.selectedValue,\n        mode = state.mode,\n        showTimePicker = state.showTimePicker;\n    var className = (_className = {}, _className[props.className] = !!props.className, _className[prefixCls] = 1, _className[prefixCls + '-hidden'] = !props.visible, _className[prefixCls + '-range'] = 1, _className[prefixCls + '-show-time-picker'] = showTimePicker, _className[prefixCls + '-week-number'] = props.showWeekNumber, _className);\n    var classes = classnames(className);\n    var newProps = {\n      selectedValue: state.selectedValue,\n      onSelect: this.onSelect,\n      onDayHover: type === 'start' && selectedValue[1] || type === 'end' && selectedValue[0] || !!hoverValue.length ? this.onDayHover : undefined\n    };\n    var placeholder1 = void 0;\n    var placeholder2 = void 0;\n\n    if (dateInputPlaceholder) {\n      if (Array.isArray(dateInputPlaceholder)) {\n        placeholder1 = dateInputPlaceholder[0];\n        placeholder2 = dateInputPlaceholder[1];\n      } else {\n        placeholder1 = placeholder2 = dateInputPlaceholder;\n      }\n    }\n\n    var showOkButton = showOk === true || showOk !== false && !!timePicker;\n    var cls = classnames((_classnames = {}, _classnames[prefixCls + '-footer'] = true, _classnames[prefixCls + '-range-bottom'] = true, _classnames[prefixCls + '-footer-show-ok'] = showOkButton, _classnames));\n    var startValue = this.getStartValue();\n    var endValue = this.getEndValue();\n    var todayTime = getTodayTime(startValue);\n    var thisMonth = todayTime.month();\n    var thisYear = todayTime.year();\n    var isTodayInView = startValue.year() === thisYear && startValue.month() === thisMonth || endValue.year() === thisYear && endValue.month() === thisMonth;\n    var nextMonthOfStart = startValue.clone().add(1, 'months');\n    var isClosestMonths = nextMonthOfStart.year() === endValue.year() && nextMonthOfStart.month() === endValue.month();\n    var extraFooter = props.renderFooter();\n    return React.createElement('div', {\n      ref: this.saveRoot,\n      className: classes,\n      style: props.style,\n      tabIndex: '0',\n      onKeyDown: this.onKeyDown\n    }, props.renderSidebar(), React.createElement('div', {\n      className: prefixCls + '-panel'\n    }, showClear && selectedValue[0] && selectedValue[1] ? React.createElement('a', {\n      role: 'button',\n      title: locale.clear,\n      onClick: this.clear\n    }, clearIcon || React.createElement('span', {\n      className: prefixCls + '-clear-btn'\n    })) : null, React.createElement('div', {\n      className: prefixCls + '-date-panel',\n      onMouseLeave: type !== 'both' ? this.onDatePanelLeave : undefined,\n      onMouseEnter: type !== 'both' ? this.onDatePanelEnter : undefined\n    }, React.createElement(CalendarPart, _extends({}, props, newProps, {\n      hoverValue: hoverValue,\n      direction: 'left',\n      disabledTime: this.disabledStartTime,\n      disabledMonth: this.disabledStartMonth,\n      format: this.getFormat(),\n      value: startValue,\n      mode: mode[0],\n      placeholder: placeholder1,\n      onInputChange: this.onStartInputChange,\n      onInputSelect: this.onStartInputSelect,\n      onValueChange: this.onStartValueChange,\n      onPanelChange: this.onStartPanelChange,\n      showDateInput: this.props.showDateInput,\n      timePicker: timePicker,\n      showTimePicker: showTimePicker || mode[0] === 'time',\n      enablePrev: true,\n      enableNext: !isClosestMonths || this.isMonthYearPanelShow(mode[1]),\n      clearIcon: clearIcon\n    })), React.createElement('span', {\n      className: prefixCls + '-range-middle'\n    }, seperator), React.createElement(CalendarPart, _extends({}, props, newProps, {\n      hoverValue: hoverValue,\n      direction: 'right',\n      format: this.getFormat(),\n      timePickerDisabledTime: this.getEndDisableTime(),\n      placeholder: placeholder2,\n      value: endValue,\n      mode: mode[1],\n      onInputChange: this.onEndInputChange,\n      onInputSelect: this.onEndInputSelect,\n      onValueChange: this.onEndValueChange,\n      onPanelChange: this.onEndPanelChange,\n      showDateInput: this.props.showDateInput,\n      timePicker: timePicker,\n      showTimePicker: showTimePicker || mode[1] === 'time',\n      disabledTime: this.disabledEndTime,\n      disabledMonth: this.disabledEndMonth,\n      enablePrev: !isClosestMonths || this.isMonthYearPanelShow(mode[0]),\n      enableNext: true,\n      clearIcon: clearIcon\n    }))), React.createElement('div', {\n      className: cls\n    }, showToday || props.timePicker || showOkButton || extraFooter ? React.createElement('div', {\n      className: prefixCls + '-footer-btn'\n    }, extraFooter, showToday ? React.createElement(TodayButton, _extends({}, props, {\n      disabled: isTodayInView,\n      value: state.value[0],\n      onToday: this.onToday,\n      text: locale.backToToday\n    })) : null, props.timePicker ? React.createElement(TimePickerButton, _extends({}, props, {\n      showTimePicker: showTimePicker || mode[0] === 'time' && mode[1] === 'time',\n      onOpenTimePicker: this.onOpenTimePicker,\n      onCloseTimePicker: this.onCloseTimePicker,\n      timePickerDisabled: !this.hasSelectedValue() || hoverValue.length\n    })) : null, showOkButton ? React.createElement(OkButton, _extends({}, props, {\n      onOk: this.onOk,\n      okDisabled: !this.isAllowedDateAndTime(selectedValue) || !this.hasSelectedValue() || hoverValue.length\n    })) : null) : null)));\n  };\n\n  return RangeCalendar;\n}(React.Component);\n\nRangeCalendar.propTypes = _extends({}, propType, {\n  prefixCls: PropTypes.string,\n  dateInputPlaceholder: PropTypes.any,\n  seperator: PropTypes.string,\n  defaultValue: PropTypes.any,\n  value: PropTypes.any,\n  hoverValue: PropTypes.any,\n  mode: PropTypes.arrayOf(PropTypes.oneOf(['time', 'date', 'month', 'year', 'decade'])),\n  showDateInput: PropTypes.bool,\n  timePicker: PropTypes.any,\n  showOk: PropTypes.bool,\n  showToday: PropTypes.bool,\n  defaultSelectedValue: PropTypes.array,\n  selectedValue: PropTypes.array,\n  onOk: PropTypes.func,\n  showClear: PropTypes.bool,\n  locale: PropTypes.object,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onValueChange: PropTypes.func,\n  onHoverChange: PropTypes.func,\n  onPanelChange: PropTypes.func,\n  format: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  onClear: PropTypes.func,\n  type: PropTypes.any,\n  disabledDate: PropTypes.func,\n  disabledTime: PropTypes.func,\n  clearIcon: PropTypes.node,\n  onKeyDown: PropTypes.func\n});\nRangeCalendar.defaultProps = _extends({}, defaultProp, {\n  type: 'both',\n  seperator: '~',\n  defaultSelectedValue: [],\n  onValueChange: noop,\n  onHoverChange: noop,\n  onPanelChange: noop,\n  disabledTime: noop,\n  onInputSelect: noop,\n  showToday: true,\n  showDateInput: true\n});\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onDatePanelEnter = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange(_this2.state.selectedValue.concat());\n    }\n  };\n\n  this.onDatePanelLeave = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange([]);\n    }\n  };\n\n  this.onSelect = function (value) {\n    var type = _this2.props.type;\n    var _state = _this2.state,\n        selectedValue = _state.selectedValue,\n        prevSelectedValue = _state.prevSelectedValue,\n        firstSelectedValue = _state.firstSelectedValue;\n    var nextSelectedValue = void 0;\n\n    if (type === 'both') {\n      if (!firstSelectedValue) {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      } else if (_this2.compare(firstSelectedValue, value) < 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [firstSelectedValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        syncTime(prevSelectedValue[1], firstSelectedValue);\n        nextSelectedValue = [value, firstSelectedValue];\n      }\n    } else if (type === 'start') {\n      syncTime(prevSelectedValue[0], value);\n      var endValue = selectedValue[1];\n      nextSelectedValue = endValue && _this2.compare(endValue, value) > 0 ? [value, endValue] : [value];\n    } else {\n      // type === 'end'\n      var startValue = selectedValue[0];\n\n      if (startValue && _this2.compare(startValue, value) <= 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [startValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      }\n    }\n\n    _this2.fireSelectValueChange(nextSelectedValue);\n  };\n\n  this.onKeyDown = function (event) {\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return;\n    }\n\n    var keyCode = event.keyCode;\n    var ctrlKey = event.ctrlKey || event.metaKey;\n    var _state2 = _this2.state,\n        selectedValue = _state2.selectedValue,\n        hoverValue = _state2.hoverValue,\n        firstSelectedValue = _state2.firstSelectedValue,\n        value = _state2.value;\n    var _props = _this2.props,\n        onKeyDown = _props.onKeyDown,\n        disabledDate = _props.disabledDate; // Update last time of the picker\n\n    var updateHoverPoint = function updateHoverPoint(func) {\n      // Change hover to make focus in UI\n      var currentHoverTime = void 0;\n      var nextHoverTime = void 0;\n      var nextHoverValue = void 0;\n\n      if (!firstSelectedValue) {\n        currentHoverTime = hoverValue[0] || selectedValue[0] || value[0] || moment();\n        nextHoverTime = func(currentHoverTime);\n        nextHoverValue = [nextHoverTime];\n\n        _this2.fireHoverValueChange(nextHoverValue);\n      } else {\n        if (hoverValue.length === 1) {\n          currentHoverTime = hoverValue[0].clone();\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        } else {\n          currentHoverTime = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        }\n      } // Find origin hover time on value index\n\n\n      if (nextHoverValue.length >= 2) {\n        var miss = nextHoverValue.some(function (ht) {\n          return !includesTime(value, ht, 'month');\n        });\n\n        if (miss) {\n          var newValue = nextHoverValue.slice().sort(function (t1, t2) {\n            return t1.valueOf() - t2.valueOf();\n          });\n\n          if (newValue[0].isSame(newValue[1], 'month')) {\n            newValue[1] = newValue[0].clone().add(1, 'month');\n          }\n\n          _this2.fireValueChange(newValue);\n        }\n      } else if (nextHoverValue.length === 1) {\n        // If only one value, let's keep the origin panel\n        var oriValueIndex = value.findIndex(function (time) {\n          return time.isSame(currentHoverTime, 'month');\n        });\n        if (oriValueIndex === -1) oriValueIndex = 0;\n\n        if (value.every(function (time) {\n          return !time.isSame(nextHoverTime, 'month');\n        })) {\n          var _newValue = value.slice();\n\n          _newValue[oriValueIndex] = nextHoverTime.clone();\n\n          _this2.fireValueChange(_newValue);\n        }\n      }\n\n      event.preventDefault();\n      return nextHoverTime;\n    };\n\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'weeks');\n        });\n        return;\n\n      case KeyCode.UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'weeks');\n        });\n        return;\n\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'days');\n          });\n        }\n\n        return;\n\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'days');\n          });\n        }\n\n        return;\n\n      case KeyCode.HOME:\n        updateHoverPoint(function (time) {\n          return goStartMonth(time);\n        });\n        return;\n\n      case KeyCode.END:\n        updateHoverPoint(function (time) {\n          return goEndMonth(time);\n        });\n        return;\n\n      case KeyCode.PAGE_DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'month');\n        });\n        return;\n\n      case KeyCode.PAGE_UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'month');\n        });\n        return;\n\n      case KeyCode.ENTER:\n        {\n          var lastValue = void 0;\n\n          if (hoverValue.length === 0) {\n            lastValue = updateHoverPoint(function (time) {\n              return time;\n            });\n          } else if (hoverValue.length === 1) {\n            lastValue = hoverValue[0];\n          } else {\n            lastValue = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          }\n\n          if (lastValue && (!disabledDate || !disabledDate(lastValue))) {\n            _this2.onSelect(lastValue);\n          }\n\n          event.preventDefault();\n          return;\n        }\n\n      default:\n        if (onKeyDown) {\n          onKeyDown(event);\n        }\n\n    }\n  };\n\n  this.onDayHover = function (value) {\n    var hoverValue = [];\n    var _state3 = _this2.state,\n        selectedValue = _state3.selectedValue,\n        firstSelectedValue = _state3.firstSelectedValue;\n    var type = _this2.props.type;\n\n    if (type === 'start' && selectedValue[1]) {\n      hoverValue = _this2.compare(value, selectedValue[1]) < 0 ? [value, selectedValue[1]] : [value];\n    } else if (type === 'end' && selectedValue[0]) {\n      hoverValue = _this2.compare(value, selectedValue[0]) > 0 ? [selectedValue[0], value] : [];\n    } else {\n      if (!firstSelectedValue) {\n        if (_this2.state.hoverValue.length) {\n          _this2.setState({\n            hoverValue: []\n          });\n        }\n\n        return hoverValue;\n      }\n\n      hoverValue = _this2.compare(value, firstSelectedValue) < 0 ? [value, firstSelectedValue] : [firstSelectedValue, value];\n    }\n\n    _this2.fireHoverValueChange(hoverValue);\n\n    return hoverValue;\n  };\n\n  this.onToday = function () {\n    var startValue = getTodayTime(_this2.state.value[0]);\n    var endValue = startValue.clone().add(1, 'months');\n\n    _this2.setState({\n      value: [startValue, endValue]\n    });\n  };\n\n  this.onOpenTimePicker = function () {\n    _this2.setState({\n      showTimePicker: true\n    });\n  };\n\n  this.onCloseTimePicker = function () {\n    _this2.setState({\n      showTimePicker: false\n    });\n  };\n\n  this.onOk = function () {\n    var selectedValue = _this2.state.selectedValue;\n\n    if (_this2.isAllowedDateAndTime(selectedValue)) {\n      _this2.props.onOk(_this2.state.selectedValue);\n    }\n  };\n\n  this.onStartInputChange = function () {\n    for (var _len = arguments.length, oargs = Array(_len), _key = 0; _key < _len; _key++) {\n      oargs[_key] = arguments[_key];\n    }\n\n    var args = ['left'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onEndInputChange = function () {\n    for (var _len2 = arguments.length, oargs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      oargs[_key2] = arguments[_key2];\n    }\n\n    var args = ['right'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onStartInputSelect = function (value) {\n    var args = ['left', value, {\n      source: 'dateInputSelect'\n    }];\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onEndInputSelect = function (value) {\n    var args = ['right', value, {\n      source: 'dateInputSelect'\n    }];\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onStartValueChange = function (leftValue) {\n    var value = [].concat(_this2.state.value);\n    value[0] = leftValue;\n    return _this2.fireValueChange(value);\n  };\n\n  this.onEndValueChange = function (rightValue) {\n    var value = [].concat(_this2.state.value);\n    value[1] = rightValue;\n    return _this2.fireValueChange(value);\n  };\n\n  this.onStartPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n    var newMode = [mode, state.mode[1]];\n    var newState = {\n      panelTriggerSource: 'start'\n    };\n\n    if (!('mode' in props)) {\n      newState.mode = newMode;\n    }\n\n    _this2.setState(newState);\n\n    var newValue = [value || state.value[0], state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n\n  this.onEndPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n    var newMode = [state.mode[0], mode];\n    var newState = {\n      panelTriggerSource: 'end'\n    };\n\n    if (!('mode' in props)) {\n      newState.mode = newMode;\n    }\n\n    _this2.setState(newState);\n\n    var newValue = [state.value[0], value || state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n\n  this.getStartValue = function () {\n    var _state4 = _this2.state,\n        selectedValue = _state4.selectedValue,\n        showTimePicker = _state4.showTimePicker,\n        value = _state4.value,\n        mode = _state4.mode,\n        panelTriggerSource = _state4.panelTriggerSource;\n    var startValue = value[0]; // keep selectedTime when select date\n\n    if (selectedValue[0] && _this2.props.timePicker) {\n      startValue = startValue.clone();\n      syncTime(selectedValue[0], startValue);\n    }\n\n    if (showTimePicker && selectedValue[0]) {\n      startValue = selectedValue[0];\n    } // Adjust month if date not align\n\n\n    if (panelTriggerSource === 'end' && mode[0] === 'date' && mode[1] === 'date' && startValue.isSame(value[1], 'month')) {\n      startValue = startValue.clone().subtract(1, 'month');\n    }\n\n    return startValue;\n  };\n\n  this.getEndValue = function () {\n    var _state5 = _this2.state,\n        value = _state5.value,\n        selectedValue = _state5.selectedValue,\n        showTimePicker = _state5.showTimePicker,\n        mode = _state5.mode,\n        panelTriggerSource = _state5.panelTriggerSource;\n    var endValue = value[1] ? value[1].clone() : value[0].clone().add(1, 'month'); // keep selectedTime when select date\n\n    if (selectedValue[1] && _this2.props.timePicker) {\n      syncTime(selectedValue[1], endValue);\n    }\n\n    if (showTimePicker) {\n      endValue = selectedValue[1] ? selectedValue[1] : _this2.getStartValue();\n    } // Adjust month if date not align\n\n\n    if (!showTimePicker && panelTriggerSource !== 'end' && mode[0] === 'date' && mode[1] === 'date' && endValue.isSame(value[0], 'month')) {\n      endValue = endValue.clone().add(1, 'month');\n    }\n\n    return endValue;\n  };\n\n  this.getEndDisableTime = function () {\n    var _state6 = _this2.state,\n        selectedValue = _state6.selectedValue,\n        value = _state6.value;\n    var disabledTime = _this2.props.disabledTime;\n    var userSettingDisabledTime = disabledTime(selectedValue, 'end') || {};\n    var startValue = selectedValue && selectedValue[0] || value[0].clone(); // if startTime and endTime is same day..\n    // the second time picker will not able to pick time before first time picker\n\n    if (!selectedValue[1] || startValue.isSame(selectedValue[1], 'day')) {\n      var hours = startValue.hour();\n      var minutes = startValue.minute();\n      var second = startValue.second();\n      var _disabledHours = userSettingDisabledTime.disabledHours,\n          _disabledMinutes = userSettingDisabledTime.disabledMinutes,\n          _disabledSeconds = userSettingDisabledTime.disabledSeconds;\n      var oldDisabledMinutes = _disabledMinutes ? _disabledMinutes() : [];\n      var olddisabledSeconds = _disabledSeconds ? _disabledSeconds() : [];\n      _disabledHours = generateOptions(hours, _disabledHours);\n      _disabledMinutes = generateOptions(minutes, _disabledMinutes);\n      _disabledSeconds = generateOptions(second, _disabledSeconds);\n      return {\n        disabledHours: function disabledHours() {\n          return _disabledHours;\n        },\n        disabledMinutes: function disabledMinutes(hour) {\n          if (hour === hours) {\n            return _disabledMinutes;\n          }\n\n          return oldDisabledMinutes;\n        },\n        disabledSeconds: function disabledSeconds(hour, minute) {\n          if (hour === hours && minute === minutes) {\n            return _disabledSeconds;\n          }\n\n          return olddisabledSeconds;\n        }\n      };\n    }\n\n    return userSettingDisabledTime;\n  };\n\n  this.isAllowedDateAndTime = function (selectedValue) {\n    return isAllowedDate(selectedValue[0], _this2.props.disabledDate, _this2.disabledStartTime) && isAllowedDate(selectedValue[1], _this2.props.disabledDate, _this2.disabledEndTime);\n  };\n\n  this.isMonthYearPanelShow = function (mode) {\n    return ['month', 'year', 'decade'].indexOf(mode) > -1;\n  };\n\n  this.hasSelectedValue = function () {\n    var selectedValue = _this2.state.selectedValue;\n    return !!selectedValue[1] && !!selectedValue[0];\n  };\n\n  this.compare = function (v1, v2) {\n    if (_this2.props.timePicker) {\n      return v1.diff(v2);\n    }\n\n    return v1.diff(v2, 'days');\n  };\n\n  this.fireSelectValueChange = function (selectedValue, direct, cause) {\n    var timePicker = _this2.props.timePicker;\n    var prevSelectedValue = _this2.state.prevSelectedValue;\n\n    if (timePicker && timePicker.props.defaultValue) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n\n      if (!prevSelectedValue[0] && selectedValue[0]) {\n        syncTime(timePickerDefaultValue[0], selectedValue[0]);\n      }\n\n      if (!prevSelectedValue[1] && selectedValue[1]) {\n        syncTime(timePickerDefaultValue[1], selectedValue[1]);\n      }\n    }\n\n    if (!('selectedValue' in _this2.props)) {\n      _this2.setState({\n        selectedValue: selectedValue\n      });\n    } // 尚未选择过时间，直接输入的话\n\n\n    if (!_this2.state.selectedValue[0] || !_this2.state.selectedValue[1]) {\n      var startValue = selectedValue[0] || moment();\n      var endValue = selectedValue[1] || startValue.clone().add(1, 'months');\n\n      _this2.setState({\n        selectedValue: selectedValue,\n        value: getValueFromSelectedValue([startValue, endValue])\n      });\n    }\n\n    if (selectedValue[0] && !selectedValue[1]) {\n      _this2.setState({\n        firstSelectedValue: selectedValue[0]\n      });\n\n      _this2.fireHoverValueChange(selectedValue.concat());\n    }\n\n    _this2.props.onChange(selectedValue);\n\n    if (direct || selectedValue[0] && selectedValue[1]) {\n      _this2.setState({\n        prevSelectedValue: selectedValue,\n        firstSelectedValue: null\n      });\n\n      _this2.fireHoverValueChange([]);\n\n      _this2.props.onSelect(selectedValue, cause);\n    }\n  };\n\n  this.fireValueChange = function (value) {\n    var props = _this2.props;\n\n    if (!('value' in props)) {\n      _this2.setState({\n        value: value\n      });\n    }\n\n    props.onValueChange(value);\n  };\n\n  this.fireHoverValueChange = function (hoverValue) {\n    var props = _this2.props;\n\n    if (!('hoverValue' in props)) {\n      _this2.setState({\n        hoverValue: hoverValue\n      });\n    }\n\n    props.onHoverChange(hoverValue);\n  };\n\n  this.clear = function () {\n    _this2.fireSelectValueChange([], true);\n\n    _this2.props.onClear();\n  };\n\n  this.disabledStartTime = function (time) {\n    return _this2.props.disabledTime(time, 'start');\n  };\n\n  this.disabledEndTime = function (time) {\n    return _this2.props.disabledTime(time, 'end');\n  };\n\n  this.disabledStartMonth = function (month) {\n    var value = _this2.state.value;\n    return month.isAfter(value[1], 'month');\n  };\n\n  this.disabledEndMonth = function (month) {\n    var value = _this2.state.value;\n    return month.isBefore(value[0], 'month');\n  };\n};\n\npolyfill(RangeCalendar);\nexport default commonMixinWrapper(RangeCalendar);","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport Icon from '../icon';\nexport default function InputIcon(props) {\n  var _classNames;\n\n  var suffixIcon = props.suffixIcon,\n      prefixCls = props.prefixCls;\n  return suffixIcon && (React.isValidElement(suffixIcon) ? React.cloneElement(suffixIcon, {\n    className: classNames((_classNames = {}, _defineProperty(_classNames, suffixIcon.props.className, suffixIcon.props.className), _defineProperty(_classNames, \"\".concat(prefixCls, \"-picker-icon\"), true), _classNames))\n  }) : React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-picker-icon\")\n  }, suffixIcon)) || React.createElement(Icon, {\n    type: \"calendar\",\n    className: \"\".concat(prefixCls, \"-picker-icon\")\n  });\n}","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n/* tslint:disable jsx-no-multiline-js */\n\n\nimport * as React from 'react';\nimport * as moment from 'moment';\nimport { polyfill } from 'react-lifecycles-compat';\nimport RangeCalendar from \"rc-calendar/es/RangeCalendar\";\nimport RcDatePicker from \"rc-calendar/es/Picker\";\nimport classNames from 'classnames';\nimport shallowequal from 'shallowequal';\nimport Icon from '../icon';\nimport Tag from '../tag';\nimport { ConfigConsumer } from '../config-provider';\nimport warning from '../_util/warning';\nimport interopDefault from '../_util/interopDefault';\nimport { formatDate } from './utils';\nimport InputIcon from './InputIcon';\n\nfunction getShowDateFromValue(value, mode) {\n  var _value = _slicedToArray(value, 2),\n      start = _value[0],\n      end = _value[1]; // value could be an empty array, then we should not reset showDate\n\n\n  if (!start && !end) {\n    return;\n  }\n\n  if (mode && mode[0] === 'month') {\n    return [start, end];\n  }\n\n  var newEnd = end && end.isSame(start, 'month') ? end.clone().add(1, 'month') : end;\n  return [start, newEnd];\n}\n\nfunction pickerValueAdapter(value) {\n  if (!value) {\n    return;\n  }\n\n  if (Array.isArray(value)) {\n    return value;\n  }\n\n  return [value, value.clone().add(1, 'month')];\n}\n\nfunction isEmptyArray(arr) {\n  if (Array.isArray(arr)) {\n    return arr.length === 0 || arr.every(function (i) {\n      return !i;\n    });\n  }\n\n  return false;\n}\n\nfunction fixLocale(value, localeCode) {\n  if (!localeCode) {\n    return;\n  }\n\n  if (!value || value.length === 0) {\n    return;\n  }\n\n  var _value2 = _slicedToArray(value, 2),\n      start = _value2[0],\n      end = _value2[1];\n\n  if (start) {\n    start.locale(localeCode);\n  }\n\n  if (end) {\n    end.locale(localeCode);\n  }\n}\n\nvar RangePicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(RangePicker, _React$Component);\n\n  function RangePicker(props) {\n    var _this;\n\n    _classCallCheck(this, RangePicker);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RangePicker).call(this, props));\n\n    _this.savePicker = function (node) {\n      _this.picker = node;\n    };\n\n    _this.clearSelection = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      _this.setState({\n        value: []\n      });\n\n      _this.handleChange([]);\n    };\n\n    _this.clearHoverValue = function () {\n      return _this.setState({\n        hoverValue: []\n      });\n    };\n\n    _this.handleChange = function (value) {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          props = _assertThisInitialize.props;\n\n      if (!('value' in props)) {\n        _this.setState(function (_ref) {\n          var showDate = _ref.showDate;\n          return {\n            value: value,\n            showDate: getShowDateFromValue(value) || showDate\n          };\n        });\n      }\n\n      if (value[0] && value[0].diff(value[1]) > 0) {\n        value[1] = undefined;\n      }\n\n      var _value3 = _slicedToArray(value, 2),\n          start = _value3[0],\n          end = _value3[1];\n\n      if (typeof props.onChange === 'function') {\n        props.onChange(value, [formatDate(start, props.format), formatDate(end, props.format)]);\n      }\n    };\n\n    _this.handleOpenChange = function (open) {\n      if (!('open' in _this.props)) {\n        _this.setState({\n          open: open\n        });\n      }\n\n      if (open === false) {\n        _this.clearHoverValue();\n      }\n\n      var onOpenChange = _this.props.onOpenChange;\n\n      if (onOpenChange) {\n        onOpenChange(open);\n      }\n    };\n\n    _this.handleShowDateChange = function (showDate) {\n      return _this.setState({\n        showDate: showDate\n      });\n    };\n\n    _this.handleHoverChange = function (hoverValue) {\n      return _this.setState({\n        hoverValue: hoverValue\n      });\n    };\n\n    _this.handleRangeMouseLeave = function () {\n      if (_this.state.open) {\n        _this.clearHoverValue();\n      }\n    };\n\n    _this.handleCalendarInputSelect = function (value) {\n      var _value4 = _slicedToArray(value, 1),\n          start = _value4[0];\n\n      if (!start) {\n        return;\n      }\n\n      _this.setState(function (_ref2) {\n        var showDate = _ref2.showDate;\n        return {\n          value: value,\n          showDate: getShowDateFromValue(value) || showDate\n        };\n      });\n    };\n\n    _this.handleRangeClick = function (value) {\n      if (typeof value === 'function') {\n        value = value();\n      }\n\n      _this.setValue(value, true);\n\n      var _this$props = _this.props,\n          onOk = _this$props.onOk,\n          onOpenChange = _this$props.onOpenChange;\n\n      if (onOk) {\n        onOk(value);\n      }\n\n      if (onOpenChange) {\n        onOpenChange(false);\n      }\n    };\n\n    _this.renderFooter = function () {\n      var _this$props2 = _this.props,\n          ranges = _this$props2.ranges,\n          renderExtraFooter = _this$props2.renderExtraFooter;\n\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          prefixCls = _assertThisInitialize2.prefixCls,\n          tagPrefixCls = _assertThisInitialize2.tagPrefixCls;\n\n      if (!ranges && !renderExtraFooter) {\n        return null;\n      }\n\n      var customFooter = renderExtraFooter ? React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-footer-extra\"),\n        key: \"extra\"\n      }, renderExtraFooter()) : null;\n      var operations = ranges && Object.keys(ranges).map(function (range) {\n        var value = ranges[range];\n        var hoverValue = typeof value === 'function' ? value.call(_assertThisInitialized(_this)) : value;\n        return React.createElement(Tag, {\n          key: range,\n          prefixCls: tagPrefixCls,\n          color: \"blue\",\n          onClick: function onClick() {\n            return _this.handleRangeClick(value);\n          },\n          onMouseEnter: function onMouseEnter() {\n            return _this.setState({\n              hoverValue: hoverValue\n            });\n          },\n          onMouseLeave: _this.handleRangeMouseLeave\n        }, range);\n      });\n      var rangeNode = operations && operations.length > 0 ? React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-footer-extra \").concat(prefixCls, \"-range-quick-selector\"),\n        key: \"range\"\n      }, operations) : null;\n      return [rangeNode, customFooter];\n    };\n\n    _this.renderRangePicker = function (_ref3) {\n      var _classNames;\n\n      var getPrefixCls = _ref3.getPrefixCls;\n\n      var _assertThisInitialize3 = _assertThisInitialized(_this),\n          state = _assertThisInitialize3.state,\n          props = _assertThisInitialize3.props;\n\n      var value = state.value,\n          showDate = state.showDate,\n          hoverValue = state.hoverValue,\n          open = state.open;\n      var customizePrefixCls = props.prefixCls,\n          customizeTagPrefixCls = props.tagPrefixCls,\n          popupStyle = props.popupStyle,\n          style = props.style,\n          disabledDate = props.disabledDate,\n          disabledTime = props.disabledTime,\n          showTime = props.showTime,\n          showToday = props.showToday,\n          ranges = props.ranges,\n          onOk = props.onOk,\n          locale = props.locale,\n          localeCode = props.localeCode,\n          format = props.format,\n          dateRender = props.dateRender,\n          onCalendarChange = props.onCalendarChange,\n          suffixIcon = props.suffixIcon,\n          separator = props.separator;\n      var prefixCls = getPrefixCls('calendar', customizePrefixCls);\n      var tagPrefixCls = getPrefixCls('tag', customizeTagPrefixCls); // To support old version react.\n      // Have to add prefixCls on the instance.\n      // https://github.com/facebook/react/issues/12397\n\n      _this.prefixCls = prefixCls;\n      _this.tagPrefixCls = tagPrefixCls;\n      fixLocale(value, localeCode);\n      fixLocale(showDate, localeCode);\n      warning(!('onOK' in props), 'RangePicker', 'It should be `RangePicker[onOk]`, instead of `onOK`!');\n      var calendarClassName = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-time\"), showTime), _defineProperty(_classNames, \"\".concat(prefixCls, \"-range-with-ranges\"), ranges), _classNames)); // 需要选择时间时，点击 ok 时才触发 onChange\n\n      var pickerChangeHandler = {\n        onChange: _this.handleChange\n      };\n      var calendarProps = {\n        onOk: _this.handleChange\n      };\n\n      if (props.timePicker) {\n        pickerChangeHandler.onChange = function (changedValue) {\n          return _this.handleChange(changedValue);\n        };\n      } else {\n        calendarProps = {};\n      }\n\n      if ('mode' in props) {\n        calendarProps.mode = props.mode;\n      }\n\n      var startPlaceholder = Array.isArray(props.placeholder) ? props.placeholder[0] : locale.lang.rangePlaceholder[0];\n      var endPlaceholder = Array.isArray(props.placeholder) ? props.placeholder[1] : locale.lang.rangePlaceholder[1];\n      var calendar = React.createElement(RangeCalendar, _extends({}, calendarProps, {\n        seperator: separator,\n        onChange: onCalendarChange,\n        format: format,\n        prefixCls: prefixCls,\n        className: calendarClassName,\n        renderFooter: _this.renderFooter,\n        timePicker: props.timePicker,\n        disabledDate: disabledDate,\n        disabledTime: disabledTime,\n        dateInputPlaceholder: [startPlaceholder, endPlaceholder],\n        locale: locale.lang,\n        onOk: onOk,\n        dateRender: dateRender,\n        value: showDate,\n        onValueChange: _this.handleShowDateChange,\n        hoverValue: hoverValue,\n        onHoverChange: _this.handleHoverChange,\n        onPanelChange: props.onPanelChange,\n        showToday: showToday,\n        onInputSelect: _this.handleCalendarInputSelect\n      })); // default width for showTime\n\n      var pickerStyle = {};\n\n      if (props.showTime) {\n        pickerStyle.width = style && style.width || 350;\n      }\n\n      var _value5 = _slicedToArray(value, 2),\n          startValue = _value5[0],\n          endValue = _value5[1];\n\n      var clearIcon = !props.disabled && props.allowClear && value && (startValue || endValue) ? React.createElement(Icon, {\n        type: \"close-circle\",\n        className: \"\".concat(prefixCls, \"-picker-clear\"),\n        onClick: _this.clearSelection,\n        theme: \"filled\"\n      }) : null;\n      var inputIcon = React.createElement(InputIcon, {\n        suffixIcon: suffixIcon,\n        prefixCls: prefixCls\n      });\n\n      var input = function input(_ref4) {\n        var inputValue = _ref4.value;\n\n        var _inputValue = _slicedToArray(inputValue, 2),\n            start = _inputValue[0],\n            end = _inputValue[1];\n\n        return React.createElement(\"span\", {\n          className: props.pickerInputClass\n        }, React.createElement(\"input\", {\n          disabled: props.disabled,\n          readOnly: true,\n          value: formatDate(start, props.format),\n          placeholder: startPlaceholder,\n          className: \"\".concat(prefixCls, \"-range-picker-input\"),\n          tabIndex: -1\n        }), React.createElement(\"span\", {\n          className: \"\".concat(prefixCls, \"-range-picker-separator\")\n        }, \" \", separator, \" \"), React.createElement(\"input\", {\n          disabled: props.disabled,\n          readOnly: true,\n          value: formatDate(end, props.format),\n          placeholder: endPlaceholder,\n          className: \"\".concat(prefixCls, \"-range-picker-input\"),\n          tabIndex: -1\n        }), clearIcon, inputIcon);\n      };\n\n      return React.createElement(\"span\", {\n        ref: _this.savePicker,\n        id: typeof props.id === 'number' ? props.id.toString() : props.id,\n        className: classNames(props.className, props.pickerClass),\n        style: _extends(_extends({}, style), pickerStyle),\n        tabIndex: props.disabled ? -1 : 0,\n        onFocus: props.onFocus,\n        onBlur: props.onBlur,\n        onMouseEnter: props.onMouseEnter,\n        onMouseLeave: props.onMouseLeave\n      }, React.createElement(RcDatePicker, _extends({}, props, pickerChangeHandler, {\n        calendar: calendar,\n        value: value,\n        open: open,\n        onOpenChange: _this.handleOpenChange,\n        prefixCls: \"\".concat(prefixCls, \"-picker-container\"),\n        style: popupStyle\n      }), input));\n    };\n\n    var value = props.value || props.defaultValue || [];\n\n    var _value6 = _slicedToArray(value, 2),\n        start = _value6[0],\n        end = _value6[1];\n\n    if (start && !interopDefault(moment).isMoment(start) || end && !interopDefault(moment).isMoment(end)) {\n      throw new Error('The value/defaultValue of RangePicker must be a moment object array after `antd@2.0`, ' + 'see: https://u.ant.design/date-picker-value');\n    }\n\n    var pickerValue = !value || isEmptyArray(value) ? props.defaultPickerValue : value;\n    _this.state = {\n      value: value,\n      showDate: pickerValueAdapter(pickerValue || interopDefault(moment)()),\n      open: props.open,\n      hoverValue: []\n    };\n    return _this;\n  }\n\n  _createClass(RangePicker, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_, prevState) {\n      if (!('open' in this.props) && prevState.open && !this.state.open) {\n        this.focus();\n      }\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value, hidePanel) {\n      this.handleChange(value);\n\n      if ((hidePanel || !this.props.showTime) && !('open' in this.props)) {\n        this.setState({\n          open: false\n        });\n      }\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.picker.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.picker.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderRangePicker);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var state = null;\n\n      if ('value' in nextProps) {\n        var value = nextProps.value || [];\n        state = {\n          value: value\n        };\n\n        if (!shallowequal(nextProps.value, prevState.value)) {\n          state = _extends(_extends({}, state), {\n            showDate: getShowDateFromValue(value, nextProps.mode) || prevState.showDate\n          });\n        }\n      }\n\n      if ('open' in nextProps && prevState.open !== nextProps.open) {\n        state = _extends(_extends({}, state), {\n          open: nextProps.open\n        });\n      }\n\n      return state;\n    }\n  }]);\n\n  return RangePicker;\n}(React.Component);\n\nRangePicker.defaultProps = {\n  allowClear: true,\n  showToday: false,\n  separator: '~'\n};\npolyfill(RangePicker);\nexport default RangePicker;","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport * as moment from 'moment';\nimport { polyfill } from 'react-lifecycles-compat';\nimport Calendar from 'rc-calendar';\nimport RcDatePicker from \"rc-calendar/es/Picker\";\nimport classNames from 'classnames';\nimport Icon from '../icon';\nimport { ConfigConsumer } from '../config-provider';\nimport interopDefault from '../_util/interopDefault';\nimport InputIcon from './InputIcon';\n\nfunction formatValue(value, format) {\n  return value && value.format(format) || '';\n}\n\nvar WeekPicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(WeekPicker, _React$Component);\n\n  function WeekPicker(props) {\n    var _this;\n\n    _classCallCheck(this, WeekPicker);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WeekPicker).call(this, props));\n\n    _this.saveInput = function (node) {\n      _this.input = node;\n    };\n\n    _this.weekDateRender = function (current) {\n      var selectedValue = _this.state.value;\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          prefixCls = _assertThisInitialize.prefixCls;\n\n      var dateRender = _this.props.dateRender;\n      var dateNode = dateRender ? dateRender(current) : current.date();\n\n      if (selectedValue && current.year() === selectedValue.year() && current.week() === selectedValue.week()) {\n        return React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-selected-day\")\n        }, React.createElement(\"div\", {\n          className: \"\".concat(prefixCls, \"-date\")\n        }, dateNode));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-date\")\n      }, dateNode);\n    };\n\n    _this.handleChange = function (value) {\n      if (!('value' in _this.props)) {\n        _this.setState({\n          value: value\n        });\n      }\n\n      _this.props.onChange(value, formatValue(value, _this.props.format));\n    };\n\n    _this.handleOpenChange = function (open) {\n      var onOpenChange = _this.props.onOpenChange;\n\n      if (!('open' in _this.props)) {\n        _this.setState({\n          open: open\n        });\n      }\n\n      if (onOpenChange) {\n        onOpenChange(open);\n      }\n    };\n\n    _this.clearSelection = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      _this.handleChange(null);\n    };\n\n    _this.renderFooter = function () {\n      var _this$props = _this.props,\n          prefixCls = _this$props.prefixCls,\n          renderExtraFooter = _this$props.renderExtraFooter;\n      return renderExtraFooter ? React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-footer-extra\")\n      }, renderExtraFooter.apply(void 0, arguments)) : null;\n    };\n\n    _this.renderWeekPicker = function (_ref) {\n      var getPrefixCls = _ref.getPrefixCls;\n      var _this$props2 = _this.props,\n          customizePrefixCls = _this$props2.prefixCls,\n          className = _this$props2.className,\n          disabled = _this$props2.disabled,\n          pickerClass = _this$props2.pickerClass,\n          popupStyle = _this$props2.popupStyle,\n          pickerInputClass = _this$props2.pickerInputClass,\n          format = _this$props2.format,\n          allowClear = _this$props2.allowClear,\n          locale = _this$props2.locale,\n          localeCode = _this$props2.localeCode,\n          disabledDate = _this$props2.disabledDate,\n          style = _this$props2.style,\n          onFocus = _this$props2.onFocus,\n          onBlur = _this$props2.onBlur,\n          id = _this$props2.id,\n          suffixIcon = _this$props2.suffixIcon,\n          defaultPickerValue = _this$props2.defaultPickerValue;\n      var prefixCls = getPrefixCls('calendar', customizePrefixCls); // To support old version react.\n      // Have to add prefixCls on the instance.\n      // https://github.com/facebook/react/issues/12397\n\n      _this.prefixCls = prefixCls;\n      var _this$state = _this.state,\n          open = _this$state.open,\n          pickerValue = _this$state.value;\n\n      if (pickerValue && localeCode) {\n        pickerValue.locale(localeCode);\n      }\n\n      var placeholder = 'placeholder' in _this.props ? _this.props.placeholder : locale.lang.placeholder;\n      var calendar = React.createElement(Calendar, {\n        showWeekNumber: true,\n        dateRender: _this.weekDateRender,\n        prefixCls: prefixCls,\n        format: format,\n        locale: locale.lang,\n        showDateInput: false,\n        showToday: false,\n        disabledDate: disabledDate,\n        renderFooter: _this.renderFooter,\n        defaultValue: defaultPickerValue\n      });\n      var clearIcon = !disabled && allowClear && _this.state.value ? React.createElement(Icon, {\n        type: \"close-circle\",\n        className: \"\".concat(prefixCls, \"-picker-clear\"),\n        onClick: _this.clearSelection,\n        theme: \"filled\"\n      }) : null;\n      var inputIcon = React.createElement(InputIcon, {\n        suffixIcon: suffixIcon,\n        prefixCls: prefixCls\n      });\n\n      var input = function input(_ref2) {\n        var value = _ref2.value;\n        return React.createElement(\"span\", {\n          style: {\n            display: 'inline-block',\n            width: '100%'\n          }\n        }, React.createElement(\"input\", {\n          ref: _this.saveInput,\n          disabled: disabled,\n          readOnly: true,\n          value: value && value.format(format) || '',\n          placeholder: placeholder,\n          className: pickerInputClass,\n          onFocus: onFocus,\n          onBlur: onBlur\n        }), clearIcon, inputIcon);\n      };\n\n      return React.createElement(\"span\", {\n        className: classNames(className, pickerClass),\n        style: style,\n        id: id\n      }, React.createElement(RcDatePicker, _extends({}, _this.props, {\n        calendar: calendar,\n        prefixCls: \"\".concat(prefixCls, \"-picker-container\"),\n        value: pickerValue,\n        onChange: _this.handleChange,\n        open: open,\n        onOpenChange: _this.handleOpenChange,\n        style: popupStyle\n      }), input));\n    };\n\n    var value = props.value || props.defaultValue;\n\n    if (value && !interopDefault(moment).isMoment(value)) {\n      throw new Error('The value/defaultValue of WeekPicker must be ' + 'a moment object after `antd@2.0`, see: https://u.ant.design/date-picker-value');\n    }\n\n    _this.state = {\n      value: value,\n      open: props.open\n    };\n    return _this;\n  }\n\n  _createClass(WeekPicker, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_, prevState) {\n      if (!('open' in this.props) && prevState.open && !this.state.open) {\n        this.focus();\n      }\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.input.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.input.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderWeekPicker);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps) {\n      if ('value' in nextProps || 'open' in nextProps) {\n        var state = {};\n\n        if ('value' in nextProps) {\n          state.value = nextProps.value;\n        }\n\n        if ('open' in nextProps) {\n          state.open = nextProps.open;\n        }\n\n        return state;\n      }\n\n      return null;\n    }\n  }]);\n\n  return WeekPicker;\n}(React.Component);\n\nWeekPicker.defaultProps = {\n  format: 'gggg-wo',\n  allowClear: true\n};\npolyfill(WeekPicker);\nexport default WeekPicker;","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport RcCalendar from 'rc-calendar';\nimport MonthCalendar from \"rc-calendar/es/MonthCalendar\";\nimport createPicker from './createPicker';\nimport wrapPicker from './wrapPicker';\nimport RangePicker from './RangePicker';\nimport WeekPicker from './WeekPicker';\nvar DatePicker = wrapPicker(createPicker(RcCalendar), 'date');\nvar MonthPicker = wrapPicker(createPicker(MonthCalendar), 'month');\n\n_extends(DatePicker, {\n  RangePicker: wrapPicker(RangePicker, 'date'),\n  MonthPicker: MonthPicker,\n  WeekPicker: wrapPicker(WeekPicker, 'week')\n});\n\nexport default DatePicker;"],"sourceRoot":""}
(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[9],{622:function(e,t,a){"use strict";a.r(t);var n=a(73),r=a.n(n),c=a(123),i=a(24),u=a(0),o=a.n(u),s=a(531),l=a(71),m=a(36),d=a(532),f=a(34),p=a(525),g=a(615),h=a(527),b=a(620),y=a(624),v=a(533),O=a(42),j=function(e){var t=e.visibility,a=void 0!==t&&t,n=e.changeVisibility,s=e.editItem,l=void 0===s?null:s,m=e.getCategory,f=Object(u.useState)(""),g=Object(i.a)(f,2),h=g[0],b=g[1],y=Object(u.useState)(""),j=Object(i.a)(y,2),x=j[0],E=j[1],w=Object(u.useState)(!1),k=Object(i.a)(w,2),C=k[0],S=k[1];Object(u.useEffect)((function(){null!=l?(b(l.name),E(l.desc)):(b(""),E(""))}),[l]);var I=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,Object(O.a)({method:"post",url:"/admin/category/edit",data:{id:l.id,name:h,desc:x}}).then((function(e){var t=e.data;0==t.code?(p.a.success(t.message),I(),m()):p.a.error(t.message)})).catch((function(){return p.a.error("\u672a\u77e5\u9519\u8bef")}));case 3:S(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,Object(O.a)({method:"get",url:"/admin/category/add",params:{name:h,desc:x}}).then((function(e){var t=e.data;0==t.code?(p.a.success(t.message),I(),m()):p.a.error(t.message)})).catch((function(){return p.a.error("\u672a\u77e5\u9519\u8bef")}));case 3:S(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V={title:null==l?"\u6dfb\u52a0\u5206\u7c7b":"\u7f16\u8f91\u5206\u7c7b",width:"600px",visible:a,onCancel:I,onOk:function(){h?null!==l?T():B():p.a.error("\u5206\u7c7b\u540d\u4e0d\u80fd\u4e3a\u7a7a!")},confirmLoading:C,okText:null==l?"\u521b\u5efa":"\u63d0\u4ea4",cancelText:"\u53d6\u6d88",destroyOnClose:!0};return o.a.createElement(v.a,V,o.a.createElement(d.a,{defaultValue:null!==l?h:"",onChange:function(e){b(e.target.value)},addonBefore:"\u5206\u7c7b\u540d",size:"large",placeholder:"\u5206\u7c7b\u540d",name:"name",style:{marginBottom:20}}),o.a.createElement(d.a,{defaultValue:null!==l?x:"",onChange:function(e){E(e.target.value)},addonBefore:"\u63cf\u8ff0",size:"large",placeholder:"\u63cf\u8ff0",name:"desc"}))},x=s.a.Item;t.default=o.a.memo((function(e){var t=Object(u.useState)(!1),a=Object(i.a)(t,2),n=a[0],v=a[1],E=Object(u.useState)(null),w=Object(i.a)(E,2),k=w[0],C=w[1],S=Object(u.useState)([]),I=Object(i.a)(S,2),T=I[0],B=I[1],V=Object(u.useState)(!1),z=Object(i.a)(V,2),J=z[0],_=z[1],A=Object(u.useState)(!1),F=Object(i.a)(A,2),K=F[0],L=F[1],R=Object(u.useState)(),q=Object(i.a)(R,2),D=q[0],G=q[1],H=0;function M(){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,O.a.get("/admin/category/get").then((function(e){var t=e.data;0==t.code&&(B(t.data),G(t.auth),H=t.data.length,_(!1))})).catch((function(e){console.log(e),_(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(u.useEffect)((function(){M(),L(!0)}),[]);return o.a.createElement("div",null,o.a.createElement(y.a,{title:"\u5206\u7c7b\u7ba1\u7406"}),o.a.createElement((function(){var e=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(null);case 2:v(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(s.a,{layout:"inline",style:{marginBottom:"20px"}},o.a.createElement(l.a,{gutter:{md:8,lg:24,xl:48}},o.a.createElement(m.a,{md:24,sm:24},o.a.createElement(x,null,o.a.createElement(d.a,{style:{textAlign:"center",marginBottom:20},placeholder:"\u5206\u7c7b\u540d"})),o.a.createElement(f.a,{style:{marginTop:"3px",marginRight:15},type:"primary",icon:"search"},"\u641c\u7d22"),D?o.a.createElement(f.a,{style:{marginTop:"3px"},type:"primary",onClick:e},"\u65b0\u589e"):"")))}),null),K&&o.a.createElement(o.a.Fragment,null,o.a.createElement(j,{visibility:n,changeVisibility:v,getCategory:M,editItem:k}),o.a.createElement((function(e){var t=e.getCategory,a={total:H,defaultCurrent:1,showSizeChanger:!0},n=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:v(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)({method:"get",params:{id:a.id},url:"/admin/category/del"}).then((function(e){var a=e.data;0==a.code?(p.a.success(a.message),t()):p.a.error(a.message)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=[{title:"\u5206\u7c7b\u540d",dataIndex:"name",key:"name"},{title:"\u63cf\u8ff0",dataIndex:"desc",key:"desc"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time",sorter:!0},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(e,t){return D?o.a.createElement("span",null,o.a.createElement("a",{onClick:function(){n(t)}},"\u7f16\u8f91"),o.a.createElement(g.a,{type:"vertical"}),o.a.createElement(h.a,{title:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",okText:"\u786e\u5b9a",onConfirm:function(){i(t)},cancelText:"\u53d6\u6d88"},o.a.createElement("a",{href:"#"},"\u5220\u9664"))):o.a.createElement("span",null,"\u60a8\u6682\u65e0\u64cd\u4f5c\u6743\u9650")}}];return o.a.createElement(b.a,{columns:u,dataSource:T,bordered:!0,rowKey:function(e){return e.id},loading:J,pagination:a,onChange:function(e,t){}})}),{changeVisibility:v,getCategory:M,setEditItem:C})))}))}}]);
//# sourceMappingURL=9.d5724aa5.chunk.js.map
{"version":3,"sources":["pages/Admin/User/index.js"],"names":["FormItem","Form","Item","Search","useState","username","setUsername","type","setType","layout","style","marginBottom","gutter","md","lg","xl","sm","placeholder","value","onChange","e","target","width","marginRight","Option","onClick","console","log","marginTop","icon","User","props","column","title","dataIndex","render","val","src","height","whiteSpace","overflow","textOverflow","maxWidth","color","sorter","moment","format","text","record","to","pathname","query","userId","_id","onConfirm","del","id","href","userList","setUserList","auth","setAuth","getUserList","a","http","method","url","then","data","list","useEffect","code","message","success","error","columns","rowKey","bordered","dataSource"],"mappings":"ySAoBMA,EAAWC,IAAKC,KA8GhBC,EAAS,WAAO,IAAD,EACaC,mBAAS,IADtB,mBACZC,EADY,KACFC,EADE,OAEKF,mBAAS,GAFd,mBAEZG,EAFY,KAENC,EAFM,KAMnB,OACE,kBAAC,IAAD,CAAMC,OAAO,SAASC,MAAO,CAAEC,aAAc,SAC3C,kBAAC,IAAD,CAAKC,OAAQ,CAAEC,GAAI,EAAGC,GAAI,GAAIC,GAAI,KAChC,kBAAC,IAAD,CAAKF,GAAI,GAAIG,GAAI,IACf,kBAAChB,EAAD,KACE,kBAAC,IAAD,CACEiB,YAAY,qBACZC,MAAOb,EACPc,SAAU,SAACC,GAAQd,EAAYc,EAAEC,OAAOH,WAI5C,kBAAC,IAAD,CACER,MAAO,CAAEY,MAAO,IAAKC,YAAa,IAClCN,YAAY,2BACZE,SAAU,SAACC,GAAQZ,EAAQY,KAE3B,kBAAC,IAAOI,OAAR,CAAeN,MAAM,IAArB,gBACA,kBAAC,IAAOM,OAAR,CAAeN,MAAM,KAArB,4BACA,kBAAC,IAAOM,OAAR,CAAeN,MAAM,KAArB,uBAGF,8BACE,kBAAC,IAAD,CACEO,QAAS,WA1BnBC,QAAQC,IAAIpB,EAAMF,IA2BRK,MAAO,CAAEkB,UAAW,OACpBrB,KAAK,UACLsB,KAAK,UAJP,qBAiBGC,UA3JF,SAACC,GACZ,IAAMC,EAAS,CACb,CACEC,MAAO,qBACPC,UAAW,YAEb,CACED,MAAO,eACPC,UAAW,SAEb,CACED,MAAO,eACPC,UAAW,SACXC,OAAQ,SAAAC,GAAG,OACTA,EAAM,yBAAKC,IAAG,oCAA+BD,GAAO1B,MAAO,CAAE4B,OAAQ,OAAQhB,MAAO,UAAmB,KAG3G,CACEW,MAAO,2BACPX,MAAO,IACPY,UAAW,YACXC,OAAQ,SAAAC,GAAG,OACT,uBAAG1B,MAAO,CAAE6B,WAAY,SAAUC,SAAU,SAAUC,aAAc,WAAYC,SAAU,UAAYN,KAG1G,CACEH,MAAO,eACPC,UAAW,OAEXC,OAAQ,SAAAC,GAAG,OACRA,EAAsC,kBAAC,IAAD,CAAKO,MAAM,QAAX,sBAAhC,kBAAC,IAAD,CAAKA,MAAM,SAAX,8BAEX,CACEV,MAAO,2BACPC,UAAW,cACXU,QAAQ,EACRT,OAAQ,SAAAC,GAAG,OACTS,IAAOT,GAAKU,OAAO,yBAGvB,CACEb,MAAO,eACPE,OAAQ,SAACY,EAAMC,GAAP,OACN,8BACE,kBAAC,IAAD,CAAMC,GACJ,CACEC,SAAS,uBACTC,MAAO,CAAEC,OAAQJ,EAAOK,OAH5B,4BAMA,kBAAC,IAAD,CAAS9C,KAAK,aACd,kBAAC,IAAD,CAAY0B,MAAM,iCAChBqB,UAAW,WAAQC,EAAI,CAACC,GAAIR,EAAOK,QAEnC,uBAAGI,KAAK,KAAR,qBAtDY,EA6DUrD,mBAAS,IA7DnB,mBA6DfsD,EA7De,KA6DLC,EA7DK,OA8DEvD,mBAAS,GA9DX,mBA8DfwD,EA9De,KA8DTC,EA9DS,cAkEPC,IAlEO,2EAkEtB,sBAAAC,EAAA,sEACQC,YAAK,CACTC,OAAQ,OACRC,IAAK,mBACJC,MAAK,YAAe,IAAZC,EAAW,EAAXA,KACT1C,QAAQC,IAAIyC,GACZT,EAAYS,EAAKA,KAAKC,MACtBR,EAAQO,EAAKA,KAAKR,SAPtB,4CAlEsB,sBA+DtBU,qBAAU,WACRR,MACC,IAWH,IAAMP,EAAM,SAACa,GACXJ,YAAK,CACHC,OAAQ,OACRC,IAAK,mBACLE,SACCD,MAAK,YAAe,IAAZC,EAAW,EAAXA,KACS,IAAdA,EAAKG,MACPC,IAAQC,QAAQL,EAAKI,SACrBV,KAEAU,IAAQE,MAAMN,EAAKI,aAIzB,OACE,6BACE,kBAAC,IAAD,CACEvC,MAAM,6BAER,kBAAC9B,EAAD,MACCyD,EAAK,kBAAC,IAAD,CACJe,QAAS3C,EAIT4C,OAAQ,SAAA5B,GAAM,OAAIA,EAAOK,KACzBwB,UAAQ,EACRC,WAAYpB,IACH","file":"static/js/11.b60f71f5.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport http from '@/utils/http.js'\r\nimport { Link } from 'react-router-dom'\r\nimport moment from 'moment'\r\nimport {\r\n  PageHeader,\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Form,\r\n  Input,\r\n  Button,\r\n  Table,\r\n  message,\r\n  Popconfirm,\r\n  Switch,\r\n  Tag,\r\n  Divider,\r\n  Select,\r\n} from 'antd'\r\nconst FormItem = Form.Item;\r\nconst User = (props) => {\r\n  const column = [\r\n    {\r\n      title: '用户名',\r\n      dataIndex: 'username',\r\n    },\r\n    {\r\n      title: '手机',\r\n      dataIndex: 'phone',\r\n    },\r\n    {\r\n      title: '头像',\r\n      dataIndex: 'avatar',\r\n      render: val => (\r\n        val ? <img src={`http://localhost:3000/img/${val}`} style={{ height: '50px', width: '50px' }}></img> : ''\r\n      )\r\n    },\r\n    {\r\n      title: '个人介绍',\r\n      width: 250,\r\n      dataIndex: 'introduce',\r\n      render: val => (\r\n        <p style={{ whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis', maxWidth: '200px' }}>{val}</p>\r\n      )\r\n    },\r\n    {\r\n      title: '类型',\r\n      dataIndex: 'type',\r\n      // 0：管理员 1：其他用户\r\n      render: val =>\r\n        !val ? <Tag color=\"green\">其他用户</Tag> : <Tag color=\"blue\">管理员</Tag>,\r\n    },\r\n    {\r\n      title: '创建时间',\r\n      dataIndex: 'create_time',\r\n      sorter: true,\r\n      render: val => (\r\n        moment(val).format('YYYY-MM-DD HH:mm:ss')\r\n      )\r\n    },\r\n    {\r\n      title: '操作',\r\n      render: (text, record) => (\r\n        <span>\r\n          <Link to={\r\n            {\r\n              pathname: `/article/articleList`,\r\n              query: { userId: record._id }\r\n            }\r\n          }>查看文章</Link>\r\n          <Divider type=\"vertical\" />\r\n          <Popconfirm title=\"确定删除吗\"\r\n            onConfirm={() => { del({id: record._id}) }}\r\n          >\r\n            <a href=\"#\">删除</a>\r\n          </Popconfirm>\r\n        </span>\r\n      ),\r\n    },\r\n  ]\r\n  let data = [{}]\r\n  const [userList, setUserList] = useState([]);\r\n  const [auth, setAuth] = useState(0);\r\n  useEffect(() => {\r\n    getUserList()\r\n  }, [])\r\n  async function getUserList() {\r\n    await http({\r\n      method: 'post',\r\n      url: '/user/userList'\r\n    }).then(({ data }) => {\r\n      console.log(data)\r\n      setUserList(data.data.list)\r\n      setAuth(data.data.auth)\r\n    })\r\n  }\r\n  const del = (data) => {\r\n    http({\r\n      method: 'post',\r\n      url: '/user/userRemove',\r\n      data\r\n    }).then(({ data }) => {\r\n      if (data.code === 0) {\r\n        message.success(data.message);\r\n        getUserList()\r\n      } else {\r\n        message.error(data.message);\r\n      }\r\n    })\r\n  }\r\n  return (\r\n    <div>\r\n      <PageHeader\r\n        title=\"用户管理\"\r\n      />\r\n      <Search />\r\n      {auth?<Table\r\n        columns={column}\r\n        // pagination={pagination}\r\n        // loading={this.state.loading}\r\n        // pagination={pagination}\r\n        rowKey={record => record._id}\r\n        bordered\r\n        dataSource={userList}\r\n      ></Table>: <span>您暂无权限查看用户信息</span>}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Search = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [type, setType] = useState(0);\r\n  const submitSearch = () => {\r\n    console.log(type, username)\r\n  }\r\n  return (\r\n    <Form layout=\"inline\" style={{ marginBottom: '20px' }}>\r\n      <Row gutter={{ md: 8, lg: 24, xl: 48 }}>\r\n        <Col md={24} sm={24}>\r\n          <FormItem>\r\n            <Input\r\n              placeholder=\"用户名\"\r\n              value={username}\r\n              onChange={(e) => { setUsername(e.target.value) }}\r\n            />\r\n          </FormItem>\r\n\r\n          <Select\r\n            style={{ width: 200, marginRight: 20 }}\r\n            placeholder=\"选择类型\"\r\n            onChange={(e) => { setType(e) }}\r\n          >\r\n            <Select.Option value=\"\">所有</Select.Option>\r\n            <Select.Option value=\"0\">其他用户</Select.Option>\r\n            <Select.Option value=\"1\">管理员</Select.Option>\r\n          </Select>\r\n\r\n          <span>\r\n            <Button\r\n              onClick={() => submitSearch()}\r\n              style={{ marginTop: '3px' }}\r\n              type=\"primary\"\r\n              icon=\"search\"\r\n            >\r\n              搜索\r\n            </Button>\r\n          </span>\r\n        </Col>\r\n      </Row>\r\n    </Form>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default User;"],"sourceRoot":""}